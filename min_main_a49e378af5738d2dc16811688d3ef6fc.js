/**** start overview of included js files *****/

/* list of files for rank:30dependancy */
/* Array
(
    [0] => vendor_bundled/vendor/components/jquery-migrate/jquery-migrate.min.js
)
 */

/* rank:30dependancy - minify:disabled - adding raw file. vendor_bundled/vendor/components/jquery-migrate/jquery-migrate.min.js */

/* list of files for rank:40external */
/*  */

/* list of files for rank:50standard */
/* Array
(
    [0] => themes/ShapelyG/js/custom.js
    [1] => vendor_bundled/vendor/twitter/bootstrap/dist/js/bootstrap.js
    [2] => lib/jquery_tiki/tiki-bootstrapmodalfix.js
    [3] => lib/jquery_tiki/iconsets.js
    [4] => lib/tiki-js.js
    [5] => lib/jquery_tiki/tiki-jquery.js
    [6] => vendor_bundled/vendor/jquery/plugins/jquery-json/src/jquery.json.js
    [7] => lib/jquery_tiki/tiki-ajax_services.js
    [8] => lib/ajax/autosave.js
    [9] => vendor_bundled/vendor/jquery/jquery-timepicker-addon/dist/jquery-ui-timepicker-addon.js
    [10] => vendor_bundled/vendor/jquery/plugins/superfish/dist/js/superfish.js
    [11] => vendor_bundled/vendor/jquery/plugins/superfish/dist/js/supersubs.js
    [12] => vendor_bundled/vendor/jquery/plugins/superfish/dist/js/hoverIntent.js
    [13] => vendor_bundled/vendor/mottie/tablesorter/js/jquery.tablesorter.combined.js
    [14] => vendor_bundled/vendor/mottie/tablesorter/js/widgets/widget-pager.js
    [15] => vendor_bundled/vendor/mottie/tablesorter/js/widgets/widget-filter-formatter-jui.js
    [16] => vendor_bundled/vendor/mottie/tablesorter/js/widgets/widget-grouping.js
    [17] => vendor_bundled/vendor/mottie/tablesorter/js/widgets/widget-columnSelector.js
    [18] => vendor_bundled/vendor/mottie/tablesorter/js/parsers/parser-input-select.js
    [19] => vendor_bundled/vendor/mottie/tablesorter/js/widgets/widget-math.js
    [20] => vendor_bundled/vendor/mottie/tablesorter/js/widgets/widget-sort2Hash.js
    [21] => lib/jquery_tiki/tablesorter.js
    [22] => vendor_bundled/vendor/jquery/plugins/tagcanvas/jquery.tagcanvas.js
    [23] => vendor_bundled/vendor/jquery/plugins/colorbox/jquery.colorbox.js
    [24] => vendor_bundled/vendor/jquery/plugins/jquery-validation/dist/jquery.validate.js
    [25] => lib/validators/validator_tiki.js
    [26] => vendor_bundled/vendor/jquery/plugins/async/jquery.async.js
    [27] => vendor_bundled/vendor/jquery/plugins/treetable/jquery.treetable.js
    [28] => vendor_bundled/vendor/cwspear/bootstrap-hover-dropdown/bootstrap-hover-dropdown.js
    [29] => lib/jquery_tiki/files.js
    [30] => lib/jquery_tiki/tiki-trackers.js
    [31] => lib/jquery_tiki/pluginedit.js
)
 */

/* rank:50standard - minify:ok. themes/ShapelyG/js/custom.js */

/* rank:50standard - minify:ok. vendor_bundled/vendor/twitter/bootstrap/dist/js/bootstrap.js */

/* rank:50standard - minify:ok. lib/jquery_tiki/tiki-bootstrapmodalfix.js */

/* rank:50standard - minify:ok. lib/jquery_tiki/iconsets.js */

/* rank:50standard - minify:ok. lib/tiki-js.js */

/* rank:50standard - minify:ok. lib/jquery_tiki/tiki-jquery.js */

/* rank:50standard - minify:ok. vendor_bundled/vendor/jquery/plugins/jquery-json/src/jquery.json.js */

/* rank:50standard - minify:ok. lib/jquery_tiki/tiki-ajax_services.js */

/* rank:50standard - minify:ok. lib/ajax/autosave.js */

/* rank:50standard - minify:ok. vendor_bundled/vendor/jquery/jquery-timepicker-addon/dist/jquery-ui-timepicker-addon.js */

/* rank:50standard - minify:ok. vendor_bundled/vendor/jquery/plugins/superfish/dist/js/superfish.js */

/* rank:50standard - minify:ok. vendor_bundled/vendor/jquery/plugins/superfish/dist/js/supersubs.js */

/* rank:50standard - minify:ok. vendor_bundled/vendor/jquery/plugins/superfish/dist/js/hoverIntent.js */

/* rank:50standard - minify:ok. vendor_bundled/vendor/mottie/tablesorter/js/jquery.tablesorter.combined.js */

/* rank:50standard - minify:ok. vendor_bundled/vendor/mottie/tablesorter/js/widgets/widget-pager.js */

/* rank:50standard - minify:ok. vendor_bundled/vendor/mottie/tablesorter/js/widgets/widget-filter-formatter-jui.js */

/* rank:50standard - minify:ok. vendor_bundled/vendor/mottie/tablesorter/js/widgets/widget-grouping.js */

/* rank:50standard - minify:ok. vendor_bundled/vendor/mottie/tablesorter/js/widgets/widget-columnSelector.js */

/* rank:50standard - minify:ok. vendor_bundled/vendor/mottie/tablesorter/js/parsers/parser-input-select.js */

/* rank:50standard - minify:ok. vendor_bundled/vendor/mottie/tablesorter/js/widgets/widget-math.js */

/* rank:50standard - minify:ok. vendor_bundled/vendor/mottie/tablesorter/js/widgets/widget-sort2Hash.js */

/* rank:50standard - minify:ok. lib/jquery_tiki/tablesorter.js */

/* rank:50standard - minify:ok. vendor_bundled/vendor/jquery/plugins/tagcanvas/jquery.tagcanvas.js */

/* rank:50standard - minify:ok. vendor_bundled/vendor/jquery/plugins/colorbox/jquery.colorbox.js */

/* rank:50standard - minify:ok. vendor_bundled/vendor/jquery/plugins/jquery-validation/dist/jquery.validate.js */

/* rank:50standard - minify:ok. lib/validators/validator_tiki.js */

/* rank:50standard - minify:ok. vendor_bundled/vendor/jquery/plugins/async/jquery.async.js */

/* rank:50standard - minify:ok. vendor_bundled/vendor/jquery/plugins/treetable/jquery.treetable.js */

/* rank:50standard - minify:ok. vendor_bundled/vendor/cwspear/bootstrap-hover-dropdown/bootstrap-hover-dropdown.js */

/* rank:50standard - minify:ok. lib/jquery_tiki/files.js */

/* rank:50standard - minify:ok. lib/jquery_tiki/tiki-trackers.js */

/* rank:50standard - minify:ok. lib/jquery_tiki/pluginedit.js */

/**** end overview of included js files *****/
;
/* rank:30dependancy - minify:disabled - adding raw file. vendor_bundled/vendor/components/jquery-migrate/jquery-migrate.min.js */
/*! jQuery Migrate v3.0.0 | (c) jQuery Foundation and other contributors | jquery.org/license */
"undefined"==typeof jQuery.migrateMute&&(jQuery.migrateMute=!0),function(a,b){"use strict";function c(c){var d=b.console;e[c]||(e[c]=!0,a.migrateWarnings.push(c),d&&d.warn&&!a.migrateMute&&(d.warn("JQMIGRATE: "+c),a.migrateTrace&&d.trace&&d.trace()))}function d(a,b,d,e){Object.defineProperty(a,b,{configurable:!0,enumerable:!0,get:function(){return c(e),d}})}a.migrateVersion="3.0.0",function(){var c=b.console&&b.console.log&&function(){b.console.log.apply(b.console,arguments)},d=/^[12]\./;c&&(a&&!d.test(a.fn.jquery)||c("JQMIGRATE: jQuery 3.0.0+ REQUIRED"),a.migrateWarnings&&c("JQMIGRATE: Migrate plugin loaded multiple times"),c("JQMIGRATE: Migrate is installed"+(a.migrateMute?"":" with logging active")+", version "+a.migrateVersion))}();var e={};a.migrateWarnings=[],void 0===a.migrateTrace&&(a.migrateTrace=!0),a.migrateReset=function(){e={},a.migrateWarnings.length=0},"BackCompat"===document.compatMode&&c("jQuery is not compatible with Quirks Mode");var f=a.fn.init,g=a.isNumeric,h=a.find,i=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/,j=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/g;a.fn.init=function(a){var b=Array.prototype.slice.call(arguments);return"string"==typeof a&&"#"===a&&(c("jQuery( '#' ) is not a valid selector"),b[0]=[]),f.apply(this,b)},a.fn.init.prototype=a.fn,a.find=function(a){var b=Array.prototype.slice.call(arguments);if("string"==typeof a&&i.test(a))try{document.querySelector(a)}catch(d){a=a.replace(j,function(a,b,c,d){return"["+b+c+'"'+d+'"]'});try{document.querySelector(a),c("Attribute selector with '#' must be quoted: "+b[0]),b[0]=a}catch(e){c("Attribute selector with '#' was not fixed: "+b[0])}}return h.apply(this,b)};var k;for(k in h)Object.prototype.hasOwnProperty.call(h,k)&&(a.find[k]=h[k]);a.fn.size=function(){return c("jQuery.fn.size() is deprecated; use the .length property"),this.length},a.parseJSON=function(){return c("jQuery.parseJSON is deprecated; use JSON.parse"),JSON.parse.apply(null,arguments)},a.isNumeric=function(b){function d(b){var c=b&&b.toString();return!a.isArray(b)&&c-parseFloat(c)+1>=0}var e=g(b),f=d(b);return e!==f&&c("jQuery.isNumeric() should not be called on constructed objects"),f},d(a,"unique",a.uniqueSort,"jQuery.unique is deprecated, use jQuery.uniqueSort"),d(a.expr,"filters",a.expr.pseudos,"jQuery.expr.filters is now jQuery.expr.pseudos"),d(a.expr,":",a.expr.pseudos,'jQuery.expr[":"] is now jQuery.expr.pseudos');var l=a.ajax;a.ajax=function(){var a=l.apply(this,arguments);return a.promise&&(d(a,"success",a.done,"jQXHR.success is deprecated and removed"),d(a,"error",a.fail,"jQXHR.error is deprecated and removed"),d(a,"complete",a.always,"jQXHR.complete is deprecated and removed")),a};var m=a.fn.removeAttr,n=a.fn.toggleClass,o=/\S+/g;a.fn.removeAttr=function(b){var d=this;return a.each(b.match(o),function(b,e){a.expr.match.bool.test(e)&&(c("jQuery.fn.removeAttr no longer sets boolean properties: "+e),d.prop(e,!1))}),m.apply(this,arguments)},a.fn.toggleClass=function(b){return void 0!==b&&"boolean"!=typeof b?n.apply(this,arguments):(c("jQuery.fn.toggleClass( boolean ) is deprecated"),this.each(function(){var c=this.getAttribute&&this.getAttribute("class")||"";c&&a.data(this,"__className__",c),this.setAttribute&&this.setAttribute("class",c||b===!1?"":a.data(this,"__className__")||"")}))};var p=!1;a.swap&&a.each(["height","width","reliableMarginRight"],function(b,c){var d=a.cssHooks[c]&&a.cssHooks[c].get;d&&(a.cssHooks[c].get=function(){var a;return p=!0,a=d.apply(this,arguments),p=!1,a})}),a.swap=function(a,b,d,e){var f,g,h={};p||c("jQuery.swap() is undocumented and deprecated");for(g in b)h[g]=a.style[g],a.style[g]=b[g];f=d.apply(a,e||[]);for(g in b)a.style[g]=h[g];return f};var q=a.data;a.data=function(b,d,e){var f;return d&&d!==a.camelCase(d)&&(f=a.hasData(b)&&q.call(this,b),f&&d in f)?(c("jQuery.data() always sets/gets camelCased names: "+d),arguments.length>2&&(f[d]=e),f[d]):q.apply(this,arguments)};var r=a.Tween.prototype.run;a.Tween.prototype.run=function(b){a.easing[this.easing].length>1&&(c('easing function "jQuery.easing.'+this.easing.toString()+'" should use only first argument'),a.easing[this.easing]=a.easing[this.easing].bind(a.easing,b,this.options.duration*b,0,1,this.options.duration)),r.apply(this,arguments)};var s=a.fn.load,t=a.event.fix;a.event.props=[],a.event.fixHooks={},a.event.fix=function(b){var d,e=b.type,f=this.fixHooks[e],g=a.event.props;if(g.length)for(c("jQuery.event.props are deprecated and removed: "+g.join());g.length;)a.event.addProp(g.pop());if(f&&!f._migrated_&&(f._migrated_=!0,c("jQuery.event.fixHooks are deprecated and removed: "+e),(g=f.props)&&g.length))for(;g.length;)a.event.addProp(g.pop());return d=t.call(this,b),f&&f.filter?f.filter(d,b):d},a.each(["load","unload","error"],function(b,d){a.fn[d]=function(){var a=Array.prototype.slice.call(arguments,0);return"load"===d&&"string"==typeof a[0]?s.apply(this,a):(c("jQuery.fn."+d+"() is deprecated"),a.splice(0,0,d),arguments.length?this.on.apply(this,a):(this.triggerHandler.apply(this,a),this))}}),a(function(){a(document).triggerHandler("ready")}),a.event.special.ready={setup:function(){this===document&&c("'ready' event is deprecated")}},a.fn.extend({bind:function(a,b,d){return c("jQuery.fn.bind() is deprecated"),this.on(a,null,b,d)},unbind:function(a,b){return c("jQuery.fn.unbind() is deprecated"),this.off(a,null,b)},delegate:function(a,b,d,e){return c("jQuery.fn.delegate() is deprecated"),this.on(b,a,d,e)},undelegate:function(a,b,d){return c("jQuery.fn.undelegate() is deprecated"),1===arguments.length?this.off(a,"**"):this.off(b,a||"**",d)}});var u=a.fn.offset;a.fn.offset=function(){var b,d=this[0],e={top:0,left:0};return d&&d.nodeType?(b=(d.ownerDocument||document).documentElement,a.contains(b,d)?u.apply(this,arguments):(c("jQuery.fn.offset() requires an element connected to a document"),e)):(c("jQuery.fn.offset() requires a valid DOM element"),e)};var v=a.param;a.param=function(b,d){var e=a.ajaxSettings&&a.ajaxSettings.traditional;return void 0===d&&e&&(c("jQuery.param() no longer uses jQuery.ajaxSettings.traditional"),d=e),v.call(this,b,d)};var w=a.fn.andSelf||a.fn.addBack;a.fn.andSelf=function(){return c("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),w.apply(this,arguments)};var x=a.Deferred,y=[["resolve","done",a.Callbacks("once memory"),a.Callbacks("once memory"),"resolved"],["reject","fail",a.Callbacks("once memory"),a.Callbacks("once memory"),"rejected"],["notify","progress",a.Callbacks("memory"),a.Callbacks("memory")]];a.Deferred=function(b){var d=x(),e=d.promise();return d.pipe=e.pipe=function(){var b=arguments;return c("deferred.pipe() is deprecated"),a.Deferred(function(c){a.each(y,function(f,g){var h=a.isFunction(b[f])&&b[f];d[g[1]](function(){var b=h&&h.apply(this,arguments);b&&a.isFunction(b.promise)?b.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[g[0]+"With"](this===e?c.promise():this,h?[b]:arguments)})}),b=null}).promise()},b&&b.call(d,d),d}}(jQuery,window);;
/* rank:50standard - minify:ok. themes/ShapelyG/js/custom.js */
$(document).ready(function(){$('#topbar').affix({offset:{top:$('#page-header').height()-$('#topbar').height()}});$('body').scrollspy({target:'#topbar'})
$('.scroll-top').click(function(){$('body,html').animate({scrollTop:0},1000)})
$('#topbar .navbar-nav li>a').click(function(){var link=$(this).attr('href');var posi=$(link).offset().top+20;$('body,html').animate({scrollTop:posi},700)})
$('#autotoc .nav li>a').click(function(){var link=$(this).attr('href');var posi=$(link).offset().top-50;$('body,html').animate({scrollTop:posi},700)})});
/* rank:50standard - minify:ok. vendor_bundled/vendor/twitter/bootstrap/dist/js/bootstrap.js */
if(typeof jQuery==='undefined'){throw new Error('Bootstrap\'s JavaScript requires jQuery')}+function($){'use strict';var version=$.fn.jquery.split(' ')[0].split('.')
if((version[0]<2&&version[1]<9)||(version[0]==1&&version[1]==9&&version[2]<1)||(version[0]>3)){throw new Error('Bootstrap\'s JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4')}}(jQuery);+function($){'use strict';function transitionEnd(){var el=document.createElement('bootstrap')
var transEndEventNames={WebkitTransition:'webkitTransitionEnd',MozTransition:'transitionend',OTransition:'oTransitionEnd otransitionend',transition:'transitionend'}
for(var name in transEndEventNames){if(el.style[name]!==undefined){return{end:transEndEventNames[name]}}}
return!1}
$.fn.emulateTransitionEnd=function(duration){var called=!1
var $el=this
$(this).one('bsTransitionEnd',function(){called=!0})
var callback=function(){if(!called)$($el).trigger($.support.transition.end)}
setTimeout(callback,duration)
return this}
$(function(){$.support.transition=transitionEnd()
if(!$.support.transition)return
$.event.special.bsTransitionEnd={bindType:$.support.transition.end,delegateType:$.support.transition.end,handle:function(e){if($(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}}})}(jQuery);+function($){'use strict';var dismiss='[data-dismiss="alert"]'
var Alert=function(el){$(el).on('click',dismiss,this.close)}
Alert.VERSION='3.4.1'
Alert.TRANSITION_DURATION=150
Alert.prototype.close=function(e){var $this=$(this)
var selector=$this.attr('data-target')
if(!selector){selector=$this.attr('href')
selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,'')}
selector=selector==='#'?[]:selector
var $parent=$(document).find(selector)
if(e)e.preventDefault()
if(!$parent.length){$parent=$this.closest('.alert')}
$parent.trigger(e=$.Event('close.bs.alert'))
if(e.isDefaultPrevented())return
$parent.removeClass('in')
function removeElement(){$parent.detach().trigger('closed.bs.alert').remove()}
$.support.transition&&$parent.hasClass('fade')?$parent.one('bsTransitionEnd',removeElement).emulateTransitionEnd(Alert.TRANSITION_DURATION):removeElement()}
function Plugin(option){return this.each(function(){var $this=$(this)
var data=$this.data('bs.alert')
if(!data)$this.data('bs.alert',(data=new Alert(this)))
if(typeof option=='string')data[option].call($this)})}
var old=$.fn.alert
$.fn.alert=Plugin
$.fn.alert.Constructor=Alert
$.fn.alert.noConflict=function(){$.fn.alert=old
return this}
$(document).on('click.bs.alert.data-api',dismiss,Alert.prototype.close)}(jQuery);+function($){'use strict';var Button=function(element,options){this.$element=$(element)
this.options=$.extend({},Button.DEFAULTS,options)
this.isLoading=!1}
Button.VERSION='3.4.1'
Button.DEFAULTS={loadingText:'loading...'}
Button.prototype.setState=function(state){var d='disabled'
var $el=this.$element
var val=$el.is('input')?'val':'html'
var data=$el.data()
state+='Text'
if(data.resetText==null)$el.data('resetText',$el[val]())
setTimeout($.proxy(function(){$el[val](data[state]==null?this.options[state]:data[state])
if(state=='loadingText'){this.isLoading=!0
$el.addClass(d).attr(d,d).prop(d,!0)}else if(this.isLoading){this.isLoading=!1
$el.removeClass(d).removeAttr(d).prop(d,!1)}},this),0)}
Button.prototype.toggle=function(){var changed=!0
var $parent=this.$element.closest('[data-toggle="buttons"]')
if($parent.length){var $input=this.$element.find('input')
if($input.prop('type')=='radio'){if($input.prop('checked'))changed=!1
$parent.find('.active').removeClass('active')
this.$element.addClass('active')}else if($input.prop('type')=='checkbox'){if(($input.prop('checked'))!==this.$element.hasClass('active'))changed=!1
this.$element.toggleClass('active')}
$input.prop('checked',this.$element.hasClass('active'))
if(changed)$input.trigger('change')}else{this.$element.attr('aria-pressed',!this.$element.hasClass('active'))
this.$element.toggleClass('active')}}
function Plugin(option){return this.each(function(){var $this=$(this)
var data=$this.data('bs.button')
var options=typeof option=='object'&&option
if(!data)$this.data('bs.button',(data=new Button(this,options)))
if(option=='toggle')data.toggle()
else if(option)data.setState(option)})}
var old=$.fn.button
$.fn.button=Plugin
$.fn.button.Constructor=Button
$.fn.button.noConflict=function(){$.fn.button=old
return this}
$(document).on('click.bs.button.data-api','[data-toggle^="button"]',function(e){var $btn=$(e.target).closest('.btn')
Plugin.call($btn,'toggle')
if(!($(e.target).is('input[type="radio"], input[type="checkbox"]'))){e.preventDefault()
if($btn.is('input,button'))$btn.trigger('focus')
else $btn.find('input:visible,button:visible').first().trigger('focus')}}).on('focus.bs.button.data-api blur.bs.button.data-api','[data-toggle^="button"]',function(e){$(e.target).closest('.btn').toggleClass('focus',/^focus(in)?$/.test(e.type))})}(jQuery);+function($){'use strict';var Carousel=function(element,options){this.$element=$(element)
this.$indicators=this.$element.find('.carousel-indicators')
this.options=options
this.paused=null
this.sliding=null
this.interval=null
this.$active=null
this.$items=null
this.options.keyboard&&this.$element.on('keydown.bs.carousel',$.proxy(this.keydown,this))
this.options.pause=='hover'&&!('ontouchstart' in document.documentElement)&&this.$element.on('mouseenter.bs.carousel',$.proxy(this.pause,this)).on('mouseleave.bs.carousel',$.proxy(this.cycle,this))}
Carousel.VERSION='3.4.1'
Carousel.TRANSITION_DURATION=600
Carousel.DEFAULTS={interval:5000,pause:'hover',wrap:!0,keyboard:!0}
Carousel.prototype.keydown=function(e){if(/input|textarea/i.test(e.target.tagName))return
switch(e.which){case 37:this.prev();break
case 39:this.next();break
default:return}
e.preventDefault()}
Carousel.prototype.cycle=function(e){e||(this.paused=!1)
this.interval&&clearInterval(this.interval)
this.options.interval&&!this.paused&&(this.interval=setInterval($.proxy(this.next,this),this.options.interval))
return this}
Carousel.prototype.getItemIndex=function(item){this.$items=item.parent().children('.item')
return this.$items.index(item||this.$active)}
Carousel.prototype.getItemForDirection=function(direction,active){var activeIndex=this.getItemIndex(active)
var willWrap=(direction=='prev'&&activeIndex===0)||(direction=='next'&&activeIndex==(this.$items.length-1))
if(willWrap&&!this.options.wrap)return active
var delta=direction=='prev'?-1:1
var itemIndex=(activeIndex+delta)%this.$items.length
return this.$items.eq(itemIndex)}
Carousel.prototype.to=function(pos){var that=this
var activeIndex=this.getItemIndex(this.$active=this.$element.find('.item.active'))
if(pos>(this.$items.length-1)||pos<0)return
if(this.sliding)return this.$element.one('slid.bs.carousel',function(){that.to(pos)})
if(activeIndex==pos)return this.pause().cycle()
return this.slide(pos>activeIndex?'next':'prev',this.$items.eq(pos))}
Carousel.prototype.pause=function(e){e||(this.paused=!0)
if(this.$element.find('.next, .prev').length&&$.support.transition){this.$element.trigger($.support.transition.end)
this.cycle(!0)}
this.interval=clearInterval(this.interval)
return this}
Carousel.prototype.next=function(){if(this.sliding)return
return this.slide('next')}
Carousel.prototype.prev=function(){if(this.sliding)return
return this.slide('prev')}
Carousel.prototype.slide=function(type,next){var $active=this.$element.find('.item.active')
var $next=next||this.getItemForDirection(type,$active)
var isCycling=this.interval
var direction=type=='next'?'left':'right'
var that=this
if($next.hasClass('active'))return(this.sliding=!1)
var relatedTarget=$next[0]
var slideEvent=$.Event('slide.bs.carousel',{relatedTarget:relatedTarget,direction:direction})
this.$element.trigger(slideEvent)
if(slideEvent.isDefaultPrevented())return
this.sliding=!0
isCycling&&this.pause()
if(this.$indicators.length){this.$indicators.find('.active').removeClass('active')
var $nextIndicator=$(this.$indicators.children()[this.getItemIndex($next)])
$nextIndicator&&$nextIndicator.addClass('active')}
var slidEvent=$.Event('slid.bs.carousel',{relatedTarget:relatedTarget,direction:direction})
if($.support.transition&&this.$element.hasClass('slide')){$next.addClass(type)
if(typeof $next==='object'&&$next.length){$next[0].offsetWidth}
$active.addClass(direction)
$next.addClass(direction)
$active.one('bsTransitionEnd',function(){$next.removeClass([type,direction].join(' ')).addClass('active')
$active.removeClass(['active',direction].join(' '))
that.sliding=!1
setTimeout(function(){that.$element.trigger(slidEvent)},0)}).emulateTransitionEnd(Carousel.TRANSITION_DURATION)}else{$active.removeClass('active')
$next.addClass('active')
this.sliding=!1
this.$element.trigger(slidEvent)}
isCycling&&this.cycle()
return this}
function Plugin(option){return this.each(function(){var $this=$(this)
var data=$this.data('bs.carousel')
var options=$.extend({},Carousel.DEFAULTS,$this.data(),typeof option=='object'&&option)
var action=typeof option=='string'?option:options.slide
if(!data)$this.data('bs.carousel',(data=new Carousel(this,options)))
if(typeof option=='number')data.to(option)
else if(action)data[action]()
else if(options.interval)data.pause().cycle()})}
var old=$.fn.carousel
$.fn.carousel=Plugin
$.fn.carousel.Constructor=Carousel
$.fn.carousel.noConflict=function(){$.fn.carousel=old
return this}
var clickHandler=function(e){var $this=$(this)
var href=$this.attr('href')
if(href){href=href.replace(/.*(?=#[^\s]+$)/,'')}
var target=$this.attr('data-target')||href
var $target=$(document).find(target)
if(!$target.hasClass('carousel'))return
var options=$.extend({},$target.data(),$this.data())
var slideIndex=$this.attr('data-slide-to')
if(slideIndex)options.interval=!1
Plugin.call($target,options)
if(slideIndex){$target.data('bs.carousel').to(slideIndex)}
e.preventDefault()}
$(document).on('click.bs.carousel.data-api','[data-slide]',clickHandler).on('click.bs.carousel.data-api','[data-slide-to]',clickHandler)
$(window).on('load',function(){$('[data-ride="carousel"]').each(function(){var $carousel=$(this)
Plugin.call($carousel,$carousel.data())})})}(jQuery);+function($){'use strict';var Collapse=function(element,options){this.$element=$(element)
this.options=$.extend({},Collapse.DEFAULTS,options)
this.$trigger=$('[data-toggle="collapse"][href="#'+element.id+'"],'+'[data-toggle="collapse"][data-target="#'+element.id+'"]')
this.transitioning=null
if(this.options.parent){this.$parent=this.getParent()}else{this.addAriaAndCollapsedClass(this.$element,this.$trigger)}
if(this.options.toggle)this.toggle()}
Collapse.VERSION='3.4.1'
Collapse.TRANSITION_DURATION=350
Collapse.DEFAULTS={toggle:!0}
Collapse.prototype.dimension=function(){var hasWidth=this.$element.hasClass('width')
return hasWidth?'width':'height'}
Collapse.prototype.show=function(){if(this.transitioning||this.$element.hasClass('in'))return
var activesData
var actives=this.$parent&&this.$parent.children('.panel').children('.in, .collapsing')
if(actives&&actives.length){activesData=actives.data('bs.collapse')
if(activesData&&activesData.transitioning)return}
var startEvent=$.Event('show.bs.collapse')
this.$element.trigger(startEvent)
if(startEvent.isDefaultPrevented())return
if(actives&&actives.length){Plugin.call(actives,'hide')
activesData||actives.data('bs.collapse',null)}
var dimension=this.dimension()
this.$element.removeClass('collapse').addClass('collapsing')[dimension](0).attr('aria-expanded',!0)
this.$trigger.removeClass('collapsed').attr('aria-expanded',!0)
this.transitioning=1
var complete=function(){this.$element.removeClass('collapsing').addClass('collapse in')[dimension]('')
this.transitioning=0
this.$element.trigger('shown.bs.collapse')}
if(!$.support.transition)return complete.call(this)
var scrollSize=$.camelCase(['scroll',dimension].join('-'))
this.$element.one('bsTransitionEnd',$.proxy(complete,this)).emulateTransitionEnd(Collapse.TRANSITION_DURATION)[dimension](this.$element[0][scrollSize])}
Collapse.prototype.hide=function(){if(this.transitioning||!this.$element.hasClass('in'))return
var startEvent=$.Event('hide.bs.collapse')
this.$element.trigger(startEvent)
if(startEvent.isDefaultPrevented())return
var dimension=this.dimension()
this.$element[dimension](this.$element[dimension]())[0].offsetHeight
this.$element.addClass('collapsing').removeClass('collapse in').attr('aria-expanded',!1)
this.$trigger.addClass('collapsed').attr('aria-expanded',!1)
this.transitioning=1
var complete=function(){this.transitioning=0
this.$element.removeClass('collapsing').addClass('collapse').trigger('hidden.bs.collapse')}
if(!$.support.transition)return complete.call(this)
this.$element[dimension](0).one('bsTransitionEnd',$.proxy(complete,this)).emulateTransitionEnd(Collapse.TRANSITION_DURATION)}
Collapse.prototype.toggle=function(){this[this.$element.hasClass('in')?'hide':'show']()}
Collapse.prototype.getParent=function(){return $(document).find(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each($.proxy(function(i,element){var $element=$(element)
this.addAriaAndCollapsedClass(getTargetFromTrigger($element),$element)},this)).end()}
Collapse.prototype.addAriaAndCollapsedClass=function($element,$trigger){var isOpen=$element.hasClass('in')
$element.attr('aria-expanded',isOpen)
$trigger.toggleClass('collapsed',!isOpen).attr('aria-expanded',isOpen)}
function getTargetFromTrigger($trigger){var href
var target=$trigger.attr('data-target')||(href=$trigger.attr('href'))&&href.replace(/.*(?=#[^\s]+$)/,'')
return $(document).find(target)}
function Plugin(option){return this.each(function(){var $this=$(this)
var data=$this.data('bs.collapse')
var options=$.extend({},Collapse.DEFAULTS,$this.data(),typeof option=='object'&&option)
if(!data&&options.toggle&&/show|hide/.test(option))options.toggle=!1
if(!data)$this.data('bs.collapse',(data=new Collapse(this,options)))
if(typeof option=='string')data[option]()})}
var old=$.fn.collapse
$.fn.collapse=Plugin
$.fn.collapse.Constructor=Collapse
$.fn.collapse.noConflict=function(){$.fn.collapse=old
return this}
$(document).on('click.bs.collapse.data-api','[data-toggle="collapse"]',function(e){var $this=$(this)
if(!$this.attr('data-target'))e.preventDefault()
var $target=getTargetFromTrigger($this)
var data=$target.data('bs.collapse')
var option=data?'toggle':$this.data()
Plugin.call($target,option)})}(jQuery);+function($){'use strict';var backdrop='.dropdown-backdrop'
var toggle='[data-toggle="dropdown"]'
var Dropdown=function(element){$(element).on('click.bs.dropdown',this.toggle)}
Dropdown.VERSION='3.4.1'
function getParent($this){var selector=$this.attr('data-target')
if(!selector){selector=$this.attr('href')
selector=selector&&/#[A-Za-z]/.test(selector)&&selector.replace(/.*(?=#[^\s]*$)/,'')}
var $parent=selector!=='#'?$(document).find(selector):null
return $parent&&$parent.length?$parent:$this.parent()}
function clearMenus(e){if(e&&e.which===3)return
$(backdrop).remove()
$(toggle).each(function(){var $this=$(this)
var $parent=getParent($this)
var relatedTarget={relatedTarget:this}
if(!$parent.hasClass('open'))return
if(e&&e.type=='click'&&/input|textarea/i.test(e.target.tagName)&&$.contains($parent[0],e.target))return
$parent.trigger(e=$.Event('hide.bs.dropdown',relatedTarget))
if(e.isDefaultPrevented())return
$this.attr('aria-expanded','false')
$parent.removeClass('open').trigger($.Event('hidden.bs.dropdown',relatedTarget))})}
Dropdown.prototype.toggle=function(e){var $this=$(this)
if($this.is('.disabled, :disabled'))return
var $parent=getParent($this)
var isActive=$parent.hasClass('open')
clearMenus()
if(!isActive){if('ontouchstart' in document.documentElement&&!$parent.closest('.navbar-nav').length){$(document.createElement('div')).addClass('dropdown-backdrop').insertAfter($(this)).on('click',clearMenus)}
var relatedTarget={relatedTarget:this}
$parent.trigger(e=$.Event('show.bs.dropdown',relatedTarget))
if(e.isDefaultPrevented())return
$this.trigger('focus').attr('aria-expanded','true')
$parent.toggleClass('open').trigger($.Event('shown.bs.dropdown',relatedTarget))}
return!1}
Dropdown.prototype.keydown=function(e){if(!/(38|40|27|32)/.test(e.which)||/input|textarea/i.test(e.target.tagName))return
var $this=$(this)
e.preventDefault()
e.stopPropagation()
if($this.is('.disabled, :disabled'))return
var $parent=getParent($this)
var isActive=$parent.hasClass('open')
if(!isActive&&e.which!=27||isActive&&e.which==27){if(e.which==27)$parent.find(toggle).trigger('focus')
return $this.trigger('click')}
var desc=' li:not(.disabled):visible a'
var $items=$parent.find('.dropdown-menu'+desc)
if(!$items.length)return
var index=$items.index(e.target)
if(e.which==38&&index>0)index--
if(e.which==40&&index<$items.length-1)index++
if(!~index)index=0
$items.eq(index).trigger('focus')}
function Plugin(option){return this.each(function(){var $this=$(this)
var data=$this.data('bs.dropdown')
if(!data)$this.data('bs.dropdown',(data=new Dropdown(this)))
if(typeof option=='string')data[option].call($this)})}
var old=$.fn.dropdown
$.fn.dropdown=Plugin
$.fn.dropdown.Constructor=Dropdown
$.fn.dropdown.noConflict=function(){$.fn.dropdown=old
return this}
$(document).on('click.bs.dropdown.data-api',clearMenus).on('click.bs.dropdown.data-api','.dropdown form',function(e){e.stopPropagation()}).on('click.bs.dropdown.data-api',toggle,Dropdown.prototype.toggle).on('keydown.bs.dropdown.data-api',toggle,Dropdown.prototype.keydown).on('keydown.bs.dropdown.data-api','.dropdown-menu',Dropdown.prototype.keydown)}(jQuery);+function($){'use strict';var Modal=function(element,options){this.options=options
this.$body=$(document.body)
this.$element=$(element)
this.$dialog=this.$element.find('.modal-dialog')
this.$backdrop=null
this.isShown=null
this.originalBodyPad=null
this.scrollbarWidth=0
this.ignoreBackdropClick=!1
this.fixedContent='.navbar-fixed-top, .navbar-fixed-bottom'
if(this.options.remote){this.$element.find('.modal-content').load(this.options.remote,$.proxy(function(){this.$element.trigger('loaded.bs.modal')},this))}}
Modal.VERSION='3.4.1'
Modal.TRANSITION_DURATION=300
Modal.BACKDROP_TRANSITION_DURATION=150
Modal.DEFAULTS={backdrop:!0,keyboard:!0,show:!0}
Modal.prototype.toggle=function(_relatedTarget){return this.isShown?this.hide():this.show(_relatedTarget)}
Modal.prototype.show=function(_relatedTarget){var that=this
var e=$.Event('show.bs.modal',{relatedTarget:_relatedTarget})
this.$element.trigger(e)
if(this.isShown||e.isDefaultPrevented())return
this.isShown=!0
this.checkScrollbar()
this.setScrollbar()
this.$body.addClass('modal-open')
this.escape()
this.resize()
this.$element.on('click.dismiss.bs.modal','[data-dismiss="modal"]',$.proxy(this.hide,this))
this.$dialog.on('mousedown.dismiss.bs.modal',function(){that.$element.one('mouseup.dismiss.bs.modal',function(e){if($(e.target).is(that.$element))that.ignoreBackdropClick=!0})})
this.backdrop(function(){var transition=$.support.transition&&that.$element.hasClass('fade')
if(!that.$element.parent().length){that.$element.appendTo(that.$body)}
that.$element.show().scrollTop(0)
that.adjustDialog()
if(transition){that.$element[0].offsetWidth}
that.$element.addClass('in')
that.enforceFocus()
var e=$.Event('shown.bs.modal',{relatedTarget:_relatedTarget})
transition?that.$dialog.one('bsTransitionEnd',function(){that.$element.trigger('focus').trigger(e)}).emulateTransitionEnd(Modal.TRANSITION_DURATION):that.$element.trigger('focus').trigger(e)})}
Modal.prototype.hide=function(e){if(e)e.preventDefault()
e=$.Event('hide.bs.modal')
this.$element.trigger(e)
if(!this.isShown||e.isDefaultPrevented())return
this.isShown=!1
this.escape()
this.resize()
$(document).off('focusin.bs.modal')
this.$element.removeClass('in').off('click.dismiss.bs.modal').off('mouseup.dismiss.bs.modal')
this.$dialog.off('mousedown.dismiss.bs.modal')
$.support.transition&&this.$element.hasClass('fade')?this.$element.one('bsTransitionEnd',$.proxy(this.hideModal,this)).emulateTransitionEnd(Modal.TRANSITION_DURATION):this.hideModal()}
Modal.prototype.enforceFocus=function(){$(document).off('focusin.bs.modal').on('focusin.bs.modal',$.proxy(function(e){if(document!==e.target&&this.$element[0]!==e.target&&!this.$element.has(e.target).length){this.$element.trigger('focus')}},this))}
Modal.prototype.escape=function(){if(this.isShown&&this.options.keyboard){this.$element.on('keydown.dismiss.bs.modal',$.proxy(function(e){e.which==27&&this.hide()},this))}else if(!this.isShown){this.$element.off('keydown.dismiss.bs.modal')}}
Modal.prototype.resize=function(){if(this.isShown){$(window).on('resize.bs.modal',$.proxy(this.handleUpdate,this))}else{$(window).off('resize.bs.modal')}}
Modal.prototype.hideModal=function(){var that=this
this.$element.hide()
this.backdrop(function(){that.$body.removeClass('modal-open')
that.resetAdjustments()
that.resetScrollbar()
that.$element.trigger('hidden.bs.modal')})}
Modal.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove()
this.$backdrop=null}
Modal.prototype.backdrop=function(callback){var that=this
var animate=this.$element.hasClass('fade')?'fade':''
if(this.isShown&&this.options.backdrop){var doAnimate=$.support.transition&&animate
this.$backdrop=$(document.createElement('div')).addClass('modal-backdrop '+animate).appendTo(this.$body)
this.$element.on('click.dismiss.bs.modal',$.proxy(function(e){if(this.ignoreBackdropClick){this.ignoreBackdropClick=!1
return}
if(e.target!==e.currentTarget)return
this.options.backdrop=='static'?this.$element[0].focus():this.hide()},this))
if(doAnimate)this.$backdrop[0].offsetWidth
this.$backdrop.addClass('in')
if(!callback)return
doAnimate?this.$backdrop.one('bsTransitionEnd',callback).emulateTransitionEnd(Modal.BACKDROP_TRANSITION_DURATION):callback()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass('in')
var callbackRemove=function(){that.removeBackdrop()
callback&&callback()}
$.support.transition&&this.$element.hasClass('fade')?this.$backdrop.one('bsTransitionEnd',callbackRemove).emulateTransitionEnd(Modal.BACKDROP_TRANSITION_DURATION):callbackRemove()}else if(callback){callback()}}
Modal.prototype.handleUpdate=function(){this.adjustDialog()}
Modal.prototype.adjustDialog=function(){var modalIsOverflowing=this.$element[0].scrollHeight>document.documentElement.clientHeight
this.$element.css({paddingLeft:!this.bodyIsOverflowing&&modalIsOverflowing?this.scrollbarWidth:'',paddingRight:this.bodyIsOverflowing&&!modalIsOverflowing?this.scrollbarWidth:''})}
Modal.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:'',paddingRight:''})}
Modal.prototype.checkScrollbar=function(){var fullWindowWidth=window.innerWidth
if(!fullWindowWidth){var documentElementRect=document.documentElement.getBoundingClientRect()
fullWindowWidth=documentElementRect.right-Math.abs(documentElementRect.left)}
this.bodyIsOverflowing=document.body.clientWidth<fullWindowWidth
this.scrollbarWidth=this.measureScrollbar()}
Modal.prototype.setScrollbar=function(){var bodyPad=parseInt((this.$body.css('padding-right')||0),10)
this.originalBodyPad=document.body.style.paddingRight||''
var scrollbarWidth=this.scrollbarWidth
if(this.bodyIsOverflowing){this.$body.css('padding-right',bodyPad+scrollbarWidth)
$(this.fixedContent).each(function(index,element){var actualPadding=element.style.paddingRight
var calculatedPadding=$(element).css('padding-right')
$(element).data('padding-right',actualPadding).css('padding-right',parseFloat(calculatedPadding)+scrollbarWidth+'px')})}}
Modal.prototype.resetScrollbar=function(){this.$body.css('padding-right',this.originalBodyPad)
$(this.fixedContent).each(function(index,element){var padding=$(element).data('padding-right')
$(element).removeData('padding-right')
element.style.paddingRight=padding?padding:''})}
Modal.prototype.measureScrollbar=function(){var scrollDiv=document.createElement('div')
scrollDiv.className='modal-scrollbar-measure'
this.$body.append(scrollDiv)
var scrollbarWidth=scrollDiv.offsetWidth-scrollDiv.clientWidth
this.$body[0].removeChild(scrollDiv)
return scrollbarWidth}
function Plugin(option,_relatedTarget){return this.each(function(){var $this=$(this)
var data=$this.data('bs.modal')
var options=$.extend({},Modal.DEFAULTS,$this.data(),typeof option=='object'&&option)
if(!data)$this.data('bs.modal',(data=new Modal(this,options)))
if(typeof option=='string')data[option](_relatedTarget)
else if(options.show)data.show(_relatedTarget)})}
var old=$.fn.modal
$.fn.modal=Plugin
$.fn.modal.Constructor=Modal
$.fn.modal.noConflict=function(){$.fn.modal=old
return this}
$(document).on('click.bs.modal.data-api','[data-toggle="modal"]',function(e){var $this=$(this)
var href=$this.attr('href')
var target=$this.attr('data-target')||(href&&href.replace(/.*(?=#[^\s]+$)/,''))
var $target=$(document).find(target)
var option=$target.data('bs.modal')?'toggle':$.extend({remote:!/#/.test(href)&&href},$target.data(),$this.data())
if($this.is('a'))e.preventDefault()
$target.one('show.bs.modal',function(showEvent){if(showEvent.isDefaultPrevented())return
$target.one('hidden.bs.modal',function(){$this.is(':visible')&&$this.trigger('focus')})})
Plugin.call($target,option,this)})}(jQuery);+function($){'use strict';var DISALLOWED_ATTRIBUTES=['sanitize','whiteList','sanitizeFn']
var uriAttrs=['background','cite','href','itemtype','longdesc','poster','src','xlink:href']
var ARIA_ATTRIBUTE_PATTERN=/^aria-[\w-]*$/i
var DefaultWhitelist={'*':['class','dir','id','lang','role',ARIA_ATTRIBUTE_PATTERN],a:['target','href','title','rel'],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:['src','alt','title','width','height'],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]}
var SAFE_URL_PATTERN=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi
var DATA_URL_PATTERN=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i
function allowedAttribute(attr,allowedAttributeList){var attrName=attr.nodeName.toLowerCase()
if($.inArray(attrName,allowedAttributeList)!==-1){if($.inArray(attrName,uriAttrs)!==-1){return Boolean(attr.nodeValue.match(SAFE_URL_PATTERN)||attr.nodeValue.match(DATA_URL_PATTERN))}
return!0}
var regExp=$(allowedAttributeList).filter(function(index,value){return value instanceof RegExp})
for(var i=0,l=regExp.length;i<l;i++){if(attrName.match(regExp[i])){return!0}}
return!1}
function sanitizeHtml(unsafeHtml,whiteList,sanitizeFn){if(unsafeHtml.length===0){return unsafeHtml}
if(sanitizeFn&&typeof sanitizeFn==='function'){return sanitizeFn(unsafeHtml)}
if(!document.implementation||!document.implementation.createHTMLDocument){return unsafeHtml}
var createdDocument=document.implementation.createHTMLDocument('sanitization')
createdDocument.body.innerHTML=unsafeHtml
var whitelistKeys=$.map(whiteList,function(el,i){return i})
var elements=$(createdDocument.body).find('*')
for(var i=0,len=elements.length;i<len;i++){var el=elements[i]
var elName=el.nodeName.toLowerCase()
if($.inArray(elName,whitelistKeys)===-1){el.parentNode.removeChild(el)
continue}
var attributeList=$.map(el.attributes,function(el){return el})
var whitelistedAttributes=[].concat(whiteList['*']||[],whiteList[elName]||[])
for(var j=0,len2=attributeList.length;j<len2;j++){if(!allowedAttribute(attributeList[j],whitelistedAttributes)){el.removeAttribute(attributeList[j].nodeName)}}}
return createdDocument.body.innerHTML}
var Tooltip=function(element,options){this.type=null
this.options=null
this.enabled=null
this.timeout=null
this.hoverState=null
this.$element=null
this.inState=null
this.init('tooltip',element,options)}
Tooltip.VERSION='3.4.1'
Tooltip.TRANSITION_DURATION=150
Tooltip.DEFAULTS={animation:!0,placement:'top',selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:'hover focus',title:'',delay:0,html:!1,container:!1,viewport:{selector:'body',padding:0},sanitize:!0,sanitizeFn:null,whiteList:DefaultWhitelist}
Tooltip.prototype.init=function(type,element,options){this.enabled=!0
this.type=type
this.$element=$(element)
this.options=this.getOptions(options)
this.$viewport=this.options.viewport&&$(document).find($.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):(this.options.viewport.selector||this.options.viewport))
this.inState={click:!1,hover:!1,focus:!1}
if(this.$element[0]instanceof document.constructor&&!this.options.selector){throw new Error('`selector` option must be specified when initializing '+this.type+' on the window.document object!')}
var triggers=this.options.trigger.split(' ')
for(var i=triggers.length;i--;){var trigger=triggers[i]
if(trigger=='click'){this.$element.on('click.'+this.type,this.options.selector,$.proxy(this.toggle,this))}else if(trigger!='manual'){var eventIn=trigger=='hover'?'mouseenter':'focusin'
var eventOut=trigger=='hover'?'mouseleave':'focusout'
this.$element.on(eventIn+'.'+this.type,this.options.selector,$.proxy(this.enter,this))
this.$element.on(eventOut+'.'+this.type,this.options.selector,$.proxy(this.leave,this))}}
this.options.selector?(this._options=$.extend({},this.options,{trigger:'manual',selector:''})):this.fixTitle()}
Tooltip.prototype.getDefaults=function(){return Tooltip.DEFAULTS}
Tooltip.prototype.getOptions=function(options){var dataAttributes=this.$element.data()
for(var dataAttr in dataAttributes){if(dataAttributes.hasOwnProperty(dataAttr)&&$.inArray(dataAttr,DISALLOWED_ATTRIBUTES)!==-1){delete dataAttributes[dataAttr]}}
options=$.extend({},this.getDefaults(),dataAttributes,options)
if(options.delay&&typeof options.delay=='number'){options.delay={show:options.delay,hide:options.delay}}
if(options.sanitize){options.template=sanitizeHtml(options.template,options.whiteList,options.sanitizeFn)}
return options}
Tooltip.prototype.getDelegateOptions=function(){var options={}
var defaults=this.getDefaults()
this._options&&$.each(this._options,function(key,value){if(defaults[key]!=value)options[key]=value})
return options}
Tooltip.prototype.enter=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget).data('bs.'+this.type)
if(!self){self=new this.constructor(obj.currentTarget,this.getDelegateOptions())
$(obj.currentTarget).data('bs.'+this.type,self)}
if(obj instanceof $.Event){self.inState[obj.type=='focusin'?'focus':'hover']=!0}
if(self.tip().hasClass('in')||self.hoverState=='in'){self.hoverState='in'
return}
clearTimeout(self.timeout)
self.hoverState='in'
if(!self.options.delay||!self.options.delay.show)return self.show()
self.timeout=setTimeout(function(){if(self.hoverState=='in')self.show()},self.options.delay.show)}
Tooltip.prototype.isInStateTrue=function(){for(var key in this.inState){if(this.inState[key])return!0}
return!1}
Tooltip.prototype.leave=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget).data('bs.'+this.type)
if(!self){self=new this.constructor(obj.currentTarget,this.getDelegateOptions())
$(obj.currentTarget).data('bs.'+this.type,self)}
if(obj instanceof $.Event){self.inState[obj.type=='focusout'?'focus':'hover']=!1}
if(self.isInStateTrue())return
clearTimeout(self.timeout)
self.hoverState='out'
if(!self.options.delay||!self.options.delay.hide)return self.hide()
self.timeout=setTimeout(function(){if(self.hoverState=='out')self.hide()},self.options.delay.hide)}
Tooltip.prototype.show=function(){var e=$.Event('show.bs.'+this.type)
if(this.hasContent()&&this.enabled){this.$element.trigger(e)
var inDom=$.contains(this.$element[0].ownerDocument.documentElement,this.$element[0])
if(e.isDefaultPrevented()||!inDom)return
var that=this
var $tip=this.tip()
var tipId=this.getUID(this.type)
this.setContent()
$tip.attr('id',tipId)
this.$element.attr('aria-describedby',tipId)
if(this.options.animation)$tip.addClass('fade')
var placement=typeof this.options.placement=='function'?this.options.placement.call(this,$tip[0],this.$element[0]):this.options.placement
var autoToken=/\s?auto?\s?/i
var autoPlace=autoToken.test(placement)
if(autoPlace)placement=placement.replace(autoToken,'')||'top'
$tip.detach().css({top:0,left:0,display:'block'}).addClass(placement).data('bs.'+this.type,this)
this.options.container?$tip.appendTo($(document).find(this.options.container)):$tip.insertAfter(this.$element)
this.$element.trigger('inserted.bs.'+this.type)
var pos=this.getPosition()
var actualWidth=$tip[0].offsetWidth
var actualHeight=$tip[0].offsetHeight
if(autoPlace){var orgPlacement=placement
var viewportDim=this.getPosition(this.$viewport)
placement=placement=='bottom'&&pos.bottom+actualHeight>viewportDim.bottom?'top':placement=='top'&&pos.top-actualHeight<viewportDim.top?'bottom':placement=='right'&&pos.right+actualWidth>viewportDim.width?'left':placement=='left'&&pos.left-actualWidth<viewportDim.left?'right':placement
$tip.removeClass(orgPlacement).addClass(placement)}
var calculatedOffset=this.getCalculatedOffset(placement,pos,actualWidth,actualHeight)
this.applyPlacement(calculatedOffset,placement)
var complete=function(){var prevHoverState=that.hoverState
that.$element.trigger('shown.bs.'+that.type)
that.hoverState=null
if(prevHoverState=='out')that.leave(that)}
$.support.transition&&this.$tip.hasClass('fade')?$tip.one('bsTransitionEnd',complete).emulateTransitionEnd(Tooltip.TRANSITION_DURATION):complete()}}
Tooltip.prototype.applyPlacement=function(offset,placement){var $tip=this.tip()
var width=$tip[0].offsetWidth
var height=$tip[0].offsetHeight
var marginTop=parseInt($tip.css('margin-top'),10)
var marginLeft=parseInt($tip.css('margin-left'),10)
if(isNaN(marginTop))marginTop=0
if(isNaN(marginLeft))marginLeft=0
offset.top+=marginTop
offset.left+=marginLeft
$.offset.setOffset($tip[0],$.extend({using:function(props){$tip.css({top:Math.round(props.top),left:Math.round(props.left)})}},offset),0)
$tip.addClass('in')
var actualWidth=$tip[0].offsetWidth
var actualHeight=$tip[0].offsetHeight
if(placement=='top'&&actualHeight!=height){offset.top=offset.top+height-actualHeight}
var delta=this.getViewportAdjustedDelta(placement,offset,actualWidth,actualHeight)
if(delta.left)offset.left+=delta.left
else offset.top+=delta.top
var isVertical=/top|bottom/.test(placement)
var arrowDelta=isVertical?delta.left*2-width+actualWidth:delta.top*2-height+actualHeight
var arrowOffsetPosition=isVertical?'offsetWidth':'offsetHeight'
$tip.offset(offset)
this.replaceArrow(arrowDelta,$tip[0][arrowOffsetPosition],isVertical)}
Tooltip.prototype.replaceArrow=function(delta,dimension,isVertical){this.arrow().css(isVertical?'left':'top',50*(1-delta/dimension)+'%').css(isVertical?'top':'left','')}
Tooltip.prototype.setContent=function(){var $tip=this.tip()
var title=this.getTitle()
if(this.options.html){if(this.options.sanitize){title=sanitizeHtml(title,this.options.whiteList,this.options.sanitizeFn)}
$tip.find('.tooltip-inner').html(title)}else{$tip.find('.tooltip-inner').text(title)}
$tip.removeClass('fade in top bottom left right')}
Tooltip.prototype.hide=function(callback){var that=this
var $tip=$(this.$tip)
var e=$.Event('hide.bs.'+this.type)
function complete(){if(that.hoverState!='in')$tip.detach()
if(that.$element){that.$element.removeAttr('aria-describedby').trigger('hidden.bs.'+that.type)}
callback&&callback()}
this.$element.trigger(e)
if(e.isDefaultPrevented())return
$tip.removeClass('in')
$.support.transition&&$tip.hasClass('fade')?$tip.one('bsTransitionEnd',complete).emulateTransitionEnd(Tooltip.TRANSITION_DURATION):complete()
this.hoverState=null
return this}
Tooltip.prototype.fixTitle=function(){var $e=this.$element
if($e.attr('title')||typeof $e.attr('data-original-title')!='string'){$e.attr('data-original-title',$e.attr('title')||'').attr('title','')}}
Tooltip.prototype.hasContent=function(){return this.getTitle()}
Tooltip.prototype.getPosition=function($element){$element=$element||this.$element
var el=$element[0]
var isBody=el.tagName=='BODY'
var elRect=el.getBoundingClientRect()
if(elRect.width==null){elRect=$.extend({},elRect,{width:elRect.right-elRect.left,height:elRect.bottom-elRect.top})}
var isSvg=window.SVGElement&&el instanceof window.SVGElement
var elOffset=isBody?{top:0,left:0}:(isSvg?null:$element.offset())
var scroll={scroll:isBody?document.documentElement.scrollTop||document.body.scrollTop:$element.scrollTop()}
var outerDims=isBody?{width:$(window).width(),height:$(window).height()}:null
return $.extend({},elRect,scroll,outerDims,elOffset)}
Tooltip.prototype.getCalculatedOffset=function(placement,pos,actualWidth,actualHeight){return placement=='bottom'?{top:pos.top+pos.height,left:pos.left+pos.width/2-actualWidth/2}:placement=='top'?{top:pos.top-actualHeight,left:pos.left+pos.width/2-actualWidth/2}:placement=='left'?{top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth}:{top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width}}
Tooltip.prototype.getViewportAdjustedDelta=function(placement,pos,actualWidth,actualHeight){var delta={top:0,left:0}
if(!this.$viewport)return delta
var viewportPadding=this.options.viewport&&this.options.viewport.padding||0
var viewportDimensions=this.getPosition(this.$viewport)
if(/right|left/.test(placement)){var topEdgeOffset=pos.top-viewportPadding-viewportDimensions.scroll
var bottomEdgeOffset=pos.top+viewportPadding-viewportDimensions.scroll+actualHeight
if(topEdgeOffset<viewportDimensions.top){delta.top=viewportDimensions.top-topEdgeOffset}else if(bottomEdgeOffset>viewportDimensions.top+viewportDimensions.height){delta.top=viewportDimensions.top+viewportDimensions.height-bottomEdgeOffset}}else{var leftEdgeOffset=pos.left-viewportPadding
var rightEdgeOffset=pos.left+viewportPadding+actualWidth
if(leftEdgeOffset<viewportDimensions.left){delta.left=viewportDimensions.left-leftEdgeOffset}else if(rightEdgeOffset>viewportDimensions.right){delta.left=viewportDimensions.left+viewportDimensions.width-rightEdgeOffset}}
return delta}
Tooltip.prototype.getTitle=function(){var title
var $e=this.$element
var o=this.options
title=$e.attr('data-original-title')||(typeof o.title=='function'?o.title.call($e[0]):o.title)
return title}
Tooltip.prototype.getUID=function(prefix){do prefix+=~~(Math.random()*1000000)
while(document.getElementById(prefix))
return prefix}
Tooltip.prototype.tip=function(){if(!this.$tip){this.$tip=$(this.options.template)
if(this.$tip.length!=1){throw new Error(this.type+' `template` option must consist of exactly 1 top-level element!')}}
return this.$tip}
Tooltip.prototype.arrow=function(){return(this.$arrow=this.$arrow||this.tip().find('.tooltip-arrow'))}
Tooltip.prototype.enable=function(){this.enabled=!0}
Tooltip.prototype.disable=function(){this.enabled=!1}
Tooltip.prototype.toggleEnabled=function(){this.enabled=!this.enabled}
Tooltip.prototype.toggle=function(e){var self=this
if(e){self=$(e.currentTarget).data('bs.'+this.type)
if(!self){self=new this.constructor(e.currentTarget,this.getDelegateOptions())
$(e.currentTarget).data('bs.'+this.type,self)}}
if(e){self.inState.click=!self.inState.click
if(self.isInStateTrue())self.enter(self)
else self.leave(self)}else{self.tip().hasClass('in')?self.leave(self):self.enter(self)}}
Tooltip.prototype.destroy=function(){var that=this
clearTimeout(this.timeout)
this.hide(function(){that.$element.off('.'+that.type).removeData('bs.'+that.type)
if(that.$tip){that.$tip.detach()}
that.$tip=null
that.$arrow=null
that.$viewport=null
that.$element=null})}
Tooltip.prototype.sanitizeHtml=function(unsafeHtml){return sanitizeHtml(unsafeHtml,this.options.whiteList,this.options.sanitizeFn)}
function Plugin(option){return this.each(function(){var $this=$(this)
var data=$this.data('bs.tooltip')
var options=typeof option=='object'&&option
if(!data&&/destroy|hide/.test(option))return
if(!data)$this.data('bs.tooltip',(data=new Tooltip(this,options)))
if(typeof option=='string')data[option]()})}
var old=$.fn.tooltip
$.fn.tooltip=Plugin
$.fn.tooltip.Constructor=Tooltip
$.fn.tooltip.noConflict=function(){$.fn.tooltip=old
return this}}(jQuery);+function($){'use strict';var Popover=function(element,options){this.init('popover',element,options)}
if(!$.fn.tooltip)throw new Error('Popover requires tooltip.js')
Popover.VERSION='3.4.1'
Popover.DEFAULTS=$.extend({},$.fn.tooltip.Constructor.DEFAULTS,{placement:'right',trigger:'click',content:'',template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'})
Popover.prototype=$.extend({},$.fn.tooltip.Constructor.prototype)
Popover.prototype.constructor=Popover
Popover.prototype.getDefaults=function(){return Popover.DEFAULTS}
Popover.prototype.setContent=function(){var $tip=this.tip()
var title=this.getTitle()
var content=this.getContent()
if(this.options.html){var typeContent=typeof content
if(this.options.sanitize){title=this.sanitizeHtml(title)
if(typeContent==='string'){content=this.sanitizeHtml(content)}}
$tip.find('.popover-title').html(title)
$tip.find('.popover-content').children().detach().end()[typeContent==='string'?'html':'append'](content)}else{$tip.find('.popover-title').text(title)
$tip.find('.popover-content').children().detach().end().text(content)}
$tip.removeClass('fade top bottom left right in')
if(!$tip.find('.popover-title').html())$tip.find('.popover-title').hide()}
Popover.prototype.hasContent=function(){return this.getTitle()||this.getContent()}
Popover.prototype.getContent=function(){var $e=this.$element
var o=this.options
return $e.attr('data-content')||(typeof o.content=='function'?o.content.call($e[0]):o.content)}
Popover.prototype.arrow=function(){return(this.$arrow=this.$arrow||this.tip().find('.arrow'))}
function Plugin(option){return this.each(function(){var $this=$(this)
var data=$this.data('bs.popover')
var options=typeof option=='object'&&option
if(!data&&/destroy|hide/.test(option))return
if(!data)$this.data('bs.popover',(data=new Popover(this,options)))
if(typeof option=='string')data[option]()})}
var old=$.fn.popover
$.fn.popover=Plugin
$.fn.popover.Constructor=Popover
$.fn.popover.noConflict=function(){$.fn.popover=old
return this}}(jQuery);+function($){'use strict';function ScrollSpy(element,options){this.$body=$(document.body)
this.$scrollElement=$(element).is(document.body)?$(window):$(element)
this.options=$.extend({},ScrollSpy.DEFAULTS,options)
this.selector=(this.options.target||'')+' .nav li > a'
this.offsets=[]
this.targets=[]
this.activeTarget=null
this.scrollHeight=0
this.$scrollElement.on('scroll.bs.scrollspy',$.proxy(this.process,this))
this.refresh()
this.process()}
ScrollSpy.VERSION='3.4.1'
ScrollSpy.DEFAULTS={offset:10}
ScrollSpy.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)}
ScrollSpy.prototype.refresh=function(){var that=this
var offsetMethod='offset'
var offsetBase=0
this.offsets=[]
this.targets=[]
this.scrollHeight=this.getScrollHeight()
if(!$.isWindow(this.$scrollElement[0])){offsetMethod='position'
offsetBase=this.$scrollElement.scrollTop()}
this.$body.find(this.selector).map(function(){var $el=$(this)
var href=$el.data('target')||$el.attr('href')
var $href=/^#./.test(href)&&$(href)
return($href&&$href.length&&$href.is(':visible')&&[[$href[offsetMethod]().top+offsetBase,href]])||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){that.offsets.push(this[0])
that.targets.push(this[1])})}
ScrollSpy.prototype.process=function(){var scrollTop=this.$scrollElement.scrollTop()+this.options.offset
var scrollHeight=this.getScrollHeight()
var maxScroll=this.options.offset+scrollHeight-this.$scrollElement.height()
var offsets=this.offsets
var targets=this.targets
var activeTarget=this.activeTarget
var i
if(this.scrollHeight!=scrollHeight){this.refresh()}
if(scrollTop>=maxScroll){return activeTarget!=(i=targets[targets.length-1])&&this.activate(i)}
if(activeTarget&&scrollTop<offsets[0]){this.activeTarget=null
return this.clear()}
for(i=offsets.length;i--;){activeTarget!=targets[i]&&scrollTop>=offsets[i]&&(offsets[i+1]===undefined||scrollTop<offsets[i+1])&&this.activate(targets[i])}}
ScrollSpy.prototype.activate=function(target){this.activeTarget=target
this.clear()
var selector=this.selector+'[data-target="'+target+'"],'+this.selector+'[href="'+target+'"]'
var active=$(selector).parents('li').addClass('active')
if(active.parent('.dropdown-menu').length){active=active.closest('li.dropdown').addClass('active')}
active.trigger('activate.bs.scrollspy')}
ScrollSpy.prototype.clear=function(){$(this.selector).parentsUntil(this.options.target,'.active').removeClass('active')}
function Plugin(option){return this.each(function(){var $this=$(this)
var data=$this.data('bs.scrollspy')
var options=typeof option=='object'&&option
if(!data)$this.data('bs.scrollspy',(data=new ScrollSpy(this,options)))
if(typeof option=='string')data[option]()})}
var old=$.fn.scrollspy
$.fn.scrollspy=Plugin
$.fn.scrollspy.Constructor=ScrollSpy
$.fn.scrollspy.noConflict=function(){$.fn.scrollspy=old
return this}
$(window).on('load.bs.scrollspy.data-api',function(){$('[data-spy="scroll"]').each(function(){var $spy=$(this)
Plugin.call($spy,$spy.data())})})}(jQuery);+function($){'use strict';var Tab=function(element){this.element=$(element)}
Tab.VERSION='3.4.1'
Tab.TRANSITION_DURATION=150
Tab.prototype.show=function(){var $this=this.element
var $ul=$this.closest('ul:not(.dropdown-menu)')
var selector=$this.data('target')
if(!selector){selector=$this.attr('href')
selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,'')}
if($this.parent('li').hasClass('active'))return
var $previous=$ul.find('.active:last a')
var hideEvent=$.Event('hide.bs.tab',{relatedTarget:$this[0]})
var showEvent=$.Event('show.bs.tab',{relatedTarget:$previous[0]})
$previous.trigger(hideEvent)
$this.trigger(showEvent)
if(showEvent.isDefaultPrevented()||hideEvent.isDefaultPrevented())return
var $target=$(document).find(selector)
this.activate($this.closest('li'),$ul)
this.activate($target,$target.parent(),function(){$previous.trigger({type:'hidden.bs.tab',relatedTarget:$this[0]})
$this.trigger({type:'shown.bs.tab',relatedTarget:$previous[0]})})}
Tab.prototype.activate=function(element,container,callback){var $active=container.find('> .active')
var transition=callback&&$.support.transition&&($active.length&&$active.hasClass('fade')||!!container.find('> .fade').length)
function next(){$active.removeClass('active').find('> .dropdown-menu > .active').removeClass('active').end().find('[data-toggle="tab"]').attr('aria-expanded',!1)
element.addClass('active').find('[data-toggle="tab"]').attr('aria-expanded',!0)
if(transition){element[0].offsetWidth
element.addClass('in')}else{element.removeClass('fade')}
if(element.parent('.dropdown-menu').length){element.closest('li.dropdown').addClass('active').end().find('[data-toggle="tab"]').attr('aria-expanded',!0)}
callback&&callback()}
$active.length&&transition?$active.one('bsTransitionEnd',next).emulateTransitionEnd(Tab.TRANSITION_DURATION):next()
$active.removeClass('in')}
function Plugin(option){return this.each(function(){var $this=$(this)
var data=$this.data('bs.tab')
if(!data)$this.data('bs.tab',(data=new Tab(this)))
if(typeof option=='string')data[option]()})}
var old=$.fn.tab
$.fn.tab=Plugin
$.fn.tab.Constructor=Tab
$.fn.tab.noConflict=function(){$.fn.tab=old
return this}
var clickHandler=function(e){e.preventDefault()
Plugin.call($(this),'show')}
$(document).on('click.bs.tab.data-api','[data-toggle="tab"]',clickHandler).on('click.bs.tab.data-api','[data-toggle="pill"]',clickHandler)}(jQuery);+function($){'use strict';var Affix=function(element,options){this.options=$.extend({},Affix.DEFAULTS,options)
var target=this.options.target===Affix.DEFAULTS.target?$(this.options.target):$(document).find(this.options.target)
this.$target=target.on('scroll.bs.affix.data-api',$.proxy(this.checkPosition,this)).on('click.bs.affix.data-api',$.proxy(this.checkPositionWithEventLoop,this))
this.$element=$(element)
this.affixed=null
this.unpin=null
this.pinnedOffset=null
this.checkPosition()}
Affix.VERSION='3.4.1'
Affix.RESET='affix affix-top affix-bottom'
Affix.DEFAULTS={offset:0,target:window}
Affix.prototype.getState=function(scrollHeight,height,offsetTop,offsetBottom){var scrollTop=this.$target.scrollTop()
var position=this.$element.offset()
var targetHeight=this.$target.height()
if(offsetTop!=null&&this.affixed=='top')return scrollTop<offsetTop?'top':!1
if(this.affixed=='bottom'){if(offsetTop!=null)return(scrollTop+this.unpin<=position.top)?!1:'bottom'
return(scrollTop+targetHeight<=scrollHeight-offsetBottom)?!1:'bottom'}
var initializing=this.affixed==null
var colliderTop=initializing?scrollTop:position.top
var colliderHeight=initializing?targetHeight:height
if(offsetTop!=null&&scrollTop<=offsetTop)return'top'
if(offsetBottom!=null&&(colliderTop+colliderHeight>=scrollHeight-offsetBottom))return'bottom'
return!1}
Affix.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset
this.$element.removeClass(Affix.RESET).addClass('affix')
var scrollTop=this.$target.scrollTop()
var position=this.$element.offset()
return(this.pinnedOffset=position.top-scrollTop)}
Affix.prototype.checkPositionWithEventLoop=function(){setTimeout($.proxy(this.checkPosition,this),1)}
Affix.prototype.checkPosition=function(){if(!this.$element.is(':visible'))return
var height=this.$element.height()
var offset=this.options.offset
var offsetTop=offset.top
var offsetBottom=offset.bottom
var scrollHeight=Math.max($(document).height(),$(document.body).height())
if(typeof offset!='object')offsetBottom=offsetTop=offset
if(typeof offsetTop=='function')offsetTop=offset.top(this.$element)
if(typeof offsetBottom=='function')offsetBottom=offset.bottom(this.$element)
var affix=this.getState(scrollHeight,height,offsetTop,offsetBottom)
if(this.affixed!=affix){if(this.unpin!=null)this.$element.css('top','')
var affixType='affix'+(affix?'-'+affix:'')
var e=$.Event(affixType+'.bs.affix')
this.$element.trigger(e)
if(e.isDefaultPrevented())return
this.affixed=affix
this.unpin=affix=='bottom'?this.getPinnedOffset():null
this.$element.removeClass(Affix.RESET).addClass(affixType).trigger(affixType.replace('affix','affixed')+'.bs.affix')}
if(affix=='bottom'){this.$element.offset({top:scrollHeight-height-offsetBottom})}}
function Plugin(option){return this.each(function(){var $this=$(this)
var data=$this.data('bs.affix')
var options=typeof option=='object'&&option
if(!data)$this.data('bs.affix',(data=new Affix(this,options)))
if(typeof option=='string')data[option]()})}
var old=$.fn.affix
$.fn.affix=Plugin
$.fn.affix.Constructor=Affix
$.fn.affix.noConflict=function(){$.fn.affix=old
return this}
$(window).on('load',function(){$('[data-spy="affix"]').each(function(){var $spy=$(this)
var data=$spy.data()
data.offset=data.offset||{}
if(data.offsetBottom!=null)data.offset.bottom=data.offsetBottom
if(data.offsetTop!=null)data.offset.top=data.offsetTop
Plugin.call($spy,data)})})}(jQuery);
/* rank:50standard - minify:ok. lib/jquery_tiki/tiki-bootstrapmodalfix.js */
$.fn.modal.Constructor.prototype.enforceFocus=function(){$(document).off('focusin.bs.modal').on('focusin.bs.modal',$.proxy(function(e){if(this.$element[0]!==e.target&&!this.$element.has(e.target).length&&!$(e.target.parentNode).hasClass('cke_dialog_ui_input_select')&&!$(e.target.parentNode).hasClass('cke_dialog_ui_input_text')&&!$(e.target).hasClass('ui-datepicker-month')&&!$(e.target).hasClass('ui-datepicker-year')){this.$element.trigger('focus')}},this))};
/* rank:50standard - minify:ok. lib/jquery_tiki/iconsets.js */
(function($){$.fn.getIcon=function(name){var icon=jqueryTiki.iconset.icons[name],$output=$(),attr="";if(!icon){if(jqueryTiki.iconset.defaults.indexOf(name)>-1){icon={id:name}}}
if(icon){icon.tag=icon.tag||jqueryTiki.iconset.tag;icon.prepend=icon.prepend||jqueryTiki.iconset.prepend;icon.append=icon.append||jqueryTiki.iconset.append;$output=$("<"+icon.tag+">");attr=icon.prepend+icon.id+icon.append;if(icon.tag==="img"){$output.attr("src",attr);$output=$("<span>").addClass("icon").addClass("icon-"+name).append($output)}else{$output.addClass(attr).addClass("icon").addClass("icon-"+name)}}else{$output=$().getIcon("warning");console.log("iconset: icon not found:"+name)}
return $output};$.fn.setIcon=function(name){return $(this).replaceWith($(this).getIcon(name))}})(jQuery);
/* rank:50standard - minify:ok. lib/tiki-js.js */
function tr(str){if(typeof lang!=="undefined"&&typeof lang[str]=='string'){return lang[str]}else{return str}}
var lang={};function browser(){var b=navigator.appName;if(b=="Netscape"){this.b="ns"}
else{this.b=b}
this.version=navigator.appVersion;this.v=parseInt(this.version,10);this.ns=(this.b=="ns"&&this.v>=5);this.op=(navigator.userAgent.indexOf('Opera')>-1);this.safari=(navigator.userAgent.indexOf('Safari')>-1);this.op7=(navigator.userAgent.indexOf('Opera')>-1&&this.v>=7);this.ie56=(this.version.indexOf('MSIE 5')>-1||this.version.indexOf('MSIE 6')>-1);this.ie567=(this.version.indexOf('MSIE 5')>-1||this.version.indexOf('MSIE 6')>-1||this.version.indexOf('MSIE 7')>-1);this.iewin=(this.ie56&&navigator.userAgent.indexOf('Windows')>-1);this.iewin7=(this.ie567&&navigator.userAgent.indexOf('Windows')>-1);this.iemac=(this.ie56&&navigator.userAgent.indexOf('Mac')>-1);this.moz=(navigator.userAgent.indexOf('Mozilla')>-1);this.moz13=(navigator.userAgent.indexOf('Mozilla')>-1&&navigator.userAgent.indexOf('1.3')>-1);this.oldmoz=(navigator.userAgent.indexOf('Mozilla')>-1&&navigator.userAgent.indexOf('1.4')>-1||navigator.userAgent.indexOf('Mozilla')>-1&&navigator.userAgent.indexOf('1.5')>-1||navigator.userAgent.indexOf('Mozilla')>-1&&navigator.userAgent.indexOf('1.6')>-1);this.ns6=(navigator.userAgent.indexOf('Netscape6')>-1);this.docom=(this.ie56||this.ns||this.iewin||this.op||this.iemac||this.safari||this.moz||this.oldmoz||this.ns6)}
function toggle_dynamic_var(name){var displayContainer=document.getElementById('dyn_'+name+'_display');var editContainer=document.getElementById('dyn_'+name+'_edit');var form=document.createElement('form');form.setAttribute('method','post');form.setAttribute('name','dyn_vars');form.style.display="inline";editContainer.parentNode.insertBefore(form,editContainer);form.appendChild(editContainer);if(displayContainer.style.display=="none"){editContainer.style.display="none";displayContainer.style.display="inline"}else{displayContainer.style.display="none";editContainer.style.display="inline"}}
function chgArtType(){var articleType=document.getElementById('articletype').value;var typeProperties=articleTypes[articleType];var propertyList=['show_topline','y','show_subtitle','y','show_linkto','y','show_author','y','use_ratings','y','heading_only','n','show_image_caption','y','show_pre_publ','y','show_post_expire','y','show_image','y','show_expdate','y'];if(typeof articleCustomAttributes!='undefined'){propertyList=propertyList.concat(articleCustomAttributes)}
var l=propertyList.length,property,value,display;for(var i=0;i<l;i++){property=propertyList[i++];value=propertyList[i];if(typeProperties[property]==value||(!typeProperties[property]&&value=="n")){display=""}else{display="none"}
if(document.getElementById(property)){document.getElementById(property).style.display=display}else{var j=1;while(document.getElementById(property+'_'+j)){document.getElementById(property+'_'+j).style.display=display;j++}}}}
function toggleSpan(id){$("#"+id).toggle()}
function toggleBlock(id){$("#"+id).toggle()}
function toggleTrTd(id){$("#"+id).toggle()}
function changeText(el,newText){if(el.innerText){el.innerText=newText}else if(el.firstChild&&el.firstChild.nodeValue){el.firstChild.nodeValue=newText}}
function toggleToc(){var toc=document.getElementById('toc').getElementsByTagName('ul')[0];if(toc&&toc.style.display=='none'){toc.style.display='block'}else{toc.style.display='none'}}
function chgTrkFld(f,o){var opt=0;document.getElementById('z').style.display="none";document.getElementById('zDescription').style.display="";document.getElementById('zStaticText').style.display="none";document.getElementById('zStaticTextToolbars').style.display="none";for(var i=0;i<f.length;i++){var c=f.charAt(i);if(document.getElementById(c)){var ichoiceParent=document.getElementById('itemChoicesRow');var ichoice=document.getElementById(c+'itemChoices');if(c==o){document.getElementById(c).style.display="";document.getElementById('z').style.display="block";if(c=='S'){document.getElementById('zDescription').style.display="none";document.getElementById('zStaticText').style.display="";document.getElementById('zStaticTextToolbars').style.display=""}
if(ichoice){ichoice.style.display="";ichoiceParent.style.display=""}else{ichoiceParent.style.display="none"}}else{document.getElementById(c).style.display="none";if(ichoice){ichoice.style.display="none"}}}}}
function chgTrkLingual(item){document.getElementById("multilabelRow").style.display=(item=='t'||item=='a')?'':'none'}
function multitoggle(f,o){for(var i=0;i<f.length;i++){if(document.getElementById('fid'+f[i])){if(f[i]==o){document.getElementById('fid'+f[i]).style.display="block"}else{document.getElementById('fid'+f[i]).style.display="none"}}}}
function setMenuCon(foo){var it=foo.split(",");document.getElementById('menu_url').value=it[0];document.getElementById('menu_name').value=it[1];if(it[2]){document.getElementById('menu_section').value=it[2]}else{document.getElementById('menu_section').value=''}
if(it[3]){document.getElementById('menu_perm').value=it[3]}else{document.getElementById('menu_perm').value=''}
flip('weburls')}
function genPass(w1){var lower,upper,num,other,l,p,pstr,i,letter,j,temp;lower='abcdefghijklmnopqrstuvwxyz';upper='ABCDEFGHIJKLMNOPQRSTUVWXYZ';num='0123456789';other='_$%#!@*+';l=8;p=[];for(i=0;i<l;i++){if(i<2){letter=lower.charAt(Math.round(Math.random()*(lower.length-1)))}else if(i<4){letter=upper.charAt(Math.round(Math.random()*(upper.length-1)))}else if(i<6){letter=num.charAt(Math.round(Math.random()*(num.length-1)))}else{letter=other.charAt(Math.round(Math.random()*(other.length-1)))}
p[i]=letter}
for(i=p.length-1;i>0;i--){j=Math.floor(Math.random()*(i+1));temp=p[i];p[i]=p[j];p[j]=temp}
pstr=p.join('');document.getElementById(w1).value=pstr}
function setUserModule(foo1){document.getElementById('usermoduledata').value=foo1}
function replaceLimon(vec){document.getElementById(vec[0]).value=document.getElementById(vec[0]).value.replace(vec[1],vec[2])}
function setSelectionRange(textarea,selectionStart,selectionEnd){var $textareaEditor=syntaxHighlighter.get($(textarea));if($textareaEditor){syntaxHighlighter.setSelection($textareaEditor,selectionStart,selectionEnd);return}
$(textarea).selection(selectionStart,selectionEnd)}
function getTASelection(textarea){var $textareaEditor=syntaxHighlighter.get($(textarea));if($textareaEditor){return $textareaEditor.getSelection()}
var ta_id=$(textarea).attr("id"),r,cked,output;if(cked=typeof CKEDITOR!=='undefined'?CKEDITOR.instances[ta_id]:null){return cked.getSelection().getSelectedText()}else{if(typeof $(textarea).attr("selectionStartSaved")!='undefined'&&$(textarea).attr("selectionStartSaved")){return textarea.value.substring($(textarea).attr("selectionStartSaved"),$(textarea).attr("selectionEndSaved"))}else if((typeof textarea!='undefined')&&(typeof textarea.selectionStart!='undefined')){return textarea.value.substring(textarea.selectionStart,textarea.selectionEnd)}else{r=document.selection.createRange();return r.text}}}
var ieFirstTimeInsertKludge=null;function storeTASelection(area_id){if(typeof CKEDITOR==='undefined'||typeof CKEDITOR.instances[area_id]==='undefined'){var $el=$("#"+area_id);var sel=$el.selection();$el.attr("selectionStartSaved",sel.start).attr("selectionEndSaved",sel.end).attr("scrollTopSaved",$el.attr("scrollTop"))}
if(ieFirstTimeInsertKludge===null){ieFirstTimeInsertKludge=!0}}
function setCaretToPos(textarea,pos){setSelectionRange(textarea,pos,pos)}
function getCaretPos(textarea){var $textareaEditor=syntaxHighlighter.get($(textarea));if($textareaEditor){var endPoint=$textareaEditor.cursorCoords();return(endPoint.x?endPoint.x:0)}
if(typeof textarea.selectionEnd!='undefined'){return textarea.selectionEnd}else if(document.selection){textarea.focus();var range=document.selection.createRange();if(range===null){return 0}
var re=textarea.createTextRange();var rc=re.duplicate();re.moveToBookmark(range.getBookmark());rc.setEndPoint('EndToStart',re);return rc.text.length?rc.text.length:0}else{return 0}}
function insertAt(elementId,replaceString,blockLevel,perLine,replaceSelection){var $textarea=$('#'+elementId);var $textareaEditor=syntaxHighlighter.get($textarea);var toBeReplaced=/text|page|area_id/g;var hiddenParents=$textarea.parents('fieldset:hidden:last');if(hiddenParents.length){hiddenParents.show()}
if($textareaEditor){syntaxHighlighter.insertAt($textareaEditor,replaceString,perLine,blockLevel,replaceSelection);return}else if(typeof CKEDITOR!=='undefined'&&CKEDITOR.instances[elementId]){var cked=CKEDITOR.instances[elementId];if(cked){var isPlugin=replaceString.match(/^\s?\{/m);if(isPlugin){isPlugin=replaceString.match(/\}\s?$/m)}
isPlugin=isPlugin&&isPlugin.length>0;var sel=cked.getSelection(),rng;if(sel){rng=sel.getRanges();if(rng.length){rng=rng[0]}}
var plugin_el,com;if(isPlugin&&rng&&!rng.collapsed){com=cked.getSelection().getStartElement();if(typeof com!=='undefined'&&com&&com.$){while(!$(com.$).hasClass("tiki_plugin")&&com.$.nextSibling&&com.$!==rng.endContainer.$){com=new CKEDITOR.dom.element(com.$.nextSibling);if($(com.$).hasClass("tiki_plugin")||$(com.$).find(".tiki_plugin").length===0){break}}
if(!$(com.$).hasClass("tiki_plugin")){plugin_el=$(com.$).find(".tiki_plugin");if(plugin_el.length==1){com=new CKEDITOR.dom.element(plugin_el[0])}else{plugin_el=$(com.$).parents(".tiki_plugin:last");if(plugin_el.length==1){com=new CKEDITOR.dom.element(plugin_el[0])}else{var plugin_type=replaceString.match(/^\s?\{([\w]+)/);if(plugin_type.length>1){plugin_type=plugin_type[1].toLowerCase()}
plugin_el=$(com.$).find("[plugin="+plugin_type+"].tiki_plugin");if(plugin_el.length==1){com=new CKEDITOR.dom.element(plugin_el[0])}else{}}}}}
if(com&&com.hasClass("tiki_plugin")){var html=cked.getData().replace(com.data("syntax"),replaceString);cked.setData(html);return}}
try{cked.insertText(replaceString)}catch(e){prompt(tr("Development notice: The editor selection has been lost, here is the text to insert."),replaceString);return}
if(typeof cked.reParse==="function"&&(isPlugin||replaceString.match(/^\s?\(\(.*?\)\)\s?$/)||replaceString.match(/^||.*||$/))){var bookmarks=cked.getSelection().createBookmarks2(!0);cked.reParse();cked.getSelection().selectBookmarks(bookmarks)}}
return}
if(!$textarea.length&&elementId==="fgal_picker"){$(".cke_dialog_contents").find("input:first").val(replaceString.replace("&amp;","&"));return}else if($textarea.is(":input")&&elementId==="fgal_picker_id"){$textarea.val(replaceString);return}
$textarea.focus();var val=$textarea.val();var selection=$textarea.selection();var scrollTop=$textarea[0].scrollTop;if(selection.start===0&&selection.end===0&&typeof $textarea.attr("selectionStartSaved")!='undefined'){if($textarea.attr("selectionStartSaved")){selection.start=$textarea.attr("selectionStartSaved");selection.end=$textarea.attr("selectionEndSaved");if($textarea.attr("scrollTopSaved")){scrollTop=$textarea.attr("scrollTopSaved");$textarea.attr("scrollTopSaved","")}
$textarea.attr("selectionStartSaved","").attr("selectionEndSaved","")}else{selection.start=getCaretPos($textarea[0]);selection.end=selection.start}}
var lines,startoff=0,endoff=0;if($textarea[0].createTextRange&&$textarea[0].value!==val){val=$textarea[0].value;if(val.substring(selection.start,selection.start+1)==="\n"){selection.start++}
lines=val.substring(0,selection.start).match(/\r\n/g);if(lines){startoff-=lines.length}}
var selectionStart=selection.start;var selectionEnd=selection.end;if(blockLevel){selectionStart=val.lastIndexOf("\n",selectionStart-1)+1;var blockEnd=val.indexOf("\r",selectionEnd);if(blockEnd<0){selectionEnd=val.indexOf("\n",selectionEnd)}else{selectionEnd=blockEnd}
if(selectionEnd<0){selectionEnd=val.length}}
var newString='';if((selectionStart!=selectionEnd)&&!$textareaEditor){if(perLine){lines=val.substring(selectionStart,selectionEnd).split("\n");for(var k=0;lines.length>k;++k){if(lines[k].length!==0){newString+=replaceString.replace(toBeReplaced,lines[k])}
if(k!=lines.length-1){newString+="\n"}}}else{if(replaceSelection){newString=replaceString}else if(replaceString.match(toBeReplaced)){newString=replaceString.replace(toBeReplaced,val.substring(selectionStart,selectionEnd))}else{newString=replaceString+'\n'+val.substring(selectionStart,selectionEnd)}}
$textarea.val(val.substring(0,selectionStart)+newString+val.substring(selectionEnd));lines=newString.match(/\r\n/g);if(lines){endoff-=lines.length}
setSelectionRange($textarea[0],selectionStart+startoff,selectionStart+startoff+newString.length+endoff)}else{$textarea.val(val.substring(0,selectionStart)+replaceString+val.substring(selectionEnd));lines=replaceString.match(/\r\n/g);if(lines){endoff-=lines.length}
setCaretToPos($textarea[0],selectionStart+startoff+replaceString.length+endoff)}
$textarea.attr("scrollTop",scrollTop);if(this.iewin&&ieFirstTimeInsertKludge){setTimeout(function(){if(newString.length){setSelectionRange($textarea[0],parseInt(selectionStart,10)+parseInt(startoff,10),parseInt(selectionStart,10)+parseInt(startoff,10)+newString.length+parseInt(endoff,10))}
$textarea.attr("scrollTop",scrollTop)},1000);ieFirstTimeInsertKludge=!1}
if(hiddenParents.length){hiddenParents.hide()}
if(typeof auto_save==="function"){auto_save(elementId)}}
function setUserModuleFromCombo(id,textarea){document.getElementById(textarea).value=document.getElementById(textarea).value+document.getElementById(id).options[document.getElementById(id).selectedIndex].value}
function toggle(foo){var display=$("#"+foo).css('display');if(display=="none"){show(foo,!0,"menu")}else{if(display=="block"){hide(foo,!0,"menu")}else{show(foo,!0,"menu")}}}
function flip_thumbnail_status(id){var elem=document.getElementById(id);if(elem.className=='thumbnailcontener'){elem.className+=' thumbnailcontenerchecked'}else{elem.className='thumbnailcontener'}}
function flip_class(itemid,class1,class2){var elem=document.getElementById(itemid);if(elem&&typeof elem!='undefined'){elem.className=elem.className==class1?class2:class1;setCookie('flip_class_'+itemid,elem.className)}}
function tikitabs(focus,tabElement){var container,ofocus=focus;if(typeof tabElement==="undefined"){container=$(".tabset:first")}else{container=$(tabElement).parents(".tabset:first")}
if(focus>$("> .tabs .tabmark",container).length){focus=1}
while($("> .tabs .tabmark.tab"+focus+":first",container).is(":hidden")){focus++}
if($("> .tabs .tabmark.tab"+focus+":first",container).length===0){focus=ofocus}
$("> .tabs .tabmark:not(.tab"+focus+":first)",container).removeClass("tabactive");$("> .tabs .tabmark.tab"+focus+":first",container).addClass("tabactive");$("> .tabcontent:not(.content"+focus+":first)",container).hide();$("> .tabcontent.content"+focus+":first",container).show();setCookie($(".tabs:first",container).data("name"),focus,"tabs","session")}
function setfolderstate(foo,def,img,status){if(!status){status=getCookie(foo,"menu","o")}
if(!img){if(document.getElementsByName('icn'+foo)[0].src.search(/[\\\/]/)){img=document.getElementsByName('icn'+foo)[0].src.replace(/.*[\\\/]([^\\\/]*)$/,"$1")}else{img='folder.png'}}
var src=img;if(status=='c'){hide(foo,!1,"menu")}else{show(foo,!1,"menu")}
if(status=='c'&&def!='d'){src=src.replace(/^o/,'')}else if(status!='c'&&def=='d'&&src.indexOf('o')!==0){src='o'+img}
document.getElementsByName('icn'+foo)[0].src=document.getElementsByName('icn'+foo)[0].src.replace(/[^\\\/]*$/,src)}
function setheadingstate(foo){var status=getCookie(foo,"showhide_headings");var $foo=$("#"+foo);if(status=="o"){$foo.show();collapseSign("flipper"+foo)}else if(status=="c"){$foo.hide();expandSign("flipper"+foo)}}
function setsectionstate(foo,def,img,status){var src;if(!status){status=getCookie(foo,"menu","o")}
if(status=="o"){show(foo);if(img){src="o"+img}}else if(status!="c"&&def!='d'){show(foo);if(img){src="o"+img}}else{hide(foo);if(img){src=img}}
if(img&&document.getElementsByName('icn'+foo).length){document.getElementsByName('icn'+foo)[0].src=document.getElementsByName('icn'+foo)[0].src.replace(/[^\\\/]*$/,src)}}
function icntoggle(foo,img){var $icn=$("#icn"+foo);var src=$icn.attr("src");if(!src){src=""}
if(!img){if(src.search(/[\\\/]/)){img=src.replace(/.*[\\\/]([^\\\/]*)$/,"$1")}else{img='folder.png'}}
if($("#"+foo+":hidden").length){show(foo,!0,"menu");$icn.attr("src",src.replace(/[^\\\/]*$/,'o'+img))}else{hide(foo,!0,"menu");img=img.replace(/(^|\/|\\)o(.*)$/,'$1$2');$icn.attr("src",src.replace(/[^\\\/]*$/,img))}}
function icontoggle(foo,clicked){if($("#"+foo+":hidden").length){show(foo,!0,"menu")}else{hide(foo,!0,"menu")}
var id=clicked.id;$('#'+id+' .toggle-open').toggle();$('#'+id+' .toggle-closed').toggle();return!1}
function getHttpRequest(method,url,async)
{if(async===undefined){async=!1}
var request;if(window.XMLHttpRequest){request=new XMLHttpRequest()}else if(window.ActiveXObject)
{try
{request=new ActiveXObject("Microsoft.XMLHTTP")}
catch(ex)
{request=new ActiveXObject("MSXML2.XMLHTTP")}}
else{return!1}
if(!request){return!1}
request.open(method,url,async);return request}
function setSessionVar(name,value){var request=getHttpRequest("GET","tiki-cookie-jar.php?"+name+"="+tiki_encodeURIComponent(value));request.send('');if(tiki_cookie_jar){tiki_cookie_jar[name]=value}}
function setCookie(name,value,section,expires,path,domain,secure){if(getCookie(name,section)==value){return!0}
if(!expires){expires=new Date();expires.setFullYear(expires.getFullYear()+1)}
if(expires==="session"){expires=""}
if(typeof jqueryTiki!="undefined"&&jqueryTiki.no_cookie){var request=getHttpRequest("GET","tiki-cookie-jar.php?"+name+"="+encodeURIComponent(value));try{request.send('');tiki_cookie_jar[name]=value;return!0}
catch(ex){setCookieBrowser(name,value,section,expires,path,domain,secure);return!1}}
else{setCookieBrowser(name,value,section,expires,path,domain,secure);return!0}}
function setCookieBrowser(name,value,section,expires,path,domain,secure){if(section){var valSection=getCookie(section);var name2="@"+name+":";if(valSection){if(new RegExp(name2).test(valSection)){valSection=valSection.replace(new RegExp(name2+"[^@;]*"),name2+value)}else{valSection=valSection+name2+value}
setCookieBrowser(section,valSection,null,expires,path,domain,secure)}
else{valSection=name2+value;setCookieBrowser(section,valSection,null,expires,path,domain,secure)}}
else{var curCookie=name+"="+encodeURIComponent(value)+((expires)?"; expires="+expires.toGMTString():"")+((path)?"; path="+path:"")+((domain)?"; domain="+domain:"")+((secure)?"; secure":"");document.cookie=curCookie}}
function getCookie(name,section,defval){if(typeof jqueryTiki!="undefined"&&jqueryTiki.no_cookie&&(window.XMLHttpRequest||window.ActiveXObject)&&typeof tiki_cookie_jar!="undefined"&&tiki_cookie_jar.length>0){if(typeof tiki_cookie_jar[name]=="undefined"){return defval}
return tiki_cookie_jar[name]}
else{return getCookieBrowser(name,section,defval)}}
function getCookieBrowser(name,section,defval){if(typeof defval==="undefined"){defval=null}
if(section){var valSection=getCookieBrowser(section);if(valSection){var name2="@"+name+":";var val=valSection.match(new RegExp(name2+"([^@;]*)"));if(val){return decodeURIComponent(val[1])}else{return defval}}else{return defval}}else{var dc=document.cookie;var prefix=name+"=";var begin=dc.indexOf("; "+prefix);if(begin==-1){begin=dc.indexOf(prefix);if(begin!==0){return defval}}else{begin+=2}
var end=document.cookie.indexOf(";",begin);if(end==-1){end=dc.length}
return decodeURIComponent(dc.substring(begin+prefix.length,end))}}
function deleteCookie(name,section,expires,path,domain,secure){if(section){var valSection=getCookieBrowser(section);var name2="@"+name+":";if(valSection){if(new RegExp(name2).test(valSection)){valSection=valSection.replace(new RegExp(name2+"[^@;]*"),"");setCookieBrowser(section,valSection,null,expires,path,domain,secure)}}}
else{document.cookie=name+"="+((path)?"; path="+path:"")+((domain)?"; domain="+domain:"")+"; expires=Thu, 01-Jan-70 00:00:01 GMT"}}
function fixDate(date){var base=new Date(0);var skew=base.getTime();if(skew>0){date.setTime(date.getTime()-skew)}}
function flipWithSign(foo){if(document.getElementById(foo).style.display=="none"){show(foo,!0,"showhide_headings");collapseSign("flipper"+foo)}else{hide(foo,!0,"showhide_headings");expandSign("flipper"+foo)}}
function setFlipWithSign(foo){if(getCookie(foo,"showhide_headings","o")=="o"){collapseSign("flipper"+foo);show(foo)}else{expandSign("flipper"+foo);hide(foo)}}
function expandSign(foo){if(document.getElementById(foo)){document.getElementById(foo).firstChild.nodeValue="[+]"}}
function collapseSign(foo){if(document.getElementById(foo)){document.getElementById(foo).firstChild.nodeValue="[-]"}}
function go(o){if(o.options[o.selectedIndex].value!==""){location.replace(o.options[o.selectedIndex].value);o.options[o.selectedIndex]=1}
return!1}
function targetBlank(url,mode){var features='menubar=yes,toolbar=yes,location=yes,directories=yes,fullscreen=no,titlebar=yes,hotkeys=yes,status=yes,scrollbars=yes,resizable=yes';switch(mode){case 'nw':break;case 'popup':features='menubar=no,toolbar=no,location=no,directories=no,fullscreen=no,titlebar=no,hotkeys=no,status=no,scrollbars=yes,resizable=yes';break;default:break}
window.open(url,'_blank',features)}
function confirmTheLink(theLink,theMsg)
{if(typeof(window.opera)!='undefined'){return!0}
var is_confirmed=confirm(theMsg);return is_confirmed}
function insertImgFile(elementId,fileId,oldfileId,type,page,attach_comment){var textarea=$('#'+elementId)[0];var fileup=$('input[name='+fileId+']')[0];var oldfile=$('input[name='+oldfileId+']')[0];var prefixEl=$('input[name=prefix]')[0];var prefix="img/wiki_up/";if(!textarea||!fileup){return}
if(prefixEl){prefix=prefixEl.value}
var filename=fileup.value,dirs,str;var oldfilename=oldfile.value;if(filename==oldfilename||filename===""){return}
oldfile.value=filename;if(filename.indexOf("/")>=0){dirs=filename.split("/");filename=dirs[dirs.length-1]}
if(filename.indexOf("\\")>=0){dirs=filename.split("\\");filename=dirs[dirs.length-1]}
if(filename.indexOf(":")>=0){dirs=filename.split(":");filename=dirs[dirs.length-1]}
if(type=="file"){str="{file name=\""+filename+"\"";var desc=$('#'+attach_comment).val();if(desc){str=str+" desc=\""+desc+"\""}
str=str+"}"}else{str="{img src=\"img/wiki_up/"+filename+"\" }\n"}
insertAt(elementId,str)}
var img_form_count=2,needToConfirm=!1;function addImgForm(){var new_text=document.createElement('span');new_text.setAttribute('id','picfile'+img_form_count);new_text.innerHTML='<input name=\'picfile'+img_form_count+'\' type=\'file\' onchange=\'insertImgFile("editwiki","picfile'+img_form_count+'","hasAlreadyInserted","img")\'/><br />';document.getElementById('new_img_form').appendChild(new_text);needToConfirm=!0;img_form_count ++}
browser();window.name='tiki';var fgals_window=null;function openFgalsWindow(filegal_manager_url,reload){if(fgals_window&&typeof fgals_window.document!="undefined"&&!fgals_window.closed){if(reload){fgals_window.location.replace(filegal_manager_url)}
fgals_window.focus()}else{fgals_window=window.open(filegal_manager_url,'_blank','menubar=1,scrollbars=1,resizable=1,height=500,width=800,left=50,top=50')}
$(window).on("unload",function(){fgals_window.close()})}
function wordCount(maxSize,source,cpt,message){var formcontent=source.value;var str=formcontent.replace(/^\s+|\s+$/g,'');formcontent=str.split(/[^\S]+/);if(maxSize>0&&formcontent.length>maxSize){alert(message);source.value=source.value.substr(0,source.value.length-1)}else{document.getElementById(cpt).value=formcontent.length}}
function charCount(maxSize,source,cpt,message){var formcontent=source.value.replace(/(\r\n|\n|\r)/g,'  ');if(maxSize>0&&formcontent.length>maxSize){alert(message);source.value=source.value.substr(0,maxSize)}else{document.getElementById(cpt).value=formcontent.length}}
var m_strUpperCase="ABCDEFGHIJKLMNOPQRSTUVWXYZ";var m_strLowerCase="abcdefghijklmnopqrstuvwxyz";var m_strNumber="0123456789";var m_strCharacters="!@#$%^&*?_~";function checkPassword(strPassword)
{var nScore=0;if(strPassword.length<5)
{nScore+=5}
else if(strPassword.length>4&&strPassword.length<8)
{nScore+=10}
else if(strPassword.length>7)
{nScore+=25}
var nUpperCount=countContain(strPassword,m_strUpperCase);var nLowerCount=countContain(strPassword,m_strLowerCase);var nLowerUpperCount=nUpperCount+nLowerCount;if(nUpperCount===0&&nLowerCount!==0)
{nScore+=10}
else if(nUpperCount!==0&&nLowerCount!==0)
{nScore+=20}
var nNumberCount=countContain(strPassword,m_strNumber);if(nNumberCount==1)
{nScore+=10}
if(nNumberCount>=3)
{nScore+=20}
var nCharacterCount=countContain(strPassword,m_strCharacters);if(nCharacterCount==1)
{nScore+=10}
if(nCharacterCount>1)
{nScore+=25}
if(nNumberCount!==0&&nLowerUpperCount!==0)
{nScore+=2}
if(nNumberCount!==0&&nLowerUpperCount!==0&&nCharacterCount!==0)
{nScore+=3}
if(nNumberCount!==0&&nUpperCount!==0&&nLowerCount!==0&&nCharacterCount!==0)
{nScore+=5}
return nScore}
function runPassword(strPassword,strFieldID)
{var ctlBar=document.getElementById(strFieldID+"_bar");var ctlText=document.getElementById(strFieldID+"_text");var ctlTextInner=document.getElementById(strFieldID+"_text_inner");if(!ctlBar||!ctlText||!ctlTextInner){return}
if(strPassword.length>0){var nScore=checkPassword(strPassword);ctlBar.style.width=nScore+"%";var icon,strText,strColor;if(nScore>=90)
{icon='ok';strText=tr("Very Secure");strColor="#0ca908"}
else if(nScore>=80)
{icon='ok';strText=tr("Secure");strColor="#0ca908"}
else if(nScore>=70)
{icon='ok';strText=tr("Very Strong");strColor="#0ca908"}
else if(nScore>=60)
{icon='ok';strText=tr("Strong");strColor="#0ca908"}
else if(nScore>=40)
{icon='none';strText=tr("Average");strColor="#e3cb00"}
else if(nScore>=25)
{icon='error';strText=tr("Weak");strColor="#ff0000"}
else{icon='error';strText=tr("Very Weak");strColor="#ff0000"}
ctlBar.style.backgroundColor=strColor;$(ctlBar).show();if(icon==='none'){$(ctlText).children('span.icon').hide()}else if(icon==='ok'){$(ctlText).children('span.icon-ok').css('color',strColor).show();$(ctlText).children('span.icon-error').hide()}else if(icon==='error'){$(ctlText).children('span.icon-ok').hide();$(ctlText).children('span.icon-error').css('color',strColor).show()}
$(ctlTextInner).text(tr('Strength')+': '+strText).show()}else{$(ctlText).children().hide();$(ctlTextInner).hide();$(ctlBar).hide()}}
function countContain(strPassword,strCheck)
{var nCount=0,i;for(i=0;i<strPassword.length;i++)
{if(strCheck.indexOf(strPassword.charAt(i))>-1)
{nCount++}}
return nCount}
function checkPasswordsMatch(in1,in2,el){if($(in1).val().length){if($(in1).val()==$(in2).val()){$(el).children('#match').show();$(el).children('#nomatch').hide();return!0}else{$(el).children('#match').hide();$(el).children('#nomatch').show();return!1}}else{$(el).children().hide()}}
function pollsAddOption()
{var newOption=$('<input />').attr('type','text').attr('name','options[]').addClass('form-control');$('#tikiPollsOptions').append($('<div class="col-sm-7 col-sm-offset-3 margin-bottom-sm"></div>').append(newOption))}
function pollsToggleQuickOptions()
{$('#tikiPollsQuickOptions').toggle()}
function hidedisabled(divid,value){if(value=='disabled'){document.getElementById(divid).style.display='none'}else{document.getElementById(divid).style.display='block'}}
function adjustThumbnails(){var i,j,h=0;var t=document.getElementById("thumbnails").childNodes;for(i=0;i<t.length;i++){if(t[i].className=="thumbnailcontener"){var t2=t[i].childNodes;for(j=0;j<t2.length;j++){if(t2[j].className=="thumbnail"){t2[j].style.height="100%";t2[j].style.overflow="visible"}}
if(t[i].offsetHeight>=h){h=t[i].offsetHeight}
t[i].style.height=h+"px"}}
for(i=0;i<t.length;i++){if(t[i].className=="thumbnailcontener"){if(t[i].offsetHeight<=h){t[i].style.height=h+"px"}else{break}}}}
function open_webdav(url){if(typeof ActiveXObject!='undefined'){var EditDocumentButton=new ActiveXObject("SharePoint.OpenDocuments.1");EditDocumentButton.EditDocument(url)}else{prompt(tr('URL to open this file with WebDAV'),url)}}
function ccsValueToInteger(str){var v=str.replace(/[^\d]*$/,"");if(v){v=parseInt(v,10)}
if(isNaN(v)){return 0}else{return v}}
function checkbox_list_check_all(form,list,checking){for(var checkbox in list){document.forms[form].elements[list[checkbox]].checked=checking}}
if(!window.syntaxHighlighter){window.syntaxHighlighter={get:function(){return null}}}
function tiki_encodeURI(rawstr)
{return encodeURI(rawstr)}
function tiki_decodeURI(encstr)
{return decodeURI(encstr.replace(/\+/g," "))}
function tiki_encodeURIComponent(rawstr)
{var str=encodeURIComponent(rawstr);return str}
function tiki_decodeURIComponent(encstr)
{var str=decodeURIComponent(encstr.replace(/\+/g," "));return str}
Date.prototype.toUnix=function(){return Math.round(this.getTime()/1000.0)};var UnixDate=function(unixDate){return new Date(unixDate*1000)};Date.parseUnix=function(date){date=new Date(Date.parse(date));return date.toUnix()};function adjustRating(element,data,vote){var $sibs,$help,$unvote;if(vote==="NULL"){$sibs=$("span > a",$(element).parent());$help=$(element).prev().prev();$unvote=$(element)}else{$sibs=$(element).siblings().addBack();$help=$(element).parent().next();$unvote=$help.nextAll("a")}
for(var i=0;i<$sibs.length;i++){var v=$($sibs[i]).data("vote"),icon="";if(v<=data[0].voteavg&&data[0].numvotes>0){if(data[0].result&&data[0].my_rate==v){icon='star-selected'}else{icon='star'}}else if(v-data[0].voteavg<=0.5&&data[0].numvotes>0){if(data[0].result&&data[0].my_rate==v){icon='star-half-selected'}else{icon='star-half-rating'}}else{if(data[0].result&&data[0].my_rate==v){icon='star-empty-selected'}else{icon='star-empty'}}
$($sibs[i]).find('.icon-'+icon).css('display','inline');$($sibs[i]).find('.icon').not('.icon-'+icon).css('display','none')}
var t=tr("Number of votes:")+" "+data[0].numvotes+", "+tr("Average:")+" "+data[0].voteavg;if(data[0].result){if(data[0].my_rate!="NULL"){t=t+", "+tr("Your rating:")+" "+data[0].my_rate;$unvote.show()}else{$unvote.hide()}}else{t=t+", "+tr("Vote not accepted")}
$help.text("("+data[0].numvotes+")").next().attr("title",t)}
function sendVote(element,itemId,fieldId,vote){$(element).parent().tikiModal(" ");$.getJSON($.service('tracker','vote',{i:itemId,f:fieldId,v:vote}),function(data){$(element).parent().tikiModal();adjustRating(element,data,vote)})}
function parseQuery(str){var arr,pair,key,val,out={},b1,b2,key2;if(str.substr(0,1)==="?"||str.substr(0,1)==="#"){str=str.substr(1)}
arr=str.split("&");for(var i=0;i<arr.length;i++){pair=arr[i].split("=");key=tiki_decodeURIComponent(pair[0]);val=pair.length>1?tiki_decodeURIComponent(pair[1]):"";if((b1=key.indexOf("["))>-1&&(b2=key.substr(b1+1).indexOf("]"))>-1){key2=key.substr(b1+1,b2);key=key.substr(0,b1);if(key2){if(typeof out[key]!="object"){out[key]={}}
out[key][key2]=val}else{if(typeof out[key]!="object"){out[key]=[]}
out[key].push(val)}}else{out[key]=val}}
return out};
/* rank:50standard - minify:ok. lib/jquery_tiki/tiki-jquery.js */
var $jq=$,$window=$(window),$document=$(document);function switchCheckboxes(tform,elements_name,state,hiddenToo){if(hiddenToo==undefined){hiddenToo=!1}
var closeTag;if(hiddenToo){closeTag='"]'}else{closeTag='"]:visible'}
$(tform).contents().find('input[name="'+jQuery.escapeSelector(elements_name)+closeTag).prop('checked',state).change()}
var jqNoAnimElements=['help_sections','ajaxLoading'];function show(foo,f,section){if($.inArray(foo,jqNoAnimElements)>-1||typeof jqueryTiki==='undefined'){$("#"+foo).show()}else if($("#"+foo).hasClass("tabcontent")){showJQ("#"+foo,jqueryTiki.effect_tabs,jqueryTiki.effect_tabs_speed,jqueryTiki.effect_tabs_direction)}else{showJQ("#"+foo,jqueryTiki.effect,jqueryTiki.effect_speed,jqueryTiki.effect_direction)}
if(f){setCookie(foo,"o",section)}}
function hide(foo,f,section){if($.inArray(foo,jqNoAnimElements)>-1||typeof jqueryTiki==='undefined'){$("#"+foo).hide()}else if($("#"+foo).hasClass("tabcontent")){hideJQ("#"+foo,jqueryTiki.effect_tabs,jqueryTiki.effect_tabs_speed,jqueryTiki.effect_tabs_direction)}else{hideJQ("#"+foo,jqueryTiki.effect,jqueryTiki.effect_speed,jqueryTiki.effect_direction)}
if(f){setCookie(foo,"c",section)}}
function flip(foo,style){var $foo=$("#"+foo);if(style&&style!=='block'||foo==='help_sections'||foo==='fgalexplorer'||typeof jqueryTiki==='undefined'){$foo.toggle();if($foo.css('display')==='none'){setSessionVar('show_'+tiki_encodeURIComponent(foo),'n')}else{setSessionVar('show_'+tiki_encodeURIComponent(foo),'y')}}else{if($foo.css("display")==="none"){setSessionVar('show_'+tiki_encodeURIComponent(foo),'y');show(foo)}
else{setSessionVar('show_'+tiki_encodeURIComponent(foo),'n');hide(foo)}}}
function showJQ(selector,effect,speed,dir){if(effect==='none'){$(selector).show()}else if(effect===''||effect==='normal'){$(selector).show(400)}else if(effect=='slide'){$(selector).slideDown(speed)}else if(effect==='fade'){$(selector).fadeIn(speed)}else if(effect.match(/(.*)_ui$/).length>1){$(selector).show(effect.match(/(.*)_ui$/)[1],{direction:dir},speed)}else{$(selector).show()}}
function hideJQ(selector,effect,speed,dir){if(effect==='none'){$(selector).hide()}else if(effect===''||effect==='normal'){$(selector).hide(400)}else if(effect==='slide'){$(selector).slideUp(speed)}else if(effect==='fade'){$(selector).fadeOut(speed)}else if(effect.match(/(.*)_ui$/).length>1){$(selector).hide(effect.match(/(.*)_ui$/)[1],{direction:dir},speed)}else{$(selector).hide()}}
function ajaxLoadingShow(destName){var $dest,$loading,pos,x,y,w,h;if(typeof destName==='string'){$dest=$('#'+destName)}else{$dest=$(destName)}
if($dest.length===0||$dest.parents(":hidden").length>0){return}
$loading=$('#ajaxLoading');pos=$dest.offset();if(pos.left+$dest.width()>$window.width()){w=$window.width()-pos.left}else{w=$dest.width()}
if(pos.top+$dest.height()>$window.height()){h=$window.height()-pos.top}else{h=$dest.height()}
x=pos.left+(w/2)-($loading.width()/2);y=pos.top+(h/2)-($loading.height()/2);$loading.css('left',x).css('top',y);x=pos.left+ccsValueToInteger($dest.css("margin-left"));y=pos.top+ccsValueToInteger($dest.css("margin-top"));w=ccsValueToInteger($dest.css("padding-left"))+$dest.width()+ccsValueToInteger($dest.css("padding-right"));h=ccsValueToInteger($dest.css("padding-top"))+$dest.height()+ccsValueToInteger($dest.css("padding-bottom"));$('#ajaxLoadingBG').css('left',pos.left).css('top',pos.top).width(w).height(h).fadeIn("fast");show('ajaxLoading')}
function ajaxLoadingHide(){hide('ajaxLoading');$('#ajaxLoadingBG').fadeOut("fast")}
function ajaxSubmitEventHandler(successCallback){return function(e){e.preventDefault();var form=this,act;act=$(form).attr('action');var modal=$(form).closest('.modal-dialog');if(!act){act=url}
if($(form).hasClass("confirm-action")){confirmAction(this);return!1}
if(typeof $(form).valid==="function"){if(!$(form).valid()){return!1}else if($(form).validate().pendingRequest>0){$(form).validate();setTimeout(function(){$(form).submit()},500);return!1}}
modal.tikiModal(tr('Loading...'));if($(form).find("input[type=file]").length){var formData=new FormData(form)}else{var formData=$(form).serialize()}
var formSubmission={type:'POST',data:formData,dataType:'json',success:function(data){successCallback.apply(form,[data])},error:function(jqxhr){modal.tikiModal();$(form).showError(jqxhr)},complete:function(){modal.tikiModal()}};if(form.enctype=="multipart/form-data"){formSubmission.contentType=!1;formSubmission.processData=!1}
$.ajax(act,formSubmission);return!1}}
function checkDuplicateRows(button,columnSelector,rowSelector,parentSelector){if(typeof columnSelector==='undefined'){columnSelector="td"}
if(typeof rowSelector==='undefined'){rowSelector="tr:not(:first)"}
if(typeof parentSelector==='undefined'){parentSelector="table:first"}
var $rows=$(button).parents(parentSelector).find(rowSelector);$rows.each(function(ix,el){if($("input:checked",el).length===0){var $el=$(el);var line=$el.find(columnSelector).text();$rows.each(function(ix,el){if($el[0]!==el&&$("input:checked",el).length===0){if(line===$(el).find(columnSelector).text()){$(":checkbox:first",el).prop("checked",!0)}}})}})}
$.fn.tiki_popover=function(){var list,$container=this;var myDefaultWhiteList=$.fn.tooltip.Constructor.DEFAULTS.whiteList;myDefaultWhiteList.table=[];myDefaultWhiteList.thead=[];myDefaultWhiteList.tbody=[];myDefaultWhiteList.tr=[];myDefaultWhiteList.th=[];myDefaultWhiteList.td=[];myDefaultWhiteList.a=["target","href","title","rel","onclick",/^data-[\w-]*$/i];myDefaultWhiteList.time=["datetime"];list=$container.find('.tips[title!=""], .tikihelp[title!=""]').each(function(){var $element=$(this);if($element.attr('title')){$.each(['|',':','<br/>','<br>'],function(key,sep){var parts=$element.attr('title').split(sep);if(parts.length>1){$element.attr('title',parts.shift());$element.data('content',parts.join(sep))}})}else{$element.attr('title','')}
if(!$element.data('trigger')){$element.data('trigger','hover')}
$element.data('delay',{"show":0,"hide":10})});$.merge(list,$container.find("a[data-toggle=popover]:not(.tips[title!='']):not(.tikihelp[title!=''])"));list.filter('.bottom').data('placement','bottom');list.filter('.left').data('placement','left');list.filter('.slow').data('delay',{"show":500,"hide":0});list.find('img').attr('title','');list.filter('[data-trigger="click"]').click(function(e){e.preventDefault()});list.popover({container:'body',html:!0,placement:$.tikiPopoverWhereToPlace});$container.find('.ajaxtips').each(function(){var me=$(this),trigger=me.data('trigger')||'hover';$(this).popover({trigger:trigger,html:!0,delay:{"show":0,"hide":10},placement:$.tikiPopoverWhereToPlace,content:function(){var link=this,content=$(this).data('content');if(!content){$.get($(this).data('ajaxtips'),function(data){content=data;$(link).data('content',content);$(link).popover('show')})}
return content}})});$document.on("show.bs.popover",function(e){var event=e;$('.popover:visible:not(.tour-tour)').each(function(){if(this.previousElementSibling!==event.target){$(this).hide()}})});return $container};$.tikiPopoverWhereToPlace=function(pop,el){var pxNum=function(str){return(str||'').replace('px','')*1},$win=$(window),width=$win.width(),height=$win.height(),$pop=$(pop),$el=$(el),allowedImgWidth=width*0.60,allowedImgHeight=height*0.60,leftPos=$el.offset().left,$img=$pop.find('div[style*="background-image"],img').first(),$imgContainer=$img.parent(),$imgPopover=$imgContainer.parent(),imgWidth=pxNum($img.css('width')),imgHeight=pxNum($img.css('height')),newImgWidth,newImgHeight,widthBuffer,heightBuffer;if($el.data("placement")){return $el.data("placement")}
if(imgWidth>allowedImgWidth||imgHeight>allowedImgHeight){widthBuffer=(pxNum($imgContainer.css('padding-left'))+pxNum($imgContainer.css('margin-left'))+pxNum($imgContainer.css('border-left-width')))*2;heightBuffer=(pxNum($imgContainer.css('padding-top'))+pxNum($imgContainer.css('margin-top'))+pxNum($imgContainer.css('border-top-width')))*2;if(allowedImgWidth/imgWidth>allowedImgHeight/imgHeight){newImgWidth=allowedImgWidth;newImgHeight=imgHeight*(allowedImgWidth/imgWidth)}else{newImgWidth=imgWidth*(allowedImgHeight/imgHeight);newImgHeight=allowedImgHeight}
$img.css({backgroundSize:newImgWidth+'px '+newImgHeight+'px',width:newImgWidth+'px',height:newImgHeight+'px'});$imgPopover.css({maxWidth:(newImgWidth+widthBuffer)+'px',maxHeight:(newImgHeight+heightBuffer)+'px'})}
if(width<500||((width-leftPos)+imgWidth)>width)return'bottom';if(width-leftPos>400)return'right';return'left'};if($.fn.popover){var originalLeave=$.fn.popover.Constructor.prototype.leave;$.fn.popover.Constructor.prototype.leave=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget)[this.type](this.getDelegateOptions()).data('bs.'+this.type);var container,timeout;originalLeave.call(this,obj);if(self.$tip){container=self.$tip;timeout=self.timeout;container.one('mouseenter',function(){clearTimeout(timeout);container.one('mouseleave',function(){$.fn.popover.Constructor.prototype.leave.call(self,self)})})}}}
$(function(){if(!window.jqueryTiki)window.jqueryTiki={};if(jqueryTiki.reflection){$("img.reflect").reflect({})}
if(jqueryTiki.tooltips){$(document).tiki_popover()}
if(jqueryTiki.superfish){$('ul.cssmenu_horiz').supersubs({minWidth:11,maxWidth:20,extraWidth:1});$('ul.cssmenu_vert').supersubs({minWidth:11,maxWidth:20,extraWidth:1});$('ul.cssmenu_horiz').superfish({animation:{opacity:'show',height:'show'},speed:'fast',onShow:function(){if($(this).data('active'))return;$(this).data('active',!0).moveToWithinWindow()},onHide:function(){$(this).removeData('active')}});$('ul.cssmenu_vert').superfish({animation:{opacity:'show',height:'show'},speed:'fast',onShow:function(){if($(this).data('active'))return;$(this).data('active',!0).moveToWithinWindow()},onHide:function(){$(this).removeData('active')}})}
if(jqueryTiki.colorbox&&!jqueryTiki.mobile){$().on('cbox_complete',function(){$("#cboxTitle").wrapInner("<div></div>")});$("a[data-box*='box']").colorbox({rel:function(){return $(this).attr('data-box')},transition:"elastic",maxHeight:"95%",maxWidth:"95%",overlayClose:!0,current:jqueryTiki.cboxCurrent});$("a[data-box*='box'][data-box*='type=img'], a[data-box*='box'][data-box!='type=']").colorbox({photo:!0});$("a[data-box*='box'][data-box*='slideshow']").colorbox({photo:!0,slideshow:!0,slideshowSpeed:3500,preloading:!1,width:"100%",height:"100%"});$("#col1 a[data-box*='box']:not([data-box*='type=img']):not([href*='display']):not([href*='preview']):not([href*='thumb']):not([data-box*='slideshow']):not([href*='image']):not([href$='\.jpg']):not([href$='\.jpeg']):not([href$='\.png']):not([href$='\.gif'])").colorbox({iframe:!0,width:"95%",height:"95%"});$("#col1 a[data-box*='box'][href^='ftp://'], #col1 a[data-box*='box'][href^='ftps://']").colorbox({iframe:!0,width:"95%",height:"95%"});$("#col1 a[data-box*='box'][data-box*='type=flash']").colorbox({inline:!0,width:"60%",height:"60%",href:function(){var $el=$("#cb_swf_player");if($el.length===0){$el=$("<div id='cb_swf_player' />");$(document.body).append($("<div />").hide().append($el))}
swfobject.embedSWF($(this).attr("href"),"cb_swf_player","100%","90%","9.0.0","lib/swfobject/expressInstall.swf");return $("#cb_swf_player")}});$("#col1 a[data-box*='box'][data-box*='type=iframe']").colorbox({iframe:!0});$("#col1 a[data-box*='box'][href^='#']").colorbox({inline:!0,width:"50%",height:"50%",href:function(){return $(this).attr('href')}});$("a[data-box*='box'][title]").colorbox({title:function(){return $(this).attr('title')}});$("a[data-box*='box'] img[title]").colorbox({title:function(){return $(this).attr('title')},photo:!0,href:function(){return $(this).parent().attr("href")}});var re,ret;$("#col1 a[data-box*='box'][data-box*='title=']").colorbox({title:function(){re=/(title=([^;\"]+))/i;ret=$(this).attr("data-box").match(re);return ret[2]}});$("#col1 a[data-box*='box'][data-box*='height=']").colorbox({height:function(){re=/(height=([^;\"]+))/i;ret=$(this).attr("data-box").match(re);return ret[2]}});$("#col1 a[data-box*='box'][data-box*='width=']").colorbox({width:function(){re=/(width=([^;\"]+))/i;ret=$(this).attr("data-box").match(re);return ret[2]}});if(jqueryTiki.colorbox){$("a[data-box^='shadowbox[colorbox']").each(function(){$(this).attr('savedTitle',$(this).attr('title'))});$("a[data-box^='shadowbox[colorbox']").colorbox({title:function(){return $(this).attr('savedTitle')}})}}
if(jqueryTiki.zoom){$("a[data-box*=zoom]").each(function(){$(this).wrap('<span class="img_zoom"></span>').parent().zoom({url:$(this).attr("href")})})}
$.fn.applyChosen=function(){if(jqueryTiki.chosen){$("select:not(.allow_single_deselect):not(.nochosen)").tiki("chosen")}};$.applyChosen=function(){return $('body').applyChosen()};if(jqueryTiki.chosen){$.applyChosen()}
$(function(){$("#keepOpenCbx").click(function(){if(this.checked){setCookie("fgalKeepOpen","1")}else{setCookie("fgalKeepOpen","")}});var keepopen=getCookie("fgalKeepOpen");$("#keepOpenCbx").prop("checked",!!keepopen)});$.paginationHelper()});$document.on('pageSearchReady',function(){$.paginationHelper()});function checkClose(){if(!$("#keepOpenCbx").prop("checked")){window.close()}else{window.blur();if(window.opener){window.opener.focus()}}}
$(function(){if($("#diff_outer").length&&!$.trim($(".wikipreview .wikitext").html()).length){toggleFullScreen("editwiki")}});function sideBySideDiff(){if($('.side-by-side-fullscreen').size()){$('.side-by-side-fullscreen').remove();return}
var $diff=$('#diff_outer').remove(),$zone=$('.edit-zone');$zone.after($diff.addClass('side-by-side-fullscreen'));$diff.find('#diff_history').height('')}
function toggleFullScreen(area_id){if($("input[name=wysiwyg]").val()==="y"){$("#diff_outer").css({position:"inherit",height:"400px",overflowX:"auto"});return}
var textarea=$("#"+area_id);var textareaEditor=syntaxHighlighter.get(textarea);if(textareaEditor){syntaxHighlighter.fullscreen(textarea);sideBySideDiff();return}
var toolbar=$('#editwiki_toolbar'),preview=$("#autosave_preview"),comment=$("#comment").parents("fieldset:first"),screen=$('.TextArea-fullscreen'),zone=$('.edit-zone',screen);screen.add(textarea).css('height','');$('.TextArea-fullscreen .actions').remove();if(textarea.parent().hasClass("ui-wrapper")){textarea.resizable("destroy")}
var textareaParent=textarea.parents(".tab-content:first").toggleClass('TextArea-fullscreen');if(textareaParent.hasClass('TextArea-fullscreen')){$('body').css('overflow','hidden');$('.tabs,.rbox-title').toggle();$('#fullscreenbutton').hide();var win=$window.data('cm-resize',!0),diff=$("#diff_outer"),msg=$(".translation_message"),actions=$('.actions',textarea.parents("form"));actions.clone().appendTo('.TextArea-fullscreen');actions=$('.actions',$('.TextArea-fullscreen'));comment.css({position:"absolute",bottom:actions.outerHeight()+"px",width:"100%"}).nextAll("fieldset").hide();preview.css({position:"absolute",top:0,left:0});win.resize(function(){screen=$('.TextArea-fullscreen');actions=$('.actions',screen);comment=$("#comment").parents("fieldset:first");if(win.data('cm-resize')&&screen){screen.css('height',win.height()+'px');var swidth=win.width()+"px";var commentMargin=parseInt(comment.css("marginBottom").replace("px",""))*2;commentMargin+=parseInt(comment.css("borderBottomWidth").replace("px",""))*2;var innerHeight=win.height()-comment.outerHeight()-commentMargin-actions.outerHeight();if(diff.length){swidth=(screen.width()/2)+"px";innerHeight-=msg.outerHeight();msg.css("width",(screen.width()/2-msg.css("paddingLeft").replace("px","")-msg.css("paddingRight").replace("px",""))+"px");diff.css({width:swidth,height:innerHeight+'px'});$('#diff_history').height(innerHeight+"px")}
textarea.css("width",swidth);toolbar.css('width',swidth);zone.css("width",swidth);preview.css("width",swidth);textarea.css('height',(innerHeight-toolbar.outerHeight())+"px")}});setTimeout(function(){$window.resize()},500)}else{textarea.css("width","");toolbar.css('width',"");zone.css({width:"",height:""});screen.css("width","");comment.css({position:"",bottom:"",width:""}).nextAll("fieldset").show();preview.css({position:"",top:"",left:""});$('body').css('overflow','');$('.tabs,.rbox-title').toggle();$('#fullscreenbutton').show();$window.removeData('cm-resize')}
sideBySideDiff()}
var xhrCache={},lastXhr;$.fn.tiki=function(func,type,options){var opts={},opt;switch(func){case "autocomplete":if(jqueryTiki.autocomplete&&jqueryTiki.ui){if(typeof type==='undefined'){return null}
options=options||{};var requestData={};var url="";switch(type){case "pagename":url="tiki-listpages.php?listonly&initial="+(options.initial?options.initial+"&nonamespace":"");break;case "groupname":url="tiki-ajax_services.php?listonly=groups";break;case "username":url="tiki-ajax_services.php?listonly=users";break;case "usersandcontacts":url="tiki-ajax_services.php?listonly=usersandcontacts";break;case "userrealname":url="tiki-ajax_services.php?listonly=userrealnames";break;case "tag":url="tiki-ajax_services.php?listonly=tags&separator=+";break;case "icon":url="tiki-ajax_services.php?listonly=icons&max="+(opts.max?opts.max:10);opts.formatItem=function(data,i,n,value){var ps=value.lastIndexOf("/");var pd=value.lastIndexOf(".");return"<img src='"+value+"' /> "+value.substring(ps+1,pd).replace(/_/m," ")};opts.formatResult=function(data,value){return value};break;case 'trackername':url="tiki-ajax_services.php?listonly=trackername";break;case 'trackervalue':if(typeof options.fieldId==="undefined"){return null}
$.extend(requestData,options);options={};url="list-tracker_field_values_ajax.php";break;case "reference":url="tiki-ajax_services.php?listonly=references";break}
var multiple=options.multiple&&(type=='usersandcontacts'||type=='userrealname'||type=='username'||type=='reference');$.extend(opts,{minLength:2,source:function(request,response){if(multiple){request.term=(''+request.term).split(/,\s*/).pop()}
if(options.tiki_replace_term){request.term=options.tiki_replace_term.apply(null,[request.term])}
var cacheKey="ac."+type+"."+request.term;if(cacheKey in xhrCache){response(xhrCache[cacheKey]);return}
request.q=request.term;$.extend(request,requestData);lastXhr=$.getJSON(url,request,function(data,status,xhr){xhrCache[cacheKey]=data;if(xhr===lastXhr){response(data,function(item){return item})}})},search:function(){if(multiple){var term=(''+this.value).split(/,\s*/).pop();if(term.length<2){return!1}}},select:function(e,ui){if(multiple){var terms=''+this.value;terms=terms.replace(';',',');terms=terms.split(/,\s*/);terms.pop();terms.push(ui.item.value);terms.push("");this.value=terms.join(", ");return!1}}});$.extend(opts,options);return this.each(function(){$(this).autocomplete(opts).blur(function(){$(this).removeClass("ui-autocomplete-loading").change()})})}
break;case "carousel":if(jqueryTiki.carousel){opts={imagePath:"vendor_bundled/vendor/jquery/plugins/infinitecarousel/images/",autoPilot:!0};$.extend(opts,options);return this.each(function(){$(this).infiniteCarousel(opts)})}
break;case "datepicker":case "datetimepicker":if(jqueryTiki.ui){switch(type){case "jscalendar":if(typeof options.altField==="undefined"){alert("jQuery.ui datepicker jscalendar replacement setup error: options.altField not set for "+$(this).attr("id"));debugger}
opts={showOn:"both",buttonText:'',dateFormat:jqueryTiki.shortDateFormat,timeFormat:jqueryTiki.shortTimeFormat,showButtonPanel:!0,altFormat:"@",altFieldTimeOnly:!1,onClose:function(dateText,inst){$.datepickerAdjustAltField(func,inst)}};break;default:opts={showOn:"both",buttonText:'',dateFormat:jqueryTiki.shortDateFormat,showButtonPanel:!0,firstDay:jqueryTiki.firstDayofWeek};break}
$.extend(opts,options);if(func==="datetimepicker"){return this.each(function(){$(this).datetimepicker(opts)})}else{return this.each(function(){$(this).datepicker(opts)})}}
break;case "accordion":if(jqueryTiki.ui){opts={autoHeight:!1,collapsible:!0,navigation:!0};$.extend(opts,options);return this.each(function(){$(this).accordion(opts)})}
break;case "chosen":if(jqueryTiki.chosen){opts={allow_single_deselect:!0,search_contains:!0};if($("html").attr("dir")==="rtl"){$(this).addClass("chosen-rtl")}
$.map({placeholder_text_multiple:"Select Some Options",placeholder_text_single:"Select an Option",no_results_text:"No results match"},function(v,k){opts[k]=tr(v)});$.extend(opts,options);return this.each(function(){var opts2=$.extend({},opts),$select=$(this);if($select.is(":hidden")&&!opts.width){var $hiddenElement=$select.clone().appendTo("body");if($select.is('.form-control')){opts2.width='100%'}else{opts2.width=$hiddenElement.outerWidth()}
$hiddenElement.remove()}
var hidden=$();$select.chosen(opts2).on('chosen:showing_dropdown',function(){hidden=$(this).parents(":not(body)").filter(function(){return $(this).css('overflow-y')==='hidden'}).css('overflow-y','visible')}).on('chosen:hiding_dropdown',function(){hidden.css('overflow-y','hidden')});if(jqueryTiki.chosen_sortable&&$select.prop("multiple")){var $choices=$select.next(".chosen-container-multi").find("> .chosen-choices");$choices.mousedown(function(event){if($(event.target).is('span')){event.stopPropagation()}}).sortable({items:"li:not(.search-field)"}).parents("form:first").submit(function(){if(!$(this).data("chosen-multi-submitted")&&!$select.hasClass("nochosen")){var $options=$choices.find("li:not(.search-field) a").map(function(){return $select.find("option")[$(this).data("option-array-index")]});if($options.length){$select.children().remove();$select.append($options).change()}
$(this).data("chosen-multi-submitted",!0)}})}})}
break}};(function($){$.datepickerAdjustAltField=function(func,inst){$.datepicker._updateAlternate(inst);var val=$(inst.settings.altField).val(),timestamp;if(func==="datetimepicker"){val=val.substring(0,val.indexOf(" "));timestamp=parseInt(val/1000,10);if(!timestamp||isNaN(timestamp)){$.datepicker._setDateFromField(inst);$.datepicker._updateAlternate(inst);val=$(inst.settings.altField).val();val=val.substring(0,val.indexOf(" "));timestamp=parseInt(val/1000,10)}
if(timestamp&&inst.settings&&inst.settings.timepicker){var time=inst.settings.timepicker.hour*3600+inst.settings.timepicker.minute*60+inst.settings.timepicker.second;timestamp+=time}}else{timestamp=parseInt(val/1000,10)}
$(inst.settings.altField).val(timestamp?timestamp:"").change()};$.datepicker._jquibase_gotoToday=$.datepicker._gotoToday;$.datepicker._gotoToday=function(id){var inst=this._getInst($(id)[0]);this._jquibase_gotoToday(id);this._setDate(inst,new Date())};$.fn.addnotes=function(container){return this.each(function(){var comment=this;var text=$('dt:contains("note")',comment).next('dd').text();var title=$('h4:first',comment).clone();var body=$('.comment-body:first',comment).clone();body.find('dt:contains("note")').closest('dl').remove().addClass('panel');if(text.length>0){var parents=container.find(':contains("'+text+'")').parent();var node=container.find(':contains("'+text+'")').not(parents).addClass('note-editor-text alert-info').each(function(){var child=$('dl.note-list',this);if(!child.length){child=$('<dl class="note-list list-group-item-info"/>').appendTo(this).hide();$(this).click(function(){child.toggle()})}
child.append(title).append($('<dd/>').append(body))})}})};$.fn.noteeditor=function(editlink,link){var hiddenParents=null;var annote=$(link).click(function(e){e.preventDefault();var $block=$('<div/>');var annotation=$(this).attr('annotation');$(this).fadeOut(100);$block.load(editlink.attr('href'),function(){var msg="";if(annotation.length<20){msg=tr("The text you have selected is quite short. Select a longer piece to ensure the note is associated with the correct text.")+"<br />"}
msg="<p class='description comment-info'>"+msg+tr("Tip: Leave the first line as it is, starting with \";note:\". This is required")+"</p>";$block.prepend($(msg));$('textarea',this).val(';note:'+annotation+"\n\n").focus();$('form',this).submit(function(){$.post($(this).attr('action'),$(this).serialize(),function(){$block.dialog('destroy');editlink.closest('.comment-container').reload()});return!1});$block.dialog({modal:!0,width:500,height:400})})}).appendTo(document.body);$(this).mouseup(function(e){var range;if(window.getSelection&&window.getSelection().rangeCount){range=window.getSelection().getRangeAt(0)}else if(window.selection){range=window.selection.getRangeAt(0)}
if(range){var str=$.trim(range.toString());if(str.length&&-1===str.indexOf("\n")){annote.attr('annotation',str);annote.fadeIn(100).position({of:e,at:'bottom left',my:'top left',offset:'20 20'})}else{if(annote.css("display")!="none"){annote.fadeOut(100)}
if($("form.comments").css("display")=="none"){$("form.comments").show()}
if(hiddenParents){hiddenParents.hide();hiddenParents=null}}}})};$.fn.browse_tree=function(){this.each(function(){$('.treenode:not(.done)',this).addClass('done').each(function(){if(getCookie($('ul:first',this).attr('data-id'),$('ul:first',this).attr('data-prefix'))!=='o'){$('ul:first',this).css('display','none')}
var $placeholder=$('span.ui-icon:first',this);if($('ul:first',this).length){var dir=$('ul:first',this).css('display')==='block'?'s':'e';if($placeholder.length){$placeholder.replaceWith('<span class="flipper ui-icon ui-icon-triangle-1-'+dir+'" style="float: left;margin-top:.2em;"/>')}else{$(this).prepend('<span class="flipper ui-icon ui-icon-triangle-1-'+dir+'" style="float: left;margin-top:.2em;"/>')}}else{if($placeholder.length){$placeholder.replaceWith('<span style="float:left;width:16px;height:16px;margin-top:.2em;"/>')}else{$(this).prepend('<span style="float:left;width:16px;height:16px;margin-top:.2em;"/>')}}
if($('div.checkbox',this).length){$('div.checkbox',this).css("margin-left","16px")}});$('.flipper:not(.done)').addClass('done').css('cursor','pointer').click(function(){var body=$(this).parent().find('ul:first');if('block'===body.css('display')){$(this).removeClass('ui-icon-triangle-1-s').addClass('ui-icon-triangle-1-e');body.hide('fast');setCookie(body.data("id"),"",body.data("prefix"))}else{$(this).removeClass('ui-icon-triangle-1-e').addClass('ui-icon-triangle-1-s');body.show('fast');setCookie(body.data("id"),"o",body.data("prefix"))}})});return this};var fancy_filter_create_token=function(value,label){var close,token;console.log();close=$('<span class="ui-icon ui-icon-close"/>').click(function(){var ed=$(this).parent().parent();$(this).parent().remove();ed.change();return!1});token=$('<span class="token"/>').attr('data-value',value).text(label).attr('contenteditable',!1).disableSelection().append(close);return token[0]};var fancy_filter_build_init=function(editable,str,options){if(str===''){str='&nbsp;'}
editable.html(str.replace(/(\d+)/g,'<span>$1</span>'));if(options&&options.map){editable.find('span').each(function(){var val=$(this).text();$(this).replaceWith(fancy_filter_create_token(val,JSON.parse(options.map)[val]?JSON.parse(options.map)[val]:val))})}};$.fn.fancy_filter=function(operation,options){this.each(function(){switch(operation){case 'init':var editable=$('<div class="fancyfilter form-control"/>'),input=this;if(editable[0].contentEditable!==null){fancy_filter_build_init(editable,$(this).val(),options);editable.attr('contenteditable',!0);$(this).after(editable).hide()}
editable.keyup(function(){$(this).change();$(this).mouseup()}).change(function(){$(input).val($('<span/>').html(editable.html()).find('span').each(function(){$(this).replaceWith(' '+$(this).attr('data-value')+' ')}).end().text().replace(/\s+/g,' '))}).mouseup(function(){input.lastRange=window.getSelection().getRangeAt(0)});break;case 'add':var editable=$(this).next();editable.find("span[data-value='"+options.token+"']").remove();var node=fancy_filter_create_token(options.token,options.label);editable.append(node);editable.change();break}});return this};$.fn.drawGraph=function(){this.each(function(){var $this=$(this);var width=$this.width();var height=$this.height()?$this.height():Math.ceil(width*9/16);var nodes=$this.data('graph-nodes');var edges=$this.data('graph-edges');var g=new Graph;$.each(nodes,function(k,i){g.addNode(i)});$.each(edges,function(k,i){var style={directed:!0};if(i.preserve){style.color='red'}
g.addEdge(i.from,i.to,style)});var layouter=new Graph.Layout.Spring(g);layouter.layout();var renderer=new Graph.Renderer.Raphael($this.attr('id'),g,width,height);renderer.draw()});return this};$.fn.selection=function(start,end){if(start!==undefined){if(end===undefined){end=start}
return this.each(function(){if(this.selectionStart){this.selectionStart=start;this.selectionEnd=end}else if(this.setSelectionRange){this.setSelectionRange(start,end)}else if(this.createTextRange){var selRange=this.createTextRange();if(start==end){selRange.move("character",start);selRange.select()}else{selRange.collapse(!0);selRange.moveStart("character",start);selRange.moveEnd("character",end-start);selRange.select()}}})}
var field=this[0];if(field.selectionStart!==undefined){return{start:field.selectionStart,end:field.selectionEnd}}else if(field.createTextRange){var range=document.selection.createRange();var stored_range=range.duplicate();stored_range.moveToElementText(field);stored_range.setEndPoint('EndToEnd',range);var textProperty=range.htmlText?"htmlText":"text";var selectionStart=stored_range[textProperty].length-range[textProperty].length;var selectionEnd=selectionStart+range[textProperty].length;return{start:selectionStart,end:selectionEnd}}};$.fn.comment_toggle=function(){this.each(function(){var $target=$(this.hash);$target.hide();$(this).click(function(){if($target.is(':visible')){$target.hide(function(){$(this).empty()})}else{$target.comment_load($(this).attr('href'))}
return!1});if(location.search.indexOf("comzone=show")>-1){var comButton=this;setTimeout(function(){$(comButton).click()},500)}});return this};$.fn.comment_load=function(url){var $top=$('#top');$('.note-list',$top).remove();this.each(function(){var comment_container=this;if(!comment_container.reload){comment_container.reload=function(){$(comment_container).empty().comment_load(url)}}
$(this).addClass('comment-container');$(this).load(url,function(response,status){$(this).show();if(jqueryTiki.useInlineComment&&!jqueryTiki.useInlineAnnotations){$('.comment.inline dt:contains("note")',this).closest('.comment').addnotes($top);$top.noteeditor($('.comment-form:last a',comment_container),'#note-editor-comment')}
$('.button.comment-form.autoshow a').addClass('autoshown').click().removeClass('autoshown');var match=location.hash.match(/threadId=?(\d+)/);if(match){var $tab=$(this).parents(".tab-pane"),$tabContent=$(this).parents(".tab-content");if($tab.length&&!$tab.is(".active")){$tabContent.find(".tab-pane").each(function(index){if(this===$tab[0]){$(".nav-tabs li:nth("+index+") a",$tabContent.parent()).tab("show")}})}
var $comment=$(".comment[data-comment-thread-id="+match[1]+"]");var top=$comment.offset().top+$comment.height()-($window.height()/2);$('html, body').animate({scrollTop:top},2000,function(){$comment.animate({backgroundColor:"#ff8"},250,function(){$comment.animate({backgroundColor:""},1000)})})}})});return this};$(document).on('click','.comment-form.buttons a',function(){var comment_container=$(this).closest('.comment-container, .ui-dialog-content')[0];$('.comment-form form:not(.commentRatingForm)',comment_container).each(function(){var $p=$(this).parent();$p.empty().addClass('button').addClass('buttons').append($p.data('previous'))});if(!$(this).hasClass('autoshown')){$(".comment").each(function(){$("article > *:not(ol)",this).each(function(){$(this).css("opacity",0.6)})})}
$(this).parents('.comment:first').find("*").css("opacity",1);var $formContainer=null;if($(this).data('target')){$formContainer=$($(this).data('target'))}else{$formContainer=$(this).parents('.buttons')}
$(this).parents('.buttons').data('previous',$(this)).empty().removeClass('buttons').removeClass('button');$('.modal.fade.in').trigger('tiki.modal.redraw');$formContainer.load($(this).attr('href'),function(){var form=$('form',this).submit(function(){var errors,current=this;$(current).tikiModal(tr("Saving..."));if(typeof syntaxHighlighter.sync==='function'){syntaxHighlighter.sync($(current).find("textarea.wikiedit"))}
$.post($(current).attr('action'),$(current).serialize(),function(data,st){$(current).tikiModal();if(data.threadId){$(current).closest('.comment-container').reload();$('span.count_comments').each(function(){var action=$(current).attr('action').match(/tiki-comment-(\w*)/),count=parseInt($(this).text());if(action){switch(action[1]){case "post":count++;break;case "remove":count--;break;case "edit":case "moderate":break}
$(this).text(count)}});if(data.feedback&&data.feedback[0]){alert(data.feedback.join("\n"))}}else{errors=$('ol.errors',form).empty();if(!errors.length){$(':submit',current).after(errors=$('<ol class="alert-warning"/>'))}
$.each(data.errors,function(k,v){errors.append($('<li/>').text(v))})}},'json');return!1});if($.fn.flexibleSyntaxHighlighter){window.codeMirrorEditor=[];form.find('textarea.wikiedit').flexibleSyntaxHighlighter()}});return!1});$.fn.input_csv=function(operation,separator,value){this.each(function(){var values=$(this).val().split(separator);if(values[0]===''){values.shift()}
if(operation==='add'&&-1===values.indexOf(""+value)){values.push(value)}else if(operation==='delete'){value=String(value);while(-1!==$.inArray(value,values)){values.splice($.inArray(value,values),1)}}
$(this).val(values.join(separator))});return this};$.service=function(controller,action,query){var append='';if(query){append='?'+$.buildParams(query)}
if(action){return'tiki-'+controller+'-'+action+append}else{return'tiki-'+controller+'-x'+append}};$.serviceUrl=function(options){var o=$.extend({},options),controller=options.controller,action=options.action;delete(o.controller);delete(o.action);return $.service(controller,action,o)};$.buildParams=function(query,prefix,suffix){prefix=prefix||'';suffix=suffix||'';return $.map(query,function(v,k){if($.isPlainObject(v)){return $.buildParams(v,k+'[',']')}else{return prefix+k+suffix+'='+tiki_encodeURIComponent(v)}}).join('&')};$.fn.serviceDialog=function(options){this.each(function(){var $dialog=$('<div/>'),origin=this,buttons={};$(this).append($dialog).data('serviceDialog',$dialog);if(!options.hideButtons){buttons[tr('OK')]=function(){$dialog.find('form:visible').submit()};buttons[tr('Cancel')]=function(){$dialog.dialog('close');if($dialog.data('ui-dialog')){$dialog.dialog('destroy')}}}
$dialog.dialog({title:options.title,minWidth:options.width?options.width:500,height:(options.fullscreen?$window.height()-20:(options.height?options.height:600)),width:(options.fullscreen?$window.width()-20:null),close:function(){if(options.close){options.close.apply([],this)}
if($(this).data('ui-dialog')){$(this).dialog('destroy').remove()}},buttons:buttons,modal:options.modal,zIndex:options.zIndex});$dialog.loadService(options.data,$.extend(options,{origin:origin}))});return this};$.fn.loadService=function(data,options){var $dialog=this,controller=options.controller,action=options.action,url;this.each(function(){if(!this.reload){this.reload=function(){$(this).loadService(data,options)}}});if(typeof data==="string"){data=parseQuery(data)}
if(data&&data.controller){controller=data.controller}
if(data&&data.action){action=data.action}
if(options.origin&&$(options.origin).is('a')){url=$(options.origin).attr('href')}else if(options.url){url=options.url}else{url=$.service(controller,action)}
$dialog.tikiModal(tr("Loading..."));$.ajax(url,{data:data,error:function(jqxhr){$dialog.html(jqxhr.responseText)},success:function(data){$dialog.html(data);$dialog.find('.ajax').click(function(e){$dialog.loadService(null,{origin:this});return!1});$dialog.find('.service-dialog').click(function(e){if($dialog.data('ui-dialog')){$dialog.dialog('close')}
return!0});$dialog.find('form .submit').hide();$dialog.find('form:not(.no-ajax)').off("submit").submit(ajaxSubmitEventHandler(function(data){data=(data?data:{});if(data.FORWARD){$dialog.loadService(data.FORWARD,options)}else if($dialog.data('ui-dialog')){$dialog.dialog('destroy').remove()}
if(options.success){options.success.apply(options.origin,[data])}}));if(options.load){options.load.apply($dialog[0],[data])}
$('.confirm-prompt',this).requireConfirm({success:function(data){if(data.FORWARD){$dialog.loadService(data.FORWARD,options)}else{$dialog.loadService(options.data,options)}}})},complete:function(){$dialog.tikiModal();if($dialog.find('form').size()==0&&$dialog.data('ui-dialog')){var buttons=$dialog.dialog('option','buttons'),n={};if(buttons[tr('Cancel')]){n[tr('OK')]=buttons[tr('Cancel')];$dialog.dialog('option','buttons',n)}}}})};$.fn.confirmationDialog=function(options){var modal=$('#bootstrap-modal'),modalHeader=modal.find('.modal-header'),modalBody=$('<div class="modal-body"><p></p></div>'),modalFooter=$('<div class="modal-footer"></div>'),modalFooterConfirm=$('<button type="button" class="btn btn-primary">'+tr('Confirm')+'</button>'),modalFooterClose=$('<button type="button" class="btn btn-default" data-dismiss="modal">'+tr('Close')+'</button>');if(!modalHeader||modalHeader.length===0){modal.find('.modal-content').append('<div class="modal-header"><h4></h4></div>');modalHeader=modal.find('.modal-header')}
if(options.title){modalHeader.find('h4').text(options.title)}else{modalHeader.find('h4').text(tr('Confirmation Modal'))}
if(options.message){modalBody.find('p').text(options.message)}else{modalBody.find('p').text(tr('Please confirm you want to perform this action.'))}
modalFooter.append(modalFooterClose,modalFooterConfirm);modalHeader.after(modalBody);modalBody.after(modalFooter);modal.on('hidden.bs.modal',function(e){if(options.close){options.close()}});modal.find('.btn.btn-primary').on('click',function(e){modal.modal('hide');if(options.success){options.success()}});modal.modal('show');return this};$.fn.requireConfirm=function(options){this.click(function(e){e.preventDefault();$(this).doConfirm(options);return!1});return this};$.fn.doConfirm=function(options){var message=options.message,link=this;if(!message){message=$(this).data('confirm')}
if(confirm(message)){var $this=$(this);$this.tikiModal(" ");$.ajax($(this).attr('href'),{type:'POST',dataType:'json',data:{'confirm':1},success:function(data){$this.tikiModal();options.success.apply(link,[data])},error:function(jqxhr){$this.tikiModal();$(link).closest('form').showError(jqxhr)}})}};$.fn.showError=function(message){if(message.responseText){if(message.getResponseHeader("Content-Type").indexOf("text/html")===-1){var data=$.parseJSON(message.responseText);message=data.message}else{message=$(message.responseText).text()}}else if(typeof message!=='string'){message=""}
this.each(function(){var parts,that=this;if(parts=message.match(/^<!--field\[([^\]]+)\]-->(.*)$/)){field=parts[1];message=parts[2];if(that[field]){that=that[field]}}
var validate=!1,errors={},field,$additional=$('<ul>');if(jqueryTiki.validate){validate=$(that).closest('form').validate()}
if(validate){if(!$(that).attr('name')){$(that).attr('name',$(that).attr('id'))}
if(that!==validate.currentForm){field=$(that).attr('name')}
if(field){errors[field]=message;validate.showErrors(errors)}else{$additional.append($('<li>').text(message))}
setTimeout(function(){$('#tikifeedback li').filter(function(){return $(this).text()===message}).remove();if($('#tikifeedback ul').is(':empty')){$('#tikifeedback').empty()}},100)}else{$additional.append($('<li>').text(message))}
if(!$additional.is(':empty')){$('.ajax-errors',this).remove();$('<div class="ajax-errors alert alert-danger alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button></div>').prependTo(this).append($additional)}
$('.form-group').removeClass('has-error').find('label.error:visible').addClass('help-block').prepend('<span class="fa fa-flag"/> ').closest('.form-group').addClass('has-error')});return this};$.fn.clearError=function(){this.each(function(){$(this).closest('form').find('label.error[for="'+$(this).attr('name')+'"]').remove();$(this).closest('form').find('.form-group.has-error').removeClass('has-error')});return this};function loadSelectorData(filter,args,success){if(!$.object_selector_cache){$.object_selector_cache={}}
if($.isFunction(args)){success=args;args={}}
var item,url;url=$.service('search','lookup',$.extend(args,{filter:filter}));if(item=$.object_selector_cache[url]){if(item.data){success(item.data)}else{item.queue.push(success)}}else{item=$.object_selector_cache[url]={data:null,queue:[success]};$.getJSON(url,function(data){item.data=data;$.each(item.queue,function(k,f){f(data)});item.queue=[]})}}
$._object_selector_add_item=function(type,$select,$results,item,title,selected){var checkname=$select.closest('.object-selector, .object-selector-multi').find('.primary').attr('id')+'_sel';$('<option>').val(item).data('label',title).text(title.replace(/\n/g," / ")).prop('selected',selected).appendTo($select);$('<div class="'+type+'"><label><input type="'+type+'"> </label></div>').find('label').append(title).end().find(':radio, :checkbox').attr('name',checkname).prop('checked',selected).val(item).end().appendTo($results)};$.fn._object_selector_update_results=function(type,result,initial){var $container=this,$results=$container.find('.results'),$select=$container.find('select'),$noresults=$('.no-result',this),selection=[];this.find(':radio:checked, :checkbox:checked').not('.protected').each(function(){selection.push($(this).val())});this.find(':radio:not(:checked), :checkbox:not(:checked)').not('.protected').closest('.radio, .checkbox').remove();$select.find('option:not(:checked)').not('.protected').remove();$noresults.toggleClass('hidden',selection.length!==0);$.each(result,function(key,value){var current=value.object_type+':'+value.object_id;if(-1===selection.indexOf(current)){if(initial){$._object_selector_add_item(type,$select,$([]),current,value.title,!1)}else{$._object_selector_add_item(type,$select,$results,current,value.title,!1)}}else{$("option[value='"+current+"']",$select).text(value.title)}});$select.trigger('chosen:updated')};$.fn.object_selector=function(action,value,title){var args=arguments;this.each(function(){var input=this,$simple=$(this).prev(),filter=$(input).data('filters'),threshold=$(input).data('threshold'),format=$(input).data('format')||'',sort=$(input).data('sort')||'score_desc',parentobject=$(input).data('parent'),parentkey=$(input).data('parentkey');$(input).addClass('primary').hide();$simple.hide();var $spinner=$(this).parent(),$container=$(input).closest('.object-selector'),$select=$container.find('select').first(),$filter=$container.find(':text.filter').first(),$search=$container.find('input.search').first(),$panel=$container.find('.panel').first();if(action==='set'){$select.val(value);if($select.val()!==value&&title){try
{var titleObj=JSON.parse(title);var titleArr=$.map(titleObj,function(el){return el});title=titleArr.join(" / ")}
catch(e)
{}
$._object_selector_add_item('radio',$select,$container.find('.results'),value,title,!0);$select.trigger('chosen:updated')}
$(input).val(value).data('label',title).change();return}
if(action==='setfilter'){filter[args[1]]=args[2];$(input).data('filters',filter);$container.find('.too-many').hide();$search.click();return}
if(parentobject&&parentkey){filter[parentkey]=$(parentobject).val();$(parentobject).on('change',function(){$(input).data('use-threshold',1).object_selector('setfilter',parentkey,$(this).val())})}
if(threshold!==-1){$spinner.tikiModal(" ");loadSelectorData(filter,{maxRecords:threshold,format:format},function(data){$container._object_selector_update_results('radio',data.resultset.result,!0);$spinner.tikiModal();if(data.resultset.count<=threshold){$select.parent().removeClass('hidden')}else{$panel.removeClass('hidden')}})}else{$panel.removeClass('hidden')}
$panel.on('click',':radio',function(){if($(this).is(':checked')){$(input).object_selector('set',$(this).val(),$(this).parent().text())}});$(input).change(function(){var val=$(this).val(),id=null;if(val){var splitarray=val.split(':');id=splitarray[1];if(splitarray.length>2){for(var i=2;i<splitarray.length;i++)
{id=id+':'+splitarray[i]}}}
if($simple.val()!=id){$simple.val(id).change()}});$simple.change(function(){var target=filter.type+':'+$(this).val();if(filter.type&&$(input).val()!=target){$(input).val(target).change()}});$select.change(function(){if($(input).val()!=$select.val()){$(input).data('label',$select.find('option:selected').text());$(input).val($select.val()).change()}});$search.click(function(){$spinner=$filter.parent().tikiModal(" ");var selectorArgs={format:format,sort_order:sort};if($(input).data('use-threshold')&&threshold!==-1){selectorArgs.maxRecords=threshold;$(input).data('use-threshold',0)}
loadSelectorData($.extend(filter,{title:$filter.val()}),selectorArgs,function(data){$container._object_selector_update_results('radio',data.resultset.result,!1);$spinner.tikiModal()})});$filter.keypress(function(e){if(e.which===13){e.preventDefault();$search.click()}})});return this};$.fn.object_selector_multi=function(action){var args=arguments;this.each(function(){var $textarea=$(this).hide().addClass('primary'),$container=$(this).closest('.object-selector-multi'),$select=$container.find('select'),$simpleinput=$textarea.prev(':text').hide(),$basic=$container.find('.basic-selector'),$panel=$container.find('.panel'),$search=$container.find('input.search').first(),$filter=$container.find(':text.filter').first(),filter=$textarea.data('filters'),threshold=$textarea.data('threshold'),format=$textarea.data('format')||'',parentobject=$textarea.data('parent'),parentkey=$textarea.data('parentkey'),sort=$textarea.data('sort')||'score_desc',initialValues=$select.val(),separator=$simpleinput.data('separator');if(action==='setfilter'){filter[args[1]]=args[2];$textarea.data('filters',filter);$container.find('.too-many').hide();$search.click();return}
if(parentobject&&parentkey){filter[parentkey]=$(parentobject).val();$(parentobject).on('change',function(){$textarea.data('use-threshold',1).object_selector_multi('setfilter',parentkey,$(this).val())})}
if(threshold!==-1){$container.tikiModal(' ');loadSelectorData(filter,{maxRecords:threshold,format:format,sort_order:sort},function(data){$container.tikiModal('');$container._object_selector_update_results('checkbox',data.resultset.result,!0);if(data.resultset.count<=threshold){$basic.removeClass('hidden')}else{$panel.removeClass('hidden');$select.addClass("nochosen")}})}else{$panel.removeClass('hidden')}
$filter.keypress(function(e){if(e.which===13){e.preventDefault();$search.click()}});$search.click(function(){var $spinner=$filter.parent().tikiModal(" ");var selectorArgs={format:format,sort_order:sort};if($textarea.data('use-threshold')&&threshold!==-1){selectorArgs.maxRecords=threshold;$textarea.data('use-threshold',0)}
loadSelectorData($.extend(filter,{title:$filter.val()}),selectorArgs,function(data){$container._object_selector_update_results('checkbox',data.resultset.result,!1);$spinner.tikiModal()})});$panel.on('click',':checkbox',function(){var list=$.makeArray($container.find(':checkbox:checked').map(function(){return $(this).val()}));$textarea.val(list.join("\n")).change()});$select.on('change',function(){var list=$(this).val()||[];$textarea.val(list.join("\n")).change()});if(separator){$textarea.on('change',function(){var lines=$(this).val().split("\n"),ids=[];$.each(lines,function(k,line){var parts=line.split(':');if(parts.length===2){ids.push(parts[1])}});$simpleinput.val(ids.join(separator)).change()})}})};$.fn.sortList=function(){var list=$(this),items=list.children('li').get();items.sort(function(a,b){var compA=$(a).text().toUpperCase();var compB=$(b).text().toUpperCase();return(compA<compB)?-1:(compA>compB)?1:0});$.each(items,function(idx,itm){list.append(itm)})};$.localStorage={store:function(key,value){var fullKey=this._build(key);if(window.localStorage){if(value){window.localStorage[fullKey]=$.toJSON({date:Date.now(),data:value})}else{delete window.localStorage[fullKey]}}},load:function(key,callback,fetch,duration){var payload,fullKey=this._build(key);if(window.localStorage&&window.localStorage[fullKey]){payload=JSON.parse(window.localStorage[fullKey]);if(duration){if(payload.date+duration*1000<Date.now()){fetch(function(data){$.localStorage.store(key,data);callback(data)});return}}
callback(payload.data)}else{fetch(function(data){$.localStorage.store(key,data);callback(data)})}},_build:function(key){return key+"_2"}};var favoriteList=[];$.fn.favoriteToggle=function(){this.each(function(){var type,obj,isFavorite,link=this;type=$(this).queryParam('type');obj=$(this).queryParam('object');isFavorite=function(){var ret=!1;$.each(favoriteList,function(k,v){if(v===type+':'+obj){ret=!0;return!1}});return ret};$(this).find('span').remove();$(this).prepend($('<span />').attr({'class':isFavorite()?'fa fa-star fa-fw':'fa fa-star-o fa-fw','title':isFavorite()?tr('Remove from favorites'):tr('Add to favorites')}));if(isFavorite()){$(this).addClass('favorite_selected');$(this).removeClass('favorite_unselected')}else{$(this).addClass('favorite_unselected');$(this).removeClass('favorite_selected')}
$(this).filter(':not(".register")').addClass('register').click(function(){$.post($(this).attr('href'),{target:isFavorite()?0:1},function(data){favoriteList=data.list;$.localStorage.store($(link).data('key'),favoriteList);$(link).favoriteToggle()},'json');return!1})});return this};$.fn.queryParam=function(name){name=name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");var regex=new RegExp("[\\?&]"+name+"=([^&#]*)");var results=regex.exec(this[0].href);if(results==null){return""}else{return decodeURIComponent(results[1].replace(/\+/g," "))}};$(function(){var list=$('.favorite-toggle');if(list.length>0){$.localStorage.load(list.data('key'),function(data){favoriteList=data;list.favoriteToggle().removeClass('favorite-toggle')},function(recv){$.getJSON($.service('favorite','list'),recv)},3600)}});$document.ajaxComplete(function(){$('.favorite-toggle').favoriteToggle().removeClass('favorite-toggle')});$document.ajaxError(function(event,jqxhr,settings,thrownError){$(".modal.fade.in").modal("hide");var message;if(!thrownError&&jqxhr.status!==200){if(jqxhr.status){message=jqxhr.status+" "+jqxhr.statusText}else{message="AJAX: "+jqxhr.statusText+" "+jqxhr.status+" ("+jqxhr.state()+") for URL: "+settings.url}}
if(message){$("#tikifeedback").showError(message)}});$.fn.showBusy=function($spinner){if(!$spinner){var pos=$(this).position();$spinner=$("<img src='img/spinner.gif' alt='"+tr("Wait")+"' class='ajax-spinner' />").css({"position":"absolute","top":pos.top+($(this).height()/2),"left":pos.left+($(this).width()/2)-8}).data("target",this);$(this).parent().find(".ajax-spinner").remove();$(this).parent().append($spinner);$(this).attr("disabled",!0).css("opacity",0.5);return $spinner}else{$($spinner.data("target")).attr("disabled",!1).css("opacity",1);$spinner.remove();return null}}})(jQuery);if(window.attachEvent&&!window.addEventListener){window.attachEvent("onunload",function(){for(var id in jQuery.cache){var item=jQuery.cache[id];if(item.handle){if(item.handle.elem===window){for(var type in item.events){if(type!=="unload"){try{jQuery.event.remove(item.handle.elem,type)}catch(e){}}}}else{try{jQuery.event.remove(item.handle.elem)}catch(e){}}}}})}
$.tikiModal=function(msg){return $('body').tikiModal(msg)};$.fn.tikiModal=function(msg){var obj=$(this);if(!obj.length){return null}
var lastModal=obj.data('lastModal');if(!lastModal){lastModal=Math.floor(Math.random()*1000);obj.data('lastModal',lastModal)}
var box={top:obj.offset().top,left:obj.offset().left,height:obj.outerHeight(),width:obj.outerWidth()};var modal=$('body').find('#modal_'+lastModal);var spinner=$('<img src="img/spinner.gif" style="vertical-align: top; margin-right: .5em;" />');if(!msg){modal.fadeOut(function(){$(this).remove()});obj.removeData('lastModal');return obj}
if(modal.length){modal.find('.dialog').empty().html(spinner).append(msg);return obj}
modal=$('<div id="modal_'+lastModal+'" class="tiki-modal">'+'<div class="mask" />'+'<div class="dialog"></div>'+'</div>').appendTo('body');var zIndex=0;if(obj.is("body")){zIndex=2147483646-1;box.top=obj.offset().top+$window.scrollTop();box.left=obj.offset().left+$window.scrollLeft()}else{obj.parents().addBack().each(function(){var z=$(this).css("z-index");if(z&&z!=='auto'&&z>zIndex){zIndex=Number(z)}})}
modal.width(box.width).height(box.height).css('top',box.top+'px').css('left',box.left+'px').find('.mask').height(box.height).fadeTo(1000,0.6).parent().find('.dialog').append(spinner).append(msg);var dialog=modal.find('.dialog');dialog.css({marginTop:(dialog.height()/-2)+"px",marginLeft:(dialog.width()/-2)+"px"});if(zIndex){modal.css("z-index",zIndex+1)}
return obj};$.fn.valWidth=function(){var me=$(this);return me.ready(function(){var h=me.height();if(!h){h=me.offsetParent().css("font-size");if(h){h=parseInt(h.replace("px",""))}}
me.keyup(function(){var width=me.val().length*h;me.stop().animate({width:(width>h?width:h)},200)}).keyup()})};$.paginationHelper=function(){$('.pagenums').each(function(){var me=$(this);var step=me.find('input.pagenumstep');var endOffset=(me.find('input.pagenumend').val()-1)*step.data('step');var url=step.data('url');var offset_jsvar=step.data('offset_jsvar');var offset_arg=step.data('offset_arg');me.find('span.pagenumstep').replaceWith($('<input type="text" style="font-size: inherit; " />').val(step.val()).change(function(){var newOffset=step.data('step')*($(this).val()-1);if(newOffset>=0){newOffset=(newOffset>endOffset?endOffset:newOffset);window[offset_jsvar]=newOffset;if(step[0]){if(step.attr('onclick')){step[0].onclick();return}}
document.location=url+offset_arg+"="+newOffset}}).keyup(function(e){switch(e.which){case 13:$(this).blur()}}).valWidth())})};$.fn.visible=function(fn,isOne){if(fn){$(this).each(function(){var me=$(this);if(isOne){me.one('visible',fn)}else{me.on('visible',fn)}
function visibilityHelper(){if(!me.is(':visible')){setTimeout(visibilityHelper,500)}else{me.trigger('visible')}}
visibilityHelper()})}else{$(this).trigger('visible')}
return this};$.download=function(url,data,method){if(url&&data){data=typeof data=='string'?data:jQuery.param(data);var inputs='';jQuery.each(data.split('&'),function(){var pair=this.split('=');inputs+='<input type="hidden" name="'+pair[0]+'" value="'+pair[1]+'" />'});jQuery('<form action="'+url+'" method="'+(method||'post')+'">'+inputs+'</form>').appendTo('body').submit().remove()}};$.uiIcon=function(type){return $('<div style="width: 1.4em; height: 1.4em; margin: .2em; display: inline-block; cursor: pointer;">'+'<span class="ui-icon ui-icon-'+type+'">&nbsp;</span>'+'</div>').hover(function(){$(this).addClass('ui-state-highlight')},function(){$(this).removeClass('ui-state-highlight')})};$.uiIconButton=function(type){return $.uiIcon(type).addClass('ui-state-default ui-corner-all')};$.rangySupported=function(fn){if(window.rangy){rangy.init();var cssClassApplierModule=rangy.modules.CssClassApplier;return fn()}};$.fn.rangy=function(fn){var me=$(this);$.rangySupported(function(){$document.mouseup(function(e){if(me.data('rangyBusy'))return;var selection=rangy.getSelection();var html=selection.toHtml();var text=selection.toString();if(text.length>3&&rangy.isUnique(me[0],text)){if(fn)
if($.isFunction(fn))
fn({text:text,x:e.pageX,y:e.pageY})}})});return this};$.fn.rangyRestore=function(phrase,fn){var me=$(this);$.rangySupported(function(){phrase=rangy.setPhrase(me[0],phrase);if(fn)
if($.isFunction(fn))
fn(phrase)});return this};$.fn.rangyRestoreSelection=function(phrase,fn){var me=$(this);$.rangySupported(function(){phrase=rangy.setPhraseSelection(me[0],phrase);if(fn)
if($.isFunction(fn))
fn(phrase)});return this};$.fn.realHighlight=function(){var o=$(this);$.rangySupported(function(){rangy.setPhraseBetweenNodes(o.first(),o.last(),document)});return this};$.fn.ajaxEditDraw=function(options){var me=$(this).attr('href','tiki-ajax_services.php');options=$.extend({saved:function(){},closed:function(){}},options);$.tikiModal(tr('Loading editor'));me.serviceDialog({title:me.attr('title'),data:{controller:'draw',action:'edit',fileId:me.data('fileid'),galleryId:me.data('galleryid'),imgParams:me.data('imgparams'),raw:!0},modal:!0,zIndex:9999,fullscreen:!0,load:function(data){if(me.data('drawLoaded'))return!1;me.data('drawLoaded',!0);me.drawing=$('#tiki_draw').loadDraw({fileId:me.data('fileid'),galleryId:me.data('galleryid'),name:me.data('name'),imgParams:me.data('imgparams'),data:$('#fileData').val()}).on('savedDraw',function(e,o){me.data('drawLoaded',!1);me.drawing.parent().dialog('destroy');me.drawing.remove();var img=$('.pluginImg'+me.data('fileid')).show();if(img.length<1)document.location=document.location+'';var w=img.width(),h=img.height();if(img.hasClass('regImage')){var replacement=$('<div />').attr('class',img.attr('class')).attr('style',img.attr('style')).attr('id',img.attr('id')).insertAfter(img);img.remove();img=replacement}
var src=me.data('src');$('<div class=\"svgImage\" />').load(src?src:'tiki-download_file.php?fileId='+o.fileId+'&display',function(){$(this).css('position','absolute').fadeTo(0,0.01).prependTo('body').find('img,svg').scaleImg({width:w,height:h});img.html($(this).children());$(this).remove()});if(!options.saved)return;options.saved(o.fileId);me.data('fileid',o.fileId);if(o.imgParams&&o.imgParams.fileId){o.imgParams.fileId=o.fileId;me.data('imgparams',o.imgParams)}}).submit(function(){me.drawing.saveDraw();return!1}).on('loadedDraw',function(){me.drawing.parent().css('padding','0px');var serviceDialog=me.data('serviceDialog');if(serviceDialog){var drawFrame=$('#svgedit');serviceDialog.on('dialogresize',function(){drawFrame.height(serviceDialog.height()-4)}).trigger('dialogresize')}
$.tikiModal()});me.drawing.find('#drawMenu').remove()},close:function(){if(me.data('drawLoaded')){me.data('drawLoaded',!1);me.drawing.remove();if(!options.closed)return;options.closed(me)}}});return!1};$.notify=function(msg,settings){settings=$.extend({speed:10000},settings);var notify=$('#notify');if(!notify.length){notify=$('<div id="notify" />').css('top','5px').css('right','5px').css('position','fixed').css('z-index',9999999).css('padding','5px').width($window.width()/5).prependTo('body')}
var note=$('<div class="notify ui-state-error ui-corner-all ui-widget ui-widget-content" />').append(msg).css('padding','5px').css('margin','5px').mousedown(function(){return!1}).hover(function(){$(this).stop().fadeTo(500,0.3)},function(){$(this).stop().fadeTo(500,1)}).prependTo(notify);setTimeout(function(){note.fadeOut().slideUp();setTimeout(function(){note.remove()},1000)},settings.speed)};function delayedExecutor(delay,callback)
{var timeout;return function(){var args=arguments;if(timeout){clearTimeout(timeout);timeout=null}
timeout=setTimeout(function(){callback.apply(this,args)},delay)}}
$(function(){$(".toggle_zone").click(function(){var $this=$(this),zone="",icon_left="toggle-left",icon_right="toggle-right";if($this.is(".right")){zone="right";icon_left="toggle-right";icon_right="toggle-left"}else if($this.is(".left")){zone="left"}
if($this.find(".icon-"+icon_left).length){$this.find(".icon").setIcon(icon_right);setCookie("hide_zone_"+zone,'y');$("body").addClass("hide_zone_"+zone)}else{$this.find(".icon").setIcon(icon_left);deleteCookie("hide_zone_"+zone);$("body").removeClass("hide_zone_"+zone)}
return!1})});$.fn.moveToWithinWindow=function(){var $el=$(this);var h=$el.height(),w=$el.width(),o=$el.offset(),po=$el.parent().offset(),st=$window.scrollTop(),sl=$window.scrollLeft(),wh=$window.height(),ww=$window.width();if(w+o.left>sl+ww){$el.animate({'left':sl+ww-w-po.left},'fast')}
if(h+o.top>st+wh){$el.animate({'top':st+wh-(h>wh?wh:h)-po.top},'fast')}else if(o.top<st){$el.animate({'top':st-po.top},'fast')}};$.fn.scaleImg=function(max){$(this).each(function(){var h,w,img=$(this),actual={height:img.height(),width:img.width()},original=$(this).clone(),parent=img.parent();var winner='';if(actual.height>max.height){winner='height'}else if(actual.width>max.width){winner='width'}
if(winner){var g=img.find('g');if(g.length){img.attr('preserveAspectRatio','xMinYMin meet');parent.css('overflow','hidden').width(max.width).height(max.height);g.attr('transform','scale( '+(100/(actual[winner]/max[winner])*0.01)+' )')}else{if(actual.height>actual.width){h=max.height;w=Math.ceil(actual.width/actual.height*max.height)}else{w=max.width;h=Math.ceil(actual.height/actual.width*max.width)}
img.css({height:h,width:w})}
img.css('cursor',"url(img/icons/zoom.gif),auto").click(function(){$('<div/>').append(original).dialog({modal:!0,width:Math.min($(window).width(),actual.width+20),height:Math.min($(window).height(),actual.height+50)});return!1})}});return this};$.curCSS=function(element,property){return $(element).css(property)};$.fn.registerFacet=function(){this.each(function(){var element=this,entries=$($(this).data('for')).val().split(" "+$(this).data('join')+" ").map(function(value){return(value.charAt(0)==='"')?value.substr(1,value.length-2):value});function applyFilter(value){if(value){value=$.makeArray(value);value=value.map(function(value){return(-1===value.indexOf(' '))?value:('"'+value+'"')}).join(" "+$(element).data('join')+" ")}
$($(element).data('for')).val(value).change()}
if($(element).is('select')){$(this).val(entries).trigger("chosen:updated").change(function(){var value=$(this).val();applyFilter(value)})}else if($(element).has(':checkbox').length){$(':checkbox',element).each(function(){if(-1!==$.inArray($(this).val(),entries)){$(this).prop('checked',!0)}}).on('click',function(){applyFilter($(':checked',element).map(function(){return $(this).val()}))})}
var selected=$('option:selected, :checkbox:checked',this).length,all=$('option, :checkbox',this).length;if(all===1&&selected===0){$(this).closest('.facet-hide-group').hide()}});return this};$.fn.reload=function(){this.each(function(){if(this.reload){this.reload()}else if($(this).data('reload')){$(this).loadService({},{url:$(this).data('reload')})}});return this};$(document).on('mouseover','.media[data-href]',function(){$(this).css('cursor','pointer')});$(document).on('mouseout','.media[data-href]',function(){$(this).css('cursor','default')});$(document).on('click','.media[data-href]',function(){document.location.href=$(this).data('href')});$(document).on('hidden.bs.modal','.footer-modal.fade',function(){$(this).removeData('bs.modal').find('.modal-content').empty();$('body').toggleClass('modal-open',$('.modal.fade.in').length>0)});$(document).on('submit','.modal-body form:not(.no-ajax)',ajaxSubmitEventHandler(function(data){if(data.FORWARD){$(this).children().remove();$(this).loadService(data.FORWARD,{origin:this});$(this).closest('.modal').trigger('tiki.modal.redraw')}else{document.location.href=document.location.href.replace(/#.*$/,"")}}));$(document).on('click','[data-toggle=modal][data-size]',function(){var target=$(this).data('target'),size=$(this).data('size');$(target).one('hidden.bs.modal',function(){$('.modal-dialog',this).removeClass(size)}).find('.modal-dialog').addClass(size)});$(document).on('click','[data-toggle=modal][data-modal-title]',function(){var target=$(this).data('target'),title=$(this).data('modal-title');$(target).one('loaded.bs.modal',function(){$('.modal-title',this).text(title)})});$(document).on('loaded.bs.modal','.modal.fade',function(){$(this).trigger('tiki.modal.redraw')});$(document).on('shown.bs.modal','.modal',function(){$('.modal-body :input',this).first().focus();$('.modal-backdrop',this).slice(1).remove();if($.applyChosen){$(this).applyChosen()}
if($("#timer-seconds",this).length){var $seconds=$("#timer-seconds"),counter=$seconds.text(),timer=setInterval(function(){$seconds.text(--counter);if(counter==0||counter<0){$.closeModal();window.location=window.location.href}},1000)}});$(document).on('tiki.modal.redraw','.modal.fade',function(){var modal=this,$button;$('.modal-footer .auto-btn',modal).remove();$('div.submit .btn',modal).each(function(){var $submit=$(this);if($submit.is('a:not(.custom-handling)')){$button=$submit}else{$submit.hide();$button=$('<button>').text($submit.val()||$submit.text()).attr('class',$submit.attr('class')).addClass('auto-btn').click(function(){$submit.click();if(typeof $submit.parents("form").validate!=="function"){$button.off("click").css("opacity",0.3)}})}
$('.modal-footer',modal).append($button)});if($.fn.flexibleSyntaxHighlighter){$('textarea',modal).flexibleSyntaxHighlighter()}
$(".nav-tabs",this).each(function(){if($(".active",this).length===0){$("li:first-child a",this).tab("show")}});if($.applyChosen){$(this).applyChosen()}
if(jqueryTiki.tooltips){$(this).tiki_popover()}});$(document).on("ready tiki.modal.redraw",function(){$(".depends").each(function(){var $depends=$(this),on=$depends.data("on");$("[name="+on+"]").change(function(){if($(this).is("input[type=checkbox]")&&$(this).is(":checked")){$depends.show()}else{$depends.hide()}}).change()})});$(function(){var $tabs=$('a[data-toggle=tab][href="'+document.location.hash+'"]'),tabShown=!1,notShown=[];if(document.location.search.match(/cookietab=/)){tabShown=!0}else if(document.location.hash&&$tabs.length){$tabs.tab('show');tabShown=!0}else{$(".tabs").each(function(){var name=$(this).data("name"),t=getCookie(name,"tabs","notfound");var $tab=$('.active > a[data-toggle=tab]',this);if(t&&$tab.length===0){$tab=$('a[data-toggle=tab][href="'+t+'"]')}
if($tab.length){$tab.tab('show');tabShown=!0}else if(name){notShown.push(name)}})}
if(typeof $().tab==="function"){if(!tabShown&&!notShown.length){$("a[data-toggle=tab]:first").tab("show")}else if(notShown.length){for(var i=0;i<notShown.length;i++){$(".tabs[data-name="+notShown[i]+"] a[data-toggle=tab]:first").tab("show")}}}
$('a[data-toggle="tab"]').on('show.bs.tab',function(e){if($(this).parents(".tab-content").length===0){document.location.hash=$(e.target).attr("href")}
setCookieBrowser($(this).parents(".tabs:first").data("name"),$(e.target).attr("href"),"tabs")}).click(function(){var scroll=$window.scrollTop();$(this).tab('show');$window.scrollTop(scroll)});$("input[name='session_protected']").on('click',function(){if($(this).prop('type')=='checkbox'&&$(this).data('tiki-admin-child-block')=='#session_protected_childcontainer'){var checkbox=$("input[name='session_protected']");if(checkbox.prop('checked')&&location.protocol!='https:'){$(this).confirmationDialog({title:tr('Warning - Protect all sessions with HTTPS'),message:tr('You seem to be accessing the website using HTTP only, if your HTTPS settings are not correct, you will be locked out of the website'),success:function(){checkbox.prop('checked',!0)}});return!1}}})});$.openModal=function(options){var href=options.remote,$target;var backdrop=options.backdrop?options.backdrop:!0;var keyboard=options.keyboard!='undefined'?options.keyboard:!0;if(-1===href.indexOf('?')){href+='?modal=1'}else{href+='&modal=1'}
$target=$('.modal.fade:not(.in)').first().one('loaded.bs.modal',options.open||function(){}).one('hidden.bs.modal',options.close||function(){}).modal({remote:href,backdrop:backdrop,keyboard:keyboard});if(options.title){$target.one('loaded.bs.modal',function(){$('.modal-title',this).text(options.title)})}
if(options.size){$target.find('.modal-dialog').addClass(options.size);$target.one('hidden.bs.modal',function(){$('.modal-dialog',this).removeClass(options.size)})}};$.closeModal=function(options){options=options||{};var done=options.done;if(done){done=function(){setTimeout(options.done,0)}}
$('.modal.fade.in').last().one('hidden.bs.modal',done||function(){}).modal('hide')};$.fn.clickModal=function(options,href){this.click($.clickModal(options,href));return this};$.clickModal=function(options,href){return function(e){var control=this,url;if(!href){url=$(this).attr('href')}else{url=href}
if($.isFunction(e.preventDefault)){e.preventDefault()}
$.openModal({title:options.title,size:options.size,remote:url,open:function(){if(options.open){options.open.apply(this,[])}
$('form:not(.no-ajax)',this).addClass('no-ajax').submit(ajaxSubmitEventHandler(function(data){if(options.success){options.success.apply(control,[data])}}))}})}};function showTab(tabNumber){var thisTabId=$('#col1').find('.tab-pane.active').attr('id'),tabNames=thisTabId.substr(0,thisTabId.indexOf('-')+1);$('a[href="#'+tabNames+tabNumber+'"]').tab('show')}
function feedback(mes,type,modal,title,icon,disablescroll,killall,custom)
{mes=mes||[];if(!$.isArray(mes)){mes=[mes]}
if(mes.length==1){var meshtml='<ul class="list-unstyled">'}else{var meshtml='<ul>'}
$.each(mes,function(i,val){meshtml+='<li>'+val+'</li>'});meshtml+='</ul>';type=type||'info';modal=modal||!1;disablescroll=disablescroll||!1;killall=killall||!1;custom=$(custom).length?$(custom).first():null;var target,map={'error':{title:tr('Error'),class:'danger',icon:'error'},'warning':{title:tr('Warning'),class:'warning',icon:'warning'},'success':{title:tr('Success'),class:'success',icon:'success'},'info':{title:tr('Note'),class:'info',icon:'information'}};var check=['error','warning','success','info'];type=$.inArray(type,check)>-1?type:'info';title=title||map[type].title;icon=icon||map[type].icon;icon=$.fn.getIcon(icon);if(modal){if(mes.length>0){meshtml='<div class="alert alert-dismissable alert-'+map[type]['class']+'">'+meshtml+'</div>'}else{meshtml=''}
target=$('.modal.fade:not(.in)').first();$('.modal-content',target).html('<div class="modal-header">'+'<button type="button" class="close" data-dismiss="modal">x</button>'+'<h4 class="text-'+map[type]['class']+'">'+icon[0].outerHTML+' '+title+'</h4>'+'</div>'+'<div class="modal-body">'+meshtml+'</div>');target.modal()}else{if(killall){$(custom?custom:'div#tikifeedback').find('div.alert.alert-dismissable').remove()}
if(mes.length==0){meshtml=''}
$(custom?custom:'div#tikifeedback').append('<div class="alert alert-dismissable alert-'+map[type]['class']+'">'+'<button type="button" class="close" data-dismiss="modal">x</button>'+'<h4 class="text-'+map[type]['class']+'">'+icon[0].outerHTML+' '+title+'</h4>'+meshtml+'</div>').on('click','button.close',function(){$(this).parent().remove()});if(!disablescroll){$('html, body').animate({scrollTop:$(custom?custom:'div#tikifeedback').offset().top},500)}}}
$.fn.clickInline=function(container,options){this.click($.clickInline(container,options));return this};$.clickInline=function(container,options,href){return function(e){var control=this,url;if(!href){url=$(this).attr('href')}else{url=href}
if($.isFunction(e.preventDefault)){e.preventDefault()}
var $this=$(this);$this.hide();$.get(url,function(data){if(container instanceof jQuery){container.html("");container.append(data);if(options.open){options.open.apply(this,[])}}
$this.parent().find('.inline.file-uploader').submit(function(e,data){e.preventDefault();if(options.success){options.success.apply(control,[data])}
return!1})})}};window.regCapsLock=function(){};$.ajaxPrefilter(function(options,originalOptions,jqXHR){if(options.dataType=='script'||originalOptions.dataType=='script'){options.cache=!0}});function readURL(input){if(input.files&&input.files[0]){$(".btn-upload-avatar").removeClass('disabled');var reader=new FileReader();reader.onload=function(e){$('.user-avatar-preview img').attr('src',e.target.result)}
reader.readAsDataURL(input.files[0])}}
$(document).on('change','#userfile',function(){readURL(this)});function objectLockToggle(icon){var $this=$(icon).tikiModal(" "),action=$this.data("is_locked")?"unlock":"lock";$.post($.service("object",action,{type:$this.data("type"),object:$this.data("object"),value:$this.data("is_locked")?"":jqueryTiki.username}),function(data){if(data&&data.locked){$this.find(".icon").setIcon("lock");$this.data("is_locked","1").attr("title",tr("Locked by "+jqueryTiki.userRealName)).parent().find("input[name=locked]").val(jqueryTiki.username)}else{$this.find(".icon").setIcon("unlock");$this.data("is_locked","").attr("title","").parent().find("input[name=locked]").val("")}},"json").done(function(){$this.tikiModal()});return!1}(function setup_removediacritics_function(){var characterEquivalents={'a':'\u00e1\u00e0\u00e2\u00e3\u00e4\u0105\u00e5','A':'\u00c1\u00c0\u00c2\u00c3\u00c4\u0104\u00c5','c':'\u00e7\u0107\u010d','C':'\u00c7\u0106\u010c','e':'\u00e9\u00e8\u00ea\u00eb\u011b\u0119','E':'\u00c9\u00c8\u00ca\u00cb\u011a\u0118','i':'\u00ed\u00ec\u0130\u00ee\u00ef\u0131','I':'\u00cd\u00cc\u0130\u00ce\u00cf','o':'\u00f3\u00f2\u00f4\u00f5\u00f6\u014d','O':'\u00d3\u00d2\u00d4\u00d5\u00d6\u014c','ss':'\u00df','SS':'\u1e9e','u':'\u00fa\u00f9\u00fb\u00fc\u016f','U':'\u00da\u00d9\u00db\u00dc\u016e'};var characterRegex,characterRegexArray;function removeDiacritics(str){var chr,acc='[',eq=characterEquivalents;if(!characterRegex){characterRegexArray={};for(chr in eq){if(typeof chr==='string'){acc+=eq[chr];characterRegexArray[chr]=new RegExp('['+eq[chr]+']','g')}}
characterRegex=new RegExp(acc+']')}
if(characterRegex.test(str)){for(chr in eq){if(typeof chr==='string'){str=str.replace(characterRegexArray[chr],chr)}}}
return str}
window.removeDiacritics=removeDiacritics})();setTimeout(function(){$('.timeout').click(function(){feedback([tr('The security ticket for this form has expired.')+' '+tr('To apply your changes, note or copy them, reload the page, re-enter them and retry submitting.')],'warning',!0,tr('Security ticket timed out'));target=$('.modal.fade:not(.in)').first();$('.modal-body',target).after('<div class="modal-footer">'+'<a href="#" onclick="$.closeModal();return false;" class="btn btn-default">'+tr('Cancel (just close this dialog)')+'</a>'+'<a href="'+location.href+'" onclick="location.reload();return false;" class="btn btn-primary">'+tr('Reload now (discards changes)')+'</a>'+'</div>');return!1})},1000*60*60*4);$(document).ajaxComplete(function(e,jqxhr){var feedback=jqxhr.getResponseHeader('X-Tiki-Feedback'),tfb=$('#tikifeedback');if(feedback){feedback=decodeURIComponent(feedback);tfb.fadeIn(200,function(){tfb.html($($.parseHTML(feedback)).filter('#tikifeedback').html());var title=tfb.find('span.rboxtitle').text().trim(),content=tfb.find('div.rboxcontent').text().trim();tfb.find('span.rboxtitle').text(title);tfb.find('div.rboxcontent').text(content);if(tfb.offset().top<$(window).scrollTop()){tfb.find('div.rboxcontent').after('<div id="move-message" style="font-size:smaller;margin-top:10px"><em>'+tr('This message will move to the top of the page after a few seconds.')+'</em>');tfb.offset({'top':$(window).scrollTop()});tfb.css('z-index',3000);setTimeout(function(){tfb.fadeOut(1000,function(){$('div#col1').prepend(tfb);tfb.css({'z-index':'','position':'','top':''});tfb.find('div#move-message').css('visibility','hidden');tfb.fadeIn()})},5000)}})}
tfb.find('.clear').on('click',function(){$(tfb).empty();$('div#col1').prepend(tfb);tfb.css({'z-index':'','position':'','top':''});return!0})});
/* rank:50standard - minify:ok. vendor_bundled/vendor/jquery/plugins/jquery-json/src/jquery.json.js */
(function($){'use strict';var escape=/["\\\x00-\x1f\x7f-\x9f]/g,meta={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'},hasOwn=Object.prototype.hasOwnProperty;$.toJSON=typeof JSON==='object'&&JSON.stringify?JSON.stringify:function(o){if(o===null){return'null'}
var pairs,k,name,val,type=$.type(o);if(type==='undefined'){return undefined}
if(type==='number'||type==='boolean'){return String(o)}
if(type==='string'){return $.quoteString(o)}
if(typeof o.toJSON==='function'){return $.toJSON(o.toJSON())}
if(type==='date'){var month=o.getUTCMonth()+1,day=o.getUTCDate(),year=o.getUTCFullYear(),hours=o.getUTCHours(),minutes=o.getUTCMinutes(),seconds=o.getUTCSeconds(),milli=o.getUTCMilliseconds();if(month<10){month='0'+month}
if(day<10){day='0'+day}
if(hours<10){hours='0'+hours}
if(minutes<10){minutes='0'+minutes}
if(seconds<10){seconds='0'+seconds}
if(milli<100){milli='0'+milli}
if(milli<10){milli='0'+milli}
return'"'+year+'-'+month+'-'+day+'T'+hours+':'+minutes+':'+seconds+'.'+milli+'Z"'}
pairs=[];if($.isArray(o)){for(k=0;k<o.length;k++){pairs.push($.toJSON(o[k])||'null')}
return'['+pairs.join(',')+']'}
if(typeof o==='object'){for(k in o){if(hasOwn.call(o,k)){type=typeof k;if(type==='number'){name='"'+k+'"'}else if(type==='string'){name=$.quoteString(k)}else{continue}
type=typeof o[k];if(type!=='function'&&type!=='undefined'){val=$.toJSON(o[k]);pairs.push(name+':'+val)}}}
return'{'+pairs.join(',')+'}'}};$.evalJSON=typeof JSON==='object'&&JSON.parse?JSON.parse:function(str){return eval('('+str+')')};$.secureEvalJSON=typeof JSON==='object'&&JSON.parse?JSON.parse:function(str){var filtered=str.replace(/\\["\\\/bfnrtu]/g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,'');if(/^[\],:{}\s]*$/.test(filtered)){return eval('('+str+')')}
throw new SyntaxError('Error parsing JSON, source is not valid.')};$.quoteString=function(str){if(str.match(escape)){return'"'+str.replace(escape,function(a){var c=meta[a];if(typeof c==='string'){return c}
c=a.charCodeAt();return'\\u00'+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"'}
return'"'+str+'"'}}(jQuery));
/* rank:50standard - minify:ok. lib/jquery_tiki/tiki-ajax_services.js */
$('[type=submit].confirm-submit').click(function(){var target=$('.modal.fade:not(.in)').first();$.post($(this).attr('formaction'),$(this.form).serialize(),function(data){$('.modal-content',target).html(data);target.modal()});return!1});$('[type=submit].service-submit').click(function(){$.post($(this).attr('formaction'),$(this.form).serialize(),function(data){});return!1});$(document).on('click','button[form="confirm-action"]',function(ev){ev.preventDefault();$('#confirm-action').submit()});function confirmAction(form){$.ajax({dataType:'json',url:$(form).attr('action'),type:'POST',data:$(form).serialize(),success:function(data){if(!data){$.closeModal();return}
var extra=data.extra||!1,dataurl=data.url||!1,dataError=data.error||!1;if(extra){if(extra==='close'){$.closeModal()}else if(extra==='refresh'){$.closeModal();location.href=location.href.replace(/#.*$/,"")}}
if(dataurl){$.closeModal();var $href=document.location.href.replace(/#.*$/,"");if(dataurl.indexOf($href)>-1||dataurl===$href){document.location.href=dataurl;location.reload()}else{document.location.assign(dataurl)}}
if(dataError){if(dataError==='CSRF'){dataError=tr('Potential cross-site request forgery (CSRF) detected. Operation blocked. The security ticket may have expired - reloading the page may help.')}
$.closeModal();feedback(dataError,'error')}
return!1}})};
/* rank:50standard - minify:ok. lib/ajax/autosave.js */
var auto_save_submit=!1;var sending_auto_save=!1;var auto_save_debug=!1;function remove_save(editorId,autoSaveId){if(typeof editorId!=='string'||!editorId||!autoSaveId||auto_save_submit){return}
if(sending_auto_save){setTimeout(function(){remove_save(editorId,autoSaveId)},100)}
auto_save_submit=!0;$.ajax({url:$.service("autosave","delete"),data:{editor_id:editorId,referer:autoSaveId},type:"POST",async:!1,success:function(data){},error:function(req,status,error){if(error&&auto_save_debug){alert(tr("Auto Save removal returned an error: ")+error)}}})}
function toggle_autosaved(editorId,autoSaveId){if(typeof autoSaveId==='undefined'){autoSaveId=''}
var output='',prefix='';var $textarea=$('#'+editorId);var textareaEditor=syntaxHighlighter.get($textarea);var cked=typeof CKEDITOR!=='undefined'?CKEDITOR.instances[editorId]:null;if(!$textarea.data("original")){if(cked){prefix='cke_contents_'}
ajaxLoadingShow(prefix+editorId);$.getJSON($.service("autosave","get"),{editor_id:editorId,referer:autoSaveId},function(data){output=data.data;$textarea.data("original",$textarea.val());if(cked){cked.setData(output)}else if(textareaEditor){textareaEditor.setValue(output)}else if($("#"+editorId).length){$textarea.val(output)}
ajaxLoadingHide()})}else{syntaxHighlighter.sync($textarea);output=$textarea.data("original");if(cked){cked.setData(output)}else if(textareaEditor){textareaEditor.setValue(output)}else if($("#"+editorId).length){$("#"+editorId).val(output)}
$textarea.data("original","")}
var msg=$(".autosave_message_2:first").text();$(".autosave_message_2:first").text($(".autosave_message:first").text());$(".autosave_message:first").text(msg);return output}
function auto_save_allowHtml(form){return $("input[name=allowhtml]:checked",form).length||($("input[name=allowhtml][type=hidden]",form).length&&$("input[name=allowhtml][type=hidden]",form).val()?1:0)}
function auto_save(editorId){if(!editorId&&auto_save_debug){alert(tr("Auto save: No editorId set"))}
if(!auto_save_submit&&!sending_auto_save){var $textarea=$('#'+editorId);var autoSaveId=$textarea.data("autoSaveId");syntaxHighlighter.sync($textarea);var data=$textarea.val();var allowHtml=auto_save_allowHtml($textarea.prop("form"));if(data!==$textarea.data("original")||$textarea.data("last")!==data||$textarea.data("old_allowhtml")!=allowHtml){$textarea.data("last",data);sending_auto_save=!0;$.ajax({url:$.service("autosave","save"),data:{editor_id:editorId,referer:autoSaveId,data:data},type:"POST",success:function(data){if(ajaxPreviewWindow&&typeof ajaxPreviewWindow.get_new_preview==='function'){ajaxPreviewWindow.get_new_preview()}else{ajax_preview(editorId,autoSaveId,!0)}
$textarea.data("old_allowhtml",allowHtml);sending_auto_save=!1},error:function(req,status,error){if(error){if(error=="Forbidden"){error=req.responseText.replace(/(<([^>]+)>)/ig,"")}
alert(tr("Auto Save error: ")+error)}
sending_auto_save=!1}})}else{}}}
function register_id(editorId,autoSaveId){var $textarea=$('#'+editorId);$textarea.data("autoSaveId",autoSaveId);if(typeof syntaxHighlighter.sync==='function'){syntaxHighlighter.sync($textarea)}
$textarea.parents('form').submit(function(){remove_save(editorId,autoSaveId)});$textarea.change(function(){auto_save(editorId)})}
var ajaxPreviewWindow;function ajax_preview(editorId,autoSaveId,inPage){if(editorId){var $textarea=$('#'+editorId);var $autosavepreview=$("#autosave_preview");syntaxHighlighter.sync($textarea);var allowHtml=auto_save_allowHtml($textarea.prop("form"));if(!ajaxPreviewWindow){if(inPage){var $prvw=$("#autosave_preview:visible");if($prvw.length){ajaxLoadingShow($autosavepreview);var h=location.search.match(/&hdr=(\d?)/);h=h&&h.length?h[1]:"";$.get($.service("edit","preview"),{editor_id:editorId,autoSaveId:autoSaveId,inPage:1,hdr:h,allowHtml:allowHtml},function(data){data=data.replace(/\shref/gi," tiki_href").replace(/\sonclick/gi," tiki_onclick").replace(/<script[.\s\S]*?<\/script>/mgi,"");$(".preview_contents",$autosavepreview).html(data);$("#preview_diff_style").val(function(){return getCookie("preview_diff_style","preview","")});ajaxLoadingHide()})}}else{initPreviewWindow(editorId,autoSaveId,allowHtml)}}else{if(typeof ajaxPreviewWindow.get_new_preview==='function'){ajaxPreviewWindow.get_new_preview();ajaxPreviewWindow.focus()}else{initPreviewWindow(editorId,autoSaveId,allowHtml)}}}else{if(auto_save_debug){alert("Auto save data not found")}}}
function initPreviewWindow(editorId,autoSaveId,allowHtml){var features='menubar=no,toolbar=no,fullscreen=no,titlebar=no,status=no,width=600';var url=$.service("edit","preview",{editor_id:editorId,autoSaveId:autoSaveId,allowHtml:allowHtml});window.open(url,"_blank",features)}
$(window).on("unload",function(){if(ajaxPreviewWindow&&typeof ajaxPreviewWindow.get_new_preview==='function'){ajaxPreviewWindow.close()}});
/* rank:50standard - minify:ok. vendor_bundled/vendor/jquery/jquery-timepicker-addon/dist/jquery-ui-timepicker-addon.js */
(function(factory){if(typeof define==='function'&&define.amd){define(['jquery','jquery-ui'],factory)}else{factory(jQuery)}}(function($){$.ui.timepicker=$.ui.timepicker||{};if($.ui.timepicker.version){return}
$.extend($.ui,{timepicker:{version:"1.6.3"}});var Timepicker=function(){this.regional=[];this.regional['']={currentText:'Now',closeText:'Done',amNames:['AM','A'],pmNames:['PM','P'],timeFormat:'HH:mm',timeSuffix:'',timeOnlyTitle:'Choose Time',timeText:'Time',hourText:'Hour',minuteText:'Minute',secondText:'Second',millisecText:'Millisecond',microsecText:'Microsecond',timezoneText:'Time Zone',isRTL:!1};this._defaults={showButtonPanel:!0,timeOnly:!1,timeOnlyShowDate:!1,showHour:null,showMinute:null,showSecond:null,showMillisec:null,showMicrosec:null,showTimezone:null,showTime:!0,stepHour:1,stepMinute:1,stepSecond:1,stepMillisec:1,stepMicrosec:1,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMin:0,minuteMin:0,secondMin:0,millisecMin:0,microsecMin:0,hourMax:23,minuteMax:59,secondMax:59,millisecMax:999,microsecMax:999,minDateTime:null,maxDateTime:null,maxTime:null,minTime:null,onSelect:null,hourGrid:0,minuteGrid:0,secondGrid:0,millisecGrid:0,microsecGrid:0,alwaysSetTime:!0,separator:' ',altFieldTimeOnly:!0,altTimeFormat:null,altSeparator:null,altTimeSuffix:null,altRedirectFocus:!0,pickerTimeFormat:null,pickerTimeSuffix:null,showTimepicker:!0,timezoneList:null,addSliderAccess:!1,sliderAccessArgs:null,controlType:'slider',oneLine:!1,defaultValue:null,parse:'strict',afterInject:null};$.extend(this._defaults,this.regional[''])};$.extend(Timepicker.prototype,{$input:null,$altInput:null,$timeObj:null,inst:null,hour_slider:null,minute_slider:null,second_slider:null,millisec_slider:null,microsec_slider:null,timezone_select:null,maxTime:null,minTime:null,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMinOriginal:null,minuteMinOriginal:null,secondMinOriginal:null,millisecMinOriginal:null,microsecMinOriginal:null,hourMaxOriginal:null,minuteMaxOriginal:null,secondMaxOriginal:null,millisecMaxOriginal:null,microsecMaxOriginal:null,ampm:'',formattedDate:'',formattedTime:'',formattedDateTime:'',timezoneList:null,units:['hour','minute','second','millisec','microsec'],support:{},control:null,setDefaults:function(settings){extendRemove(this._defaults,settings||{});return this},_newInst:function($input,opts){var tp_inst=new Timepicker(),inlineSettings={},fns={},overrides,i;for(var attrName in this._defaults){if(this._defaults.hasOwnProperty(attrName)){var attrValue=$input.attr('time:'+attrName);if(attrValue){try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}}
overrides={beforeShow:function(input,dp_inst){if($.isFunction(tp_inst._defaults.evnts.beforeShow)){return tp_inst._defaults.evnts.beforeShow.call($input[0],input,dp_inst,tp_inst)}},onChangeMonthYear:function(year,month,dp_inst){if($.isFunction(tp_inst._defaults.evnts.onChangeMonthYear)){tp_inst._defaults.evnts.onChangeMonthYear.call($input[0],year,month,dp_inst,tp_inst)}},onClose:function(dateText,dp_inst){if(tp_inst.timeDefined===!0&&$input.val()!==''){tp_inst._updateDateTime(dp_inst)}
if($.isFunction(tp_inst._defaults.evnts.onClose)){tp_inst._defaults.evnts.onClose.call($input[0],dateText,dp_inst,tp_inst)}}};for(i in overrides){if(overrides.hasOwnProperty(i)){fns[i]=opts[i]||this._defaults[i]||null}}
tp_inst._defaults=$.extend({},this._defaults,inlineSettings,opts,overrides,{evnts:fns,timepicker:tp_inst});tp_inst.amNames=$.map(tp_inst._defaults.amNames,function(val){return val.toUpperCase()});tp_inst.pmNames=$.map(tp_inst._defaults.pmNames,function(val){return val.toUpperCase()});tp_inst.support=detectSupport(tp_inst._defaults.timeFormat+(tp_inst._defaults.pickerTimeFormat?tp_inst._defaults.pickerTimeFormat:'')+(tp_inst._defaults.altTimeFormat?tp_inst._defaults.altTimeFormat:''));if(typeof(tp_inst._defaults.controlType)==='string'){if(tp_inst._defaults.controlType==='slider'&&typeof($.ui.slider)==='undefined'){tp_inst._defaults.controlType='select'}
tp_inst.control=tp_inst._controls[tp_inst._defaults.controlType]}
else{tp_inst.control=tp_inst._defaults.controlType}
var timezoneList=[-720,-660,-600,-570,-540,-480,-420,-360,-300,-270,-240,-210,-180,-120,-60,0,60,120,180,210,240,270,300,330,345,360,390,420,480,525,540,570,600,630,660,690,720,765,780,840];if(tp_inst._defaults.timezoneList!==null){timezoneList=tp_inst._defaults.timezoneList}
var tzl=timezoneList.length,tzi=0,tzv=null;if(tzl>0&&typeof timezoneList[0]!=='object'){for(;tzi<tzl;tzi++){tzv=timezoneList[tzi];timezoneList[tzi]={value:tzv,label:$.timepicker.timezoneOffsetString(tzv,tp_inst.support.iso8601)}}}
tp_inst._defaults.timezoneList=timezoneList;tp_inst.timezone=tp_inst._defaults.timezone!==null?$.timepicker.timezoneOffsetNumber(tp_inst._defaults.timezone):((new Date()).getTimezoneOffset()*-1);tp_inst.hour=tp_inst._defaults.hour<tp_inst._defaults.hourMin?tp_inst._defaults.hourMin:tp_inst._defaults.hour>tp_inst._defaults.hourMax?tp_inst._defaults.hourMax:tp_inst._defaults.hour;tp_inst.minute=tp_inst._defaults.minute<tp_inst._defaults.minuteMin?tp_inst._defaults.minuteMin:tp_inst._defaults.minute>tp_inst._defaults.minuteMax?tp_inst._defaults.minuteMax:tp_inst._defaults.minute;tp_inst.second=tp_inst._defaults.second<tp_inst._defaults.secondMin?tp_inst._defaults.secondMin:tp_inst._defaults.second>tp_inst._defaults.secondMax?tp_inst._defaults.secondMax:tp_inst._defaults.second;tp_inst.millisec=tp_inst._defaults.millisec<tp_inst._defaults.millisecMin?tp_inst._defaults.millisecMin:tp_inst._defaults.millisec>tp_inst._defaults.millisecMax?tp_inst._defaults.millisecMax:tp_inst._defaults.millisec;tp_inst.microsec=tp_inst._defaults.microsec<tp_inst._defaults.microsecMin?tp_inst._defaults.microsecMin:tp_inst._defaults.microsec>tp_inst._defaults.microsecMax?tp_inst._defaults.microsecMax:tp_inst._defaults.microsec;tp_inst.ampm='';tp_inst.$input=$input;if(tp_inst._defaults.altField){tp_inst.$altInput=$(tp_inst._defaults.altField);if(tp_inst._defaults.altRedirectFocus===!0){tp_inst.$altInput.css({cursor:'pointer'}).focus(function(){$input.trigger("focus")})}}
if(tp_inst._defaults.minDate===0||tp_inst._defaults.minDateTime===0){tp_inst._defaults.minDate=new Date()}
if(tp_inst._defaults.maxDate===0||tp_inst._defaults.maxDateTime===0){tp_inst._defaults.maxDate=new Date()}
if(tp_inst._defaults.minDate!==undefined&&tp_inst._defaults.minDate instanceof Date){tp_inst._defaults.minDateTime=new Date(tp_inst._defaults.minDate.getTime())}
if(tp_inst._defaults.minDateTime!==undefined&&tp_inst._defaults.minDateTime instanceof Date){tp_inst._defaults.minDate=new Date(tp_inst._defaults.minDateTime.getTime())}
if(tp_inst._defaults.maxDate!==undefined&&tp_inst._defaults.maxDate instanceof Date){tp_inst._defaults.maxDateTime=new Date(tp_inst._defaults.maxDate.getTime())}
if(tp_inst._defaults.maxDateTime!==undefined&&tp_inst._defaults.maxDateTime instanceof Date){tp_inst._defaults.maxDate=new Date(tp_inst._defaults.maxDateTime.getTime())}
tp_inst.$input.bind('focus',function(){tp_inst._onFocus()});return tp_inst},_addTimePicker:function(dp_inst){var currDT=$.trim((this.$altInput&&this._defaults.altFieldTimeOnly)?this.$input.val()+' '+this.$altInput.val():this.$input.val());this.timeDefined=this._parseTime(currDT);this._limitMinMaxDateTime(dp_inst,!1);this._injectTimePicker();this._afterInject()},_parseTime:function(timeString,withDate){if(!this.inst){this.inst=$.datepicker._getInst(this.$input[0])}
if(withDate||!this._defaults.timeOnly){var dp_dateFormat=$.datepicker._get(this.inst,'dateFormat');try{var parseRes=parseDateTimeInternal(dp_dateFormat,this._defaults.timeFormat,timeString,$.datepicker._getFormatConfig(this.inst),this._defaults);if(!parseRes.timeObj){return!1}
$.extend(this,parseRes.timeObj)}catch(err){$.timepicker.log("Error parsing the date/time string: "+err+"\ndate/time string = "+timeString+"\ntimeFormat = "+this._defaults.timeFormat+"\ndateFormat = "+dp_dateFormat);return!1}
return!0}else{var timeObj=$.datepicker.parseTime(this._defaults.timeFormat,timeString,this._defaults);if(!timeObj){return!1}
$.extend(this,timeObj);return!0}},_afterInject:function(){var o=this.inst.settings;if($.isFunction(o.afterInject)){o.afterInject.call(this)}},_injectTimePicker:function(){var $dp=this.inst.dpDiv,o=this.inst.settings,tp_inst=this,litem='',uitem='',show=null,max={},gridSize={},size=null,i=0,l=0;if($dp.find("div.ui-timepicker-div").length===0&&o.showTimepicker){var noDisplay=' ui_tpicker_unit_hide',html='<div class="ui-timepicker-div'+(o.isRTL?' ui-timepicker-rtl':'')+(o.oneLine&&o.controlType==='select'?' ui-timepicker-oneLine':'')+'"><dl>'+'<dt class="ui_tpicker_time_label'+((o.showTime)?'':noDisplay)+'">'+o.timeText+'</dt>'+'<dd class="ui_tpicker_time '+((o.showTime)?'':noDisplay)+'"><input class="ui_tpicker_time_input" '+(o.timeInput?'':'disabled')+'/></dd>';for(i=0,l=this.units.length;i<l;i++){litem=this.units[i];uitem=litem.substr(0,1).toUpperCase()+litem.substr(1);show=o['show'+uitem]!==null?o['show'+uitem]:this.support[litem];max[litem]=parseInt((o[litem+'Max']-((o[litem+'Max']-o[litem+'Min'])%o['step'+uitem])),10);gridSize[litem]=0;html+='<dt class="ui_tpicker_'+litem+'_label'+(show?'':noDisplay)+'">'+o[litem+'Text']+'</dt>'+'<dd class="ui_tpicker_'+litem+(show?'':noDisplay)+'"><div class="ui_tpicker_'+litem+'_slider'+(show?'':noDisplay)+'"></div>';if(show&&o[litem+'Grid']>0){html+='<div style="padding-left: 1px"><table class="ui-tpicker-grid-label"><tr>';if(litem==='hour'){for(var h=o[litem+'Min'];h<=max[litem];h+=parseInt(o[litem+'Grid'],10)){gridSize[litem]++;var tmph=$.datepicker.formatTime(this.support.ampm?'hht':'HH',{hour:h},o);html+='<td data-for="'+litem+'">'+tmph+'</td>'}}
else{for(var m=o[litem+'Min'];m<=max[litem];m+=parseInt(o[litem+'Grid'],10)){gridSize[litem]++;html+='<td data-for="'+litem+'">'+((m<10)?'0':'')+m+'</td>'}}
html+='</tr></table></div>'}
html+='</dd>'}
var showTz=o.showTimezone!==null?o.showTimezone:this.support.timezone;html+='<dt class="ui_tpicker_timezone_label'+(showTz?'':noDisplay)+'">'+o.timezoneText+'</dt>';html+='<dd class="ui_tpicker_timezone'+(showTz?'':noDisplay)+'"></dd>';html+='</dl></div>';var $tp=$(html);if(o.timeOnly===!0){$tp.prepend('<div class="ui-widget-header ui-helper-clearfix ui-corner-all">'+'<div class="ui-datepicker-title">'+o.timeOnlyTitle+'</div>'+'</div>');$dp.find('.ui-datepicker-header, .ui-datepicker-calendar').hide()}
for(i=0,l=tp_inst.units.length;i<l;i++){litem=tp_inst.units[i];uitem=litem.substr(0,1).toUpperCase()+litem.substr(1);show=o['show'+uitem]!==null?o['show'+uitem]:this.support[litem];tp_inst[litem+'_slider']=tp_inst.control.create(tp_inst,$tp.find('.ui_tpicker_'+litem+'_slider'),litem,tp_inst[litem],o[litem+'Min'],max[litem],o['step'+uitem]);if(show&&o[litem+'Grid']>0){size=100*gridSize[litem]*o[litem+'Grid']/(max[litem]-o[litem+'Min']);$tp.find('.ui_tpicker_'+litem+' table').css({width:size+"%",marginLeft:o.isRTL?'0':((size/(-2*gridSize[litem]))+"%"),marginRight:o.isRTL?((size/(-2*gridSize[litem]))+"%"):'0',borderCollapse:'collapse'}).find("td").click(function(e){var $t=$(this),h=$t.html(),n=parseInt(h.replace(/[^0-9]/g),10),ap=h.replace(/[^apm]/ig),f=$t.data('for');if(f==='hour'){if(ap.indexOf('p')!==-1&&n<12){n+=12}
else{if(ap.indexOf('a')!==-1&&n===12){n=0}}}
tp_inst.control.value(tp_inst,tp_inst[f+'_slider'],litem,n);tp_inst._onTimeChange();tp_inst._onSelectHandler()}).css({cursor:'pointer',width:(100/gridSize[litem])+'%',textAlign:'center',overflow:'hidden'})}}
this.timezone_select=$tp.find('.ui_tpicker_timezone').append('<select></select>').find("select");$.fn.append.apply(this.timezone_select,$.map(o.timezoneList,function(val,idx){return $("<option />").val(typeof val==="object"?val.value:val).text(typeof val==="object"?val.label:val)}));if(typeof(this.timezone)!=="undefined"&&this.timezone!==null&&this.timezone!==""){var local_timezone=(new Date(this.inst.selectedYear,this.inst.selectedMonth,this.inst.selectedDay,12)).getTimezoneOffset()*-1;if(local_timezone===this.timezone){selectLocalTimezone(tp_inst)}else{this.timezone_select.val(this.timezone)}}else{if(typeof(this.hour)!=="undefined"&&this.hour!==null&&this.hour!==""){this.timezone_select.val(o.timezone)}else{selectLocalTimezone(tp_inst)}}
this.timezone_select.change(function(){tp_inst._onTimeChange();tp_inst._onSelectHandler();tp_inst._afterInject()});var $buttonPanel=$dp.find('.ui-datepicker-buttonpane');if($buttonPanel.length){$buttonPanel.before($tp)}else{$dp.append($tp)}
this.$timeObj=$tp.find('.ui_tpicker_time_input');this.$timeObj.change(function(){var timeFormat=tp_inst.inst.settings.timeFormat;var parsedTime=$.datepicker.parseTime(timeFormat,this.value);var update=new Date();if(parsedTime){update.setHours(parsedTime.hour);update.setMinutes(parsedTime.minute);update.setSeconds(parsedTime.second);$.datepicker._setTime(tp_inst.inst,update)}else{this.value=tp_inst.formattedTime;this.blur()}});if(this.inst!==null){var timeDefined=this.timeDefined;this._onTimeChange();this.timeDefined=timeDefined}
if(this._defaults.addSliderAccess){var sliderAccessArgs=this._defaults.sliderAccessArgs,rtl=this._defaults.isRTL;sliderAccessArgs.isRTL=rtl;setTimeout(function(){if($tp.find('.ui-slider-access').length===0){$tp.find('.ui-slider:visible').sliderAccess(sliderAccessArgs);var sliderAccessWidth=$tp.find('.ui-slider-access:eq(0)').outerWidth(!0);if(sliderAccessWidth){$tp.find('table:visible').each(function(){var $g=$(this),oldWidth=$g.outerWidth(),oldMarginLeft=$g.css(rtl?'marginRight':'marginLeft').toString().replace('%',''),newWidth=oldWidth-sliderAccessWidth,newMarginLeft=((oldMarginLeft*newWidth)/oldWidth)+'%',css={width:newWidth,marginRight:0,marginLeft:0};css[rtl?'marginRight':'marginLeft']=newMarginLeft;$g.css(css)})}}},10)}
tp_inst._limitMinMaxDateTime(this.inst,!0)}},_limitMinMaxDateTime:function(dp_inst,adjustSliders){var o=this._defaults,dp_date=new Date(dp_inst.selectedYear,dp_inst.selectedMonth,dp_inst.selectedDay);if(!this._defaults.showTimepicker){return}
if($.datepicker._get(dp_inst,'minDateTime')!==null&&$.datepicker._get(dp_inst,'minDateTime')!==undefined&&dp_date){var minDateTime=$.datepicker._get(dp_inst,'minDateTime'),minDateTimeDate=new Date(minDateTime.getFullYear(),minDateTime.getMonth(),minDateTime.getDate(),0,0,0,0);if(this.hourMinOriginal===null||this.minuteMinOriginal===null||this.secondMinOriginal===null||this.millisecMinOriginal===null||this.microsecMinOriginal===null){this.hourMinOriginal=o.hourMin;this.minuteMinOriginal=o.minuteMin;this.secondMinOriginal=o.secondMin;this.millisecMinOriginal=o.millisecMin;this.microsecMinOriginal=o.microsecMin}
if(dp_inst.settings.timeOnly||minDateTimeDate.getTime()===dp_date.getTime()){this._defaults.hourMin=minDateTime.getHours();if(this.hour<=this._defaults.hourMin){this.hour=this._defaults.hourMin;this._defaults.minuteMin=minDateTime.getMinutes();if(this.minute<=this._defaults.minuteMin){this.minute=this._defaults.minuteMin;this._defaults.secondMin=minDateTime.getSeconds();if(this.second<=this._defaults.secondMin){this.second=this._defaults.secondMin;this._defaults.millisecMin=minDateTime.getMilliseconds();if(this.millisec<=this._defaults.millisecMin){this.millisec=this._defaults.millisecMin;this._defaults.microsecMin=minDateTime.getMicroseconds()}else{if(this.microsec<this._defaults.microsecMin){this.microsec=this._defaults.microsecMin}
this._defaults.microsecMin=this.microsecMinOriginal}}else{this._defaults.millisecMin=this.millisecMinOriginal;this._defaults.microsecMin=this.microsecMinOriginal}}else{this._defaults.secondMin=this.secondMinOriginal;this._defaults.millisecMin=this.millisecMinOriginal;this._defaults.microsecMin=this.microsecMinOriginal}}else{this._defaults.minuteMin=this.minuteMinOriginal;this._defaults.secondMin=this.secondMinOriginal;this._defaults.millisecMin=this.millisecMinOriginal;this._defaults.microsecMin=this.microsecMinOriginal}}else{this._defaults.hourMin=this.hourMinOriginal;this._defaults.minuteMin=this.minuteMinOriginal;this._defaults.secondMin=this.secondMinOriginal;this._defaults.millisecMin=this.millisecMinOriginal;this._defaults.microsecMin=this.microsecMinOriginal}}
if($.datepicker._get(dp_inst,'maxDateTime')!==null&&$.datepicker._get(dp_inst,'maxDateTime')!==undefined&&dp_date){var maxDateTime=$.datepicker._get(dp_inst,'maxDateTime'),maxDateTimeDate=new Date(maxDateTime.getFullYear(),maxDateTime.getMonth(),maxDateTime.getDate(),0,0,0,0);if(this.hourMaxOriginal===null||this.minuteMaxOriginal===null||this.secondMaxOriginal===null||this.millisecMaxOriginal===null){this.hourMaxOriginal=o.hourMax;this.minuteMaxOriginal=o.minuteMax;this.secondMaxOriginal=o.secondMax;this.millisecMaxOriginal=o.millisecMax;this.microsecMaxOriginal=o.microsecMax}
if(dp_inst.settings.timeOnly||maxDateTimeDate.getTime()===dp_date.getTime()){this._defaults.hourMax=maxDateTime.getHours();if(this.hour>=this._defaults.hourMax){this.hour=this._defaults.hourMax;this._defaults.minuteMax=maxDateTime.getMinutes();if(this.minute>=this._defaults.minuteMax){this.minute=this._defaults.minuteMax;this._defaults.secondMax=maxDateTime.getSeconds();if(this.second>=this._defaults.secondMax){this.second=this._defaults.secondMax;this._defaults.millisecMax=maxDateTime.getMilliseconds();if(this.millisec>=this._defaults.millisecMax){this.millisec=this._defaults.millisecMax;this._defaults.microsecMax=maxDateTime.getMicroseconds()}else{if(this.microsec>this._defaults.microsecMax){this.microsec=this._defaults.microsecMax}
this._defaults.microsecMax=this.microsecMaxOriginal}}else{this._defaults.millisecMax=this.millisecMaxOriginal;this._defaults.microsecMax=this.microsecMaxOriginal}}else{this._defaults.secondMax=this.secondMaxOriginal;this._defaults.millisecMax=this.millisecMaxOriginal;this._defaults.microsecMax=this.microsecMaxOriginal}}else{this._defaults.minuteMax=this.minuteMaxOriginal;this._defaults.secondMax=this.secondMaxOriginal;this._defaults.millisecMax=this.millisecMaxOriginal;this._defaults.microsecMax=this.microsecMaxOriginal}}else{this._defaults.hourMax=this.hourMaxOriginal;this._defaults.minuteMax=this.minuteMaxOriginal;this._defaults.secondMax=this.secondMaxOriginal;this._defaults.millisecMax=this.millisecMaxOriginal;this._defaults.microsecMax=this.microsecMaxOriginal}}
if(dp_inst.settings.minTime!==null){var tempMinTime=new Date("01/01/1970 "+dp_inst.settings.minTime);if(this.hour<tempMinTime.getHours()){this.hour=this._defaults.hourMin=tempMinTime.getHours();this.minute=this._defaults.minuteMin=tempMinTime.getMinutes()}else if(this.hour===tempMinTime.getHours()&&this.minute<tempMinTime.getMinutes()){this.minute=this._defaults.minuteMin=tempMinTime.getMinutes()}else{if(this._defaults.hourMin<tempMinTime.getHours()){this._defaults.hourMin=tempMinTime.getHours();this._defaults.minuteMin=tempMinTime.getMinutes()}else if(this._defaults.hourMin===tempMinTime.getHours()===this.hour&&this._defaults.minuteMin<tempMinTime.getMinutes()){this._defaults.minuteMin=tempMinTime.getMinutes()}else{this._defaults.minuteMin=0}}}
if(dp_inst.settings.maxTime!==null){var tempMaxTime=new Date("01/01/1970 "+dp_inst.settings.maxTime);if(this.hour>tempMaxTime.getHours()){this.hour=this._defaults.hourMax=tempMaxTime.getHours();this.minute=this._defaults.minuteMax=tempMaxTime.getMinutes()}else if(this.hour===tempMaxTime.getHours()&&this.minute>tempMaxTime.getMinutes()){this.minute=this._defaults.minuteMax=tempMaxTime.getMinutes()}else{if(this._defaults.hourMax>tempMaxTime.getHours()){this._defaults.hourMax=tempMaxTime.getHours();this._defaults.minuteMax=tempMaxTime.getMinutes()}else if(this._defaults.hourMax===tempMaxTime.getHours()===this.hour&&this._defaults.minuteMax>tempMaxTime.getMinutes()){this._defaults.minuteMax=tempMaxTime.getMinutes()}else{this._defaults.minuteMax=59}}}
if(adjustSliders!==undefined&&adjustSliders===!0){var hourMax=parseInt((this._defaults.hourMax-((this._defaults.hourMax-this._defaults.hourMin)%this._defaults.stepHour)),10),minMax=parseInt((this._defaults.minuteMax-((this._defaults.minuteMax-this._defaults.minuteMin)%this._defaults.stepMinute)),10),secMax=parseInt((this._defaults.secondMax-((this._defaults.secondMax-this._defaults.secondMin)%this._defaults.stepSecond)),10),millisecMax=parseInt((this._defaults.millisecMax-((this._defaults.millisecMax-this._defaults.millisecMin)%this._defaults.stepMillisec)),10),microsecMax=parseInt((this._defaults.microsecMax-((this._defaults.microsecMax-this._defaults.microsecMin)%this._defaults.stepMicrosec)),10);if(this.hour_slider){this.control.options(this,this.hour_slider,'hour',{min:this._defaults.hourMin,max:hourMax,step:this._defaults.stepHour});this.control.value(this,this.hour_slider,'hour',this.hour-(this.hour%this._defaults.stepHour))}
if(this.minute_slider){this.control.options(this,this.minute_slider,'minute',{min:this._defaults.minuteMin,max:minMax,step:this._defaults.stepMinute});this.control.value(this,this.minute_slider,'minute',this.minute-(this.minute%this._defaults.stepMinute))}
if(this.second_slider){this.control.options(this,this.second_slider,'second',{min:this._defaults.secondMin,max:secMax,step:this._defaults.stepSecond});this.control.value(this,this.second_slider,'second',this.second-(this.second%this._defaults.stepSecond))}
if(this.millisec_slider){this.control.options(this,this.millisec_slider,'millisec',{min:this._defaults.millisecMin,max:millisecMax,step:this._defaults.stepMillisec});this.control.value(this,this.millisec_slider,'millisec',this.millisec-(this.millisec%this._defaults.stepMillisec))}
if(this.microsec_slider){this.control.options(this,this.microsec_slider,'microsec',{min:this._defaults.microsecMin,max:microsecMax,step:this._defaults.stepMicrosec});this.control.value(this,this.microsec_slider,'microsec',this.microsec-(this.microsec%this._defaults.stepMicrosec))}}},_onTimeChange:function(){if(!this._defaults.showTimepicker){return}
var hour=(this.hour_slider)?this.control.value(this,this.hour_slider,'hour'):!1,minute=(this.minute_slider)?this.control.value(this,this.minute_slider,'minute'):!1,second=(this.second_slider)?this.control.value(this,this.second_slider,'second'):!1,millisec=(this.millisec_slider)?this.control.value(this,this.millisec_slider,'millisec'):!1,microsec=(this.microsec_slider)?this.control.value(this,this.microsec_slider,'microsec'):!1,timezone=(this.timezone_select)?this.timezone_select.val():!1,o=this._defaults,pickerTimeFormat=o.pickerTimeFormat||o.timeFormat,pickerTimeSuffix=o.pickerTimeSuffix||o.timeSuffix;if(typeof(hour)==='object'){hour=!1}
if(typeof(minute)==='object'){minute=!1}
if(typeof(second)==='object'){second=!1}
if(typeof(millisec)==='object'){millisec=!1}
if(typeof(microsec)==='object'){microsec=!1}
if(typeof(timezone)==='object'){timezone=!1}
if(hour!==!1){hour=parseInt(hour,10)}
if(minute!==!1){minute=parseInt(minute,10)}
if(second!==!1){second=parseInt(second,10)}
if(millisec!==!1){millisec=parseInt(millisec,10)}
if(microsec!==!1){microsec=parseInt(microsec,10)}
if(timezone!==!1){timezone=timezone.toString()}
var ampm=o[hour<12?'amNames':'pmNames'][0];var hasChanged=(hour!==parseInt(this.hour,10)||minute!==parseInt(this.minute,10)||second!==parseInt(this.second,10)||millisec!==parseInt(this.millisec,10)||microsec!==parseInt(this.microsec,10)||(this.ampm.length>0&&(hour<12)!==($.inArray(this.ampm.toUpperCase(),this.amNames)!==-1))||(this.timezone!==null&&timezone!==this.timezone.toString()));if(hasChanged){if(hour!==!1){this.hour=hour}
if(minute!==!1){this.minute=minute}
if(second!==!1){this.second=second}
if(millisec!==!1){this.millisec=millisec}
if(microsec!==!1){this.microsec=microsec}
if(timezone!==!1){this.timezone=timezone}
if(!this.inst){this.inst=$.datepicker._getInst(this.$input[0])}
this._limitMinMaxDateTime(this.inst,!0)}
if(this.support.ampm){this.ampm=ampm}
this.formattedTime=$.datepicker.formatTime(o.timeFormat,this,o);if(this.$timeObj){if(pickerTimeFormat===o.timeFormat){this.$timeObj.val(this.formattedTime+pickerTimeSuffix)}
else{this.$timeObj.val($.datepicker.formatTime(pickerTimeFormat,this,o)+pickerTimeSuffix)}
if(this.$timeObj[0].setSelectionRange){var sPos=this.$timeObj[0].selectionStart;var ePos=this.$timeObj[0].selectionEnd;this.$timeObj[0].setSelectionRange(sPos,ePos)}}
this.timeDefined=!0;if(hasChanged){this._updateDateTime()}},_onSelectHandler:function(){var onSelect=this._defaults.onSelect||this.inst.settings.onSelect;var inputEl=this.$input?this.$input[0]:null;if(onSelect&&inputEl){onSelect.apply(inputEl,[this.formattedDateTime,this])}},_updateDateTime:function(dp_inst){dp_inst=this.inst||dp_inst;var dtTmp=(dp_inst.currentYear>0?new Date(dp_inst.currentYear,dp_inst.currentMonth,dp_inst.currentDay):new Date(dp_inst.selectedYear,dp_inst.selectedMonth,dp_inst.selectedDay)),dt=$.datepicker._daylightSavingAdjust(dtTmp),dateFmt=$.datepicker._get(dp_inst,'dateFormat'),formatCfg=$.datepicker._getFormatConfig(dp_inst),timeAvailable=dt!==null&&this.timeDefined;this.formattedDate=$.datepicker.formatDate(dateFmt,(dt===null?new Date():dt),formatCfg);var formattedDateTime=this.formattedDate;if(dp_inst.lastVal===""){dp_inst.currentYear=dp_inst.selectedYear;dp_inst.currentMonth=dp_inst.selectedMonth;dp_inst.currentDay=dp_inst.selectedDay}
if(this._defaults.timeOnly===!0&&this._defaults.timeOnlyShowDate===!1){formattedDateTime=this.formattedTime}else if((this._defaults.timeOnly!==!0&&(this._defaults.alwaysSetTime||timeAvailable))||(this._defaults.timeOnly===!0&&this._defaults.timeOnlyShowDate===!0)){formattedDateTime+=this._defaults.separator+this.formattedTime+this._defaults.timeSuffix}
this.formattedDateTime=formattedDateTime;if(!this._defaults.showTimepicker){this.$input.val(this.formattedDate)}else if(this.$altInput&&this._defaults.timeOnly===!1&&this._defaults.altFieldTimeOnly===!0){this.$altInput.val(this.formattedTime);this.$input.val(this.formattedDate)}else if(this.$altInput){this.$input.val(formattedDateTime);var altFormattedDateTime='',altSeparator=this._defaults.altSeparator!==null?this._defaults.altSeparator:this._defaults.separator,altTimeSuffix=this._defaults.altTimeSuffix!==null?this._defaults.altTimeSuffix:this._defaults.timeSuffix;if(!this._defaults.timeOnly){if(this._defaults.altFormat){altFormattedDateTime=$.datepicker.formatDate(this._defaults.altFormat,(dt===null?new Date():dt),formatCfg)}
else{altFormattedDateTime=this.formattedDate}
if(altFormattedDateTime){altFormattedDateTime+=altSeparator}}
if(this._defaults.altTimeFormat!==null){altFormattedDateTime+=$.datepicker.formatTime(this._defaults.altTimeFormat,this,this._defaults)+altTimeSuffix}
else{altFormattedDateTime+=this.formattedTime+altTimeSuffix}
this.$altInput.val(altFormattedDateTime)}else{this.$input.val(formattedDateTime)}
this.$input.trigger("change")},_onFocus:function(){if(!this.$input.val()&&this._defaults.defaultValue){this.$input.val(this._defaults.defaultValue);var inst=$.datepicker._getInst(this.$input.get(0)),tp_inst=$.datepicker._get(inst,'timepicker');if(tp_inst){if(tp_inst._defaults.timeOnly&&(inst.input.val()!==inst.lastVal)){try{$.datepicker._updateDatepicker(inst)}catch(err){$.timepicker.log(err)}}}}},_controls:{slider:{create:function(tp_inst,obj,unit,val,min,max,step){var rtl=tp_inst._defaults.isRTL;return obj.prop('slide',null).slider({orientation:"horizontal",value:rtl?val*-1:val,min:rtl?max*-1:min,max:rtl?min*-1:max,step:step,slide:function(event,ui){tp_inst.control.value(tp_inst,$(this),unit,rtl?ui.value*-1:ui.value);tp_inst._onTimeChange()},stop:function(event,ui){tp_inst._onSelectHandler()}})},options:function(tp_inst,obj,unit,opts,val){if(tp_inst._defaults.isRTL){if(typeof(opts)==='string'){if(opts==='min'||opts==='max'){if(val!==undefined){return obj.slider(opts,val*-1)}
return Math.abs(obj.slider(opts))}
return obj.slider(opts)}
var min=opts.min,max=opts.max;opts.min=opts.max=null;if(min!==undefined){opts.max=min*-1}
if(max!==undefined){opts.min=max*-1}
return obj.slider(opts)}
if(typeof(opts)==='string'&&val!==undefined){return obj.slider(opts,val)}
return obj.slider(opts)},value:function(tp_inst,obj,unit,val){if(tp_inst._defaults.isRTL){if(val!==undefined){return obj.slider('value',val*-1)}
return Math.abs(obj.slider('value'))}
if(val!==undefined){return obj.slider('value',val)}
return obj.slider('value')}},select:{create:function(tp_inst,obj,unit,val,min,max,step){var sel='<select class="ui-timepicker-select ui-state-default ui-corner-all" data-unit="'+unit+'" data-min="'+min+'" data-max="'+max+'" data-step="'+step+'">',format=tp_inst._defaults.pickerTimeFormat||tp_inst._defaults.timeFormat;for(var i=min;i<=max;i+=step){sel+='<option value="'+i+'"'+(i===val?' selected':'')+'>';if(unit==='hour'){sel+=$.datepicker.formatTime($.trim(format.replace(/[^ht ]/ig,'')),{hour:i},tp_inst._defaults)}
else if(unit==='millisec'||unit==='microsec'||i>=10){sel+=i}
else{sel+='0'+i.toString()}
sel+='</option>'}
sel+='</select>';obj.children('select').remove();$(sel).appendTo(obj).change(function(e){tp_inst._onTimeChange();tp_inst._onSelectHandler();tp_inst._afterInject()});return obj},options:function(tp_inst,obj,unit,opts,val){var o={},$t=obj.children('select');if(typeof(opts)==='string'){if(val===undefined){return $t.data(opts)}
o[opts]=val}
else{o=opts}
return tp_inst.control.create(tp_inst,obj,$t.data('unit'),$t.val(),o.min>=0?o.min:$t.data('min'),o.max||$t.data('max'),o.step||$t.data('step'))},value:function(tp_inst,obj,unit,val){var $t=obj.children('select');if(val!==undefined){return $t.val(val)}
return $t.val()}}}});$.fn.extend({timepicker:function(o){o=o||{};var tmp_args=Array.prototype.slice.call(arguments);if(typeof o==='object'){tmp_args[0]=$.extend(o,{timeOnly:!0})}
return $(this).each(function(){$.fn.datetimepicker.apply($(this),tmp_args)})},datetimepicker:function(o){o=o||{};var tmp_args=arguments;if(typeof(o)==='string'){if(o==='getDate'||(o==='option'&&tmp_args.length===2&&typeof(tmp_args[1])==='string')){return $.fn.datepicker.apply($(this[0]),tmp_args)}else{return this.each(function(){var $t=$(this);$t.datepicker.apply($t,tmp_args)})}}else{return this.each(function(){var $t=$(this);$t.datepicker($.timepicker._newInst($t,o)._defaults)})}}});$.datepicker.parseDateTime=function(dateFormat,timeFormat,dateTimeString,dateSettings,timeSettings){var parseRes=parseDateTimeInternal(dateFormat,timeFormat,dateTimeString,dateSettings,timeSettings);if(parseRes.timeObj){var t=parseRes.timeObj;parseRes.date.setHours(t.hour,t.minute,t.second,t.millisec);parseRes.date.setMicroseconds(t.microsec)}
return parseRes.date};$.datepicker.parseTime=function(timeFormat,timeString,options){var o=extendRemove(extendRemove({},$.timepicker._defaults),options||{}),iso8601=(timeFormat.replace(/\'.*?\'/g,'').indexOf('Z')!==-1);var strictParse=function(f,s,o){var getPatternAmpm=function(amNames,pmNames){var markers=[];if(amNames){$.merge(markers,amNames)}
if(pmNames){$.merge(markers,pmNames)}
markers=$.map(markers,function(val){return val.replace(/[.*+?|()\[\]{}\\]/g,'\\$&')});return'('+markers.join('|')+')?'};var getFormatPositions=function(timeFormat){var finds=timeFormat.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|l{1}|c{1}|t{1,2}|z|'.*?')/g),orders={h:-1,m:-1,s:-1,l:-1,c:-1,t:-1,z:-1};if(finds){for(var i=0;i<finds.length;i++){if(orders[finds[i].toString().charAt(0)]===-1){orders[finds[i].toString().charAt(0)]=i+1}}}
return orders};var regstr='^'+f.toString().replace(/([hH]{1,2}|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,function(match){var ml=match.length;switch(match.charAt(0).toLowerCase()){case 'h':return ml===1?'(\\d?\\d)':'(\\d{'+ml+'})';case 'm':return ml===1?'(\\d?\\d)':'(\\d{'+ml+'})';case 's':return ml===1?'(\\d?\\d)':'(\\d{'+ml+'})';case 'l':return'(\\d?\\d?\\d)';case 'c':return'(\\d?\\d?\\d)';case 'z':return'(z|[-+]\\d\\d:?\\d\\d|\\S+)?';case 't':return getPatternAmpm(o.amNames,o.pmNames);default:return'('+match.replace(/\'/g,"").replace(/(\.|\$|\^|\\|\/|\(|\)|\[|\]|\?|\+|\*)/g,function(m){return"\\"+m})+')?'}}).replace(/\s/g,'\\s?')+o.timeSuffix+'$',order=getFormatPositions(f),ampm='',treg;treg=s.match(new RegExp(regstr,'i'));var resTime={hour:0,minute:0,second:0,millisec:0,microsec:0};if(treg){if(order.t!==-1){if(treg[order.t]===undefined||treg[order.t].length===0){ampm='';resTime.ampm=''}else{ampm=$.inArray(treg[order.t].toUpperCase(),$.map(o.amNames,function(x,i){return x.toUpperCase()}))!==-1?'AM':'PM';resTime.ampm=o[ampm==='AM'?'amNames':'pmNames'][0]}}
if(order.h!==-1){if(ampm==='AM'&&treg[order.h]==='12'){resTime.hour=0}else{if(ampm==='PM'&&treg[order.h]!=='12'){resTime.hour=parseInt(treg[order.h],10)+12}else{resTime.hour=Number(treg[order.h])}}}
if(order.m!==-1){resTime.minute=Number(treg[order.m])}
if(order.s!==-1){resTime.second=Number(treg[order.s])}
if(order.l!==-1){resTime.millisec=Number(treg[order.l])}
if(order.c!==-1){resTime.microsec=Number(treg[order.c])}
if(order.z!==-1&&treg[order.z]!==undefined){resTime.timezone=$.timepicker.timezoneOffsetNumber(treg[order.z])}
return resTime}
return!1};var looseParse=function(f,s,o){try{var d=new Date('2012-01-01 '+s);if(isNaN(d.getTime())){d=new Date('2012-01-01T'+s);if(isNaN(d.getTime())){d=new Date('01/01/2012 '+s);if(isNaN(d.getTime())){throw "Unable to parse time with native Date: "+s}}}
return{hour:d.getHours(),minute:d.getMinutes(),second:d.getSeconds(),millisec:d.getMilliseconds(),microsec:d.getMicroseconds(),timezone:d.getTimezoneOffset()*-1}}
catch(err){try{return strictParse(f,s,o)}
catch(err2){$.timepicker.log("Unable to parse \ntimeString: "+s+"\ntimeFormat: "+f)}}
return!1};if(typeof o.parse==="function"){return o.parse(timeFormat,timeString,o)}
if(o.parse==='loose'){return looseParse(timeFormat,timeString,o)}
return strictParse(timeFormat,timeString,o)};$.datepicker.formatTime=function(format,time,options){options=options||{};options=$.extend({},$.timepicker._defaults,options);time=$.extend({hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null},time);var tmptime=format,ampmName=options.amNames[0],hour=parseInt(time.hour,10);if(hour>11){ampmName=options.pmNames[0]}
tmptime=tmptime.replace(/(?:HH?|hh?|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,function(match){switch(match){case 'HH':return('0'+hour).slice(-2);case 'H':return hour;case 'hh':return('0'+convert24to12(hour)).slice(-2);case 'h':return convert24to12(hour);case 'mm':return('0'+time.minute).slice(-2);case 'm':return time.minute;case 'ss':return('0'+time.second).slice(-2);case 's':return time.second;case 'l':return('00'+time.millisec).slice(-3);case 'c':return('00'+time.microsec).slice(-3);case 'z':return $.timepicker.timezoneOffsetString(time.timezone===null?options.timezone:time.timezone,!1);case 'Z':return $.timepicker.timezoneOffsetString(time.timezone===null?options.timezone:time.timezone,!0);case 'T':return ampmName.charAt(0).toUpperCase();case 'TT':return ampmName.toUpperCase();case 't':return ampmName.charAt(0).toLowerCase();case 'tt':return ampmName.toLowerCase();default:return match.replace(/'/g,"")}});return tmptime};$.datepicker._base_selectDate=$.datepicker._selectDate;$.datepicker._selectDate=function(id,dateStr){var inst=this._getInst($(id)[0]),tp_inst=this._get(inst,'timepicker'),was_inline;if(tp_inst&&inst.settings.showTimepicker){tp_inst._limitMinMaxDateTime(inst,!0);was_inline=inst.inline;inst.inline=inst.stay_open=!0;this._base_selectDate(id,dateStr);inst.inline=was_inline;inst.stay_open=!1;this._notifyChange(inst);this._updateDatepicker(inst)}else{this._base_selectDate(id,dateStr)}};$.datepicker._base_updateDatepicker=$.datepicker._updateDatepicker;$.datepicker._updateDatepicker=function(inst){var input=inst.input[0];if($.datepicker._curInst&&$.datepicker._curInst!==inst&&$.datepicker._datepickerShowing&&$.datepicker._lastInput!==input){return}
if(typeof(inst.stay_open)!=='boolean'||inst.stay_open===!1){this._base_updateDatepicker(inst);var tp_inst=this._get(inst,'timepicker');if(tp_inst){tp_inst._addTimePicker(inst)}}};$.datepicker._base_doKeyPress=$.datepicker._doKeyPress;$.datepicker._doKeyPress=function(event){var inst=$.datepicker._getInst(event.target),tp_inst=$.datepicker._get(inst,'timepicker');if(tp_inst){if($.datepicker._get(inst,'constrainInput')){var ampm=tp_inst.support.ampm,tz=tp_inst._defaults.showTimezone!==null?tp_inst._defaults.showTimezone:tp_inst.support.timezone,dateChars=$.datepicker._possibleChars($.datepicker._get(inst,'dateFormat')),datetimeChars=tp_inst._defaults.timeFormat.toString().replace(/[hms]/g,'').replace(/TT/g,ampm?'APM':'').replace(/Tt/g,ampm?'AaPpMm':'').replace(/tT/g,ampm?'AaPpMm':'').replace(/T/g,ampm?'AP':'').replace(/tt/g,ampm?'apm':'').replace(/t/g,ampm?'ap':'')+" "+tp_inst._defaults.separator+tp_inst._defaults.timeSuffix+(tz?tp_inst._defaults.timezoneList.join(''):'')+(tp_inst._defaults.amNames.join(''))+(tp_inst._defaults.pmNames.join(''))+dateChars,chr=String.fromCharCode(event.charCode===undefined?event.keyCode:event.charCode);return event.ctrlKey||(chr<' '||!dateChars||datetimeChars.indexOf(chr)>-1)}}
return $.datepicker._base_doKeyPress(event)};$.datepicker._base_updateAlternate=$.datepicker._updateAlternate;$.datepicker._updateAlternate=function(inst){var tp_inst=this._get(inst,'timepicker');if(tp_inst){var altField=tp_inst._defaults.altField;if(altField){var altFormat=tp_inst._defaults.altFormat||tp_inst._defaults.dateFormat,date=this._getDate(inst),formatCfg=$.datepicker._getFormatConfig(inst),altFormattedDateTime='',altSeparator=tp_inst._defaults.altSeparator?tp_inst._defaults.altSeparator:tp_inst._defaults.separator,altTimeSuffix=tp_inst._defaults.altTimeSuffix?tp_inst._defaults.altTimeSuffix:tp_inst._defaults.timeSuffix,altTimeFormat=tp_inst._defaults.altTimeFormat!==null?tp_inst._defaults.altTimeFormat:tp_inst._defaults.timeFormat;altFormattedDateTime+=$.datepicker.formatTime(altTimeFormat,tp_inst,tp_inst._defaults)+altTimeSuffix;if(!tp_inst._defaults.timeOnly&&!tp_inst._defaults.altFieldTimeOnly&&date!==null){if(tp_inst._defaults.altFormat){altFormattedDateTime=$.datepicker.formatDate(tp_inst._defaults.altFormat,date,formatCfg)+altSeparator+altFormattedDateTime}
else{altFormattedDateTime=tp_inst.formattedDate+altSeparator+altFormattedDateTime}}
$(altField).val(inst.input.val()?altFormattedDateTime:"")}}
else{$.datepicker._base_updateAlternate(inst)}};$.datepicker._base_doKeyUp=$.datepicker._doKeyUp;$.datepicker._doKeyUp=function(event){var inst=$.datepicker._getInst(event.target),tp_inst=$.datepicker._get(inst,'timepicker');if(tp_inst){if(tp_inst._defaults.timeOnly&&(inst.input.val()!==inst.lastVal)){try{$.datepicker._updateDatepicker(inst)}catch(err){$.timepicker.log(err)}}}
return $.datepicker._base_doKeyUp(event)};$.datepicker._base_gotoToday=$.datepicker._gotoToday;$.datepicker._gotoToday=function(id){var inst=this._getInst($(id)[0]);this._base_gotoToday(id);var tp_inst=this._get(inst,'timepicker');if(!tp_inst){return}
var tzoffset=$.timepicker.timezoneOffsetNumber(tp_inst.timezone);var now=new Date();now.setMinutes(now.getMinutes()+now.getTimezoneOffset()+parseInt(tzoffset,10));this._setTime(inst,now);this._setDate(inst,now);tp_inst._onSelectHandler()};$.datepicker._disableTimepickerDatepicker=function(target){var inst=this._getInst(target);if(!inst){return}
var tp_inst=this._get(inst,'timepicker');$(target).datepicker('getDate');if(tp_inst){inst.settings.showTimepicker=!1;tp_inst._defaults.showTimepicker=!1;tp_inst._updateDateTime(inst)}};$.datepicker._enableTimepickerDatepicker=function(target){var inst=this._getInst(target);if(!inst){return}
var tp_inst=this._get(inst,'timepicker');$(target).datepicker('getDate');if(tp_inst){inst.settings.showTimepicker=!0;tp_inst._defaults.showTimepicker=!0;tp_inst._addTimePicker(inst);tp_inst._updateDateTime(inst)}};$.datepicker._setTime=function(inst,date){var tp_inst=this._get(inst,'timepicker');if(tp_inst){var defaults=tp_inst._defaults;tp_inst.hour=date?date.getHours():defaults.hour;tp_inst.minute=date?date.getMinutes():defaults.minute;tp_inst.second=date?date.getSeconds():defaults.second;tp_inst.millisec=date?date.getMilliseconds():defaults.millisec;tp_inst.microsec=date?date.getMicroseconds():defaults.microsec;tp_inst._limitMinMaxDateTime(inst,!0);tp_inst._onTimeChange();tp_inst._updateDateTime(inst)}};$.datepicker._setTimeDatepicker=function(target,date,withDate){var inst=this._getInst(target);if(!inst){return}
var tp_inst=this._get(inst,'timepicker');if(tp_inst){this._setDateFromField(inst);var tp_date;if(date){if(typeof date==="string"){tp_inst._parseTime(date,withDate);tp_date=new Date();tp_date.setHours(tp_inst.hour,tp_inst.minute,tp_inst.second,tp_inst.millisec);tp_date.setMicroseconds(tp_inst.microsec)}else{tp_date=new Date(date.getTime());tp_date.setMicroseconds(date.getMicroseconds())}
if(tp_date.toString()==='Invalid Date'){tp_date=undefined}
this._setTime(inst,tp_date)}}};$.datepicker._base_setDateDatepicker=$.datepicker._setDateDatepicker;$.datepicker._setDateDatepicker=function(target,_date){var inst=this._getInst(target);var date=_date;if(!inst){return}
if(typeof(_date)==='string'){date=new Date(_date);if(!date.getTime()){this._base_setDateDatepicker.apply(this,arguments);date=$(target).datepicker('getDate')}}
var tp_inst=this._get(inst,'timepicker');var tp_date;if(date instanceof Date){tp_date=new Date(date.getTime());tp_date.setMicroseconds(date.getMicroseconds())}else{tp_date=date}
if(tp_inst&&tp_date){if(!tp_inst.support.timezone&&tp_inst._defaults.timezone===null){tp_inst.timezone=tp_date.getTimezoneOffset()*-1}
date=$.timepicker.timezoneAdjust(date,$.timepicker.timezoneOffsetString(-date.getTimezoneOffset()),tp_inst.timezone);tp_date=$.timepicker.timezoneAdjust(tp_date,$.timepicker.timezoneOffsetString(-tp_date.getTimezoneOffset()),tp_inst.timezone)}
this._updateDatepicker(inst);this._base_setDateDatepicker.apply(this,arguments);this._setTimeDatepicker(target,tp_date,!0)};$.datepicker._base_getDateDatepicker=$.datepicker._getDateDatepicker;$.datepicker._getDateDatepicker=function(target,noDefault){var inst=this._getInst(target);if(!inst){return}
var tp_inst=this._get(inst,'timepicker');if(tp_inst){if(inst.lastVal===undefined){this._setDateFromField(inst,noDefault)}
var date=this._getDate(inst);var currDT=null;if(tp_inst.$altInput&&tp_inst._defaults.altFieldTimeOnly){currDT=tp_inst.$input.val()+' '+tp_inst.$altInput.val()}
else if(tp_inst.$input.get(0).tagName!=='INPUT'&&tp_inst.$altInput){currDT=tp_inst.$altInput.val()}
else{currDT=tp_inst.$input.val()}
if(date&&tp_inst._parseTime(currDT,!inst.settings.timeOnly)){date.setHours(tp_inst.hour,tp_inst.minute,tp_inst.second,tp_inst.millisec);date.setMicroseconds(tp_inst.microsec);if(tp_inst.timezone!=null){if(!tp_inst.support.timezone&&tp_inst._defaults.timezone===null){tp_inst.timezone=date.getTimezoneOffset()*-1}
date=$.timepicker.timezoneAdjust(date,tp_inst.timezone,$.timepicker.timezoneOffsetString(-date.getTimezoneOffset()))}}
return date}
return this._base_getDateDatepicker(target,noDefault)};$.datepicker._base_parseDate=$.datepicker.parseDate;$.datepicker.parseDate=function(format,value,settings){var date;try{date=this._base_parseDate(format,value,settings)}catch(err){if(err.indexOf(":")>=0){date=this._base_parseDate(format,value.substring(0,value.length-(err.length-err.indexOf(':')-2)),settings);$.timepicker.log("Error parsing the date string: "+err+"\ndate string = "+value+"\ndate format = "+format)}else{throw err}}
return date};$.datepicker._base_formatDate=$.datepicker._formatDate;$.datepicker._formatDate=function(inst,day,month,year){var tp_inst=this._get(inst,'timepicker');if(tp_inst){tp_inst._updateDateTime(inst);return tp_inst.$input.val()}
return this._base_formatDate(inst)};$.datepicker._base_optionDatepicker=$.datepicker._optionDatepicker;$.datepicker._optionDatepicker=function(target,name,value){var inst=this._getInst(target),name_clone;if(!inst){return null}
var tp_inst=this._get(inst,'timepicker');if(tp_inst){var min=null,max=null,onselect=null,overrides=tp_inst._defaults.evnts,fns={},prop,ret,oldVal,$target;if(typeof name==='string'){if(name==='minDate'||name==='minDateTime'){min=value}else if(name==='maxDate'||name==='maxDateTime'){max=value}else if(name==='onSelect'){onselect=value}else if(overrides.hasOwnProperty(name)){if(typeof(value)==='undefined'){return overrides[name]}
fns[name]=value;name_clone={}}}else if(typeof name==='object'){if(name.minDate){min=name.minDate}else if(name.minDateTime){min=name.minDateTime}else if(name.maxDate){max=name.maxDate}else if(name.maxDateTime){max=name.maxDateTime}
for(prop in overrides){if(overrides.hasOwnProperty(prop)&&name[prop]){fns[prop]=name[prop]}}}
for(prop in fns){if(fns.hasOwnProperty(prop)){overrides[prop]=fns[prop];if(!name_clone){name_clone=$.extend({},name)}
delete name_clone[prop]}}
if(name_clone&&isEmptyObject(name_clone)){return}
if(min){if(min===0){min=new Date()}else{min=new Date(min)}
tp_inst._defaults.minDate=min;tp_inst._defaults.minDateTime=min}else if(max){if(max===0){max=new Date()}else{max=new Date(max)}
tp_inst._defaults.maxDate=max;tp_inst._defaults.maxDateTime=max}else if(onselect){tp_inst._defaults.onSelect=onselect}
if(min||max){$target=$(target);oldVal=$target.datetimepicker('getDate');ret=this._base_optionDatepicker.call($.datepicker,target,name_clone||name,value);$target.datetimepicker('setDate',oldVal);return ret}}
if(value===undefined){return this._base_optionDatepicker.call($.datepicker,target,name)}
return this._base_optionDatepicker.call($.datepicker,target,name_clone||name,value)};var isEmptyObject=function(obj){var prop;for(prop in obj){if(obj.hasOwnProperty(prop)){return!1}}
return!0};var extendRemove=function(target,props){$.extend(target,props);for(var name in props){if(props[name]===null||props[name]===undefined){target[name]=props[name]}}
return target};var detectSupport=function(timeFormat){var tf=timeFormat.replace(/'.*?'/g,'').toLowerCase(),isIn=function(f,t){return f.indexOf(t)!==-1?!0:!1};return{hour:isIn(tf,'h'),minute:isIn(tf,'m'),second:isIn(tf,'s'),millisec:isIn(tf,'l'),microsec:isIn(tf,'c'),timezone:isIn(tf,'z'),ampm:isIn(tf,'t')&&isIn(timeFormat,'h'),iso8601:isIn(timeFormat,'Z')}};var convert24to12=function(hour){hour%=12;if(hour===0){hour=12}
return String(hour)};var computeEffectiveSetting=function(settings,property){return settings&&settings[property]?settings[property]:$.timepicker._defaults[property]};var splitDateTime=function(dateTimeString,timeSettings){var separator=computeEffectiveSetting(timeSettings,'separator'),format=computeEffectiveSetting(timeSettings,'timeFormat'),timeParts=format.split(separator),timePartsLen=timeParts.length,allParts=dateTimeString.split(separator),allPartsLen=allParts.length;if(allPartsLen>1){return{dateString:allParts.splice(0,allPartsLen-timePartsLen).join(separator),timeString:allParts.splice(0,timePartsLen).join(separator)}}
return{dateString:dateTimeString,timeString:''}};var parseDateTimeInternal=function(dateFormat,timeFormat,dateTimeString,dateSettings,timeSettings){var date,parts,parsedTime;parts=splitDateTime(dateTimeString,timeSettings);date=$.datepicker._base_parseDate(dateFormat,parts.dateString,dateSettings);if(parts.timeString===''){return{date:date}}
parsedTime=$.datepicker.parseTime(timeFormat,parts.timeString,timeSettings);if(!parsedTime){throw 'Wrong time format'}
return{date:date,timeObj:parsedTime}};var selectLocalTimezone=function(tp_inst,date){if(tp_inst&&tp_inst.timezone_select){var now=date||new Date();tp_inst.timezone_select.val(-now.getTimezoneOffset())}};$.timepicker=new Timepicker();$.timepicker.timezoneOffsetString=function(tzMinutes,iso8601){if(isNaN(tzMinutes)||tzMinutes>840||tzMinutes<-720){return tzMinutes}
var off=tzMinutes,minutes=off%60,hours=(off-minutes)/60,iso=iso8601?':':'',tz=(off>=0?'+':'-')+('0'+Math.abs(hours)).slice(-2)+iso+('0'+Math.abs(minutes)).slice(-2);if(tz==='+00:00'){return'Z'}
return tz};$.timepicker.timezoneOffsetNumber=function(tzString){var normalized=tzString.toString().replace(':','');if(normalized.toUpperCase()==='Z'){return 0}
if(!/^(\-|\+)\d{4}$/.test(normalized)){return parseInt(tzString,10)}
return((normalized.substr(0,1)==='-'?-1:1)*((parseInt(normalized.substr(1,2),10)*60)+parseInt(normalized.substr(3,2),10)))};$.timepicker.timezoneAdjust=function(date,fromTimezone,toTimezone){var fromTz=$.timepicker.timezoneOffsetNumber(fromTimezone);var toTz=$.timepicker.timezoneOffsetNumber(toTimezone);if(!isNaN(toTz)){date.setMinutes(date.getMinutes()+(-fromTz)-(-toTz))}
return date};$.timepicker.timeRange=function(startTime,endTime,options){return $.timepicker.handleRange('timepicker',startTime,endTime,options)};$.timepicker.datetimeRange=function(startTime,endTime,options){$.timepicker.handleRange('datetimepicker',startTime,endTime,options)};$.timepicker.dateRange=function(startTime,endTime,options){$.timepicker.handleRange('datepicker',startTime,endTime,options)};$.timepicker.handleRange=function(method,startTime,endTime,options){options=$.extend({},{minInterval:0,maxInterval:0,start:{},end:{}},options);var timeOnly=!1;if(method==='timepicker'){timeOnly=!0;method='datetimepicker'}
function checkDates(changed,other){var startdt=startTime[method]('getDate'),enddt=endTime[method]('getDate'),changeddt=changed[method]('getDate');if(startdt!==null){var minDate=new Date(startdt.getTime()),maxDate=new Date(startdt.getTime());minDate.setMilliseconds(minDate.getMilliseconds()+options.minInterval);maxDate.setMilliseconds(maxDate.getMilliseconds()+options.maxInterval);if(options.minInterval>0&&minDate>enddt){endTime[method]('setDate',minDate)}
else if(options.maxInterval>0&&maxDate<enddt){endTime[method]('setDate',maxDate)}
else if(startdt>enddt){other[method]('setDate',changeddt)}}}
function selected(changed,other,option){if(!changed.val()){return}
var date=changed[method].call(changed,'getDate');if(date!==null&&options.minInterval>0){if(option==='minDate'){date.setMilliseconds(date.getMilliseconds()+options.minInterval)}
if(option==='maxDate'){date.setMilliseconds(date.getMilliseconds()-options.minInterval)}}
if(date.getTime){other[method].call(other,'option',option,date)}}
$.fn[method].call(startTime,$.extend({timeOnly:timeOnly,onClose:function(dateText,inst){checkDates($(this),endTime)},onSelect:function(selectedDateTime){selected($(this),endTime,'minDate')}},options,options.start));$.fn[method].call(endTime,$.extend({timeOnly:timeOnly,onClose:function(dateText,inst){checkDates($(this),startTime)},onSelect:function(selectedDateTime){selected($(this),startTime,'maxDate')}},options,options.end));checkDates(startTime,endTime);selected(startTime,endTime,'minDate');selected(endTime,startTime,'maxDate');return $([startTime.get(0),endTime.get(0)])};$.timepicker.log=function(){if(window.console&&window.console.log&&window.console.log.apply){window.console.log.apply(window.console,Array.prototype.slice.call(arguments))}};$.timepicker._util={_extendRemove:extendRemove,_isEmptyObject:isEmptyObject,_convert24to12:convert24to12,_detectSupport:detectSupport,_selectLocalTimezone:selectLocalTimezone,_computeEffectiveSetting:computeEffectiveSetting,_splitDateTime:splitDateTime,_parseDateTimeInternal:parseDateTimeInternal};if(!Date.prototype.getMicroseconds){Date.prototype.microseconds=0;Date.prototype.getMicroseconds=function(){return this.microseconds};Date.prototype.setMicroseconds=function(m){this.setMilliseconds(this.getMilliseconds()+Math.floor(m/1000));this.microseconds=m%1000;return this}}
$.timepicker.version="1.6.3"}));
/* rank:50standard - minify:ok. vendor_bundled/vendor/jquery/plugins/superfish/dist/js/superfish.js */
(function($,w){"use strict";var methods=(function(){var c={bcClass:'sf-breadcrumb',menuClass:'sf-js-enabled',anchorClass:'sf-with-ul',menuArrowClass:'sf-arrows'},ios=(function(){var ios=/iPhone|iPad|iPod/i.test(navigator.userAgent);if(ios){$(w).load(function(){$('body').children().on('click',$.noop)})}
return ios})(),wp7=(function(){var style=document.documentElement.style;return('behavior' in style&&'fill' in style&&/iemobile/i.test(navigator.userAgent))})(),unprefixedPointerEvents=(function(){return(!!w.PointerEvent)})(),toggleMenuClasses=function($menu,o){var classes=c.menuClass;if(o.cssArrows){classes+=' '+c.menuArrowClass}
$menu.toggleClass(classes)},setPathToCurrent=function($menu,o){return $menu.find('li.'+o.pathClass).slice(0,o.pathLevels).addClass(o.hoverClass+' '+c.bcClass).filter(function(){return($(this).children(o.popUpSelector).hide().show().length)}).removeClass(o.pathClass)},toggleAnchorClass=function($li){$li.children('a').toggleClass(c.anchorClass)},toggleTouchAction=function($menu){var msTouchAction=$menu.css('ms-touch-action');var touchAction=$menu.css('touch-action');touchAction=touchAction||msTouchAction;touchAction=(touchAction==='pan-y')?'auto':'pan-y';$menu.css({'ms-touch-action':touchAction,'touch-action':touchAction})},applyHandlers=function($menu,o){var targets='li:has('+o.popUpSelector+')';if($.fn.hoverIntent&&!o.disableHI){$menu.hoverIntent(over,out,targets)}
else{$menu.on('mouseenter.superfish',targets,over).on('mouseleave.superfish',targets,out)}
var touchevent='MSPointerDown.superfish';if(unprefixedPointerEvents){touchevent='pointerdown.superfish'}
if(!ios){touchevent+=' touchend.superfish'}
if(wp7){touchevent+=' mousedown.superfish'}
$menu.on('focusin.superfish','li',over).on('focusout.superfish','li',out).on(touchevent,'a',o,touchHandler)},touchHandler=function(e){var $this=$(this),$ul=$this.siblings(e.data.popUpSelector);if($ul.length>0&&$ul.is(':hidden')){$this.one('click.superfish',!1);if(e.type==='MSPointerDown'||e.type==='pointerdown'){$this.trigger('focus')}else{$.proxy(over,$this.parent('li'))()}}},over=function(){var $this=$(this),o=getOptions($this);clearTimeout(o.sfTimer);$this.siblings().superfish('hide').end().superfish('show')},out=function(){var $this=$(this),o=getOptions($this);if(ios){$.proxy(close,$this,o)()}
else{clearTimeout(o.sfTimer);o.sfTimer=setTimeout($.proxy(close,$this,o),o.delay)}},close=function(o){o.retainPath=($.inArray(this[0],o.$path)>-1);this.superfish('hide');if(!this.parents('.'+o.hoverClass).length){o.onIdle.call(getMenu(this));if(o.$path.length){$.proxy(over,o.$path)()}}},getMenu=function($el){return $el.closest('.'+c.menuClass)},getOptions=function($el){return getMenu($el).data('sf-options')};return{hide:function(instant){if(this.length){var $this=this,o=getOptions($this);if(!o){return this}
var not=(o.retainPath===!0)?o.$path:'',$ul=$this.find('li.'+o.hoverClass).add(this).not(not).removeClass(o.hoverClass).children(o.popUpSelector),speed=o.speedOut;if(instant){$ul.show();speed=0}
o.retainPath=!1;o.onBeforeHide.call($ul);$ul.stop(!0,!0).animate(o.animationOut,speed,function(){var $this=$(this);o.onHide.call($this)})}
return this},show:function(){var o=getOptions(this);if(!o){return this}
var $this=this.addClass(o.hoverClass),$ul=$this.children(o.popUpSelector);o.onBeforeShow.call($ul);$ul.stop(!0,!0).animate(o.animation,o.speed,function(){o.onShow.call($ul)});return this},destroy:function(){return this.each(function(){var $this=$(this),o=$this.data('sf-options'),$hasPopUp;if(!o){return!1}
$hasPopUp=$this.find(o.popUpSelector).parent('li');clearTimeout(o.sfTimer);toggleMenuClasses($this,o);toggleAnchorClass($hasPopUp);toggleTouchAction($this);$this.off('.superfish').off('.hoverIntent');$hasPopUp.children(o.popUpSelector).attr('style',function(i,style){return style.replace(/display[^;]+;?/g,'')});o.$path.removeClass(o.hoverClass+' '+c.bcClass).addClass(o.pathClass);$this.find('.'+o.hoverClass).removeClass(o.hoverClass);o.onDestroy.call($this);$this.removeData('sf-options')})},init:function(op){return this.each(function(){var $this=$(this);if($this.data('sf-options')){return!1}
var o=$.extend({},$.fn.superfish.defaults,op),$hasPopUp=$this.find(o.popUpSelector).parent('li');o.$path=setPathToCurrent($this,o);$this.data('sf-options',o);toggleMenuClasses($this,o);toggleAnchorClass($hasPopUp);toggleTouchAction($this);applyHandlers($this,o);$hasPopUp.not('.'+c.bcClass).superfish('hide',!0);o.onInit.call(this)})}}})();$.fn.superfish=function(method,args){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1))}
else if(typeof method==='object'||!method){return methods.init.apply(this,arguments)}
else{return $.error('Method '+method+' does not exist on jQuery.fn.superfish')}};$.fn.superfish.defaults={popUpSelector:'ul,.sf-mega',hoverClass:'sfHover',pathClass:'overrideThisToUse',pathLevels:1,delay:800,animation:{opacity:'show'},animationOut:{opacity:'hide'},speed:'normal',speedOut:'fast',cssArrows:!0,disableHI:!1,onInit:$.noop,onBeforeShow:$.noop,onShow:$.noop,onBeforeHide:$.noop,onHide:$.noop,onIdle:$.noop,onDestroy:$.noop}})(jQuery,window);
/* rank:50standard - minify:ok. vendor_bundled/vendor/jquery/plugins/superfish/dist/js/supersubs.js */
(function($){$.fn.supersubs=function(options){var opts=$.extend({},$.fn.supersubs.defaults,options);return this.each(function(){var $$=$(this);var o=$.meta?$.extend({},opts,$$.data()):opts;var $ULs=$$.find('ul').show();var fontsize=$('<li id="menu-fontsize">&#8212;</li>').css({'padding':0,'position':'absolute','top':'-999em','width':'auto'}).appendTo($$)[0].clientWidth;$('#menu-fontsize').remove();$ULs.each(function(i){var $ul=$(this);var $LIs=$ul.children();var $As=$LIs.children('a');var liFloat=$LIs.css('white-space','nowrap').css('float');$ul.add($LIs).add($As).css({'float':'none','width':'auto'});var emWidth=$ul[0].clientWidth/fontsize;emWidth+=o.extraWidth;if(emWidth>o.maxWidth){emWidth=o.maxWidth}
else if(emWidth<o.minWidth){emWidth=o.minWidth}
emWidth+='em';$ul.css('width',emWidth);$LIs.css({'float':liFloat,'width':'100%','white-space':'normal'}).each(function(){var $childUl=$(this).children('ul');var offsetDirection=$childUl.css('left')!==undefined?'left':'right';$childUl.css(offsetDirection,'100%')})}).hide()})};$.fn.supersubs.defaults={minWidth:9,maxWidth:25,extraWidth:0}})(jQuery);
/* rank:50standard - minify:ok. vendor_bundled/vendor/jquery/plugins/superfish/dist/js/hoverIntent.js */
(function($){$.fn.hoverIntent=function(handlerIn,handlerOut,selector){var cfg={interval:100,sensitivity:7,timeout:0};if(typeof handlerIn==="object"){cfg=$.extend(cfg,handlerIn)}else if($.isFunction(handlerOut)){cfg=$.extend(cfg,{over:handlerIn,out:handlerOut,selector:selector})}else{cfg=$.extend(cfg,{over:handlerIn,out:handlerIn,selector:handlerOut})}
var cX,cY,pX,pY;var track=function(ev){cX=ev.pageX;cY=ev.pageY};var compare=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);if((Math.abs(pX-cX)+Math.abs(pY-cY))<cfg.sensitivity){$(ob).off("mousemove.hoverIntent",track);ob.hoverIntent_s=1;return cfg.over.apply(ob,[ev])}else{pX=cX;pY=cY;ob.hoverIntent_t=setTimeout(function(){compare(ev,ob)},cfg.interval)}};var delay=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);ob.hoverIntent_s=0;return cfg.out.apply(ob,[ev])};var handleHover=function(e){var ev=jQuery.extend({},e);var ob=this;if(ob.hoverIntent_t){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t)}
if(e.type=="mouseenter"){pX=ev.pageX;pY=ev.pageY;$(ob).on("mousemove.hoverIntent",track);if(ob.hoverIntent_s!=1){ob.hoverIntent_t=setTimeout(function(){compare(ev,ob)},cfg.interval)}}else{$(ob).off("mousemove.hoverIntent",track);if(ob.hoverIntent_s==1){ob.hoverIntent_t=setTimeout(function(){delay(ev,ob)},cfg.timeout)}}};return this.on({'mouseenter.hoverIntent':handleHover,'mouseleave.hoverIntent':handleHover},cfg.selector)}})(jQuery);
/* rank:50standard - minify:ok. vendor_bundled/vendor/mottie/tablesorter/js/jquery.tablesorter.combined.js */
(function(factory){if(typeof define==='function'&&define.amd){define(['jquery'],factory)}else if(typeof module==='object'&&typeof module.exports==='object'){module.exports=factory(require('jquery'))}else{factory(jQuery)}}(function(jQuery){;(function($){'use strict';var ts=$.tablesorter={version:'2.31.3',parsers:[],widgets:[],defaults:{theme:'default',widthFixed:!1,showProcessing:!1,headerTemplate:'{content}',onRenderTemplate:null,onRenderHeader:null,cancelSelection:!0,tabIndex:!0,dateFormat:'mmddyyyy',sortMultiSortKey:'shiftKey',sortResetKey:'ctrlKey',usNumberFormat:!0,delayInit:!1,serverSideSorting:!1,resort:!0,headers:{},ignoreCase:!0,sortForce:null,sortList:[],sortAppend:null,sortStable:!1,sortInitialOrder:'asc',sortLocaleCompare:!1,sortReset:!1,sortRestart:!1,emptyTo:'bottom',stringTo:'max',duplicateSpan:!0,textExtraction:'basic',textAttribute:'data-text',textSorter:null,numberSorter:null,initWidgets:!0,widgetClass:'widget-{name}',widgets:[],widgetOptions:{zebra:['even','odd']},initialized:null,tableClass:'',cssAsc:'',cssDesc:'',cssNone:'',cssHeader:'',cssHeaderRow:'',cssProcessing:'',cssChildRow:'tablesorter-childRow',cssInfoBlock:'tablesorter-infoOnly',cssNoSort:'tablesorter-noSort',cssIgnoreRow:'tablesorter-ignoreRow',cssIcon:'tablesorter-icon',cssIconNone:'',cssIconAsc:'',cssIconDesc:'',cssIconDisabled:'',pointerClick:'click',pointerDown:'mousedown',pointerUp:'mouseup',selectorHeaders:'> thead th, > thead td',selectorSort:'th, td',selectorRemove:'.remove-me',debug:!1,headerList:[],empties:{},strings:{},parsers:[],globalize:0,imgAttr:0},css:{table:'tablesorter',cssHasChild:'tablesorter-hasChildRow',childRow:'tablesorter-childRow',colgroup:'tablesorter-colgroup',header:'tablesorter-header',headerRow:'tablesorter-headerRow',headerIn:'tablesorter-header-inner',icon:'tablesorter-icon',processing:'tablesorter-processing',sortAsc:'tablesorter-headerAsc',sortDesc:'tablesorter-headerDesc',sortNone:'tablesorter-headerUnSorted'},language:{sortAsc:'Ascending sort applied, ',sortDesc:'Descending sort applied, ',sortNone:'No sort applied, ',sortDisabled:'sorting is disabled',nextAsc:'activate to apply an ascending sort',nextDesc:'activate to apply a descending sort',nextNone:'activate to remove the sort'},regex:{templateContent:/\{content\}/g,templateIcon:/\{icon\}/g,templateName:/\{name\}/i,spaces:/\s+/g,nonWord:/\W/g,formElements:/(input|select|button|textarea)/i,chunk:/(^([+\-]?(?:\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,chunks:/(^\\0|\\0$)/,hex:/^0x[0-9a-f]+$/i,comma:/,/g,digitNonUS:/[\s|\.]/g,digitNegativeTest:/^\s*\([.\d]+\)/,digitNegativeReplace:/^\s*\(([.\d]+)\)/,digitTest:/^[\-+(]?\d+[)]?$/,digitReplace:/[,.'"\s]/g},string:{max:1,min:-1,emptymin:1,emptymax:-1,zero:0,none:0,'null':0,top:!0,bottom:!1},keyCodes:{enter:13},dates:{},instanceMethods:{},setup:function(table,c){if(!table||!table.tHead||table.tBodies.length===0||table.hasInitialized===!0){if(ts.debug(c,'core')){if(table.hasInitialized){console.warn('Stopping initialization. Tablesorter has already been initialized')}else{console.error('Stopping initialization! No table, thead or tbody',table)}}
return}
var tmp='',$table=$(table),meta=$.metadata;table.hasInitialized=!1;table.isProcessing=!0;table.config=c;$.data(table,'tablesorter',c);if(ts.debug(c,'core')){console[console.group?'group':'log']('Initializing tablesorter v'+ts.version);$.data(table,'startoveralltimer',new Date())}
c.supportsDataObject=(function(version){version[0]=parseInt(version[0],10);return(version[0]>1)||(version[0]===1&&parseInt(version[1],10)>=4)})($.fn.jquery.split('.'));c.emptyTo=c.emptyTo.toLowerCase();c.stringTo=c.stringTo.toLowerCase();c.last={sortList:[],clickedIndex:-1};if(!/tablesorter\-/.test($table.attr('class'))){tmp=(c.theme!==''?' tablesorter-'+c.theme:'')}
if(!c.namespace){c.namespace='.tablesorter'+Math.random().toString(16).slice(2)}else{c.namespace='.'+c.namespace.replace(ts.regex.nonWord,'')}
c.table=table;c.$table=$table.addClass(ts.css.table+' '+c.tableClass+tmp+' '+c.namespace.slice(1)).attr('role','grid');c.$headers=$table.find(c.selectorHeaders);c.$table.children().children('tr').attr('role','row');c.$tbodies=$table.children('tbody:not(.'+c.cssInfoBlock+')').attr({'aria-live':'polite','aria-relevant':'all'});if(c.$table.children('caption').length){tmp=c.$table.children('caption')[0];if(!tmp.id){tmp.id=c.namespace.slice(1)+'caption'}
c.$table.attr('aria-labelledby',tmp.id)}
c.widgetInit={};c.textExtraction=c.$table.attr('data-text-extraction')||c.textExtraction||'basic';ts.buildHeaders(c);ts.fixColumnWidth(table);ts.addWidgetFromClass(table);ts.applyWidgetOptions(table);ts.setupParsers(c);c.totalRows=0;if(c.debug){ts.validateOptions(c)}
if(!c.delayInit){ts.buildCache(c)}
ts.bindEvents(table,c.$headers,!0);ts.bindMethods(c);if(c.supportsDataObject&&typeof $table.data().sortlist!=='undefined'){c.sortList=$table.data().sortlist}else if(meta&&($table.metadata()&&$table.metadata().sortlist)){c.sortList=$table.metadata().sortlist}
ts.applyWidget(table,!0);if(c.sortList.length>0){c.last.sortList=c.sortList;ts.sortOn(c,c.sortList,{},!c.initWidgets)}else{ts.setHeadersCss(c);if(c.initWidgets){ts.applyWidget(table,!1)}}
if(c.showProcessing){$table.unbind('sortBegin'+c.namespace+' sortEnd'+c.namespace).bind('sortBegin'+c.namespace+' sortEnd'+c.namespace,function(e){clearTimeout(c.timerProcessing);ts.isProcessing(table);if(e.type==='sortBegin'){c.timerProcessing=setTimeout(function(){ts.isProcessing(table,!0)},500)}})}
table.hasInitialized=!0;table.isProcessing=!1;if(ts.debug(c,'core')){console.log('Overall initialization time:'+ts.benchmark($.data(table,'startoveralltimer')));if(ts.debug(c,'core')&&console.groupEnd){console.groupEnd()}}
$table.triggerHandler('tablesorter-initialized',table);if(typeof c.initialized==='function'){c.initialized(table)}},bindMethods:function(c){var $table=c.$table,namespace=c.namespace,events=('sortReset update updateRows updateAll updateHeaders addRows updateCell updateComplete '+'sorton appendCache updateCache applyWidgetId applyWidgets refreshWidgets destroy mouseup '+'mouseleave ').split(' ').join(namespace+' ');$table.unbind(events.replace(ts.regex.spaces,' ')).bind('sortReset'+namespace,function(e,callback){e.stopPropagation();ts.sortReset(this.config,function(table){if(table.isApplyingWidgets){setTimeout(function(){ts.applyWidget(table,'',callback)},100)}else{ts.applyWidget(table,'',callback)}})}).bind('updateAll'+namespace,function(e,resort,callback){e.stopPropagation();ts.updateAll(this.config,resort,callback)}).bind('update'+namespace+' updateRows'+namespace,function(e,resort,callback){e.stopPropagation();ts.update(this.config,resort,callback)}).bind('updateHeaders'+namespace,function(e,callback){e.stopPropagation();ts.updateHeaders(this.config,callback)}).bind('updateCell'+namespace,function(e,cell,resort,callback){e.stopPropagation();ts.updateCell(this.config,cell,resort,callback)}).bind('addRows'+namespace,function(e,$row,resort,callback){e.stopPropagation();ts.addRows(this.config,$row,resort,callback)}).bind('updateComplete'+namespace,function(){this.isUpdating=!1}).bind('sorton'+namespace,function(e,list,callback,init){e.stopPropagation();ts.sortOn(this.config,list,callback,init)}).bind('appendCache'+namespace,function(e,callback,init){e.stopPropagation();ts.appendCache(this.config,init);if($.isFunction(callback)){callback(this)}}).bind('updateCache'+namespace,function(e,callback,$tbodies){e.stopPropagation();ts.updateCache(this.config,callback,$tbodies)}).bind('applyWidgetId'+namespace,function(e,id){e.stopPropagation();ts.applyWidgetId(this,id)}).bind('applyWidgets'+namespace,function(e,callback){e.stopPropagation();ts.applyWidget(this,!1,callback)}).bind('refreshWidgets'+namespace,function(e,all,dontapply){e.stopPropagation();ts.refreshWidgets(this,all,dontapply)}).bind('removeWidget'+namespace,function(e,name,refreshing){e.stopPropagation();ts.removeWidget(this,name,refreshing)}).bind('destroy'+namespace,function(e,removeClasses,callback){e.stopPropagation();ts.destroy(this,removeClasses,callback)}).bind('resetToLoadState'+namespace,function(e){e.stopPropagation();ts.removeWidget(this,!0,!1);var tmp=$.extend(!0,{},c.originalSettings);c=$.extend(!0,{},ts.defaults,tmp);c.originalSettings=tmp;this.hasInitialized=!1;ts.setup(this,c)})},bindEvents:function(table,$headers,core){table=$(table)[0];var tmp,c=table.config,namespace=c.namespace,downTarget=null;if(core!==!0){$headers.addClass(namespace.slice(1)+'_extra_headers');tmp=ts.getClosest($headers,'table');if(tmp.length&&tmp[0].nodeName==='TABLE'&&tmp[0]!==table){$(tmp[0]).addClass(namespace.slice(1)+'_extra_table')}}
tmp=(c.pointerDown+' '+c.pointerUp+' '+c.pointerClick+' sort keyup ').replace(ts.regex.spaces,' ').split(' ').join(namespace+' ');$headers.find(c.selectorSort).add($headers.filter(c.selectorSort)).unbind(tmp).bind(tmp,function(e,external){var $cell,cell,temp,$target=$(e.target),type=' '+e.type+' ';if(((e.which||e.button)!==1&&!type.match(' '+c.pointerClick+' | sort | keyup '))||(type===' keyup '&&e.which!==ts.keyCodes.enter)||(type.match(' '+c.pointerClick+' ')&&typeof e.which!=='undefined')){return}
if(type.match(' '+c.pointerUp+' ')&&downTarget!==e.target&&external!==!0){return}
if(type.match(' '+c.pointerDown+' ')){downTarget=e.target;temp=$target.jquery.split('.');if(temp[0]==='1'&&temp[1]<4){e.preventDefault()}
return}
downTarget=null;$cell=ts.getClosest($(this),'.'+ts.css.header);if(ts.regex.formElements.test(e.target.nodeName)||$target.hasClass(c.cssNoSort)||$target.parents('.'+c.cssNoSort).length>0||$cell.hasClass('sorter-false')||$target.parents('button').length>0){return!c.cancelSelection}
if(c.delayInit&&ts.isEmptyObject(c.cache)){ts.buildCache(c)}
c.last.clickedIndex=$cell.attr('data-column')||$cell.index();cell=c.$headerIndexed[c.last.clickedIndex][0];if(cell&&!cell.sortDisabled){ts.initSort(c,cell,e)}});if(c.cancelSelection){$headers.attr('unselectable','on').bind('selectstart',!1).css({'user-select':'none','MozUserSelect':'none'})}},buildHeaders:function(c){var $temp,icon,timer,indx;c.headerList=[];c.headerContent=[];c.sortVars=[];if(ts.debug(c,'core')){timer=new Date()}
c.columns=ts.computeColumnIndex(c.$table.children('thead, tfoot').children('tr'));icon=c.cssIcon?'<i class="'+(c.cssIcon===ts.css.icon?ts.css.icon:c.cssIcon+' '+ts.css.icon)+'"></i>':'';c.$headers=$($.map(c.$table.find(c.selectorHeaders),function(elem,index){var configHeaders,header,column,template,tmp,$elem=$(elem);if(ts.getClosest($elem,'tr').hasClass(c.cssIgnoreRow)){return}
if(!/(th|td)/i.test(elem.nodeName)){tmp=ts.getClosest($elem,'th, td');$elem.attr('data-column',tmp.attr('data-column'))}
configHeaders=ts.getColumnData(c.table,c.headers,index,!0);c.headerContent[index]=$elem.html();if(c.headerTemplate!==''&&!$elem.find('.'+ts.css.headerIn).length){template=c.headerTemplate.replace(ts.regex.templateContent,$elem.html()).replace(ts.regex.templateIcon,$elem.find('.'+ts.css.icon).length?'':icon);if(c.onRenderTemplate){header=c.onRenderTemplate.apply($elem,[index,template]);if(header&&typeof header==='string'){template=header}}
$elem.html('<div class="'+ts.css.headerIn+'">'+template+'</div>')}
if(c.onRenderHeader){c.onRenderHeader.apply($elem,[index,c,c.$table])}
column=parseInt($elem.attr('data-column'),10);elem.column=column;tmp=ts.getOrder(ts.getData($elem,configHeaders,'sortInitialOrder')||c.sortInitialOrder);c.sortVars[column]={count:-1,order:tmp?(c.sortReset?[1,0,2]:[1,0]):(c.sortReset?[0,1,2]:[0,1]),lockedOrder:!1,sortedBy:''};tmp=ts.getData($elem,configHeaders,'lockedOrder')||!1;if(typeof tmp!=='undefined'&&tmp!==!1){c.sortVars[column].lockedOrder=!0;c.sortVars[column].order=ts.getOrder(tmp)?[1,1]:[0,0]}
c.headerList[index]=elem;$elem.addClass(ts.css.header+' '+c.cssHeader);ts.getClosest($elem,'tr').addClass(ts.css.headerRow+' '+c.cssHeaderRow).attr('role','row');if(c.tabIndex){$elem.attr('tabindex',0)}
return elem}));c.$headerIndexed=[];for(indx=0;indx<c.columns;indx++){if(ts.isEmptyObject(c.sortVars[indx])){c.sortVars[indx]={}}
$temp=c.$headers.filter('[data-column="'+indx+'"]');c.$headerIndexed[indx]=$temp.length?$temp.not('.sorter-false').length?$temp.not('.sorter-false').filter(':last'):$temp.filter(':last'):$()}
c.$table.find(c.selectorHeaders).attr({scope:'col',role:'columnheader'});ts.updateHeader(c);if(ts.debug(c,'core')){console.log('Built headers:'+ts.benchmark(timer));console.log(c.$headers)}},addInstanceMethods:function(methods){$.extend(ts.instanceMethods,methods)},setupParsers:function(c,$tbodies){var rows,list,span,max,colIndex,indx,header,configHeaders,noParser,parser,extractor,time,tbody,len,table=c.table,tbodyIndex=0,debug=ts.debug(c,'core'),debugOutput={};c.$tbodies=c.$table.children('tbody:not(.'+c.cssInfoBlock+')');tbody=typeof $tbodies==='undefined'?c.$tbodies:$tbodies;len=tbody.length;if(len===0){return debug?console.warn('Warning: *Empty table!* Not building a parser cache'):''}else if(debug){time=new Date();console[console.group?'group':'log']('Detecting parsers for each column')}
list={extractors:[],parsers:[]};while(tbodyIndex<len){rows=tbody[tbodyIndex].rows;if(rows.length){colIndex=0;max=c.columns;for(indx=0;indx<max;indx++){header=c.$headerIndexed[colIndex];if(header&&header.length){configHeaders=ts.getColumnData(table,c.headers,colIndex);extractor=ts.getParserById(ts.getData(header,configHeaders,'extractor'));parser=ts.getParserById(ts.getData(header,configHeaders,'sorter'));noParser=ts.getData(header,configHeaders,'parser')==='false';c.empties[colIndex]=(ts.getData(header,configHeaders,'empty')||c.emptyTo||(c.emptyToBottom?'bottom':'top')).toLowerCase();c.strings[colIndex]=(ts.getData(header,configHeaders,'string')||c.stringTo||'max').toLowerCase();if(noParser){parser=ts.getParserById('no-parser')}
if(!extractor){extractor=!1}
if(!parser){parser=ts.detectParserForColumn(c,rows,-1,colIndex)}
if(debug){debugOutput['('+colIndex+') '+header.text()]={parser:parser.id,extractor:extractor?extractor.id:'none',string:c.strings[colIndex],empty:c.empties[colIndex]}}
list.parsers[colIndex]=parser;list.extractors[colIndex]=extractor;span=header[0].colSpan-1;if(span>0){colIndex+=span;max+=span;while(span+1>0){list.parsers[colIndex-span]=parser;list.extractors[colIndex-span]=extractor;span--}}}
colIndex++}}
tbodyIndex+=(list.parsers.length)?len:1}
if(debug){if(!ts.isEmptyObject(debugOutput)){console[console.table?'table':'log'](debugOutput)}else{console.warn('  No parsers detected!')}
console.log('Completed detecting parsers'+ts.benchmark(time));if(console.groupEnd){console.groupEnd()}}
c.parsers=list.parsers;c.extractors=list.extractors},addParser:function(parser){var indx,len=ts.parsers.length,add=!0;for(indx=0;indx<len;indx++){if(ts.parsers[indx].id.toLowerCase()===parser.id.toLowerCase()){add=!1}}
if(add){ts.parsers[ts.parsers.length]=parser}},getParserById:function(name){if(name=='false'){return!1}
var indx,len=ts.parsers.length;for(indx=0;indx<len;indx++){if(ts.parsers[indx].id.toLowerCase()===(name.toString()).toLowerCase()){return ts.parsers[indx]}}
return!1},detectParserForColumn:function(c,rows,rowIndex,cellIndex){var cur,$node,row,indx=ts.parsers.length,node=!1,nodeValue='',debug=ts.debug(c,'core'),keepLooking=!0;while(nodeValue===''&&keepLooking){rowIndex++;row=rows[rowIndex];if(row&&rowIndex<50){if(row.className.indexOf(ts.cssIgnoreRow)<0){node=rows[rowIndex].cells[cellIndex];nodeValue=ts.getElementText(c,node,cellIndex);$node=$(node);if(debug){console.log('Checking if value was empty on row '+rowIndex+', column: '+cellIndex+': "'+nodeValue+'"')}}}else{keepLooking=!1}}
while(--indx>=0){cur=ts.parsers[indx];if(cur&&cur.id!=='text'&&cur.is&&cur.is(nodeValue,c.table,node,$node)){return cur}}
return ts.getParserById('text')},getElementText:function(c,node,cellIndex){if(!node){return''}
var tmp,extract=c.textExtraction||'',$node=node.jquery?node:$(node);if(typeof extract==='string'){if(extract==='basic'&&typeof(tmp=$node.attr(c.textAttribute))!=='undefined'){return $.trim(tmp)}
return $.trim(node.textContent||$node.text())}else{if(typeof extract==='function'){return $.trim(extract($node[0],c.table,cellIndex))}else if(typeof(tmp=ts.getColumnData(c.table,extract,cellIndex))==='function'){return $.trim(tmp($node[0],c.table,cellIndex))}}
return $.trim($node[0].textContent||$node.text())},getParsedText:function(c,cell,colIndex,txt){if(typeof txt==='undefined'){txt=ts.getElementText(c,cell,colIndex)}
var val=''+txt,parser=c.parsers[colIndex],extractor=c.extractors[colIndex];if(parser){if(extractor&&typeof extractor.format==='function'){txt=extractor.format(txt,c.table,cell,colIndex)}
val=parser.id==='no-parser'?'':parser.format(''+txt,c.table,cell,colIndex);if(c.ignoreCase&&typeof val==='string'){val=val.toLowerCase()}}
return val},buildCache:function(c,callback,$tbodies){var cache,val,txt,rowIndex,colIndex,tbodyIndex,$tbody,$row,cols,$cells,cell,cacheTime,totalRows,rowData,prevRowData,colMax,span,cacheIndex,hasParser,max,len,index,table=c.table,parsers=c.parsers,debug=ts.debug(c,'core');c.$tbodies=c.$table.children('tbody:not(.'+c.cssInfoBlock+')');$tbody=typeof $tbodies==='undefined'?c.$tbodies:$tbodies,c.cache={};c.totalRows=0;if(!parsers){return debug?console.warn('Warning: *Empty table!* Not building a cache'):''}
if(debug){cacheTime=new Date()}
if(c.showProcessing){ts.isProcessing(table,!0)}
for(tbodyIndex=0;tbodyIndex<$tbody.length;tbodyIndex++){colMax=[];cache=c.cache[tbodyIndex]={normalized:[]};totalRows=($tbody[tbodyIndex]&&$tbody[tbodyIndex].rows.length)||0;for(rowIndex=0;rowIndex<totalRows;++rowIndex){rowData={child:[],raw:[]};$row=$($tbody[tbodyIndex].rows[rowIndex]);cols=[];if($row.hasClass(c.selectorRemove.slice(1))){continue}
if($row.hasClass(c.cssChildRow)&&rowIndex!==0){len=cache.normalized.length-1;prevRowData=cache.normalized[len][c.columns];prevRowData.$row=prevRowData.$row.add($row);if(!$row.prev().hasClass(c.cssChildRow)){$row.prev().addClass(ts.css.cssHasChild)}
$cells=$row.children('th, td');len=prevRowData.child.length;prevRowData.child[len]=[];cacheIndex=0;max=c.columns;for(colIndex=0;colIndex<max;colIndex++){cell=$cells[colIndex];if(cell){prevRowData.child[len][colIndex]=ts.getParsedText(c,cell,colIndex);span=$cells[colIndex].colSpan-1;if(span>0){cacheIndex+=span;max+=span}}
cacheIndex++}
continue}
rowData.$row=$row;rowData.order=rowIndex;cacheIndex=0;max=c.columns;for(colIndex=0;colIndex<max;++colIndex){cell=$row[0].cells[colIndex];if(cell&&cacheIndex<c.columns){hasParser=typeof parsers[cacheIndex]!=='undefined';if(!hasParser&&debug){console.warn('No parser found for row: '+rowIndex+', column: '+colIndex+'; cell containing: "'+$(cell).text()+'"; does it have a header?')}
val=ts.getElementText(c,cell,cacheIndex);rowData.raw[cacheIndex]=val;txt=ts.getParsedText(c,cell,cacheIndex,val);cols[cacheIndex]=txt;if(hasParser&&(parsers[cacheIndex].type||'').toLowerCase()==='numeric'){colMax[cacheIndex]=Math.max(Math.abs(txt)||0,colMax[cacheIndex]||0)}
span=cell.colSpan-1;if(span>0){index=0;while(index<=span){txt=c.duplicateSpan||index===0?txt:typeof c.textExtraction!=='string'?ts.getElementText(c,cell,cacheIndex+index)||'':'';rowData.raw[cacheIndex+index]=txt;cols[cacheIndex+index]=txt;index++}
cacheIndex+=span;max+=span}}
cacheIndex++}
cols[c.columns]=rowData;cache.normalized[cache.normalized.length]=cols}
cache.colMax=colMax;c.totalRows+=cache.normalized.length}
if(c.showProcessing){ts.isProcessing(table)}
if(debug){len=Math.min(5,c.cache[0].normalized.length);console[console.group?'group':'log']('Building cache for '+c.totalRows+' rows (showing '+len+' rows in log) and '+c.columns+' columns'+ts.benchmark(cacheTime));val={};for(colIndex=0;colIndex<c.columns;colIndex++){for(cacheIndex=0;cacheIndex<len;cacheIndex++){if(!val['row: '+cacheIndex]){val['row: '+cacheIndex]={}}
val['row: '+cacheIndex][c.$headerIndexed[colIndex].text()]=c.cache[0].normalized[cacheIndex][colIndex]}}
console[console.table?'table':'log'](val);if(console.groupEnd){console.groupEnd()}}
if($.isFunction(callback)){callback(table)}},getColumnText:function(table,column,callback,rowFilter){table=$(table)[0];var tbodyIndex,rowIndex,cache,row,tbodyLen,rowLen,raw,parsed,$cell,result,hasCallback=typeof callback==='function',allColumns=column==='all',data={raw:[],parsed:[],$cell:[]},c=table.config;if(ts.isEmptyObject(c)){if(ts.debug(c,'core')){console.warn('No cache found - aborting getColumnText function!')}}else{tbodyLen=c.$tbodies.length;for(tbodyIndex=0;tbodyIndex<tbodyLen;tbodyIndex++){cache=c.cache[tbodyIndex].normalized;rowLen=cache.length;for(rowIndex=0;rowIndex<rowLen;rowIndex++){row=cache[rowIndex];if(rowFilter&&!row[c.columns].$row.is(rowFilter)){continue}
result=!0;parsed=(allColumns)?row.slice(0,c.columns):row[column];row=row[c.columns];raw=(allColumns)?row.raw:row.raw[column];$cell=(allColumns)?row.$row.children():row.$row.children().eq(column);if(hasCallback){result=callback({tbodyIndex:tbodyIndex,rowIndex:rowIndex,parsed:parsed,raw:raw,$row:row.$row,$cell:$cell})}
if(result!==!1){data.parsed[data.parsed.length]=parsed;data.raw[data.raw.length]=raw;data.$cell[data.$cell.length]=$cell}}}
return data}},setHeadersCss:function(c){var indx,column,list=c.sortList,len=list.length,none=ts.css.sortNone+' '+c.cssNone,css=[ts.css.sortAsc+' '+c.cssAsc,ts.css.sortDesc+' '+c.cssDesc],cssIcon=[c.cssIconAsc,c.cssIconDesc,c.cssIconNone],aria=['ascending','descending'],updateColumnSort=function($el,index){$el.removeClass(none).addClass(css[index]).attr('aria-sort',aria[index]).find('.'+ts.css.icon).removeClass(cssIcon[2]).addClass(cssIcon[index])},$extras=c.$table.find('tfoot tr').children('td, th').add($(c.namespace+'_extra_headers')).removeClass(css.join(' ')),$sorted=c.$headers.add($('thead '+c.namespace+'_extra_headers')).removeClass(css.join(' ')).addClass(none).attr('aria-sort','none').find('.'+ts.css.icon).removeClass(cssIcon.join(' ')).end();$sorted.not('.sorter-false').find('.'+ts.css.icon).addClass(cssIcon[2]);if(c.cssIconDisabled){$sorted.filter('.sorter-false').find('.'+ts.css.icon).addClass(c.cssIconDisabled)}
for(indx=0;indx<len;indx++){if(list[indx][1]!==2){$sorted=c.$headers.filter(function(i){var include=!0,$el=c.$headers.eq(i),col=parseInt($el.attr('data-column'),10),end=col+ts.getClosest($el,'th, td')[0].colSpan;for(;col<end;col++){include=include?include||ts.isValueInArray(col,c.sortList)>-1:!1}
return include});$sorted=$sorted.not('.sorter-false').filter('[data-column="'+list[indx][0]+'"]'+(len===1?':last':''));if($sorted.length){for(column=0;column<$sorted.length;column++){if(!$sorted[column].sortDisabled){updateColumnSort($sorted.eq(column),list[indx][1])}}}
if($extras.length){updateColumnSort($extras.filter('[data-column="'+list[indx][0]+'"]'),list[indx][1])}}}
len=c.$headers.length;for(indx=0;indx<len;indx++){ts.setColumnAriaLabel(c,c.$headers.eq(indx))}},getClosest:function($el,selector){if($.fn.closest){return $el.closest(selector)}
return $el.is(selector)?$el:$el.parents(selector).filter(':first')},setColumnAriaLabel:function(c,$header,nextSort){if($header.length){var column=parseInt($header.attr('data-column'),10),vars=c.sortVars[column],tmp=$header.hasClass(ts.css.sortAsc)?'sortAsc':$header.hasClass(ts.css.sortDesc)?'sortDesc':'sortNone',txt=$.trim($header.text())+': '+ts.language[tmp];if($header.hasClass('sorter-false')||nextSort===!1){txt+=ts.language.sortDisabled}else{tmp=(vars.count+1)%vars.order.length;nextSort=vars.order[tmp];txt+=ts.language[nextSort===0?'nextAsc':nextSort===1?'nextDesc':'nextNone']}
$header.attr('aria-label',txt);if(vars.sortedBy){$header.attr('data-sortedBy',vars.sortedBy)}else{$header.removeAttr('data-sortedBy')}}},updateHeader:function(c){var index,isDisabled,$header,col,table=c.table,len=c.$headers.length;for(index=0;index<len;index++){$header=c.$headers.eq(index);col=ts.getColumnData(table,c.headers,index,!0);isDisabled=ts.getData($header,col,'sorter')==='false'||ts.getData($header,col,'parser')==='false';ts.setColumnSort(c,$header,isDisabled)}},setColumnSort:function(c,$header,isDisabled){var id=c.table.id;$header[0].sortDisabled=isDisabled;$header[isDisabled?'addClass':'removeClass']('sorter-false').attr('aria-disabled',''+isDisabled);if(c.tabIndex){if(isDisabled){$header.removeAttr('tabindex')}else{$header.attr('tabindex','0')}}
if(id){if(isDisabled){$header.removeAttr('aria-controls')}else{$header.attr('aria-controls',id)}}},updateHeaderSortCount:function(c,list){var col,dir,group,indx,primary,temp,val,order,sortList=list||c.sortList,len=sortList.length;c.sortList=[];for(indx=0;indx<len;indx++){val=sortList[indx];col=parseInt(val[0],10);if(col<c.columns){if(!c.sortVars[col].order){if(ts.getOrder(c.sortInitialOrder)){order=c.sortReset?[1,0,2]:[1,0]}else{order=c.sortReset?[0,1,2]:[0,1]}
c.sortVars[col].order=order;c.sortVars[col].count=0}
order=c.sortVars[col].order;dir=(''+val[1]).match(/^(1|d|s|o|n)/);dir=dir?dir[0]:'';switch(dir){case '1':case 'd':dir=1;break;case 's':dir=primary||0;break;case 'o':temp=order[(primary||0)%order.length];dir=temp===0?1:temp===1?0:2;break;case 'n':dir=order[(++c.sortVars[col].count)%order.length];break;default:dir=0;break}
primary=indx===0?dir:primary;group=[col,parseInt(dir,10)||0];c.sortList[c.sortList.length]=group;dir=$.inArray(group[1],order);c.sortVars[col].count=dir>=0?dir:group[1]%order.length}}},updateAll:function(c,resort,callback){var table=c.table;table.isUpdating=!0;ts.refreshWidgets(table,!0,!0);ts.buildHeaders(c);ts.bindEvents(table,c.$headers,!0);ts.bindMethods(c);ts.commonUpdate(c,resort,callback)},update:function(c,resort,callback){var table=c.table;table.isUpdating=!0;ts.updateHeader(c);ts.commonUpdate(c,resort,callback)},updateHeaders:function(c,callback){c.table.isUpdating=!0;ts.buildHeaders(c);ts.bindEvents(c.table,c.$headers,!0);ts.resortComplete(c,callback)},updateCell:function(c,cell,resort,callback){if($(cell).closest('tr').hasClass(c.cssChildRow)){console.warn('Tablesorter Warning! "updateCell" for child row content has been disabled, use "update" instead');return}
if(ts.isEmptyObject(c.cache)){ts.updateHeader(c);ts.commonUpdate(c,resort,callback);return}
c.table.isUpdating=!0;c.$table.find(c.selectorRemove).remove();var tmp,indx,row,icell,cache,len,$tbodies=c.$tbodies,$cell=$(cell),tbodyIndex=$tbodies.index(ts.getClosest($cell,'tbody')),tbcache=c.cache[tbodyIndex],$row=ts.getClosest($cell,'tr');cell=$cell[0];if($tbodies.length&&tbodyIndex>=0){row=$tbodies.eq(tbodyIndex).find('tr').not('.'+c.cssChildRow).index($row);cache=tbcache.normalized[row];len=$row[0].cells.length;if(len!==c.columns){icell=0;tmp=!1;for(indx=0;indx<len;indx++){if(!tmp&&$row[0].cells[indx]!==cell){icell+=$row[0].cells[indx].colSpan}else{tmp=!0}}}else{icell=$cell.index()}
tmp=ts.getElementText(c,cell,icell);cache[c.columns].raw[icell]=tmp;tmp=ts.getParsedText(c,cell,icell,tmp);cache[icell]=tmp;if((c.parsers[icell].type||'').toLowerCase()==='numeric'){tbcache.colMax[icell]=Math.max(Math.abs(tmp)||0,tbcache.colMax[icell]||0)}
tmp=resort!=='undefined'?resort:c.resort;if(tmp!==!1){ts.checkResort(c,tmp,callback)}else{ts.resortComplete(c,callback)}}else{if(ts.debug(c,'core')){console.error('updateCell aborted, tbody missing or not within the indicated table')}
c.table.isUpdating=!1}},addRows:function(c,$row,resort,callback){var txt,val,tbodyIndex,rowIndex,rows,cellIndex,len,order,cacheIndex,rowData,cells,cell,span,valid=typeof $row==='string'&&c.$tbodies.length===1&&/<tr/.test($row||''),table=c.table;if(valid){$row=$($row);c.$tbodies.append($row)}else if(!$row||!($row instanceof $)||(ts.getClosest($row,'table')[0]!==c.table)){if(ts.debug(c,'core')){console.error('addRows method requires (1) a jQuery selector reference to rows that have already '+'been added to the table, or (2) row HTML string to be added to a table with only one tbody')}
return!1}
table.isUpdating=!0;if(ts.isEmptyObject(c.cache)){ts.updateHeader(c);ts.commonUpdate(c,resort,callback)}else{rows=$row.filter('tr').attr('role','row').length;tbodyIndex=c.$tbodies.index($row.parents('tbody').filter(':first'));if(!(c.parsers&&c.parsers.length)){ts.setupParsers(c)}
for(rowIndex=0;rowIndex<rows;rowIndex++){cacheIndex=0;len=$row[rowIndex].cells.length;order=c.cache[tbodyIndex].normalized.length;cells=[];rowData={child:[],raw:[],$row:$row.eq(rowIndex),order:order};for(cellIndex=0;cellIndex<len;cellIndex++){cell=$row[rowIndex].cells[cellIndex];txt=ts.getElementText(c,cell,cacheIndex);rowData.raw[cacheIndex]=txt;val=ts.getParsedText(c,cell,cacheIndex,txt);cells[cacheIndex]=val;if((c.parsers[cacheIndex].type||'').toLowerCase()==='numeric'){c.cache[tbodyIndex].colMax[cacheIndex]=Math.max(Math.abs(val)||0,c.cache[tbodyIndex].colMax[cacheIndex]||0)}
span=cell.colSpan-1;if(span>0){cacheIndex+=span}
cacheIndex++}
cells[c.columns]=rowData;c.cache[tbodyIndex].normalized[order]=cells}
ts.checkResort(c,resort,callback)}},updateCache:function(c,callback,$tbodies){if(!(c.parsers&&c.parsers.length)){ts.setupParsers(c,$tbodies)}
ts.buildCache(c,callback,$tbodies)},appendCache:function(c,init){var parsed,totalRows,$tbody,$curTbody,rowIndex,tbodyIndex,appendTime,table=c.table,$tbodies=c.$tbodies,rows=[],cache=c.cache;if(ts.isEmptyObject(cache)){return c.appender?c.appender(table,rows):table.isUpdating?c.$table.triggerHandler('updateComplete',table):''}
if(ts.debug(c,'core')){appendTime=new Date()}
for(tbodyIndex=0;tbodyIndex<$tbodies.length;tbodyIndex++){$tbody=$tbodies.eq(tbodyIndex);if($tbody.length){$curTbody=ts.processTbody(table,$tbody,!0);parsed=cache[tbodyIndex].normalized;totalRows=parsed.length;for(rowIndex=0;rowIndex<totalRows;rowIndex++){rows[rows.length]=parsed[rowIndex][c.columns].$row;if(!c.appender||(c.pager&&!c.pager.removeRows&&!c.pager.ajax)){$curTbody.append(parsed[rowIndex][c.columns].$row)}}
ts.processTbody(table,$curTbody,!1)}}
if(c.appender){c.appender(table,rows)}
if(ts.debug(c,'core')){console.log('Rebuilt table'+ts.benchmark(appendTime))}
if(!init&&!c.appender){ts.applyWidget(table)}
if(table.isUpdating){c.$table.triggerHandler('updateComplete',table)}},commonUpdate:function(c,resort,callback){c.$table.find(c.selectorRemove).remove();ts.setupParsers(c);ts.buildCache(c);ts.checkResort(c,resort,callback)},initSort:function(c,cell,event){if(c.table.isUpdating){return setTimeout(function(){ts.initSort(c,cell,event)},50)}
var arry,indx,headerIndx,dir,temp,tmp,$header,notMultiSort=!event[c.sortMultiSortKey],table=c.table,len=c.$headers.length,th=ts.getClosest($(cell),'th, td'),col=parseInt(th.attr('data-column'),10),sortedBy=event.type==='mouseup'?'user':event.type,order=c.sortVars[col].order;th=th[0];c.$table.triggerHandler('sortStart',table);tmp=(c.sortVars[col].count+1)%order.length;c.sortVars[col].count=event[c.sortResetKey]?2:tmp;if(c.sortRestart){for(headerIndx=0;headerIndx<len;headerIndx++){$header=c.$headers.eq(headerIndx);tmp=parseInt($header.attr('data-column'),10);if(col!==tmp&&(notMultiSort||$header.hasClass(ts.css.sortNone))){c.sortVars[tmp].count=-1}}}
if(notMultiSort){$.each(c.sortVars,function(i){c.sortVars[i].sortedBy=''});c.sortList=[];c.last.sortList=[];if(c.sortForce!==null){arry=c.sortForce;for(indx=0;indx<arry.length;indx++){if(arry[indx][0]!==col){c.sortList[c.sortList.length]=arry[indx];c.sortVars[arry[indx][0]].sortedBy='sortForce'}}}
dir=order[c.sortVars[col].count];if(dir<2){c.sortList[c.sortList.length]=[col,dir];c.sortVars[col].sortedBy=sortedBy;if(th.colSpan>1){for(indx=1;indx<th.colSpan;indx++){c.sortList[c.sortList.length]=[col+indx,dir];c.sortVars[col+indx].count=$.inArray(dir,order);c.sortVars[col+indx].sortedBy=sortedBy}}}}else{c.sortList=$.extend([],c.last.sortList);if(ts.isValueInArray(col,c.sortList)>=0){c.sortVars[col].sortedBy=sortedBy;for(indx=0;indx<c.sortList.length;indx++){tmp=c.sortList[indx];if(tmp[0]===col){tmp[1]=order[c.sortVars[col].count];if(tmp[1]===2){c.sortList.splice(indx,1);c.sortVars[col].count=-1}}}}else{dir=order[c.sortVars[col].count];c.sortVars[col].sortedBy=sortedBy;if(dir<2){c.sortList[c.sortList.length]=[col,dir];if(th.colSpan>1){for(indx=1;indx<th.colSpan;indx++){c.sortList[c.sortList.length]=[col+indx,dir];c.sortVars[col+indx].count=$.inArray(dir,order);c.sortVars[col+indx].sortedBy=sortedBy}}}}}
c.last.sortList=$.extend([],c.sortList);if(c.sortList.length&&c.sortAppend){arry=$.isArray(c.sortAppend)?c.sortAppend:c.sortAppend[c.sortList[0][0]];if(!ts.isEmptyObject(arry)){for(indx=0;indx<arry.length;indx++){if(arry[indx][0]!==col&&ts.isValueInArray(arry[indx][0],c.sortList)<0){dir=arry[indx][1];temp=(''+dir).match(/^(a|d|s|o|n)/);if(temp){tmp=c.sortList[0][1];switch(temp[0]){case 'd':dir=1;break;case 's':dir=tmp;break;case 'o':dir=tmp===0?1:0;break;case 'n':dir=(tmp+1)%order.length;break;default:dir=0;break}}
c.sortList[c.sortList.length]=[arry[indx][0],dir];c.sortVars[arry[indx][0]].sortedBy='sortAppend'}}}}
c.$table.triggerHandler('sortBegin',table);setTimeout(function(){ts.setHeadersCss(c);ts.multisort(c);ts.appendCache(c);c.$table.triggerHandler('sortBeforeEnd',table);c.$table.triggerHandler('sortEnd',table)},1)},multisort:function(c){var tbodyIndex,sortTime,colMax,rows,tmp,table=c.table,sorter=[],dir=0,textSorter=c.textSorter||'',sortList=c.sortList,sortLen=sortList.length,len=c.$tbodies.length;if(c.serverSideSorting||ts.isEmptyObject(c.cache)){return}
if(ts.debug(c,'core')){sortTime=new Date()}
if(typeof textSorter==='object'){colMax=c.columns;while(colMax--){tmp=ts.getColumnData(table,textSorter,colMax);if(typeof tmp==='function'){sorter[colMax]=tmp}}}
for(tbodyIndex=0;tbodyIndex<len;tbodyIndex++){colMax=c.cache[tbodyIndex].colMax;rows=c.cache[tbodyIndex].normalized;rows.sort(function(a,b){var sortIndex,num,col,order,sort,x,y;for(sortIndex=0;sortIndex<sortLen;sortIndex++){col=sortList[sortIndex][0];order=sortList[sortIndex][1];dir=order===0;if(c.sortStable&&a[col]===b[col]&&sortLen===1){return a[c.columns].order-b[c.columns].order}
num=/n/i.test(ts.getSortType(c.parsers,col));if(num&&c.strings[col]){if(typeof(ts.string[c.strings[col]])==='boolean'){num=(dir?1:-1)*(ts.string[c.strings[col]]?-1:1)}else{num=(c.strings[col])?ts.string[c.strings[col]]||0:0}
sort=c.numberSorter?c.numberSorter(a[col],b[col],dir,colMax[col],table):ts['sortNumeric'+(dir?'Asc':'Desc')](a[col],b[col],num,colMax[col],col,c)}else{x=dir?a:b;y=dir?b:a;if(typeof textSorter==='function'){sort=textSorter(x[col],y[col],dir,col,table)}else if(typeof sorter[col]==='function'){sort=sorter[col](x[col],y[col],dir,col,table)}else{sort=ts['sortNatural'+(dir?'Asc':'Desc')](a[col]||'',b[col]||'',col,c)}}
if(sort){return sort}}
return a[c.columns].order-b[c.columns].order})}
if(ts.debug(c,'core')){console.log('Applying sort '+sortList.toString()+ts.benchmark(sortTime))}},resortComplete:function(c,callback){if(c.table.isUpdating){c.$table.triggerHandler('updateComplete',c.table)}
if($.isFunction(callback)){callback(c.table)}},checkResort:function(c,resort,callback){var sortList=$.isArray(resort)?resort:c.sortList,resrt=typeof resort==='undefined'?c.resort:resort;if(resrt!==!1&&!c.serverSideSorting&&!c.table.isProcessing){if(sortList.length){ts.sortOn(c,sortList,function(){ts.resortComplete(c,callback)},!0)}else{ts.sortReset(c,function(){ts.resortComplete(c,callback);ts.applyWidget(c.table,!1)})}}else{ts.resortComplete(c,callback);ts.applyWidget(c.table,!1)}},sortOn:function(c,list,callback,init){var indx,table=c.table;c.$table.triggerHandler('sortStart',table);for(indx=0;indx<c.columns;indx++){c.sortVars[indx].sortedBy=ts.isValueInArray(indx,list)>-1?'sorton':''}
ts.updateHeaderSortCount(c,list);ts.setHeadersCss(c);if(c.delayInit&&ts.isEmptyObject(c.cache)){ts.buildCache(c)}
c.$table.triggerHandler('sortBegin',table);ts.multisort(c);ts.appendCache(c,init);c.$table.triggerHandler('sortBeforeEnd',table);c.$table.triggerHandler('sortEnd',table);ts.applyWidget(table);if($.isFunction(callback)){callback(table)}},sortReset:function(c,callback){c.sortList=[];var indx;for(indx=0;indx<c.columns;indx++){c.sortVars[indx].count=-1;c.sortVars[indx].sortedBy=''}
ts.setHeadersCss(c);ts.multisort(c);ts.appendCache(c);if($.isFunction(callback)){callback(c.table)}},getSortType:function(parsers,column){return(parsers&&parsers[column])?parsers[column].type||'':''},getOrder:function(val){return(/^d/i.test(val)||val===1)},sortNatural:function(a,b){if(a===b){return 0}
a=(a||'').toString();b=(b||'').toString();var aNum,bNum,aFloat,bFloat,indx,max,regex=ts.regex;if(regex.hex.test(b)){aNum=parseInt(a.match(regex.hex),16);bNum=parseInt(b.match(regex.hex),16);if(aNum<bNum){return-1}
if(aNum>bNum){return 1}}
aNum=a.replace(regex.chunk,'\\0$1\\0').replace(regex.chunks,'').split('\\0');bNum=b.replace(regex.chunk,'\\0$1\\0').replace(regex.chunks,'').split('\\0');max=Math.max(aNum.length,bNum.length);for(indx=0;indx<max;indx++){aFloat=isNaN(aNum[indx])?aNum[indx]||0:parseFloat(aNum[indx])||0;bFloat=isNaN(bNum[indx])?bNum[indx]||0:parseFloat(bNum[indx])||0;if(isNaN(aFloat)!==isNaN(bFloat)){return isNaN(aFloat)?1:-1}
if(typeof aFloat!==typeof bFloat){aFloat+='';bFloat+=''}
if(aFloat<bFloat){return-1}
if(aFloat>bFloat){return 1}}
return 0},sortNaturalAsc:function(a,b,col,c){if(a===b){return 0}
var empty=ts.string[(c.empties[col]||c.emptyTo)];if(a===''&&empty!==0){return typeof empty==='boolean'?(empty?-1:1):-empty||-1}
if(b===''&&empty!==0){return typeof empty==='boolean'?(empty?1:-1):empty||1}
return ts.sortNatural(a,b)},sortNaturalDesc:function(a,b,col,c){if(a===b){return 0}
var empty=ts.string[(c.empties[col]||c.emptyTo)];if(a===''&&empty!==0){return typeof empty==='boolean'?(empty?-1:1):empty||1}
if(b===''&&empty!==0){return typeof empty==='boolean'?(empty?1:-1):-empty||-1}
return ts.sortNatural(b,a)},sortText:function(a,b){return a>b?1:(a<b?-1:0)},getTextValue:function(val,num,max){if(max){var indx,len=val?val.length:0,n=max+num;for(indx=0;indx<len;indx++){n+=val.charCodeAt(indx)}
return num*n}
return 0},sortNumericAsc:function(a,b,num,max,col,c){if(a===b){return 0}
var empty=ts.string[(c.empties[col]||c.emptyTo)];if(a===''&&empty!==0){return typeof empty==='boolean'?(empty?-1:1):-empty||-1}
if(b===''&&empty!==0){return typeof empty==='boolean'?(empty?1:-1):empty||1}
if(isNaN(a)){a=ts.getTextValue(a,num,max)}
if(isNaN(b)){b=ts.getTextValue(b,num,max)}
return a-b},sortNumericDesc:function(a,b,num,max,col,c){if(a===b){return 0}
var empty=ts.string[(c.empties[col]||c.emptyTo)];if(a===''&&empty!==0){return typeof empty==='boolean'?(empty?-1:1):empty||1}
if(b===''&&empty!==0){return typeof empty==='boolean'?(empty?1:-1):-empty||-1}
if(isNaN(a)){a=ts.getTextValue(a,num,max)}
if(isNaN(b)){b=ts.getTextValue(b,num,max)}
return b-a},sortNumeric:function(a,b){return a-b},addWidget:function(widget){if(widget.id&&!ts.isEmptyObject(ts.getWidgetById(widget.id))){console.warn('"'+widget.id+'" widget was loaded more than once!')}
ts.widgets[ts.widgets.length]=widget},hasWidget:function($table,name){$table=$($table);return $table.length&&$table[0].config&&$table[0].config.widgetInit[name]||!1},getWidgetById:function(name){var indx,widget,len=ts.widgets.length;for(indx=0;indx<len;indx++){widget=ts.widgets[indx];if(widget&&widget.id&&widget.id.toLowerCase()===name.toLowerCase()){return widget}}},applyWidgetOptions:function(table){var indx,widget,wo,c=table.config,len=c.widgets.length;if(len){for(indx=0;indx<len;indx++){widget=ts.getWidgetById(c.widgets[indx]);if(widget&&widget.options){wo=$.extend(!0,{},widget.options);c.widgetOptions=$.extend(!0,wo,c.widgetOptions);$.extend(!0,ts.defaults.widgetOptions,widget.options)}}}},addWidgetFromClass:function(table){var len,indx,c=table.config,regex='^'+c.widgetClass.replace(ts.regex.templateName,'(\\S+)+')+'$',widgetClass=new RegExp(regex,'g'),widgets=(table.className||'').split(ts.regex.spaces);if(widgets.length){len=widgets.length;for(indx=0;indx<len;indx++){if(widgets[indx].match(widgetClass)){c.widgets[c.widgets.length]=widgets[indx].replace(widgetClass,'$1')}}}},applyWidgetId:function(table,id,init){table=$(table)[0];var applied,time,name,c=table.config,wo=c.widgetOptions,debug=ts.debug(c,'core'),widget=ts.getWidgetById(id);if(widget){name=widget.id;applied=!1;if($.inArray(name,c.widgets)<0){c.widgets[c.widgets.length]=name}
if(debug){time=new Date()}
if(init||!(c.widgetInit[name])){c.widgetInit[name]=!0;if(table.hasInitialized){ts.applyWidgetOptions(table)}
if(typeof widget.init==='function'){applied=!0;if(debug){console[console.group?'group':'log']('Initializing '+name+' widget')}
widget.init(table,widget,c,wo)}}
if(!init&&typeof widget.format==='function'){applied=!0;if(debug){console[console.group?'group':'log']('Updating '+name+' widget')}
widget.format(table,c,wo,!1)}
if(debug){if(applied){console.log('Completed '+(init?'initializing ':'applying ')+name+' widget'+ts.benchmark(time));if(console.groupEnd){console.groupEnd()}}}}},applyWidget:function(table,init,callback){table=$(table)[0];var indx,len,names,widget,time,c=table.config,debug=ts.debug(c,'core'),widgets=[];if(init!==!1&&table.hasInitialized&&(table.isApplyingWidgets||table.isUpdating)){return}
if(debug){time=new Date()}
ts.addWidgetFromClass(table);clearTimeout(c.timerReady);if(c.widgets.length){table.isApplyingWidgets=!0;c.widgets=$.grep(c.widgets,function(val,index){return $.inArray(val,c.widgets)===index});names=c.widgets||[];len=names.length;for(indx=0;indx<len;indx++){widget=ts.getWidgetById(names[indx]);if(widget&&widget.id){if(!widget.priority){widget.priority=10}
widgets[indx]=widget}else if(debug){console.warn('"'+names[indx]+'" was enabled, but the widget code has not been loaded!')}}
widgets.sort(function(a,b){return a.priority<b.priority?-1:a.priority===b.priority?0:1});len=widgets.length;if(debug){console[console.group?'group':'log']('Start '+(init?'initializing':'applying')+' widgets')}
for(indx=0;indx<len;indx++){widget=widgets[indx];if(widget&&widget.id){ts.applyWidgetId(table,widget.id,init)}}
if(debug&&console.groupEnd){console.groupEnd()}}
c.timerReady=setTimeout(function(){table.isApplyingWidgets=!1;$.data(table,'lastWidgetApplication',new Date());c.$table.triggerHandler('tablesorter-ready');if(!init&&typeof callback==='function'){callback(table)}
if(debug){widget=c.widgets.length;console.log('Completed '+(init===!0?'initializing ':'applying ')+widget+' widget'+(widget!==1?'s':'')+ts.benchmark(time))}},10)},removeWidget:function(table,name,refreshing){table=$(table)[0];var index,widget,indx,len,c=table.config;if(name===!0){name=[];len=ts.widgets.length;for(indx=0;indx<len;indx++){widget=ts.widgets[indx];if(widget&&widget.id){name[name.length]=widget.id}}}else{name=($.isArray(name)?name.join(','):name||'').toLowerCase().split(/[\s,]+/)}
len=name.length;for(index=0;index<len;index++){widget=ts.getWidgetById(name[index]);indx=$.inArray(name[index],c.widgets);if(indx>=0&&refreshing!==!0){c.widgets.splice(indx,1)}
if(widget&&widget.remove){if(ts.debug(c,'core')){console.log((refreshing?'Refreshing':'Removing')+' "'+name[index]+'" widget')}
widget.remove(table,c,c.widgetOptions,refreshing);c.widgetInit[name[index]]=!1}}
c.$table.triggerHandler('widgetRemoveEnd',table)},refreshWidgets:function(table,doAll,dontapply){table=$(table)[0];var indx,widget,c=table.config,curWidgets=c.widgets,widgets=ts.widgets,len=widgets.length,list=[],callback=function(table){$(table).triggerHandler('refreshComplete')};for(indx=0;indx<len;indx++){widget=widgets[indx];if(widget&&widget.id&&(doAll||$.inArray(widget.id,curWidgets)<0)){list[list.length]=widget.id}}
ts.removeWidget(table,list.join(','),!0);if(dontapply!==!0){ts.applyWidget(table,doAll||!1,callback);if(doAll){ts.applyWidget(table,!1,callback)}}else{callback(table)}},benchmark:function(diff){return(' ('+(new Date().getTime()-diff.getTime())+' ms)')},log:function(){console.log(arguments)},debug:function(c,name){return c&&(c.debug===!0||typeof c.debug==='string'&&c.debug.indexOf(name)>-1)},isEmptyObject:function(obj){for(var name in obj){return!1}
return!0},isValueInArray:function(column,arry){var indx,len=arry&&arry.length||0;for(indx=0;indx<len;indx++){if(arry[indx][0]===column){return indx}}
return-1},formatFloat:function(str,table){if(typeof str!=='string'||str===''){return str}
var num,usFormat=table&&table.config?table.config.usNumberFormat!==!1:typeof table!=='undefined'?table:!0;if(usFormat){str=str.replace(ts.regex.comma,'')}else{str=str.replace(ts.regex.digitNonUS,'').replace(ts.regex.comma,'.')}
if(ts.regex.digitNegativeTest.test(str)){str=str.replace(ts.regex.digitNegativeReplace,'-$1')}
num=parseFloat(str);return isNaN(num)?$.trim(str):num},isDigit:function(str){return isNaN(str)?ts.regex.digitTest.test(str.toString().replace(ts.regex.digitReplace,'')):str!==''},computeColumnIndex:function($rows,c){var i,j,k,l,cell,cells,rowIndex,rowSpan,colSpan,firstAvailCol,columns=c&&c.columns||0,matrix=[],matrixrow=new Array(columns);for(i=0;i<$rows.length;i++){cells=$rows[i].cells;for(j=0;j<cells.length;j++){cell=cells[j];rowIndex=i;rowSpan=cell.rowSpan||1;colSpan=cell.colSpan||1;if(typeof matrix[rowIndex]==='undefined'){matrix[rowIndex]=[]}
for(k=0;k<matrix[rowIndex].length+1;k++){if(typeof matrix[rowIndex][k]==='undefined'){firstAvailCol=k;break}}
if(columns&&cell.cellIndex===firstAvailCol){}else if(cell.setAttribute){cell.setAttribute('data-column',firstAvailCol)}else{$(cell).attr('data-column',firstAvailCol)}
for(k=rowIndex;k<rowIndex+rowSpan;k++){if(typeof matrix[k]==='undefined'){matrix[k]=[]}
matrixrow=matrix[k];for(l=firstAvailCol;l<firstAvailCol+colSpan;l++){matrixrow[l]='x'}}}}
ts.checkColumnCount($rows,matrix,matrixrow.length);return matrixrow.length},checkColumnCount:function($rows,matrix,columns){var i,len,valid=!0,cells=[];for(i=0;i<matrix.length;i++){if(matrix[i]){len=matrix[i].length;if(matrix[i].length!==columns){valid=!1;break}}}
if(!valid){$rows.each(function(indx,el){var cell=el.parentElement.nodeName;if(cells.indexOf(cell)<0){cells.push(cell)}});console.error('Invalid or incorrect number of columns in the '+cells.join(' or ')+'; expected '+columns+', but found '+len+' columns')}},fixColumnWidth:function(table){table=$(table)[0];var overallWidth,percent,$tbodies,len,index,c=table.config,$colgroup=c.$table.children('colgroup');if($colgroup.length&&$colgroup.hasClass(ts.css.colgroup)){$colgroup.remove()}
if(c.widthFixed&&c.$table.children('colgroup').length===0){$colgroup=$('<colgroup class="'+ts.css.colgroup+'">');overallWidth=c.$table.width();$tbodies=c.$tbodies.find('tr:first').children(':visible');len=$tbodies.length;for(index=0;index<len;index++){percent=parseInt(($tbodies.eq(index).width()/overallWidth)*1000,10)/10+'%';$colgroup.append($('<col>').css('width',percent))}
c.$table.prepend($colgroup)}},getData:function(header,configHeader,key){var meta,cl4ss,val='',$header=$(header);if(!$header.length){return''}
meta=$.metadata?$header.metadata():!1;cl4ss=' '+($header.attr('class')||'');if(typeof $header.data(key)!=='undefined'||typeof $header.data(key.toLowerCase())!=='undefined'){val+=$header.data(key)||$header.data(key.toLowerCase())}else if(meta&&typeof meta[key]!=='undefined'){val+=meta[key]}else if(configHeader&&typeof configHeader[key]!=='undefined'){val+=configHeader[key]}else if(cl4ss!==' '&&cl4ss.match(' '+key+'-')){val=cl4ss.match(new RegExp('\\s'+key+'-([\\w-]+)'))[1]||''}
return $.trim(val)},getColumnData:function(table,obj,indx,getCell,$headers){if(typeof obj!=='object'||obj===null){return obj}
table=$(table)[0];var $header,key,c=table.config,$cells=($headers||c.$headers),$cell=c.$headerIndexed&&c.$headerIndexed[indx]||$cells.find('[data-column="'+indx+'"]:last');if(typeof obj[indx]!=='undefined'){return getCell?obj[indx]:obj[$cells.index($cell)]}
for(key in obj){if(typeof key==='string'){$header=$cell.filter(key).add($cell.find(key));if($header.length){return obj[key]}}}
return},isProcessing:function($table,toggle,$headers){$table=$($table);var c=$table[0].config,$header=$headers||$table.find('.'+ts.css.header);if(toggle){if(typeof $headers!=='undefined'&&c.sortList.length>0){$header=$header.filter(function(){return this.sortDisabled?!1:ts.isValueInArray(parseFloat($(this).attr('data-column')),c.sortList)>=0})}
$table.add($header).addClass(ts.css.processing+' '+c.cssProcessing)}else{$table.add($header).removeClass(ts.css.processing+' '+c.cssProcessing)}},processTbody:function(table,$tb,getIt){table=$(table)[0];if(getIt){table.isProcessing=!0;$tb.before('<colgroup class="tablesorter-savemyplace"/>');return $.fn.detach?$tb.detach():$tb.remove()}
var holdr=$(table).find('colgroup.tablesorter-savemyplace');$tb.insertAfter(holdr);holdr.remove();table.isProcessing=!1},clearTableBody:function(table){$(table)[0].config.$tbodies.children().detach()},characterEquivalents:{'a':'\u00e1\u00e0\u00e2\u00e3\u00e4\u0105\u00e5','A':'\u00c1\u00c0\u00c2\u00c3\u00c4\u0104\u00c5','c':'\u00e7\u0107\u010d','C':'\u00c7\u0106\u010c','e':'\u00e9\u00e8\u00ea\u00eb\u011b\u0119','E':'\u00c9\u00c8\u00ca\u00cb\u011a\u0118','i':'\u00ed\u00ec\u0130\u00ee\u00ef\u0131','I':'\u00cd\u00cc\u0130\u00ce\u00cf','o':'\u00f3\u00f2\u00f4\u00f5\u00f6\u014d','O':'\u00d3\u00d2\u00d4\u00d5\u00d6\u014c','ss':'\u00df','SS':'\u1e9e','u':'\u00fa\u00f9\u00fb\u00fc\u016f','U':'\u00da\u00d9\u00db\u00dc\u016e'},replaceAccents:function(str){var chr,acc='[',eq=ts.characterEquivalents;if(!ts.characterRegex){ts.characterRegexArray={};for(chr in eq){if(typeof chr==='string'){acc+=eq[chr];ts.characterRegexArray[chr]=new RegExp('['+eq[chr]+']','g')}}
ts.characterRegex=new RegExp(acc+']')}
if(ts.characterRegex.test(str)){for(chr in eq){if(typeof chr==='string'){str=str.replace(ts.characterRegexArray[chr],chr)}}}
return str},validateOptions:function(c){var setting,setting2,typ,timer,ignore='headers sortForce sortList sortAppend widgets'.split(' '),orig=c.originalSettings;if(orig){if(ts.debug(c,'core')){timer=new Date()}
for(setting in orig){typ=typeof ts.defaults[setting];if(typ==='undefined'){console.warn('Tablesorter Warning! "table.config.'+setting+'" option not recognized')}else if(typ==='object'){for(setting2 in orig[setting]){typ=ts.defaults[setting]&&typeof ts.defaults[setting][setting2];if($.inArray(setting,ignore)<0&&typ==='undefined'){console.warn('Tablesorter Warning! "table.config.'+setting+'.'+setting2+'" option not recognized')}}}}
if(ts.debug(c,'core')){console.log('validate options time:'+ts.benchmark(timer))}}},restoreHeaders:function(table){var index,$cell,c=$(table)[0].config,$headers=c.$table.find(c.selectorHeaders),len=$headers.length;for(index=0;index<len;index++){$cell=$headers.eq(index);if($cell.find('.'+ts.css.headerIn).length){$cell.html(c.headerContent[index])}}},destroy:function(table,removeClasses,callback){table=$(table)[0];if(!table.hasInitialized){return}
ts.removeWidget(table,!0,!1);var events,$t=$(table),c=table.config,$h=$t.find('thead:first'),$r=$h.find('tr.'+ts.css.headerRow).removeClass(ts.css.headerRow+' '+c.cssHeaderRow),$f=$t.find('tfoot:first > tr').children('th, td');if(removeClasses===!1&&$.inArray('uitheme',c.widgets)>=0){$t.triggerHandler('applyWidgetId',['uitheme']);$t.triggerHandler('applyWidgetId',['zebra'])}
$h.find('tr').not($r).remove();events='sortReset update updateRows updateAll updateHeaders updateCell addRows updateComplete sorton '+'appendCache updateCache applyWidgetId applyWidgets refreshWidgets removeWidget destroy mouseup mouseleave '+'keypress sortBegin sortEnd resetToLoadState '.split(' ').join(c.namespace+' ');$t.removeData('tablesorter').unbind(events.replace(ts.regex.spaces,' '));c.$headers.add($f).removeClass([ts.css.header,c.cssHeader,c.cssAsc,c.cssDesc,ts.css.sortAsc,ts.css.sortDesc,ts.css.sortNone].join(' ')).removeAttr('data-column').removeAttr('aria-label').attr('aria-disabled','true');$r.find(c.selectorSort).unbind(('mousedown mouseup keypress '.split(' ').join(c.namespace+' ')).replace(ts.regex.spaces,' '));ts.restoreHeaders(table);$t.toggleClass(ts.css.table+' '+c.tableClass+' tablesorter-'+c.theme,removeClasses===!1);$t.removeClass(c.namespace.slice(1));table.hasInitialized=!1;delete table.config.cache;if(typeof callback==='function'){callback(table)}
if(ts.debug(c,'core')){console.log('tablesorter has been removed')}}};$.fn.tablesorter=function(settings){return this.each(function(){var table=this,c=$.extend(!0,{},ts.defaults,settings,ts.instanceMethods);c.originalSettings=settings;if(!table.hasInitialized&&ts.buildTable&&this.nodeName!=='TABLE'){ts.buildTable(table,c)}else{ts.setup(table,c)}})};if(!(window.console&&window.console.log)){ts.logs=[];console={};console.log=console.warn=console.error=console.table=function(){var arg=arguments.length>1?arguments:arguments[0];ts.logs[ts.logs.length]={date:Date.now(),log:arg}}}
ts.addParser({id:'no-parser',is:function(){return!1},format:function(){return''},type:'text'});ts.addParser({id:'text',is:function(){return!0},format:function(str,table){var c=table.config;if(str){str=$.trim(c.ignoreCase?str.toLocaleLowerCase():str);str=c.sortLocaleCompare?ts.replaceAccents(str):str}
return str},type:'text'});ts.regex.nondigit=/[^\w,. \-()]/g;ts.addParser({id:'digit',is:function(str){return ts.isDigit(str)},format:function(str,table){var num=ts.formatFloat((str||'').replace(ts.regex.nondigit,''),table);return str&&typeof num==='number'?num:str?$.trim(str&&table.config.ignoreCase?str.toLocaleLowerCase():str):str},type:'numeric'});ts.regex.currencyReplace=/[+\-,. ]/g;ts.regex.currencyTest=/^\(?\d+[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]|[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]\d+\)?$/;ts.addParser({id:'currency',is:function(str){str=(str||'').replace(ts.regex.currencyReplace,'');return ts.regex.currencyTest.test(str)},format:function(str,table){var num=ts.formatFloat((str||'').replace(ts.regex.nondigit,''),table);return str&&typeof num==='number'?num:str?$.trim(str&&table.config.ignoreCase?str.toLocaleLowerCase():str):str},type:'numeric'});ts.regex.urlProtocolTest=/^(https?|ftp|file):\/\//;ts.regex.urlProtocolReplace=/(https?|ftp|file):\/\/(www\.)?/;ts.addParser({id:'url',is:function(str){return ts.regex.urlProtocolTest.test(str)},format:function(str){return str?$.trim(str.replace(ts.regex.urlProtocolReplace,'')):str},type:'text'});ts.regex.dash=/-/g;ts.regex.isoDate=/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}/;ts.addParser({id:'isoDate',is:function(str){return ts.regex.isoDate.test(str)},format:function(str){var date=str?new Date(str.replace(ts.regex.dash,'/')):str;return date instanceof Date&&isFinite(date)?date.getTime():str},type:'numeric'});ts.regex.percent=/%/g;ts.regex.percentTest=/(\d\s*?%|%\s*?\d)/;ts.addParser({id:'percent',is:function(str){return ts.regex.percentTest.test(str)&&str.length<15},format:function(str,table){return str?ts.formatFloat(str.replace(ts.regex.percent,''),table):str},type:'numeric'});ts.addParser({id:'image',is:function(str,table,node,$node){return $node.find('img').length>0},format:function(str,table,cell){return $(cell).find('img').attr(table.config.imgAttr||'alt')||str},parsed:!0,type:'text'});ts.regex.dateReplace=/(\S)([AP]M)$/i;ts.regex.usLongDateTest1=/^[A-Z]{3,10}\.?\s+\d{1,2},?\s+(\d{4})(\s+\d{1,2}:\d{2}(:\d{2})?(\s+[AP]M)?)?$/i;ts.regex.usLongDateTest2=/^\d{1,2}\s+[A-Z]{3,10}\s+\d{4}/i;ts.addParser({id:'usLongDate',is:function(str){return ts.regex.usLongDateTest1.test(str)||ts.regex.usLongDateTest2.test(str)},format:function(str){var date=str?new Date(str.replace(ts.regex.dateReplace,'$1 $2')):str;return date instanceof Date&&isFinite(date)?date.getTime():str},type:'numeric'});ts.regex.shortDateTest=/(^\d{1,2}[\/\s]\d{1,2}[\/\s]\d{4})|(^\d{4}[\/\s]\d{1,2}[\/\s]\d{1,2})/;ts.regex.shortDateReplace=/[\-.,]/g;ts.regex.shortDateXXY=/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/;ts.regex.shortDateYMD=/(\d{4})[\/\s](\d{1,2})[\/\s](\d{1,2})/;ts.convertFormat=function(dateString,format){dateString=(dateString||'').replace(ts.regex.spaces,' ').replace(ts.regex.shortDateReplace,'/');if(format==='mmddyyyy'){dateString=dateString.replace(ts.regex.shortDateXXY,'$3/$1/$2')}else if(format==='ddmmyyyy'){dateString=dateString.replace(ts.regex.shortDateXXY,'$3/$2/$1')}else if(format==='yyyymmdd'){dateString=dateString.replace(ts.regex.shortDateYMD,'$1/$2/$3')}
var date=new Date(dateString);return date instanceof Date&&isFinite(date)?date.getTime():''};ts.addParser({id:'shortDate',is:function(str){str=(str||'').replace(ts.regex.spaces,' ').replace(ts.regex.shortDateReplace,'/');return ts.regex.shortDateTest.test(str)},format:function(str,table,cell,cellIndex){if(str){var c=table.config,$header=c.$headerIndexed[cellIndex],format=$header.length&&$header.data('dateFormat')||ts.getData($header,ts.getColumnData(table,c.headers,cellIndex),'dateFormat')||c.dateFormat;if($header.length){$header.data('dateFormat',format)}
return ts.convertFormat(str,format)||str}
return str},type:'numeric'});ts.regex.timeTest=/^(0?[1-9]|1[0-2]):([0-5]\d)(\s[AP]M)$|^((?:[01]\d|[2][0-4]):[0-5]\d)$/i;ts.regex.timeMatch=/(0?[1-9]|1[0-2]):([0-5]\d)(\s[AP]M)|((?:[01]\d|[2][0-4]):[0-5]\d)/i;ts.addParser({id:'time',is:function(str){return ts.regex.timeTest.test(str)},format:function(str){var temp,timePart=(str||'').match(ts.regex.timeMatch),orig=new Date(str),time=str&&(timePart!==null?timePart[0]:'00:00 AM'),date=time?new Date('2000/01/01 '+time.replace(ts.regex.dateReplace,'$1 $2')):time;if(date instanceof Date&&isFinite(date)){temp=orig instanceof Date&&isFinite(orig)?orig.getTime():0;return temp?parseFloat(date.getTime()+'.'+orig.getTime()):date.getTime()}
return str},type:'numeric'});ts.addParser({id:'metadata',is:function(){return!1},format:function(str,table,cell){var c=table.config,p=(!c.parserMetadataName)?'sortValue':c.parserMetadataName;return $(cell).metadata()[p]},type:'numeric'});ts.addWidget({id:'zebra',priority:90,format:function(table,c,wo){var $visibleRows,$row,count,isEven,tbodyIndex,rowIndex,len,child=new RegExp(c.cssChildRow,'i'),$tbodies=c.$tbodies.add($(c.namespace+'_extra_table').children('tbody:not(.'+c.cssInfoBlock+')'));for(tbodyIndex=0;tbodyIndex<$tbodies.length;tbodyIndex++){count=0;$visibleRows=$tbodies.eq(tbodyIndex).children('tr:visible').not(c.selectorRemove);len=$visibleRows.length;for(rowIndex=0;rowIndex<len;rowIndex++){$row=$visibleRows.eq(rowIndex);if(!child.test($row[0].className)){count++}
isEven=(count%2===0);$row.removeClass(wo.zebra[isEven?1:0]).addClass(wo.zebra[isEven?0:1])}}},remove:function(table,c,wo,refreshing){if(refreshing){return}
var tbodyIndex,$tbody,$tbodies=c.$tbodies,toRemove=(wo.zebra||['even','odd']).join(' ');for(tbodyIndex=0;tbodyIndex<$tbodies.length;tbodyIndex++){$tbody=ts.processTbody(table,$tbodies.eq(tbodyIndex),!0);$tbody.children().removeClass(toRemove);ts.processTbody(table,$tbody,!1)}}})})(jQuery);(function($,window,document){'use strict';var ts=$.tablesorter||{};$.extend(!0,ts.defaults,{fixedUrl:'',widgetOptions:{storage_fixedUrl:'',storage_group:'',storage_page:'',storage_storageType:'',storage_tableId:'',storage_useSessionStorage:''}});ts.storage=function(table,key,value,options){table=$(table)[0];var cookieIndex,cookies,date,hasStorage=!1,values={},c=table.config,wo=c&&c.widgetOptions,debug=ts.debug(c,'storage'),storageType=((options&&options.storageType)||(wo&&wo.storage_storageType)).toString().charAt(0).toLowerCase(),session=storageType?'':(options&&options.useSessionStorage)||(wo&&wo.storage_useSessionStorage),$table=$(table),id=options&&options.id||$table.attr(options&&options.group||wo&&wo.storage_group||'data-table-group')||wo&&wo.storage_tableId||table.id||$('.tablesorter').index($table),url=options&&options.url||$table.attr(options&&options.page||wo&&wo.storage_page||'data-table-page')||wo&&wo.storage_fixedUrl||c&&c.fixedUrl||window.location.pathname;if(storageType!=='c'){storageType=(storageType==='s'||session)?'sessionStorage':'localStorage';if(storageType in window){try{window[storageType].setItem('_tmptest','temp');hasStorage=!0;window[storageType].removeItem('_tmptest')}catch(error){console.warn(storageType+' is not supported in this browser')}}}
if(debug){console.log('Storage >> Using',hasStorage?storageType:'cookies')}
if($.parseJSON){if(hasStorage){values=$.parseJSON(window[storageType][key]||'null')||{}}else{cookies=document.cookie.split(/[;\s|=]/);cookieIndex=$.inArray(key,cookies)+1;values=(cookieIndex!==0)?$.parseJSON(cookies[cookieIndex]||'null')||{}:{}}}
if(typeof value!=='undefined'&&window.JSON&&JSON.hasOwnProperty('stringify')){if(!values[url]){values[url]={}}
values[url][id]=value;if(hasStorage){window[storageType][key]=JSON.stringify(values)}else{date=new Date();date.setTime(date.getTime()+(31536e+6));document.cookie=key+'='+(JSON.stringify(values)).replace(/\"/g,'\"')+'; expires='+date.toGMTString()+'; path=/'}}else{return values&&values[url]?values[url][id]:''}}})(jQuery,window,document);(function($){'use strict';var ts=$.tablesorter||{};ts.themes={'bootstrap':{table:'table table-bordered table-striped',caption:'caption',header:'bootstrap-header',sortNone:'',sortAsc:'',sortDesc:'',active:'',hover:'',icons:'',iconSortNone:'bootstrap-icon-unsorted',iconSortAsc:'glyphicon glyphicon-chevron-up',iconSortDesc:'glyphicon glyphicon-chevron-down',filterRow:'',footerRow:'',footerCells:'',even:'',odd:''},'jui':{table:'ui-widget ui-widget-content ui-corner-all',caption:'ui-widget-content',header:'ui-widget-header ui-corner-all ui-state-default',sortNone:'',sortAsc:'',sortDesc:'',active:'ui-state-active',hover:'ui-state-hover',icons:'ui-icon',iconSortNone:'ui-icon-carat-2-n-s ui-icon-caret-2-n-s',iconSortAsc:'ui-icon-carat-1-n ui-icon-caret-1-n',iconSortDesc:'ui-icon-carat-1-s ui-icon-caret-1-s',filterRow:'',footerRow:'',footerCells:'',even:'ui-widget-content',odd:'ui-state-default'}};$.extend(ts.css,{wrapper:'tablesorter-wrapper'});ts.addWidget({id:'uitheme',priority:10,format:function(table,c,wo){var i,tmp,hdr,icon,time,$header,$icon,$tfoot,$h,oldtheme,oldremove,oldIconRmv,hasOldTheme,themesAll=ts.themes,$table=c.$table.add($(c.namespace+'_extra_table')),$headers=c.$headers.add($(c.namespace+'_extra_headers')),theme=c.theme||'jui',themes=themesAll[theme]||{},remove=$.trim([themes.sortNone,themes.sortDesc,themes.sortAsc,themes.active].join(' ')),iconRmv=$.trim([themes.iconSortNone,themes.iconSortDesc,themes.iconSortAsc].join(' ')),debug=ts.debug(c,'uitheme');if(debug){time=new Date()}
if(!$table.hasClass('tablesorter-'+theme)||c.theme!==c.appliedTheme||!wo.uitheme_applied){wo.uitheme_applied=!0;oldtheme=themesAll[c.appliedTheme]||{};hasOldTheme=!$.isEmptyObject(oldtheme);oldremove=hasOldTheme?[oldtheme.sortNone,oldtheme.sortDesc,oldtheme.sortAsc,oldtheme.active].join(' '):'';oldIconRmv=hasOldTheme?[oldtheme.iconSortNone,oldtheme.iconSortDesc,oldtheme.iconSortAsc].join(' '):'';if(hasOldTheme){wo.zebra[0]=$.trim(' '+wo.zebra[0].replace(' '+oldtheme.even,''));wo.zebra[1]=$.trim(' '+wo.zebra[1].replace(' '+oldtheme.odd,''));c.$tbodies.children().removeClass([oldtheme.even,oldtheme.odd].join(' '))}
if(themes.even){wo.zebra[0]+=' '+themes.even}
if(themes.odd){wo.zebra[1]+=' '+themes.odd}
$table.children('caption').removeClass(oldtheme.caption||'').addClass(themes.caption);$tfoot=$table.removeClass((c.appliedTheme?'tablesorter-'+(c.appliedTheme||''):'')+' '+(oldtheme.table||'')).addClass('tablesorter-'+theme+' '+(themes.table||'')).children('tfoot');c.appliedTheme=c.theme;if($tfoot.length){$tfoot.children('tr').removeClass(oldtheme.footerRow||'').addClass(themes.footerRow).children('th, td').removeClass(oldtheme.footerCells||'').addClass(themes.footerCells)}
$headers.removeClass((hasOldTheme?[oldtheme.header,oldtheme.hover,oldremove].join(' '):'')||'').addClass(themes.header).not('.sorter-false').unbind('mouseenter.tsuitheme mouseleave.tsuitheme').bind('mouseenter.tsuitheme mouseleave.tsuitheme',function(event){$(this)[event.type==='mouseenter'?'addClass':'removeClass'](themes.hover||'')});$headers.each(function(){var $this=$(this);if(!$this.find('.'+ts.css.wrapper).length){$this.wrapInner('<div class="'+ts.css.wrapper+'" style="position:relative;height:100%;width:100%"></div>')}});if(c.cssIcon){$headers.find('.'+ts.css.icon).removeClass(hasOldTheme?[oldtheme.icons,oldIconRmv].join(' '):'').addClass(themes.icons||'')}
if(ts.hasWidget(c.table,'filter')){tmp=function(){$table.children('thead').children('.'+ts.css.filterRow).removeClass(hasOldTheme?oldtheme.filterRow||'':'').addClass(themes.filterRow||'')};if(wo.filter_initialized){tmp()}else{$table.one('filterInit',function(){tmp()})}}}
for(i=0;i<c.columns;i++){$header=c.$headers.add($(c.namespace+'_extra_headers')).not('.sorter-false').filter('[data-column="'+i+'"]');$icon=(ts.css.icon)?$header.find('.'+ts.css.icon):$();$h=$headers.not('.sorter-false').filter('[data-column="'+i+'"]:last');if($h.length){$header.removeClass(remove);$icon.removeClass(iconRmv);if($h[0].sortDisabled){$icon.removeClass(themes.icons||'')}else{hdr=themes.sortNone;icon=themes.iconSortNone;if($h.hasClass(ts.css.sortAsc)){hdr=[themes.sortAsc,themes.active].join(' ');icon=themes.iconSortAsc}else if($h.hasClass(ts.css.sortDesc)){hdr=[themes.sortDesc,themes.active].join(' ');icon=themes.iconSortDesc}
$header.addClass(hdr);$icon.addClass(icon||'')}}}
if(debug){console.log('uitheme >> Applied '+theme+' theme'+ts.benchmark(time))}},remove:function(table,c,wo,refreshing){if(!wo.uitheme_applied){return}
var $table=c.$table,theme=c.appliedTheme||'jui',themes=ts.themes[theme]||ts.themes.jui,$headers=$table.children('thead').children(),remove=themes.sortNone+' '+themes.sortDesc+' '+themes.sortAsc,iconRmv=themes.iconSortNone+' '+themes.iconSortDesc+' '+themes.iconSortAsc;$table.removeClass('tablesorter-'+theme+' '+themes.table);wo.uitheme_applied=!1;if(refreshing){return}
$table.find(ts.css.header).removeClass(themes.header);$headers.unbind('mouseenter.tsuitheme mouseleave.tsuitheme').removeClass(themes.hover+' '+remove+' '+themes.active).filter('.'+ts.css.filterRow).removeClass(themes.filterRow);$headers.find('.'+ts.css.icon).removeClass(themes.icons+' '+iconRmv)}})})(jQuery);(function($){'use strict';var ts=$.tablesorter||{};ts.addWidget({id:'columns',priority:65,options:{columns:['primary','secondary','tertiary']},format:function(table,c,wo){var $tbody,tbodyIndex,$rows,rows,$row,$cells,remove,indx,$table=c.$table,$tbodies=c.$tbodies,sortList=c.sortList,len=sortList.length,css=wo&&wo.columns||['primary','secondary','tertiary'],last=css.length-1;remove=css.join(' ');for(tbodyIndex=0;tbodyIndex<$tbodies.length;tbodyIndex++){$tbody=ts.processTbody(table,$tbodies.eq(tbodyIndex),!0);$rows=$tbody.children('tr');$rows.each(function(){$row=$(this);if(this.style.display!=='none'){$cells=$row.children().removeClass(remove);if(sortList&&sortList[0]){$cells.eq(sortList[0][0]).addClass(css[0]);if(len>1){for(indx=1;indx<len;indx++){$cells.eq(sortList[indx][0]).addClass(css[indx]||css[last])}}}}});ts.processTbody(table,$tbody,!1)}
rows=wo.columns_thead!==!1?['thead tr']:[];if(wo.columns_tfoot!==!1){rows.push('tfoot tr')}
if(rows.length){$rows=$table.find(rows.join(',')).children().removeClass(remove);if(len){for(indx=0;indx<len;indx++){$rows.filter('[data-column="'+sortList[indx][0]+'"]').addClass(css[indx]||css[last])}}}},remove:function(table,c,wo){var tbodyIndex,$tbody,$tbodies=c.$tbodies,remove=(wo.columns||['primary','secondary','tertiary']).join(' ');c.$headers.removeClass(remove);c.$table.children('tfoot').children('tr').children('th, td').removeClass(remove);for(tbodyIndex=0;tbodyIndex<$tbodies.length;tbodyIndex++){$tbody=ts.processTbody(table,$tbodies.eq(tbodyIndex),!0);$tbody.children('tr').each(function(){$(this).children().removeClass(remove)});ts.processTbody(table,$tbody,!1)}}})})(jQuery);(function($){'use strict';var tsf,tsfRegex,ts=$.tablesorter||{},tscss=ts.css,tskeyCodes=ts.keyCodes;$.extend(tscss,{filterRow:'tablesorter-filter-row',filter:'tablesorter-filter',filterDisabled:'disabled',filterRowHide:'hideme'});$.extend(tskeyCodes,{backSpace:8,escape:27,space:32,left:37,down:40});ts.addWidget({id:'filter',priority:50,options:{filter_cellFilter:'',filter_childRows:!1,filter_childByColumn:!1,filter_childWithSibs:!0,filter_columnAnyMatch:!0,filter_columnFilters:!0,filter_cssFilter:'',filter_defaultAttrib:'data-value',filter_defaultFilter:{},filter_excludeFilter:{},filter_external:'',filter_filteredRow:'filtered',filter_filterLabel:'Filter "{{label}}" column by...',filter_formatter:null,filter_functions:null,filter_hideEmpty:!0,filter_hideFilters:!1,filter_ignoreCase:!0,filter_liveSearch:!0,filter_matchType:{'input':'exact','select':'exact'},filter_onlyAvail:'filter-onlyAvail',filter_placeholder:{search:'',select:''},filter_reset:null,filter_resetOnEsc:!0,filter_saveFilters:!1,filter_searchDelay:300,filter_searchFiltered:!0,filter_selectSource:null,filter_selectSourceSeparator:'|',filter_serversideFiltering:!1,filter_startsWith:!1,filter_useParsedData:!1},format:function(table,c,wo){if(!c.$table.hasClass('hasFilters')){tsf.init(table,c,wo)}},remove:function(table,c,wo,refreshing){var tbodyIndex,$tbody,$table=c.$table,$tbodies=c.$tbodies,events=('addRows updateCell update updateRows updateComplete appendCache filterReset '+'filterAndSortReset filterFomatterUpdate filterEnd search stickyHeadersInit ').split(' ').join(c.namespace+'filter ');$table.removeClass('hasFilters').unbind(events.replace(ts.regex.spaces,' ')).find('.'+tscss.filterRow).remove();wo.filter_initialized=!1;if(refreshing){return}
for(tbodyIndex=0;tbodyIndex<$tbodies.length;tbodyIndex++){$tbody=ts.processTbody(table,$tbodies.eq(tbodyIndex),!0);$tbody.children().removeClass(wo.filter_filteredRow).show();ts.processTbody(table,$tbody,!1)}
if(wo.filter_reset){$(document).undelegate(wo.filter_reset,'click'+c.namespace+'filter')}}});tsf=ts.filter={regex:{regex:/^\/((?:\\\/|[^\/])+)\/([migyu]{0,5})?$/,child:/tablesorter-childRow/,filtered:/filtered/,type:/undefined|number/,exact:/(^[\"\'=]+)|([\"\'=]+$)/g,operators:/[<>=]/g,query:'(q|query)',wild01:/\?/g,wild0More:/\*/g,quote:/\"/g,isNeg1:/(>=?\s*-\d)/,isNeg2:/(<=?\s*\d)/},types:{or:function(c,data,vars){if((tsfRegex.orTest.test(data.iFilter)||tsfRegex.orSplit.test(data.filter))&&!tsfRegex.regex.test(data.filter)){var indx,filterMatched,query,regex,data2=$.extend({},data),filter=data.filter.split(tsfRegex.orSplit),iFilter=data.iFilter.split(tsfRegex.orSplit),len=filter.length;for(indx=0;indx<len;indx++){data2.nestedFilters=!0;data2.filter=''+(tsf.parseFilter(c,filter[indx],data)||'');data2.iFilter=''+(tsf.parseFilter(c,iFilter[indx],data)||'');query='('+(tsf.parseFilter(c,data2.filter,data)||'')+')';try{regex=new RegExp(data.isMatch?query:'^'+query+'$',c.widgetOptions.filter_ignoreCase?'i':'');filterMatched=regex.test(data2.exact)||tsf.processTypes(c,data2,vars);if(filterMatched){return filterMatched}}catch(error){return null}}
return filterMatched||!1}
return null},and:function(c,data,vars){if(tsfRegex.andTest.test(data.filter)){var indx,filterMatched,result,query,regex,data2=$.extend({},data),filter=data.filter.split(tsfRegex.andSplit),iFilter=data.iFilter.split(tsfRegex.andSplit),len=filter.length;for(indx=0;indx<len;indx++){data2.nestedFilters=!0;data2.filter=''+(tsf.parseFilter(c,filter[indx],data)||'');data2.iFilter=''+(tsf.parseFilter(c,iFilter[indx],data)||'');query=('('+(tsf.parseFilter(c,data2.filter,data)||'')+')').replace(tsfRegex.wild01,'\\S{1}').replace(tsfRegex.wild0More,'\\S*');try{regex=new RegExp(data.isMatch?query:'^'+query+'$',c.widgetOptions.filter_ignoreCase?'i':'');result=(regex.test(data2.exact)||tsf.processTypes(c,data2,vars));if(indx===0){filterMatched=result}else{filterMatched=filterMatched&&result}}catch(error){return null}}
return filterMatched||!1}
return null},regex:function(c,data){if(tsfRegex.regex.test(data.filter)){var matches,regex=data.filter_regexCache[data.index]||tsfRegex.regex.exec(data.filter),isRegex=regex instanceof RegExp;try{if(!isRegex){data.filter_regexCache[data.index]=regex=new RegExp(regex[1],regex[2])}
matches=regex.test(data.exact)}catch(error){matches=!1}
return matches}
return null},operators:function(c,data){if(tsfRegex.operTest.test(data.iFilter)&&data.iExact!==''){var cachedValue,result,txt,table=c.table,parsed=data.parsed[data.index],query=ts.formatFloat(data.iFilter.replace(tsfRegex.operators,''),table),parser=c.parsers[data.index]||{},savedSearch=query;if(parsed||parser.type==='numeric'){txt=$.trim(''+data.iFilter.replace(tsfRegex.operators,''));result=tsf.parseFilter(c,txt,data,!0);query=(typeof result==='number'&&result!==''&&!isNaN(result))?result:query}
if((parsed||parser.type==='numeric')&&!isNaN(query)&&typeof data.cache!=='undefined'){cachedValue=data.cache}else{txt=isNaN(data.iExact)?data.iExact.replace(ts.regex.nondigit,''):data.iExact;cachedValue=ts.formatFloat(txt,table)}
if(tsfRegex.gtTest.test(data.iFilter)){result=tsfRegex.gteTest.test(data.iFilter)?cachedValue>=query:cachedValue>query}else if(tsfRegex.ltTest.test(data.iFilter)){result=tsfRegex.lteTest.test(data.iFilter)?cachedValue<=query:cachedValue<query}
if(!result&&savedSearch===''){result=!0}
return result}
return null},notMatch:function(c,data){if(tsfRegex.notTest.test(data.iFilter)){var indx,txt=data.iFilter.replace('!',''),filter=tsf.parseFilter(c,txt,data)||'';if(tsfRegex.exact.test(filter)){filter=filter.replace(tsfRegex.exact,'');return filter===''?!0:$.trim(filter)!==data.iExact}else{indx=data.iExact.search($.trim(filter));return filter===''?!0:data.anyMatch?indx<0:!(c.widgetOptions.filter_startsWith?indx===0:indx>=0)}}
return null},exact:function(c,data){if(tsfRegex.exact.test(data.iFilter)){var txt=data.iFilter.replace(tsfRegex.exact,''),filter=tsf.parseFilter(c,txt,data)||'';return data.anyMatch?$.inArray(filter,data.rowArray)>=0:filter==data.iExact}
return null},range:function(c,data){if(tsfRegex.toTest.test(data.iFilter)){var result,tmp,range1,range2,table=c.table,index=data.index,parsed=data.parsed[index],query=data.iFilter.split(tsfRegex.toSplit);tmp=query[0].replace(ts.regex.nondigit,'')||'';range1=ts.formatFloat(tsf.parseFilter(c,tmp,data),table);tmp=query[1].replace(ts.regex.nondigit,'')||'';range2=ts.formatFloat(tsf.parseFilter(c,tmp,data),table);if(parsed||c.parsers[index].type==='numeric'){result=c.parsers[index].format(''+query[0],table,c.$headers.eq(index),index);range1=(result!==''&&!isNaN(result))?result:range1;result=c.parsers[index].format(''+query[1],table,c.$headers.eq(index),index);range2=(result!==''&&!isNaN(result))?result:range2}
if((parsed||c.parsers[index].type==='numeric')&&!isNaN(range1)&&!isNaN(range2)){result=data.cache}else{tmp=isNaN(data.iExact)?data.iExact.replace(ts.regex.nondigit,''):data.iExact;result=ts.formatFloat(tmp,table)}
if(range1>range2){tmp=range1;range1=range2;range2=tmp}
return(result>=range1&&result<=range2)||(range1===''||range2==='')}
return null},wild:function(c,data){if(tsfRegex.wildOrTest.test(data.iFilter)){var query=''+(tsf.parseFilter(c,data.iFilter,data)||'');if(!tsfRegex.wildTest.test(query)&&data.nestedFilters){query=data.isMatch?query:'^('+query+')$'}
try{return new RegExp(query.replace(tsfRegex.wild01,'\\S{1}').replace(tsfRegex.wild0More,'\\S*'),c.widgetOptions.filter_ignoreCase?'i':'').test(data.exact)}catch(error){return null}}
return null},fuzzy:function(c,data){if(tsfRegex.fuzzyTest.test(data.iFilter)){var indx,patternIndx=0,len=data.iExact.length,txt=data.iFilter.slice(1),pattern=tsf.parseFilter(c,txt,data)||'';for(indx=0;indx<len;indx++){if(data.iExact[indx]===pattern[patternIndx]){patternIndx+=1}}
return patternIndx===pattern.length}
return null}},init:function(table){ts.language=$.extend(!0,{},{to:'to',or:'or',and:'and'},ts.language);var options,string,txt,$header,column,val,fxn,noSelect,c=table.config,wo=c.widgetOptions,processStr=function(prefix,str,suffix){str=str.trim();return str===''?'':(prefix||'')+str+(suffix||'')};c.$table.addClass('hasFilters');c.lastSearch=[];wo.filter_searchTimer=null;wo.filter_initTimer=null;wo.filter_formatterCount=0;wo.filter_formatterInit=[];wo.filter_anyColumnSelector='[data-column="all"],[data-column="any"]';wo.filter_multipleColumnSelector='[data-column*="-"],[data-column*=","]';val='\\{'+tsfRegex.query+'\\}';$.extend(tsfRegex,{child:new RegExp(c.cssChildRow),filtered:new RegExp(wo.filter_filteredRow),alreadyFiltered:new RegExp('(\\s+(-'+processStr('|',ts.language.or)+processStr('|',ts.language.to)+')\\s+)','i'),toTest:new RegExp('\\s+(-'+processStr('|',ts.language.to)+')\\s+','i'),toSplit:new RegExp('(?:\\s+(?:-'+processStr('|',ts.language.to)+')\\s+)','gi'),andTest:new RegExp('\\s+('+processStr('',ts.language.and,'|')+'&&)\\s+','i'),andSplit:new RegExp('(?:\\s+(?:'+processStr('',ts.language.and,'|')+'&&)\\s+)','gi'),orTest:new RegExp('(\\|'+processStr('|\\s+',ts.language.or,'\\s+')+')','i'),orSplit:new RegExp('(?:\\|'+processStr('|\\s+(?:',ts.language.or,')\\s+')+')','gi'),iQuery:new RegExp(val,'i'),igQuery:new RegExp(val,'ig'),operTest:/^[<>]=?/,gtTest:/>/,gteTest:/>=/,ltTest:/</,lteTest:/<=/,notTest:/^\!/,wildOrTest:/[\?\*\|]/,wildTest:/\?\*/,fuzzyTest:/^~/,exactTest:/[=\"\|!]/});val=c.$headers.filter('.filter-false, .parser-false').length;if(wo.filter_columnFilters!==!1&&val!==c.$headers.length){tsf.buildRow(table,c,wo)}
txt='addRows updateCell update updateRows updateComplete appendCache filterReset '+'filterAndSortReset filterResetSaved filterEnd search '.split(' ').join(c.namespace+'filter ');c.$table.bind(txt,function(event,filter){val=wo.filter_hideEmpty&&$.isEmptyObject(c.cache)&&!(c.delayInit&&event.type==='appendCache');c.$table.find('.'+tscss.filterRow).toggleClass(wo.filter_filteredRow,val);if(!/(search|filter)/.test(event.type)){event.stopPropagation();tsf.buildDefault(table,!0)}
if(event.type==='filterReset'||event.type==='filterAndSortReset'){c.$table.find('.'+tscss.filter).add(wo.filter_$externalFilters).val('');if(event.type==='filterAndSortReset'){ts.sortReset(this.config,function(){tsf.searching(table,[])})}else{tsf.searching(table,[])}}else if(event.type==='filterResetSaved'){ts.storage(table,'tablesorter-filters','')}else if(event.type==='filterEnd'){tsf.buildDefault(table,!0)}else{filter=event.type==='search'?filter:event.type==='updateComplete'?c.$table.data('lastSearch'):'';if(/(update|add)/.test(event.type)&&event.type!=='updateComplete'){c.lastCombinedFilter=null;c.lastSearch=[];setTimeout(function(){c.$table.triggerHandler('filterFomatterUpdate')},100)}
tsf.searching(table,filter,!0)}
return!1});if(wo.filter_reset){if(wo.filter_reset instanceof $){wo.filter_reset.click(function(){c.$table.triggerHandler('filterReset')})}else if($(wo.filter_reset).length){$(document).undelegate(wo.filter_reset,'click'+c.namespace+'filter').delegate(wo.filter_reset,'click'+c.namespace+'filter',function(){c.$table.triggerHandler('filterReset')})}}
if(wo.filter_functions){for(column=0;column<c.columns;column++){fxn=ts.getColumnData(table,wo.filter_functions,column);if(fxn){$header=c.$headerIndexed[column].removeClass('filter-select');noSelect=!($header.hasClass('filter-false')||$header.hasClass('parser-false'));options='';if(fxn===!0&&noSelect){tsf.buildSelect(table,column)}else if(typeof fxn==='object'&&noSelect){for(string in fxn){if(typeof string==='string'){options+=options===''?'<option value="">'+($header.data('placeholder')||$header.attr('data-placeholder')||wo.filter_placeholder.select||'')+'</option>':'';val=string;txt=string;if(string.indexOf(wo.filter_selectSourceSeparator)>=0){val=string.split(wo.filter_selectSourceSeparator);txt=val[1];val=val[0]}
options+='<option '+(txt===val?'':'data-function-name="'+string+'" ')+'value="'+val+'">'+txt+'</option>'}}
c.$table.find('thead').find('select.'+tscss.filter+'[data-column="'+column+'"]').append(options);txt=wo.filter_selectSource;fxn=typeof txt==='function'?!0:ts.getColumnData(table,txt,column);if(fxn){tsf.buildSelect(c.table,column,'',!0,$header.hasClass(wo.filter_onlyAvail))}}}}}
tsf.buildDefault(table,!0);tsf.bindSearch(table,c.$table.find('.'+tscss.filter),!0);if(wo.filter_external){tsf.bindSearch(table,wo.filter_external)}
if(wo.filter_hideFilters){tsf.hideFilters(c)}
if(c.showProcessing){txt='filterStart filterEnd '.split(' ').join(c.namespace+'filter-sp ');c.$table.unbind(txt.replace(ts.regex.spaces,' ')).bind(txt,function(event,columns){$header=(columns)?c.$table.find('.'+tscss.header).filter('[data-column]').filter(function(){return columns[$(this).data('column')]!==''}):'';ts.isProcessing(table,event.type==='filterStart',columns?$header:'')})}
c.filteredRows=c.totalRows;txt='tablesorter-initialized pagerBeforeInitialized '.split(' ').join(c.namespace+'filter ');c.$table.unbind(txt.replace(ts.regex.spaces,' ')).bind(txt,function(){tsf.completeInit(this)});if(c.pager&&c.pager.initialized&&!wo.filter_initialized){c.$table.triggerHandler('filterFomatterUpdate');setTimeout(function(){tsf.filterInitComplete(c)},100)}else if(!wo.filter_initialized){tsf.completeInit(table)}},completeInit:function(table){var c=table.config,wo=c.widgetOptions,filters=tsf.setDefaults(table,c,wo)||[];if(filters.length){if(!(c.delayInit&&filters.join('')==='')){ts.setFilters(table,filters,!0)}}
c.$table.triggerHandler('filterFomatterUpdate');setTimeout(function(){if(!wo.filter_initialized){tsf.filterInitComplete(c)}},100)},formatterUpdated:function($cell,column){var $table=$cell&&$cell.closest('table');var config=$table.length&&$table[0].config,wo=config&&config.widgetOptions;if(wo&&!wo.filter_initialized){wo.filter_formatterInit[column]=1}},filterInitComplete:function(c){var indx,len,wo=c.widgetOptions,count=0,completed=function(){wo.filter_initialized=!0;c.lastSearch=c.$table.data('lastSearch');c.$table.triggerHandler('filterInit',c);tsf.findRows(c.table,c.lastSearch||[]);if(ts.debug(c,'filter')){console.log('Filter >> Widget initialized')}};if($.isEmptyObject(wo.filter_formatter)){completed()}else{len=wo.filter_formatterInit.length;for(indx=0;indx<len;indx++){if(wo.filter_formatterInit[indx]===1){count++}}
clearTimeout(wo.filter_initTimer);if(!wo.filter_initialized&&count===wo.filter_formatterCount){completed()}else if(!wo.filter_initialized){wo.filter_initTimer=setTimeout(function(){completed()},500)}}},processFilters:function(filters,encode){var indx,result=[],mode=encode?encodeURIComponent:decodeURIComponent,len=filters.length;for(indx=0;indx<len;indx++){if(filters[indx]){result[indx]=mode(filters[indx])}}
return result},setDefaults:function(table,c,wo){var isArray,saved,indx,col,$filters,filters=ts.getFilters(table)||[];if(wo.filter_saveFilters&&ts.storage){saved=ts.storage(table,'tablesorter-filters')||[];isArray=$.isArray(saved);if(!(isArray&&saved.join('')===''||!isArray)){filters=tsf.processFilters(saved)}}
if(filters.join('')===''){$filters=c.$headers.add(wo.filter_$externalFilters).filter('['+wo.filter_defaultAttrib+']');for(indx=0;indx<=c.columns;indx++){col=indx===c.columns?'all':indx;filters[indx]=$filters.filter('[data-column="'+col+'"]').attr(wo.filter_defaultAttrib)||filters[indx]||''}}
c.$table.data('lastSearch',filters);return filters},parseFilter:function(c,filter,data,parsed){return parsed||data.parsed[data.index]?c.parsers[data.index].format(filter,c.table,[],data.index):filter},buildRow:function(table,c,wo){var $filter,col,column,$header,makeSelect,disabled,name,ffxn,tmp,cellFilter=wo.filter_cellFilter,columns=c.columns,arry=$.isArray(cellFilter),buildFilter='<tr role="search" class="'+tscss.filterRow+' '+c.cssIgnoreRow+'">';for(column=0;column<columns;column++){if(c.$headerIndexed[column].length){tmp=c.$headerIndexed[column]&&c.$headerIndexed[column][0].colSpan||0;if(tmp>1){buildFilter+='<td data-column="'+column+'-'+(column+tmp-1)+'" colspan="'+tmp+'"'}else{buildFilter+='<td data-column="'+column+'"'}
if(arry){buildFilter+=(cellFilter[column]?' class="'+cellFilter[column]+'"':'')}else{buildFilter+=(cellFilter!==''?' class="'+cellFilter+'"':'')}
buildFilter+='></td>'}}
c.$filters=$(buildFilter+='</tr>').appendTo(c.$table.children('thead').eq(0)).children('td');for(column=0;column<columns;column++){disabled=!1;$header=c.$headerIndexed[column];if($header&&$header.length){$filter=tsf.getColumnElm(c,c.$filters,column);ffxn=ts.getColumnData(table,wo.filter_functions,column);makeSelect=(wo.filter_functions&&ffxn&&typeof ffxn!=='function')||$header.hasClass('filter-select');col=ts.getColumnData(table,c.headers,column);disabled=ts.getData($header[0],col,'filter')==='false'||ts.getData($header[0],col,'parser')==='false';if(makeSelect){buildFilter=$('<select>').appendTo($filter)}else{ffxn=ts.getColumnData(table,wo.filter_formatter,column);if(ffxn){wo.filter_formatterCount++;buildFilter=ffxn($filter,column);if(buildFilter&&buildFilter.length===0){buildFilter=$filter.children('input')}
if(buildFilter&&(buildFilter.parent().length===0||(buildFilter.parent().length&&buildFilter.parent()[0]!==$filter[0]))){$filter.append(buildFilter)}}else{buildFilter=$('<input type="search">').appendTo($filter)}
if(buildFilter){tmp=$header.data('placeholder')||$header.attr('data-placeholder')||wo.filter_placeholder.search||'';buildFilter.attr('placeholder',tmp)}}
if(buildFilter){name=($.isArray(wo.filter_cssFilter)?(typeof wo.filter_cssFilter[column]!=='undefined'?wo.filter_cssFilter[column]||'':''):wo.filter_cssFilter)||'';buildFilter.addClass(tscss.filter+' '+name);name=wo.filter_filterLabel;tmp=name.match(/{{([^}]+?)}}/g);if(!tmp){tmp=['{{label}}']}
$.each(tmp,function(indx,attr){var regex=new RegExp(attr,'g'),data=$header.attr('data-'+attr.replace(/{{|}}/g,'')),text=typeof data==='undefined'?$header.text():data;name=name.replace(regex,$.trim(text))});buildFilter.attr({'data-column':$filter.attr('data-column'),'aria-label':name});if(disabled){buildFilter.attr('placeholder','').addClass(tscss.filterDisabled)[0].disabled=!0}}}}},bindSearch:function(table,$el,internal){table=$(table)[0];$el=$($el);if(!$el.length){return}
var tmp,c=table.config,wo=c.widgetOptions,namespace=c.namespace+'filter',$ext=wo.filter_$externalFilters;if(internal!==!0){tmp=wo.filter_anyColumnSelector+','+wo.filter_multipleColumnSelector;wo.filter_$anyMatch=$el.filter(tmp);if($ext&&$ext.length){wo.filter_$externalFilters=wo.filter_$externalFilters.add($el)}else{wo.filter_$externalFilters=$el}
ts.setFilters(table,c.$table.data('lastSearch')||[],internal===!1)}
tmp=('keypress keyup keydown search change input '.split(' ').join(namespace+' '));$el.attr('data-lastSearchTime',new Date().getTime()).unbind(tmp.replace(ts.regex.spaces,' ')).bind('keydown'+namespace,function(event){if(event.which===tskeyCodes.escape&&!table.config.widgetOptions.filter_resetOnEsc){return!1}}).bind('keyup'+namespace,function(event){wo=table.config.widgetOptions;var column=parseInt($(this).attr('data-column'),10),liveSearch=typeof wo.filter_liveSearch==='boolean'?wo.filter_liveSearch:ts.getColumnData(table,wo.filter_liveSearch,column);if(typeof liveSearch==='undefined'){liveSearch=wo.filter_liveSearch.fallback||!1}
$(this).attr('data-lastSearchTime',new Date().getTime());if(event.which===tskeyCodes.escape){this.value=wo.filter_resetOnEsc?'':c.lastSearch[column]}else if(this.value!==''&&((typeof liveSearch==='number'&&this.value.length<liveSearch)||(event.which!==tskeyCodes.enter&&event.which!==tskeyCodes.backSpace&&(event.which<tskeyCodes.space||(event.which>=tskeyCodes.left&&event.which<=tskeyCodes.down))))){return}else if(liveSearch===!1){if(this.value!==''&&event.which!==tskeyCodes.enter){return}}
tsf.searching(table,!0,!0,column)}).bind('search change keypress input blur '.split(' ').join(namespace+' '),function(event){var column=parseInt($(this).attr('data-column'),10),eventType=event.type,liveSearch=typeof wo.filter_liveSearch==='boolean'?wo.filter_liveSearch:ts.getColumnData(table,wo.filter_liveSearch,column);if(table.config.widgetOptions.filter_initialized&&(event.which===tskeyCodes.enter||(eventType==='search'||eventType==='blur')||(eventType==='change'||eventType==='input')&&(liveSearch===!0||liveSearch!==!0&&event.target.nodeName!=='INPUT')&&this.value!==c.lastSearch[column])){event.preventDefault();$(this).attr('data-lastSearchTime',new Date().getTime());tsf.searching(table,eventType!=='keypress'||event.which===tskeyCodes.enter,!0,column)}})},searching:function(table,filter,skipFirst,column){var liveSearch,wo=table.config.widgetOptions;if(typeof column==='undefined'){liveSearch=!1}else{liveSearch=typeof wo.filter_liveSearch==='boolean'?wo.filter_liveSearch:ts.getColumnData(table,wo.filter_liveSearch,column);if(typeof liveSearch==='undefined'){liveSearch=wo.filter_liveSearch.fallback||!1}}
clearTimeout(wo.filter_searchTimer);if(typeof filter==='undefined'||filter===!0){wo.filter_searchTimer=setTimeout(function(){tsf.checkFilters(table,filter,skipFirst)},liveSearch?wo.filter_searchDelay:10)}else{tsf.checkFilters(table,filter,skipFirst)}},equalFilters:function(c,filter1,filter2){var indx,f1=[],f2=[],len=c.columns+1;filter1=$.isArray(filter1)?filter1:[];filter2=$.isArray(filter2)?filter2:[];for(indx=0;indx<len;indx++){f1[indx]=filter1[indx]||'';f2[indx]=filter2[indx]||''}
return f1.join(',')===f2.join(',')},checkFilters:function(table,filter,skipFirst){var c=table.config,wo=c.widgetOptions,filterArray=$.isArray(filter),filters=(filterArray)?filter:ts.getFilters(table,!0),currentFilters=filters||[];if($.isEmptyObject(c.cache)){if(c.delayInit&&(!c.pager||c.pager&&c.pager.initialized)){ts.updateCache(c,function(){tsf.checkFilters(table,!1,skipFirst)})}
return}
if(filterArray){ts.setFilters(table,filters,!1,skipFirst!==!0);if(!wo.filter_initialized){c.lastSearch=[];c.lastCombinedFilter=''}}
if(wo.filter_hideFilters){c.$table.find('.'+tscss.filterRow).triggerHandler(tsf.hideFiltersCheck(c)?'mouseleave':'mouseenter')}
if(tsf.equalFilters(c,c.lastSearch,currentFilters)){if(filter!==!1){return}else{c.lastCombinedFilter='';c.lastSearch=[]}}
filters=filters||[];filters=Array.prototype.map?filters.map(String):filters.join('\ufffd').split('\ufffd');if(wo.filter_initialized){c.$table.triggerHandler('filterStart',[filters])}
if(c.showProcessing){setTimeout(function(){tsf.findRows(table,filters,currentFilters);return!1},30)}else{tsf.findRows(table,filters,currentFilters);return!1}},hideFiltersCheck:function(c){if(typeof c.widgetOptions.filter_hideFilters==='function'){var val=c.widgetOptions.filter_hideFilters(c);if(typeof val==='boolean'){return val}}
return ts.getFilters(c.$table).join('')===''},hideFilters:function(c,$table){var timer;($table||c.$table).find('.'+tscss.filterRow).addClass(tscss.filterRowHide).bind('mouseenter mouseleave',function(e){var event=e,$row=$(this);clearTimeout(timer);timer=setTimeout(function(){if(/enter|over/.test(event.type)){$row.removeClass(tscss.filterRowHide)}else{if($(document.activeElement).closest('tr')[0]!==$row[0]){$row.toggleClass(tscss.filterRowHide,tsf.hideFiltersCheck(c))}}},200)}).find('input, select').bind('focus blur',function(e){var event=e,$row=$(this).closest('tr');clearTimeout(timer);timer=setTimeout(function(){clearTimeout(timer);$row.toggleClass(tscss.filterRowHide,tsf.hideFiltersCheck(c)&&event.type!=='focus')},200)})},defaultFilter:function(filter,mask){if(filter===''){return filter}
var regex=tsfRegex.iQuery,maskLen=mask.match(tsfRegex.igQuery).length,query=maskLen>1?$.trim(filter).split(/\s/):[$.trim(filter)],len=query.length-1,indx=0,val=mask;if(len<1&&maskLen>1){query[1]=query[0]}
while(regex.test(val)){val=val.replace(regex,query[indx++]||'');if(regex.test(val)&&indx<len&&(query[indx]||'')!==''){val=mask.replace(regex,val)}}
return val},getLatestSearch:function($input){if($input){return $input.sort(function(a,b){return $(b).attr('data-lastSearchTime')-$(a).attr('data-lastSearchTime')})}
return $input||$()},findRange:function(c,val,ignoreRanges){var temp,ranges,range,start,end,singles,i,indx,len,columns=[];if(/^[0-9]+$/.test(val)){return[parseInt(val,10)]}
if(!ignoreRanges&&/-/.test(val)){ranges=val.match(/(\d+)\s*-\s*(\d+)/g);len=ranges?ranges.length:0;for(indx=0;indx<len;indx++){range=ranges[indx].split(/\s*-\s*/);start=parseInt(range[0],10)||0;end=parseInt(range[1],10)||(c.columns-1);if(start>end){temp=start;start=end;end=temp}
if(end>=c.columns){end=c.columns-1}
for(;start<=end;start++){columns[columns.length]=start}
val=val.replace(ranges[indx],'')}}
if(!ignoreRanges&&/,/.test(val)){singles=val.split(/\s*,\s*/);len=singles.length;for(i=0;i<len;i++){if(singles[i]!==''){indx=parseInt(singles[i],10);if(indx<c.columns){columns[columns.length]=indx}}}}
if(!columns.length){for(indx=0;indx<c.columns;indx++){columns[columns.length]=indx}}
return columns},getColumnElm:function(c,$elements,column){return $elements.filter(function(){var cols=tsf.findRange(c,$(this).attr('data-column'));return $.inArray(column,cols)>-1})},multipleColumns:function(c,$input){var wo=c.widgetOptions,targets=wo.filter_initialized||!$input.filter(wo.filter_anyColumnSelector).length,val=$.trim(tsf.getLatestSearch($input).attr('data-column')||'');return tsf.findRange(c,val,!targets)},processTypes:function(c,data,vars){var ffxn,filterMatched=null,matches=null;for(ffxn in tsf.types){if($.inArray(ffxn,vars.excludeMatch)<0&&matches===null){matches=tsf.types[ffxn](c,data,vars);if(matches!==null){data.matchedOn=ffxn;filterMatched=matches}}}
return filterMatched},matchType:function(c,columnIndex){var isMatch,wo=c.widgetOptions,$el=c.$headerIndexed[columnIndex];if($el.hasClass('filter-exact')){isMatch=!1}else if($el.hasClass('filter-match')){isMatch=!0}else{if(wo.filter_columnFilters){$el=c.$filters.find('.'+tscss.filter).add(wo.filter_$externalFilters).filter('[data-column="'+columnIndex+'"]')}else if(wo.filter_$externalFilters){$el=wo.filter_$externalFilters.filter('[data-column="'+columnIndex+'"]')}
isMatch=$el.length?c.widgetOptions.filter_matchType[($el[0].nodeName||'').toLowerCase()]==='match':!1}
return isMatch},processRow:function(c,data,vars){var result,filterMatched,fxn,ffxn,txt,wo=c.widgetOptions,showRow=!0,hasAnyMatchInput=wo.filter_$anyMatch&&wo.filter_$anyMatch.length,columnIndex=wo.filter_$anyMatch&&wo.filter_$anyMatch.length?tsf.multipleColumns(c,wo.filter_$anyMatch):[];data.$cells=data.$row.children();data.matchedOn=null;if(data.anyMatchFlag&&columnIndex.length>1||(data.anyMatchFilter&&!hasAnyMatchInput)){data.anyMatch=!0;data.isMatch=!0;data.rowArray=data.$cells.map(function(i){if($.inArray(i,columnIndex)>-1||(data.anyMatchFilter&&!hasAnyMatchInput)){if(data.parsed[i]){txt=data.cacheArray[i]}else{txt=data.rawArray[i];txt=$.trim(wo.filter_ignoreCase?txt.toLowerCase():txt);if(c.sortLocaleCompare){txt=ts.replaceAccents(txt)}}
return txt}}).get();data.filter=data.anyMatchFilter;data.iFilter=data.iAnyMatchFilter;data.exact=data.rowArray.join(' ');data.iExact=wo.filter_ignoreCase?data.exact.toLowerCase():data.exact;data.cache=data.cacheArray.slice(0,-1).join(' ');vars.excludeMatch=vars.noAnyMatch;filterMatched=tsf.processTypes(c,data,vars);if(filterMatched!==null){showRow=filterMatched}else{if(wo.filter_startsWith){showRow=!1;columnIndex=Math.min(c.columns,data.rowArray.length);while(!showRow&&columnIndex>0){columnIndex--;showRow=showRow||data.rowArray[columnIndex].indexOf(data.iFilter)===0}}else{showRow=(data.iExact+data.childRowText).indexOf(data.iFilter)>=0}}
data.anyMatch=!1;if(data.filters.join('')===data.filter){return showRow}}
for(columnIndex=0;columnIndex<c.columns;columnIndex++){data.filter=data.filters[columnIndex];data.index=columnIndex;vars.excludeMatch=vars.excludeFilter[columnIndex];if(data.filter){data.cache=data.cacheArray[columnIndex];result=data.parsed[columnIndex]?data.cache:data.rawArray[columnIndex]||'';data.exact=c.sortLocaleCompare?ts.replaceAccents(result):result;data.iExact=!tsfRegex.type.test(typeof data.exact)&&wo.filter_ignoreCase?data.exact.toLowerCase():data.exact;data.isMatch=tsf.matchType(c,columnIndex);result=showRow;ffxn=wo.filter_columnFilters?c.$filters.add(wo.filter_$externalFilters).filter('[data-column="'+columnIndex+'"]').find('select option:selected').attr('data-function-name')||'':'';if(c.sortLocaleCompare){data.filter=ts.replaceAccents(data.filter)}
if(wo.filter_defaultFilter&&tsfRegex.iQuery.test(vars.defaultColFilter[columnIndex])){data.filter=tsf.defaultFilter(data.filter,vars.defaultColFilter[columnIndex])}
data.iFilter=wo.filter_ignoreCase?(data.filter||'').toLowerCase():data.filter;fxn=vars.functions[columnIndex];filterMatched=null;if(fxn){if(typeof fxn==='function'){filterMatched=fxn(data.exact,data.cache,data.filter,columnIndex,data.$row,c,data)}else if(typeof fxn[ffxn||data.filter]==='function'){txt=ffxn||data.filter;filterMatched=fxn[txt](data.exact,data.cache,data.filter,columnIndex,data.$row,c,data)}}
if(filterMatched===null){filterMatched=tsf.processTypes(c,data,vars);txt=fxn===!0&&(data.matchedOn==='and'||data.matchedOn==='or');if(filterMatched!==null&&!txt){result=filterMatched}else{if(fxn===!0){result=data.isMatch?(''+data.iExact).search(data.iFilter)>=0:data.filter===data.exact}else{txt=(data.iExact+data.childRowText).indexOf(tsf.parseFilter(c,data.iFilter,data));result=((!wo.filter_startsWith&&txt>=0)||(wo.filter_startsWith&&txt===0))}}}else{result=filterMatched}
showRow=(result)?showRow:!1}}
return showRow},findRows:function(table,filters,currentFilters){if(tsf.equalFilters(table.config,table.config.lastSearch,currentFilters)||!table.config.widgetOptions.filter_initialized){return}
var len,norm_rows,rowData,$rows,$row,rowIndex,tbodyIndex,$tbody,columnIndex,isChild,childRow,lastSearch,showRow,showParent,time,val,indx,notFiltered,searchFiltered,query,injected,res,id,txt,storedFilters=$.extend([],filters),c=table.config,wo=c.widgetOptions,debug=ts.debug(c,'filter'),data={anyMatch:!1,filters:filters,filter_regexCache:[]},vars={noAnyMatch:['range','operators'],functions:[],excludeFilter:[],defaultColFilter:[],defaultAnyFilter:ts.getColumnData(table,wo.filter_defaultFilter,c.columns,!0)||''};data.parsed=[];for(columnIndex=0;columnIndex<c.columns;columnIndex++){data.parsed[columnIndex]=wo.filter_useParsedData||(c.parsers&&c.parsers[columnIndex]&&c.parsers[columnIndex].parsed||ts.getData&&ts.getData(c.$headerIndexed[columnIndex],ts.getColumnData(table,c.headers,columnIndex),'filter')==='parsed'||c.$headerIndexed[columnIndex].hasClass('filter-parsed'));vars.functions[columnIndex]=ts.getColumnData(table,wo.filter_functions,columnIndex)||c.$headerIndexed[columnIndex].hasClass('filter-select');vars.defaultColFilter[columnIndex]=ts.getColumnData(table,wo.filter_defaultFilter,columnIndex)||'';vars.excludeFilter[columnIndex]=(ts.getColumnData(table,wo.filter_excludeFilter,columnIndex,!0)||'').split(/\s+/)}
if(debug){console.log('Filter >> Starting filter widget search',filters);time=new Date()}
c.filteredRows=0;c.totalRows=0;currentFilters=(storedFilters||[]);for(tbodyIndex=0;tbodyIndex<c.$tbodies.length;tbodyIndex++){$tbody=ts.processTbody(table,c.$tbodies.eq(tbodyIndex),!0);columnIndex=c.columns;norm_rows=c.cache[tbodyIndex].normalized;$rows=$($.map(norm_rows,function(el){return el[columnIndex].$row.get()}));if(currentFilters.join('')===''||wo.filter_serversideFiltering){$rows.removeClass(wo.filter_filteredRow).not('.'+c.cssChildRow).css('display','')}else{$rows=$rows.not('.'+c.cssChildRow);len=$rows.length;if((wo.filter_$anyMatch&&wo.filter_$anyMatch.length)||typeof filters[c.columns]!=='undefined'){data.anyMatchFlag=!0;data.anyMatchFilter=''+(filters[c.columns]||wo.filter_$anyMatch&&tsf.getLatestSearch(wo.filter_$anyMatch).val()||'');if(wo.filter_columnAnyMatch){query=data.anyMatchFilter.split(tsfRegex.andSplit);injected=!1;for(indx=0;indx<query.length;indx++){res=query[indx].split(':');if(res.length>1){if(isNaN(res[0])){$.each(c.headerContent,function(i,txt){if(txt.toLowerCase().indexOf(res[0])>-1){id=i;filters[id]=res[1]}})}else{id=parseInt(res[0],10)-1}
if(id>=0&&id<c.columns){filters[id]=res[1];query.splice(indx,1);indx--;injected=!0}}}
if(injected){data.anyMatchFilter=query.join(' && ')}}}
searchFiltered=wo.filter_searchFiltered;lastSearch=c.lastSearch||c.$table.data('lastSearch')||[];if(searchFiltered){for(indx=0;indx<columnIndex+1;indx++){val=filters[indx]||'';if(!searchFiltered){indx=columnIndex}
searchFiltered=searchFiltered&&lastSearch.length&&val.indexOf(lastSearch[indx]||'')===0&&!tsfRegex.alreadyFiltered.test(val)&&!tsfRegex.exactTest.test(val)&&!(tsfRegex.isNeg1.test(val)||tsfRegex.isNeg2.test(val))&&!(val!==''&&c.$filters&&c.$filters.filter('[data-column="'+indx+'"]').find('select').length&&!tsf.matchType(c,indx))}}
notFiltered=$rows.not('.'+wo.filter_filteredRow).length;if(searchFiltered&&notFiltered===0){searchFiltered=!1}
if(debug){console.log('Filter >> Searching through '+(searchFiltered&&notFiltered<len?notFiltered:'all')+' rows')}
if(data.anyMatchFlag){if(c.sortLocaleCompare){data.anyMatchFilter=ts.replaceAccents(data.anyMatchFilter)}
if(wo.filter_defaultFilter&&tsfRegex.iQuery.test(vars.defaultAnyFilter)){data.anyMatchFilter=tsf.defaultFilter(data.anyMatchFilter,vars.defaultAnyFilter);searchFiltered=!1}
data.iAnyMatchFilter=!(wo.filter_ignoreCase&&c.ignoreCase)?data.anyMatchFilter:data.anyMatchFilter.toLowerCase()}
for(rowIndex=0;rowIndex<len;rowIndex++){txt=$rows[rowIndex].className;isChild=rowIndex&&tsfRegex.child.test(txt);if(isChild||(searchFiltered&&tsfRegex.filtered.test(txt))){continue}
data.$row=$rows.eq(rowIndex);data.rowIndex=rowIndex;data.cacheArray=norm_rows[rowIndex];rowData=data.cacheArray[c.columns];data.rawArray=rowData.raw;data.childRowText='';if(!wo.filter_childByColumn){txt='';childRow=rowData.child;for(indx=0;indx<childRow.length;indx++){txt+=' '+childRow[indx].join(' ')||''}
data.childRowText=wo.filter_childRows?(wo.filter_ignoreCase?txt.toLowerCase():txt):''}
showRow=!1;showParent=tsf.processRow(c,data,vars);$row=rowData.$row;val=showParent?!0:!1;childRow=rowData.$row.filter(':gt(0)');if(wo.filter_childRows&&childRow.length){if(wo.filter_childByColumn){if(!wo.filter_childWithSibs){childRow.addClass(wo.filter_filteredRow);$row=$row.eq(0)}
for(indx=0;indx<childRow.length;indx++){data.$row=childRow.eq(indx);data.cacheArray=rowData.child[indx];data.rawArray=data.cacheArray;val=tsf.processRow(c,data,vars);showRow=showRow||val;if(!wo.filter_childWithSibs&&val){childRow.eq(indx).removeClass(wo.filter_filteredRow)}}}
showRow=showRow||showParent}else{showRow=val}
$row.toggleClass(wo.filter_filteredRow,!showRow)[0].display=showRow?'':'none'}}
c.filteredRows+=$rows.not('.'+wo.filter_filteredRow).length;c.totalRows+=$rows.length;ts.processTbody(table,$tbody,!1)}
c.lastCombinedFilter=storedFilters.join('');c.lastSearch=storedFilters;c.$table.data('lastSearch',storedFilters);if(wo.filter_saveFilters&&ts.storage){ts.storage(table,'tablesorter-filters',tsf.processFilters(storedFilters,!0))}
if(debug){console.log('Filter >> Completed search'+ts.benchmark(time))}
if(wo.filter_initialized){c.$table.triggerHandler('filterBeforeEnd',c);c.$table.triggerHandler('filterEnd',c)}
setTimeout(function(){ts.applyWidget(c.table)},0)},getOptionSource:function(table,column,onlyAvail){table=$(table)[0];var c=table.config,wo=c.widgetOptions,arry=!1,source=wo.filter_selectSource,last=c.$table.data('lastSearch')||[],fxn=typeof source==='function'?!0:ts.getColumnData(table,source,column);if(onlyAvail&&last[column]!==''){onlyAvail=!1}
if(fxn===!0){arry=source(table,column,onlyAvail)}else if(fxn instanceof $||($.type(fxn)==='string'&&fxn.indexOf('</option>')>=0)){return fxn}else if($.isArray(fxn)){arry=fxn}else if($.type(source)==='object'&&fxn){arry=fxn(table,column,onlyAvail);if(arry===null){return null}}
if(arry===!1){arry=tsf.getOptions(table,column,onlyAvail)}
return tsf.processOptions(table,column,arry)},processOptions:function(table,column,arry){if(!$.isArray(arry)){return!1}
table=$(table)[0];var cts,txt,indx,len,parsedTxt,str,c=table.config,validColumn=typeof column!=='undefined'&&column!==null&&column>=0&&column<c.columns,direction=validColumn?c.$headerIndexed[column].hasClass('filter-select-sort-desc'):!1,parsed=[];arry=$.grep(arry,function(value,indx){if(value.text){return!0}
return $.inArray(value,arry)===indx});if(validColumn&&c.$headerIndexed[column].hasClass('filter-select-nosort')){return arry}else{len=arry.length;for(indx=0;indx<len;indx++){txt=arry[indx];str=txt.text?txt.text:txt;parsedTxt=(validColumn&&c.parsers&&c.parsers.length&&c.parsers[column].format(str,table,[],column)||str).toString();parsedTxt=c.widgetOptions.filter_ignoreCase?parsedTxt.toLowerCase():parsedTxt;if(txt.text){txt.parsed=parsedTxt;parsed[parsed.length]=txt}else{parsed[parsed.length]={text:txt,parsed:parsedTxt}}}
cts=c.textSorter||'';parsed.sort(function(a,b){var x=direction?b.parsed:a.parsed,y=direction?a.parsed:b.parsed;if(validColumn&&typeof cts==='function'){return cts(x,y,!0,column,table)}else if(validColumn&&typeof cts==='object'&&cts.hasOwnProperty(column)){return cts[column](x,y,!0,column,table)}else if(ts.sortNatural){return ts.sortNatural(x,y)}
return!0});arry=[];len=parsed.length;for(indx=0;indx<len;indx++){arry[arry.length]=parsed[indx]}
return arry}},getOptions:function(table,column,onlyAvail){table=$(table)[0];var rowIndex,tbodyIndex,len,row,cache,indx,child,childLen,c=table.config,wo=c.widgetOptions,arry=[];for(tbodyIndex=0;tbodyIndex<c.$tbodies.length;tbodyIndex++){cache=c.cache[tbodyIndex];len=c.cache[tbodyIndex].normalized.length;for(rowIndex=0;rowIndex<len;rowIndex++){row=cache.row?cache.row[rowIndex]:cache.normalized[rowIndex][c.columns].$row[0];if(onlyAvail&&row.className.match(wo.filter_filteredRow)){continue}
if(wo.filter_useParsedData||c.parsers[column].parsed||c.$headerIndexed[column].hasClass('filter-parsed')){arry[arry.length]=''+cache.normalized[rowIndex][column];if(wo.filter_childRows&&wo.filter_childByColumn){childLen=cache.normalized[rowIndex][c.columns].$row.length-1;for(indx=0;indx<childLen;indx++){arry[arry.length]=''+cache.normalized[rowIndex][c.columns].child[indx][column]}}}else{arry[arry.length]=cache.normalized[rowIndex][c.columns].raw[column];if(wo.filter_childRows&&wo.filter_childByColumn){childLen=cache.normalized[rowIndex][c.columns].$row.length;for(indx=1;indx<childLen;indx++){child=cache.normalized[rowIndex][c.columns].$row.eq(indx).children().eq(column);arry[arry.length]=''+ts.getElementText(c,child,column)}}}}}
return arry},buildSelect:function(table,column,arry,updating,onlyAvail){table=$(table)[0];column=parseInt(column,10);if(!table.config.cache||$.isEmptyObject(table.config.cache)){return}
var indx,val,txt,t,$filters,$filter,option,c=table.config,wo=c.widgetOptions,node=c.$headerIndexed[column],options='<option value="">'+(node.data('placeholder')||node.attr('data-placeholder')||wo.filter_placeholder.select||'')+'</option>',currentValue=c.$table.find('thead').find('select.'+tscss.filter+'[data-column="'+column+'"]').val();if(typeof arry==='undefined'||arry===''){arry=tsf.getOptionSource(table,column,onlyAvail);if(arry===null){return}}
if($.isArray(arry)){for(indx=0;indx<arry.length;indx++){option=arry[indx];if(option.text){option['data-function-name']=typeof option.value==='undefined'?option.text:option.value;options+='<option';for(val in option){if(option.hasOwnProperty(val)&&val!=='text'){options+=' '+val+'="'+option[val].replace(tsfRegex.quote,'&quot;')+'"'}}
if(!option.value){options+=' value="'+option.text.replace(tsfRegex.quote,'&quot;')+'"'}
options+='>'+option.text.replace(tsfRegex.quote,'&quot;')+'</option>'}else if(''+option!=='[object Object]'){txt=option=(''+option).replace(tsfRegex.quote,'&quot;');val=txt;if(txt.indexOf(wo.filter_selectSourceSeparator)>=0){t=txt.split(wo.filter_selectSourceSeparator);val=t[0];txt=t[1]}
options+=option!==''?'<option '+(val===txt?'':'data-function-name="'+option+'" ')+'value="'+val+'">'+txt+'</option>':''}}
arry=[]}
$filters=(c.$filters?c.$filters:c.$table.children('thead')).find('.'+tscss.filter);if(wo.filter_$externalFilters){$filters=$filters&&$filters.length?$filters.add(wo.filter_$externalFilters):wo.filter_$externalFilters}
$filter=$filters.filter('select[data-column="'+column+'"]');if($filter.length){$filter[updating?'html':'append'](options);if(!$.isArray(arry)){$filter.append(arry).val(currentValue)}
$filter.val(currentValue)}},buildDefault:function(table,updating){var columnIndex,$header,noSelect,c=table.config,wo=c.widgetOptions,columns=c.columns;for(columnIndex=0;columnIndex<columns;columnIndex++){$header=c.$headerIndexed[columnIndex];noSelect=!($header.hasClass('filter-false')||$header.hasClass('parser-false'));if(($header.hasClass('filter-select')||ts.getColumnData(table,wo.filter_functions,columnIndex)===!0)&&noSelect){tsf.buildSelect(table,columnIndex,'',updating,$header.hasClass(wo.filter_onlyAvail))}}}};tsfRegex=tsf.regex;ts.getFilters=function(table,getRaw,setFilters,skipFirst){var i,$filters,$column,cols,filters=[],c=table?$(table)[0].config:'',wo=c?c.widgetOptions:'';if((getRaw!==!0&&wo&&!wo.filter_columnFilters)||($.isArray(setFilters)&&tsf.equalFilters(c,setFilters,c.lastSearch))){return $(table).data('lastSearch')||[]}
if(c){if(c.$filters){$filters=c.$filters.find('.'+tscss.filter)}
if(wo.filter_$externalFilters){$filters=$filters&&$filters.length?$filters.add(wo.filter_$externalFilters):wo.filter_$externalFilters}
if($filters&&$filters.length){filters=setFilters||[];for(i=0;i<c.columns+1;i++){cols=(i===c.columns?wo.filter_anyColumnSelector+','+wo.filter_multipleColumnSelector:'[data-column="'+i+'"]');$column=$filters.filter(cols);if($column.length){$column=tsf.getLatestSearch($column);if($.isArray(setFilters)){if(skipFirst&&$column.length>1){$column=$column.slice(1)}
if(i===c.columns){cols=$column.filter(wo.filter_anyColumnSelector);$column=cols.length?cols:$column}
$column.val(setFilters[i]).trigger('change'+c.namespace)}else{filters[i]=$column.val()||'';if(i===c.columns){$column.slice(1).filter('[data-column*="'+$column.attr('data-column')+'"]').val(filters[i])}else{$column.slice(1).val(filters[i])}}
if(i===c.columns&&$column.length){wo.filter_$anyMatch=$column}}}}}
return filters};ts.setFilters=function(table,filter,apply,skipFirst){var c=table?$(table)[0].config:'',valid=ts.getFilters(table,!0,filter,skipFirst);if(typeof apply==='undefined'){apply=!0}
if(c&&apply){c.lastCombinedFilter=null;c.lastSearch=[];tsf.searching(c.table,filter,skipFirst);c.$table.triggerHandler('filterFomatterUpdate')}
return valid.length!==0}})(jQuery);(function($,window){'use strict';var ts=$.tablesorter||{};$.extend(ts.css,{sticky:'tablesorter-stickyHeader',stickyVis:'tablesorter-sticky-visible',stickyHide:'tablesorter-sticky-hidden',stickyWrap:'tablesorter-sticky-wrapper'});ts.addHeaderResizeEvent=function(table,disable,settings){table=$(table)[0];if(!table.config){return}
var defaults={timer:250},options=$.extend({},defaults,settings),c=table.config,wo=c.widgetOptions,checkSizes=function(triggerEvent){var index,headers,$header,sizes,width,height,len=c.$headers.length;wo.resize_flag=!0;headers=[];for(index=0;index<len;index++){$header=c.$headers.eq(index);sizes=$header.data('savedSizes')||[0,0];width=$header[0].offsetWidth;height=$header[0].offsetHeight;if(width!==sizes[0]||height!==sizes[1]){$header.data('savedSizes',[width,height]);headers.push($header[0])}}
if(headers.length&&triggerEvent!==!1){c.$table.triggerHandler('resize',[headers])}
wo.resize_flag=!1};clearInterval(wo.resize_timer);if(disable){wo.resize_flag=!1;return!1}
checkSizes(!1);wo.resize_timer=setInterval(function(){if(wo.resize_flag){return}
checkSizes()},options.timer)};function getStickyOffset(c,wo){var $el=isNaN(wo.stickyHeaders_offset)?$(wo.stickyHeaders_offset):[];return $el.length?$el.height()||0:parseInt(wo.stickyHeaders_offset,10)||0}
ts.addWidget({id:'stickyHeaders',priority:54,options:{stickyHeaders:'',stickyHeaders_appendTo:null,stickyHeaders_attachTo:null,stickyHeaders_xScroll:null,stickyHeaders_yScroll:null,stickyHeaders_offset:0,stickyHeaders_filteredToTop:!0,stickyHeaders_cloneId:'-sticky',stickyHeaders_addResizeEvent:!0,stickyHeaders_includeCaption:!0,stickyHeaders_zIndex:2},format:function(table,c,wo){if(c.$table.hasClass('hasStickyHeaders')||($.inArray('filter',c.widgets)>=0&&!c.$table.hasClass('hasFilters'))){return}
var index,len,$t,$table=c.$table,$attach=$(wo.stickyHeaders_attachTo||wo.stickyHeaders_appendTo),namespace=c.namespace+'stickyheaders ',$yScroll=$(wo.stickyHeaders_yScroll||wo.stickyHeaders_attachTo||window),$xScroll=$(wo.stickyHeaders_xScroll||wo.stickyHeaders_attachTo||window),$thead=$table.children('thead:first'),$header=$thead.children('tr').not('.sticky-false').children(),$tfoot=$table.children('tfoot'),stickyOffset=getStickyOffset(c,wo),$nestedSticky=$table.parent().closest('.'+ts.css.table).hasClass('hasStickyHeaders')?$table.parent().closest('table.tablesorter')[0].config.widgetOptions.$sticky.parent():[],nestedStickyTop=$nestedSticky.length?$nestedSticky.height():0,$stickyTable=wo.$sticky=$table.clone().addClass('containsStickyHeaders '+ts.css.sticky+' '+wo.stickyHeaders+' '+c.namespace.slice(1)+'_extra_table').wrap('<div class="'+ts.css.stickyWrap+'">'),$stickyWrap=$stickyTable.parent().addClass(ts.css.stickyHide).css({position:$attach.length?'absolute':'fixed',padding:parseInt($stickyTable.parent().parent().css('padding-left'),10),top:stickyOffset+nestedStickyTop,left:0,visibility:'hidden',zIndex:wo.stickyHeaders_zIndex||2}),$stickyThead=$stickyTable.children('thead:first'),$stickyCells,laststate='',setWidth=function($orig,$clone){var index,width,border,$cell,$this,$cells=$orig.filter(':visible'),len=$cells.length;for(index=0;index<len;index++){$cell=$clone.filter(':visible').eq(index);$this=$cells.eq(index);if($this.css('box-sizing')==='border-box'){width=$this.outerWidth()}else{if($cell.css('border-collapse')==='collapse'){if(window.getComputedStyle){width=parseFloat(window.getComputedStyle($this[0],null).width)}else{border=parseFloat($this.css('border-width'));width=$this.outerWidth()-parseFloat($this.css('padding-left'))-parseFloat($this.css('padding-right'))-border}}else{width=$this.width()}}
$cell.css({'width':width,'min-width':width,'max-width':width})}},getLeftPosition=function(yWindow){if(yWindow===!1&&$nestedSticky.length){return $table.position().left}
return $attach.length?parseInt($attach.css('padding-left'),10)||0:$table.offset().left-parseInt($table.css('margin-left'),10)-$(window).scrollLeft()},resizeHeader=function(){$stickyWrap.css({left:getLeftPosition(),width:$table.outerWidth()});setWidth($table,$stickyTable);setWidth($header,$stickyCells)},scrollSticky=function(resizing){if(!$table.is(':visible')){return}
nestedStickyTop=$nestedSticky.length?$nestedSticky.offset().top-$yScroll.scrollTop()+$nestedSticky.height():0;var tmp,offset=$table.offset(),stickyOffset=getStickyOffset(c,wo),yWindow=$.isWindow($yScroll[0]),yScroll=yWindow?$yScroll.scrollTop():$nestedSticky.length?parseInt($nestedSticky[0].style.top,10):$yScroll.offset().top,attachTop=$attach.length?yScroll:$yScroll.scrollTop(),captionHeight=wo.stickyHeaders_includeCaption?0:$table.children('caption').height()||0,scrollTop=attachTop+stickyOffset+nestedStickyTop-captionHeight,tableHeight=$table.height()-($stickyWrap.height()+($tfoot.height()||0))-captionHeight,isVisible=(scrollTop>offset.top)&&(scrollTop<offset.top+tableHeight)?'visible':'hidden',state=isVisible==='visible'?ts.css.stickyVis:ts.css.stickyHide,needsUpdating=!$stickyWrap.hasClass(state),cssSettings={visibility:isVisible};if($attach.length){needsUpdating=!0;cssSettings.top=yWindow?scrollTop-$attach.offset().top:$attach.scrollTop()}
tmp=getLeftPosition(yWindow);if(tmp!==parseInt($stickyWrap.css('left'),10)){needsUpdating=!0;cssSettings.left=tmp}
cssSettings.top=(cssSettings.top||0)+(!yWindow&&$nestedSticky.length?$nestedSticky.height():stickyOffset+nestedStickyTop);if(needsUpdating){$stickyWrap.removeClass(ts.css.stickyVis+' '+ts.css.stickyHide).addClass(state).css(cssSettings)}
if(isVisible!==laststate||resizing){resizeHeader();laststate=isVisible}};if($attach.length&&!$attach.css('position')){$attach.css('position','relative')}
if($stickyTable.attr('id')){$stickyTable[0].id+=wo.stickyHeaders_cloneId}
$stickyTable.find('> thead:gt(0), tr.sticky-false').hide();$stickyTable.find('> tbody, > tfoot').remove();$stickyTable.find('caption').toggle(wo.stickyHeaders_includeCaption);$stickyCells=$stickyThead.children().children();$stickyTable.css({height:0,width:0,margin:0});$stickyCells.find('.'+ts.css.resizer).remove();$table.addClass('hasStickyHeaders').bind('pagerComplete'+namespace,function(){resizeHeader()});ts.bindEvents(table,$stickyThead.children().children('.'+ts.css.header));if(wo.stickyHeaders_appendTo){$(wo.stickyHeaders_appendTo).append($stickyWrap)}else{$table.after($stickyWrap)}
if(c.onRenderHeader){$t=$stickyThead.children('tr').children();len=$t.length;for(index=0;index<len;index++){c.onRenderHeader.apply($t.eq(index),[index,c,$stickyTable])}}
$xScroll.add($yScroll).unbind(('scroll resize '.split(' ').join(namespace)).replace(/\s+/g,' ')).bind('scroll resize '.split(' ').join(namespace),function(event){scrollSticky(event.type==='resize')});c.$table.unbind('stickyHeadersUpdate'+namespace).bind('stickyHeadersUpdate'+namespace,function(){scrollSticky(!0)});if(wo.stickyHeaders_addResizeEvent){ts.addHeaderResizeEvent(table)}
if($table.hasClass('hasFilters')&&wo.filter_columnFilters){$table.bind('filterEnd'+namespace,function(){var $td=$(document.activeElement).closest('td'),column=$td.parent().children().index($td);if($stickyWrap.hasClass(ts.css.stickyVis)&&wo.stickyHeaders_filteredToTop){window.scrollTo(0,$table.position().top);if(column>=0&&c.$filters){c.$filters.eq(column).find('a, select, input').filter(':visible').focus()}}});ts.filter.bindSearch($table,$stickyCells.find('.'+ts.css.filter));if(wo.filter_hideFilters){ts.filter.hideFilters(c,$stickyTable)}}
if(wo.stickyHeaders_addResizeEvent){$table.bind('resize'+c.namespace+'stickyheaders',function(){resizeHeader()})}
scrollSticky(!0);$table.triggerHandler('stickyHeadersInit')},remove:function(table,c,wo){var namespace=c.namespace+'stickyheaders ';c.$table.removeClass('hasStickyHeaders').unbind(('pagerComplete resize filterEnd stickyHeadersUpdate '.split(' ').join(namespace)).replace(/\s+/g,' ')).next('.'+ts.css.stickyWrap).remove();if(wo.$sticky&&wo.$sticky.length){wo.$sticky.remove()}
$(window).add(wo.stickyHeaders_xScroll).add(wo.stickyHeaders_yScroll).add(wo.stickyHeaders_attachTo).unbind(('scroll resize '.split(' ').join(namespace)).replace(/\s+/g,' '));ts.addHeaderResizeEvent(table,!0)}})})(jQuery,window);(function($,window){'use strict';var ts=$.tablesorter||{};$.extend(ts.css,{resizableContainer:'tablesorter-resizable-container',resizableHandle:'tablesorter-resizable-handle',resizableNoSelect:'tablesorter-disableSelection',resizableStorage:'tablesorter-resizable'});$(function(){var s='<style>'+'body.'+ts.css.resizableNoSelect+' { -ms-user-select: none; -moz-user-select: -moz-none;'+'-khtml-user-select: none; -webkit-user-select: none; user-select: none; }'+'.'+ts.css.resizableContainer+' { position: relative; height: 1px; }'+'.'+ts.css.resizableHandle+' { position: absolute; display: inline-block; width: 8px;'+'top: 1px; cursor: ew-resize; z-index: 3; user-select: none; -moz-user-select: none; }'+'</style>';$('head').append(s)});ts.resizable={init:function(c,wo){if(c.$table.hasClass('hasResizable')){return}
c.$table.addClass('hasResizable');var noResize,$header,column,storedSizes,tmp,$table=c.$table,$parent=$table.parent(),marginTop=parseInt($table.css('margin-top'),10),vars=wo.resizable_vars={useStorage:ts.storage&&wo.resizable!==!1,$wrap:$parent,mouseXPosition:0,$target:null,$next:null,overflow:$parent.css('overflow')==='auto'||$parent.css('overflow')==='scroll'||$parent.css('overflow-x')==='auto'||$parent.css('overflow-x')==='scroll',storedSizes:[]};ts.resizableReset(c.table,!0);vars.tableWidth=$table.width();vars.fullWidth=Math.abs($parent.width()-vars.tableWidth)<20;if(vars.useStorage&&vars.overflow){ts.storage(c.table,'tablesorter-table-original-css-width',vars.tableWidth);tmp=ts.storage(c.table,'tablesorter-table-resized-width')||'auto';ts.resizable.setWidth($table,tmp,!0)}
wo.resizable_vars.storedSizes=storedSizes=(vars.useStorage?ts.storage(c.table,ts.css.resizableStorage):[])||[];ts.resizable.setWidths(c,wo,storedSizes);ts.resizable.updateStoredSizes(c,wo);wo.$resizable_container=$('<div class="'+ts.css.resizableContainer+'">').css({top:marginTop}).insertBefore($table);for(column=0;column<c.columns;column++){$header=c.$headerIndexed[column];tmp=ts.getColumnData(c.table,c.headers,column);noResize=ts.getData($header,tmp,'resizable')==='false';if(!noResize){$('<div class="'+ts.css.resizableHandle+'">').appendTo(wo.$resizable_container).attr({'data-column':column,'unselectable':'on'}).data('header',$header).bind('selectstart',!1)}}
ts.resizable.bindings(c,wo)},updateStoredSizes:function(c,wo){var column,$header,len=c.columns,vars=wo.resizable_vars;vars.storedSizes=[];for(column=0;column<len;column++){$header=c.$headerIndexed[column];vars.storedSizes[column]=$header.is(':visible')?$header.width():0}},setWidth:function($el,width,overflow){$el.css({'width':width,'min-width':overflow?width:'','max-width':overflow?width:''})},setWidths:function(c,wo,storedSizes){var column,$temp,vars=wo.resizable_vars,$extra=$(c.namespace+'_extra_headers'),$col=c.$table.children('colgroup').children('col');storedSizes=storedSizes||vars.storedSizes||[];if(storedSizes.length){for(column=0;column<c.columns;column++){ts.resizable.setWidth(c.$headerIndexed[column],storedSizes[column],vars.overflow);if($extra.length){$temp=$extra.eq(column).add($col.eq(column));ts.resizable.setWidth($temp,storedSizes[column],vars.overflow)}}
$temp=$(c.namespace+'_extra_table');if($temp.length&&!ts.hasWidget(c.table,'scroller')){ts.resizable.setWidth($temp,c.$table.outerWidth(),vars.overflow)}}},setHandlePosition:function(c,wo){var startPosition,tableHeight=c.$table.height(),$handles=wo.$resizable_container.children(),handleCenter=Math.floor($handles.width()/2);if(ts.hasWidget(c.table,'scroller')){tableHeight=0;c.$table.closest('.'+ts.css.scrollerWrap).children().each(function(){var $this=$(this);tableHeight+=$this.filter('[style*="height"]').length?$this.height():$this.children('table').height()})}
if(!wo.resizable_includeFooter&&c.$table.children('tfoot').length){tableHeight-=c.$table.children('tfoot').height()}
startPosition=parseFloat($.fn.jquery)>=3.3?0:c.$table.position().left;$handles.each(function(){var $this=$(this),column=parseInt($this.attr('data-column'),10),columns=c.columns-1,$header=$this.data('header');if(!$header){return}
if(!$header.is(':visible')||(!wo.resizable_addLastColumn&&ts.resizable.checkVisibleColumns(c,column))){$this.hide()}else if(column<columns||column===columns&&wo.resizable_addLastColumn){$this.css({display:'inline-block',height:tableHeight,left:$header.position().left-startPosition+$header.outerWidth()-handleCenter})}})},checkVisibleColumns:function(c,column){var i,len=0;for(i=column+1;i<c.columns;i++){len+=c.$headerIndexed[i].is(':visible')?1:0}
return len===0},toggleTextSelection:function(c,wo,toggle){var namespace=c.namespace+'tsresize';wo.resizable_vars.disabled=toggle;$('body').toggleClass(ts.css.resizableNoSelect,toggle);if(toggle){$('body').attr('unselectable','on').bind('selectstart'+namespace,!1)}else{$('body').removeAttr('unselectable').unbind('selectstart'+namespace)}},bindings:function(c,wo){var namespace=c.namespace+'tsresize';wo.$resizable_container.children().bind('mousedown',function(event){var column,vars=wo.resizable_vars,$extras=$(c.namespace+'_extra_headers'),$header=$(event.target).data('header');column=parseInt($header.attr('data-column'),10);vars.$target=$header=$header.add($extras.filter('[data-column="'+column+'"]'));vars.target=column;vars.$next=event.shiftKey||wo.resizable_targetLast?$header.parent().children().not('.resizable-false').filter(':last'):$header.nextAll(':not(.resizable-false)').eq(0);column=parseInt(vars.$next.attr('data-column'),10);vars.$next=vars.$next.add($extras.filter('[data-column="'+column+'"]'));vars.next=column;vars.mouseXPosition=event.pageX;ts.resizable.updateStoredSizes(c,wo);ts.resizable.toggleTextSelection(c,wo,!0)});$(document).bind('mousemove'+namespace,function(event){var vars=wo.resizable_vars;if(!vars.disabled||vars.mouseXPosition===0||!vars.$target){return}
if(wo.resizable_throttle){clearTimeout(vars.timer);vars.timer=setTimeout(function(){ts.resizable.mouseMove(c,wo,event)},isNaN(wo.resizable_throttle)?5:wo.resizable_throttle)}else{ts.resizable.mouseMove(c,wo,event)}}).bind('mouseup'+namespace,function(){if(!wo.resizable_vars.disabled){return}
ts.resizable.toggleTextSelection(c,wo,!1);ts.resizable.stopResize(c,wo);ts.resizable.setHandlePosition(c,wo)});$(window).bind('resize'+namespace+' resizeEnd'+namespace,function(){ts.resizable.setHandlePosition(c,wo)});c.$table.bind('columnUpdate pagerComplete resizableUpdate '.split(' ').join(namespace+' '),function(){ts.resizable.setHandlePosition(c,wo)}).bind('resizableReset'+namespace,function(){ts.resizableReset(c.table)}).find('thead:first').add($(c.namespace+'_extra_table').find('thead:first')).bind('contextmenu'+namespace,function(){var allowClick=wo.resizable_vars.storedSizes.length===0;ts.resizableReset(c.table);ts.resizable.setHandlePosition(c,wo);wo.resizable_vars.storedSizes=[];return allowClick})},mouseMove:function(c,wo,event){if(wo.resizable_vars.mouseXPosition===0||!wo.resizable_vars.$target){return}
var column,total=0,vars=wo.resizable_vars,$next=vars.$next,tar=vars.storedSizes[vars.target],leftEdge=event.pageX-vars.mouseXPosition;if(vars.overflow){if(tar+leftEdge>0){vars.storedSizes[vars.target]+=leftEdge;ts.resizable.setWidth(vars.$target,vars.storedSizes[vars.target],!0);for(column=0;column<c.columns;column++){total+=vars.storedSizes[column]}
ts.resizable.setWidth(c.$table.add($(c.namespace+'_extra_table')),total)}
if(!$next.length){vars.$wrap[0].scrollLeft=c.$table.width()}}else if(vars.fullWidth){vars.storedSizes[vars.target]+=leftEdge;vars.storedSizes[vars.next]-=leftEdge;ts.resizable.setWidths(c,wo)}else{vars.storedSizes[vars.target]+=leftEdge;ts.resizable.setWidths(c,wo)}
vars.mouseXPosition=event.pageX;c.$table.triggerHandler('stickyHeadersUpdate')},stopResize:function(c,wo){var vars=wo.resizable_vars;ts.resizable.updateStoredSizes(c,wo);if(vars.useStorage){ts.storage(c.table,ts.css.resizableStorage,vars.storedSizes);ts.storage(c.table,'tablesorter-table-resized-width',c.$table.width())}
vars.mouseXPosition=0;vars.$target=vars.$next=null;c.$table.triggerHandler('stickyHeadersUpdate');c.$table.triggerHandler('resizableComplete')}};ts.addWidget({id:'resizable',priority:40,options:{resizable:!0,resizable_addLastColumn:!1,resizable_includeFooter:!0,resizable_widths:[],resizable_throttle:!1,resizable_targetLast:!1},init:function(table,thisWidget,c,wo){ts.resizable.init(c,wo)},format:function(table,c,wo){ts.resizable.setHandlePosition(c,wo)},remove:function(table,c,wo,refreshing){if(wo.$resizable_container){var namespace=c.namespace+'tsresize';c.$table.add($(c.namespace+'_extra_table')).removeClass('hasResizable').children('thead').unbind('contextmenu'+namespace);wo.$resizable_container.remove();ts.resizable.toggleTextSelection(c,wo,!1);ts.resizableReset(table,refreshing);$(document).unbind('mousemove'+namespace+' mouseup'+namespace)}}});ts.resizableReset=function(table,refreshing){$(table).each(function(){var index,$t,c=this.config,wo=c&&c.widgetOptions,vars=wo.resizable_vars;if(table&&c&&c.$headerIndexed.length){if(vars.overflow&&vars.tableWidth){ts.resizable.setWidth(c.$table,vars.tableWidth,!0);if(vars.useStorage){ts.storage(table,'tablesorter-table-resized-width',vars.tableWidth)}}
for(index=0;index<c.columns;index++){$t=c.$headerIndexed[index];if(wo.resizable_widths&&wo.resizable_widths[index]){ts.resizable.setWidth($t,wo.resizable_widths[index],vars.overflow)}else if(!$t.hasClass('resizable-false')){ts.resizable.setWidth($t,'',vars.overflow)}}
c.$table.triggerHandler('stickyHeadersUpdate');if(ts.storage&&!refreshing){ts.storage(this,ts.css.resizableStorage,[])}}})}})(jQuery,window);(function($){'use strict';var ts=$.tablesorter||{};function getStoredSortList(c){var stored=ts.storage(c.table,'tablesorter-savesort');return(stored&&stored.hasOwnProperty('sortList')&&$.isArray(stored.sortList))?stored.sortList:[]}
function sortListChanged(c,sortList){return(sortList||getStoredSortList(c)).join(',')!==c.sortList.join(',')}
ts.addWidget({id:'saveSort',priority:20,options:{saveSort:!0},init:function(table,thisWidget,c,wo){thisWidget.format(table,c,wo,!0)},format:function(table,c,wo,init){var time,$table=c.$table,saveSort=wo.saveSort!==!1,sortList={'sortList':c.sortList},debug=ts.debug(c,'saveSort');if(debug){time=new Date()}
if($table.hasClass('hasSaveSort')){if(saveSort&&table.hasInitialized&&ts.storage&&sortListChanged(c)){ts.storage(table,'tablesorter-savesort',sortList);if(debug){console.log('saveSort >> Saving last sort: '+c.sortList+ts.benchmark(time))}}}else{$table.addClass('hasSaveSort');sortList='';if(ts.storage){sortList=getStoredSortList(c);if(debug){console.log('saveSort >> Last sort loaded: "'+sortList+'"'+ts.benchmark(time))}
$table.bind('saveSortReset',function(event){event.stopPropagation();ts.storage(table,'tablesorter-savesort','')})}
if(init&&sortList&&sortList.length>0){c.sortList=sortList}else if(table.hasInitialized&&sortList&&sortList.length>0){if(sortListChanged(c,sortList)){ts.sortOn(c,sortList)}}}},remove:function(table,c){c.$table.removeClass('hasSaveSort');if(ts.storage){ts.storage(table,'tablesorter-savesort','')}}})})(jQuery);return jQuery.tablesorter}));
/* rank:50standard - minify:ok. vendor_bundled/vendor/mottie/tablesorter/js/widgets/widget-pager.js */
(function($){'use strict';var tsp,ts=$.tablesorter;ts.addWidget({id:'pager',priority:55,options:{pager_output:'{startRow} to {endRow} of {totalRows} rows',pager_updateArrows:!0,pager_startPage:0,pager_pageReset:0,pager_size:10,pager_maxOptionSize:20,pager_savePages:!0,pager_storageKey:'tablesorter-pager',pager_fixedHeight:!1,pager_countChildRows:!1,pager_removeRows:!1,pager_ajaxUrl:null,pager_customAjaxUrl:function(table,url){return url},pager_ajaxError:null,pager_ajaxObject:{dataType:'json'},pager_processAjaxOnInit:!0,pager_ajaxProcessing:function(data){return data},pager_css:{container:'tablesorter-pager',errorRow:'tablesorter-errorRow',disabled:'disabled'},pager_selectors:{container:'.pager',first:'.first',prev:'.prev',next:'.next',last:'.last',gotoPage:'.gotoPage',pageDisplay:'.pagedisplay',pageSize:'.pagesize'}},init:function(table){tsp.init(table)},format:function(table,c){if(!(c.pager&&c.pager.initialized)){return tsp.initComplete(c)}
tsp.moveToPage(c,c.pager,!1)},remove:function(table,c,wo,refreshing){tsp.destroyPager(c,refreshing)}});tsp=ts.pager={init:function(table){if(table.hasInitialized&&table.config.pager&&table.config.pager.initialized){return}
var t,c=table.config,wo=c.widgetOptions,s=wo.pager_selectors,p=c.pager=$.extend({totalPages:0,filteredRows:0,filteredPages:0,currentFilters:[],page:wo.pager_startPage,startRow:0,endRow:0,ajaxCounter:0,$size:null,last:{},setSize:wo.pager_size,setPage:wo.pager_startPage},c.pager);p.removeRows=wo.pager_removeRows;if(p.isInitializing){return}
p.isInitializing=!0;if(ts.debug(c,'pager')){console.log('Pager >> Initializing')}
p.size=$.data(table,'pagerLastSize')||wo.pager_size;p.$container=$(s.container).addClass(wo.pager_css.container).show();p.totalRows=c.$tbodies.eq(0).children('tr').not(wo.pager_countChildRows?'':'.'+c.cssChildRow).length;p.oldAjaxSuccess=p.oldAjaxSuccess||wo.pager_ajaxObject.success;c.appender=tsp.appender;p.initializing=!0;if(wo.pager_savePages&&ts.storage){t=ts.storage(table,wo.pager_storageKey)||{};p.page=(isNaN(t.page)?p.page:t.page)||p.setPage||0;p.size=t.size==='all'?t.size:(isNaN(t.size)?p.size:t.size)||p.setSize||10;tsp.setPageSize(c,p.size)}
p.regexRows=new RegExp('('+(wo.filter_filteredRow||'filtered')+'|'+c.selectorRemove.slice(1)+'|'+c.cssChildRow+')');p.regexFiltered=new RegExp(wo.filter_filteredRow||'filtered');p.initialized=!1;c.$table.triggerHandler('pagerBeforeInitialized',c);tsp.enablePager(c,!1);p.ajaxObject=wo.pager_ajaxObject;p.ajaxObject.url=wo.pager_ajaxUrl;if(typeof wo.pager_ajaxUrl==='string'){p.ajax=!0;wo.filter_serversideFiltering=!0;c.serverSideSorting=!0;tsp.moveToPage(c,p)}else{p.ajax=!1;ts.appendCache(c,!0)}},initComplete:function(c){var p=c.pager;tsp.bindEvents(c);if(!p.ajax){tsp.hideRowsSetup(c)}
p.initialized=!0;p.initializing=!1;p.isInitializing=!1;tsp.setPageSize(c,p.size);if(ts.debug(c,'pager')){console.log('Pager >> Triggering pagerInitialized')}
c.$table.triggerHandler('pagerInitialized',c);if(!(c.widgetOptions.filter_initialized&&ts.hasWidget(c.table,'filter'))){tsp.updatePageDisplay(c,!p.ajax)}},bindEvents:function(c){var ctrls,fxn,tmp,p=c.pager,wo=c.widgetOptions,namespace=c.namespace+'pager',s=wo.pager_selectors,debug=ts.debug(c,'pager');c.$table.off(namespace).on('filterInit filterStart '.split(' ').join(namespace+' '),function(e,filters){p.currentFilters=$.isArray(filters)?filters:c.$table.data('lastSearch');var filtersEqual;if(p.ajax&&e.type==='filterInit'){return tsp.moveToPage(c,p,!1)}
if(ts.filter.equalFilters){filtersEqual=ts.filter.equalFilters(c,c.lastSearch,p.currentFilters)}else{filtersEqual=(c.lastSearch||[]).join('')!==(p.currentFilters||[]).join('')}
if(e.type==='filterStart'&&wo.pager_pageReset!==!1&&!filtersEqual){p.page=wo.pager_pageReset}}).on('filterEnd sortEnd '.split(' ').join(namespace+' '),function(){p.currentFilters=c.$table.data('lastSearch');if(p.initialized||p.initializing){if(c.delayInit&&c.rowsCopy&&c.rowsCopy.length===0){tsp.updateCache(c)}
tsp.updatePageDisplay(c,!1);ts.applyWidget(c.table)}}).on('disablePager'+namespace,function(e){e.stopPropagation();tsp.showAllRows(c)}).on('enablePager'+namespace,function(e){e.stopPropagation();tsp.enablePager(c,!0)}).on('destroyPager'+namespace,function(e){e.stopPropagation();ts.removeWidget(c.table,'pager',!1)}).on('updateComplete'+namespace,function(e,table,triggered){e.stopPropagation();if(!table||triggered||p.ajax){return}
var $rows=c.$tbodies.eq(0).children('tr').not(c.selectorRemove);p.totalRows=$rows.length-(wo.pager_countChildRows?0:$rows.filter('.'+c.cssChildRow).length);p.totalPages=p.size==='all'?1:Math.ceil(p.totalRows/p.size);if($rows.length&&c.rowsCopy&&c.rowsCopy.length===0){tsp.updateCache(c)}
if(p.page>=p.totalPages){tsp.moveToLastPage(c,p)}
tsp.hideRows(c);tsp.changeHeight(c);tsp.updatePageDisplay(c,!1);ts.applyWidget(table);tsp.updatePageDisplay(c)}).on('pageSize refreshComplete '.split(' ').join(namespace+' '),function(e,size){e.stopPropagation();tsp.setPageSize(c,tsp.parsePageSize(c,size,'get'));tsp.moveToPage(c,p,!0);tsp.hideRows(c);tsp.updatePageDisplay(c,!1)}).on('pageSet pagerUpdate '.split(' ').join(namespace+' '),function(e,num){e.stopPropagation();if(e.type==='pagerUpdate'){num=typeof num==='undefined'?p.page+1:num;p.last.page=!0}
p.page=(parseInt(num,10)||1)-1;tsp.moveToPage(c,p,!0);tsp.updatePageDisplay(c,!1)}).on('pageAndSize'+namespace,function(e,page,size){e.stopPropagation();p.page=(parseInt(page,10)||1)-1;tsp.setPageSize(c,tsp.parsePageSize(c,size,'get'));tsp.moveToPage(c,p,!0);tsp.hideRows(c);tsp.updatePageDisplay(c,!1)});ctrls=[s.first,s.prev,s.next,s.last];fxn=['moveToFirstPage','moveToPrevPage','moveToNextPage','moveToLastPage'];if(debug&&!p.$container.length){console.warn('Pager >> "container" not found')}
p.$container.find(ctrls.join(',')).attr('tabindex',0).off('click'+namespace).on('click'+namespace,function(e){e.stopPropagation();var i,$c=$(this),l=ctrls.length;if(!$c.hasClass(wo.pager_css.disabled)){for(i=0;i<l;i++){if($c.is(ctrls[i])){tsp[fxn[i]](c,p);break}}}});tmp=p.$container.find(wo.pager_selectors.gotoPage);if(tmp.length){tmp.off('change'+namespace).on('change'+namespace,function(){p.page=$(this).val()-1;tsp.moveToPage(c,p,!0);tsp.updatePageDisplay(c,!1)})}else if(debug){console.warn('Pager >> "goto" selector not found')}
tmp=p.$container.find(wo.pager_selectors.pageSize);if(tmp.length){tmp.find('option').removeAttr('selected');tmp.off('change'+namespace).on('change'+namespace,function(){if(!$(this).hasClass(wo.pager_css.disabled)){var size=$(this).val();p.$container.find(wo.pager_selectors.pageSize).val(size);tsp.setPageSize(c,size);tsp.moveToPage(c,p,!0);tsp.changeHeight(c)}
return!1})}else if(debug){console.warn('Pager >> "size" selector not found')}},pagerArrows:function(c,disable){var p=c.pager,dis=!!disable,first=dis||p.page===0,tp=tsp.getTotalPages(c,p),last=dis||p.page===tp-1||tp===0,wo=c.widgetOptions,s=wo.pager_selectors;if(wo.pager_updateArrows){p.$container.find(s.first+','+s.prev).toggleClass(wo.pager_css.disabled,first).prop('aria-disabled',first);p.$container.find(s.next+','+s.last).toggleClass(wo.pager_css.disabled,last).prop('aria-disabled',last)}},calcFilters:function(c){var normalized,indx,len,wo=c.widgetOptions,p=c.pager,hasFilters=c.$table.hasClass('hasFilters');if(hasFilters&&!p.ajax){if($.isEmptyObject(c.cache)){p.filteredRows=p.totalRows=c.$tbodies.eq(0).children('tr').not(wo.pager_countChildRows?'':'.'+c.cssChildRow).length}else{p.filteredRows=0;normalized=c.cache[0].normalized;len=normalized.length;for(indx=0;indx<len;indx++){p.filteredRows+=p.regexRows.test(normalized[indx][c.columns].$row[0].className)?0:1}}}else if(!hasFilters){p.filteredRows=p.totalRows}},updatePageDisplay:function(c,completed){if(c.pager&&c.pager.initializing){return}
var s,t,$out,options,indx,len,output,table=c.table,wo=c.widgetOptions,p=c.pager,namespace=c.namespace+'pager',sz=tsp.parsePageSize(c,p.size,'get');if(sz==='all'){sz=p.totalRows}
if(wo.pager_countChildRows){t[t.length]=c.cssChildRow}
p.$container.find(wo.pager_selectors.pageSize+','+wo.pager_selectors.gotoPage).removeClass(wo.pager_css.disabled).removeAttr('disabled').prop('aria-disabled','false');p.totalPages=Math.ceil(p.totalRows/sz);c.totalRows=p.totalRows;tsp.parsePageNumber(c,p);tsp.calcFilters(c);c.filteredRows=p.filteredRows;p.filteredPages=Math.ceil(p.filteredRows/sz)||0;if(tsp.getTotalPages(c,p)>=0){t=(sz*p.page>p.filteredRows)&&completed;p.page=t?wo.pager_pageReset||0:p.page;p.startRow=t?sz*p.page+1:(p.filteredRows===0?0:sz*p.page+1);p.endRow=Math.min(p.filteredRows,p.totalRows,sz*(p.page+1));$out=p.$container.find(wo.pager_selectors.pageDisplay);if(typeof wo.pager_output==='function'){s=wo.pager_output(table,p)}else{output=$out.attr('data-pager-output'+(p.filteredRows<p.totalRows?'-filtered':''))||wo.pager_output;s=(p.ajaxData&&p.ajaxData.output?p.ajaxData.output||output:output).replace(/\{page([\-+]\d+)?\}/gi,function(m,n){return p.totalPages?p.page+(n?parseInt(n,10):1):0}).replace(/\{\w+(\s*:\s*\w+)?\}/gi,function(m){var len,indx,str=m.replace(/[{}\s]/g,''),extra=str.split(':'),data=p.ajaxData,deflt=/(rows?|pages?)$/i.test(str)?0:'';if(/(startRow|page)/.test(extra[0])&&extra[1]==='input'){len=(''+(extra[0]==='page'?p.totalPages:p.totalRows)).length;indx=extra[0]==='page'?p.page+1:p.startRow;return'<input type="text" class="ts-'+extra[0]+'" style="max-width:'+len+'em" value="'+indx+'"/>'}
return extra.length>1&&data&&data[extra[0]]?data[extra[0]][extra[1]]:p[str]||(data?data[str]:deflt)||deflt})}
if(p.$container.find(wo.pager_selectors.gotoPage).length){t='';options=tsp.buildPageSelect(c,p);len=options.length;for(indx=0;indx<len;indx++){t+='<option value="'+options[indx]+'">'+options[indx]+'</option>'}
p.$container.find(wo.pager_selectors.gotoPage).html(t).val(p.page+1)}
if($out.length){$out[($out[0].nodeName==='INPUT')?'val':'html'](s);$out.find('.ts-startRow, .ts-page').off('change'+namespace).on('change'+namespace,function(){var v=$(this).val(),pg=$(this).hasClass('ts-startRow')?Math.floor(v/sz)+1:v;c.$table.triggerHandler('pageSet'+namespace,[pg])})}}
tsp.pagerArrows(c);tsp.fixHeight(c);if(p.initialized&&completed!==!1){if(ts.debug(c,'pager')){console.log('Pager >> Triggering pagerComplete')}
c.$table.triggerHandler('pagerComplete',c);if(wo.pager_savePages&&ts.storage){ts.storage(table,wo.pager_storageKey,{page:p.page,size:sz===p.totalRows?'all':sz})}}},buildPageSelect:function(c,p){var i,centralFocusSize,focusOptionPages,insertIndex,optionLength,focusLength,wo=c.widgetOptions,pg=tsp.getTotalPages(c,p)||1,skipSetSize=Math.ceil((pg/wo.pager_maxOptionSize)/5)*5,largeCollection=pg>wo.pager_maxOptionSize,currentPage=p.page+1,startPage=skipSetSize,endPage=pg-skipSetSize,optionPages=[1],optionPagesStartPage=largeCollection?skipSetSize:1;for(i=optionPagesStartPage;i<=pg;){optionPages[optionPages.length]=i;i=i+(largeCollection?skipSetSize:1)}
optionPages[optionPages.length]=pg;if(largeCollection){focusOptionPages=[];centralFocusSize=Math.max(Math.floor(wo.pager_maxOptionSize/skipSetSize)-1,5);startPage=currentPage-centralFocusSize;if(startPage<1){startPage=1}
endPage=currentPage+centralFocusSize;if(endPage>pg){endPage=pg}
for(i=startPage;i<=endPage;i++){focusOptionPages[focusOptionPages.length]=i}
optionPages=$.grep(optionPages,function(value,indx){return $.inArray(value,optionPages)===indx});optionLength=optionPages.length;focusLength=focusOptionPages.length;if(optionLength-focusLength>skipSetSize/2&&optionLength+focusLength>wo.pager_maxOptionSize){insertIndex=Math.floor(optionLength/2)-Math.floor(focusLength/2);Array.prototype.splice.apply(optionPages,[insertIndex,focusLength])}
optionPages=optionPages.concat(focusOptionPages)}
optionPages=$.grep(optionPages,function(value,indx){return $.inArray(value,optionPages)===indx}).sort(function(a,b){return a-b});return optionPages},fixHeight:function(c){var d,h,bs,table=c.table,p=c.pager,wo=c.widgetOptions,$b=c.$tbodies.eq(0);$b.find('tr.pagerSavedHeightSpacer').remove();if(wo.pager_fixedHeight&&!p.isDisabled){h=$.data(table,'pagerSavedHeight');if(h){bs=0;if($(table).css('border-spacing').split(' ').length>1){bs=$(table).css('border-spacing').split(' ')[1].replace(/[^-\d\.]/g,'')}
d=h-$b.height()+(bs*p.size)-bs;if(d>5&&$.data(table,'pagerLastSize')===p.size&&$b.children('tr:visible').length<(p.size==='all'?p.totalRows:p.size)){$b.append('<tr class="pagerSavedHeightSpacer '+c.selectorRemove.slice(1)+'" style="height:'+d+'px;"></tr>')}}}},changeHeight:function(c){var h,table=c.table,p=c.pager,sz=p.size==='all'?p.totalRows:p.size,$b=c.$tbodies.eq(0);$b.find('tr.pagerSavedHeightSpacer').remove();if(!$b.children('tr:visible').length){$b.append('<tr class="pagerSavedHeightSpacer '+c.selectorRemove.slice(1)+'"><td>&nbsp</td></tr>')}
h=$b.children('tr').eq(0).height()*sz;$.data(table,'pagerSavedHeight',h);tsp.fixHeight(c);$.data(table,'pagerLastSize',p.size)},hideRows:function(c){if(!c.widgetOptions.pager_ajaxUrl){var tbodyIndex,rowIndex,$rows,len,lastIndex,p=c.pager,wo=c.widgetOptions,tbodyLen=c.$tbodies.length,sz=p.size==='all'?p.totalRows:p.size,start=(p.page*sz),end=start+sz,last=-1,size=0;p.cacheIndex=[];for(tbodyIndex=0;tbodyIndex<tbodyLen;tbodyIndex++){$rows=c.$tbodies.eq(tbodyIndex).children('tr');len=$rows.length;lastIndex=0;last=-1;size=0;for(rowIndex=0;rowIndex<len;rowIndex++){if(!p.regexFiltered.test($rows[rowIndex].className)){if(size===start&&$rows[rowIndex].className.match(c.cssChildRow)){$rows[rowIndex].style.display='none'}else{$rows[rowIndex].style.display=(size>=start&&size<end)?'':'none';if(last!==size&&size>=start&&size<end){p.cacheIndex[p.cacheIndex.length]=rowIndex;last=size}
size+=$rows[rowIndex].className.match(c.cssChildRow+'|'+c.selectorRemove.slice(1))&&!wo.pager_countChildRows?0:1;if(size===end&&$rows[rowIndex].style.display!=='none'&&$rows[rowIndex].className.match(ts.css.cssHasChild)){lastIndex=rowIndex}}}}
if(lastIndex>0&&$rows[lastIndex].className.match(ts.css.cssHasChild)){while(++lastIndex<len&&$rows[lastIndex].className.match(c.cssChildRow)){$rows[lastIndex].style.display=''}}}}},hideRowsSetup:function(c){var p=c.pager,namespace=c.namespace+'pager',$el=p.$container.find(c.widgetOptions.pager_selectors.pageSize),size=$el.val();p.size=tsp.parsePageSize(c,size,'get');tsp.setPageSize(c,p.size);tsp.pagerArrows(c);if(!c.widgetOptions.pager_removeRows){tsp.hideRows(c);c.$table.on('sortEnd filterEnd '.split(' ').join(namespace+' '),function(){tsp.hideRows(c)})}},renderAjax:function(data,c,xhr,settings,exception){var table=c.table,p=c.pager,wo=c.widgetOptions,debug=ts.debug(c,'pager');if($.isFunction(wo.pager_ajaxProcessing)){c.$tbodies.eq(0).empty();var i,j,t,hsh,$f,$sh,$headers,$h,icon,th,d,l,rr_count,len,sz,$table=c.$table,tds='',result=wo.pager_ajaxProcessing(data,table,xhr)||[0,[]];ts.showError(table);if(exception){if(debug){console.error('Pager >> Ajax Error',xhr,settings,exception)}
ts.showError(table,xhr,settings,exception);c.$tbodies.eq(0).children('tr').detach();p.totalRows=0}else{if(!$.isArray(result)){p.ajaxData=result;c.totalRows=p.totalRows=result.total;c.filteredRows=p.filteredRows=typeof result.filteredRows!=='undefined'?result.filteredRows:result.total;th=result.headers;d=result.rows||[]}else{t=isNaN(result[0])&&!isNaN(result[1]);rr_count=result[t?1:0];p.totalRows=isNaN(rr_count)?p.totalRows||0:rr_count;c.totalRows=c.filteredRows=p.filteredRows=p.totalRows;d=p.totalRows===0?[]:result[t?0:1]||[];th=result[2]}
l=d&&d.length;if(d instanceof $){if(wo.pager_processAjaxOnInit){c.$tbodies.eq(0).empty();c.$tbodies.eq(0).append(d)}}else if(l){for(i=0;i<l;i++){tds+='<tr>';for(j=0;j<d[i].length;j++){tds+=/^\s*<td/.test(d[i][j])?$.trim(d[i][j]):'<td>'+d[i][j]+'</td>'}
tds+='</tr>'}
if(wo.pager_processAjaxOnInit){c.$tbodies.eq(0).html(tds)}}
wo.pager_processAjaxOnInit=!0;if(th){hsh=$table.hasClass('hasStickyHeaders');$sh=hsh?wo.$sticky.children('thead:first').children('tr:not(.'+c.cssIgnoreRow+')').children():'';$f=$table.find('tfoot tr:first').children();$headers=c.$headers.filter('th');len=$headers.length;for(j=0;j<len;j++){$h=$headers.eq(j);if($h.find('.'+ts.css.icon).length){icon=$h.find('.'+ts.css.icon).clone(!0);$h.find('.'+ts.css.headerIn).html(th[j]).append(icon);if(hsh&&$sh.length){icon=$sh.eq(j).find('.'+ts.css.icon).clone(!0);$sh.eq(j).find('.'+ts.css.headerIn).html(th[j]).append(icon)}}else{$h.find('.'+ts.css.headerIn).html(th[j]);if(hsh&&$sh.length){p.$container=p.$container.add(wo.$sticky);$sh.eq(j).find('.'+ts.css.headerIn).html(th[j])}}
$f.eq(j).html(th[j])}
if(hsh){tsp.bindEvents(c)}}}
if(c.showProcessing){ts.isProcessing(table)}
sz=tsp.parsePageSize(c,p.size,'get');p.totalPages=sz==='all'?1:Math.ceil(p.totalRows/sz);p.last.totalRows=p.totalRows;p.last.currentFilters=p.currentFilters;p.last.sortList=(c.sortList||[]).join(',');p.initializing=!1;tsp.updatePageDisplay(c,!1);ts.updateCache(c,function(){if(p.initialized){setTimeout(function(){if(debug){console.log('Pager >> Triggering pagerChange')}
$table.triggerHandler('pagerChange',p);ts.applyWidget(table);tsp.updatePageDisplay(c)},0)}})}
if(!p.initialized){ts.applyWidget(table)}},getAjax:function(c){var counter,url=tsp.getAjaxUrl(c),$doc=$(document),namespace=c.namespace+'pager',p=c.pager;if(url!==''){if(c.showProcessing){ts.isProcessing(c.table,!0)}
$doc.on('ajaxError'+namespace,function(e,xhr,settings,exception){tsp.renderAjax(null,c,xhr,settings,exception);$doc.off('ajaxError'+namespace)});counter=++p.ajaxCounter;p.last.ajaxUrl=url;p.ajaxObject.url=url;p.ajaxObject.success=function(data,status,jqxhr){if(counter<p.ajaxCounter){return}
tsp.renderAjax(data,c,jqxhr);$doc.off('ajaxError'+namespace);if(typeof p.oldAjaxSuccess==='function'){p.oldAjaxSuccess(data)}};if(ts.debug(c,'pager')){console.log('Pager >> Ajax initialized',p.ajaxObject)}
$.ajax(p.ajaxObject)}},getAjaxUrl:function(c){var indx,len,p=c.pager,wo=c.widgetOptions,url=wo.pager_ajaxUrl?wo.pager_ajaxUrl.replace(/\{page([\-+]\d+)?\}/,function(s,n){return p.page+(n?parseInt(n,10):0)}).replace(/\{size\}/g,p.size):'',sortList=c.sortList,filterList=p.currentFilters||c.$table.data('lastSearch')||[],sortCol=url.match(/\{\s*sort(?:List)?\s*:\s*(\w*)\s*\}/),filterCol=url.match(/\{\s*filter(?:List)?\s*:\s*(\w*)\s*\}/),arry=[];if(sortCol){sortCol=sortCol[1];len=sortList.length;for(indx=0;indx<len;indx++){arry[arry.length]=sortCol+'['+sortList[indx][0]+']='+sortList[indx][1]}
url=url.replace(/\{\s*sort(?:List)?\s*:\s*(\w*)\s*\}/g,arry.length?arry.join('&'):sortCol);arry=[]}
if(filterCol){filterCol=filterCol[1];len=filterList.length;for(indx=0;indx<len;indx++){if(filterList[indx]){arry[arry.length]=filterCol+'['+indx+']='+encodeURIComponent(filterList[indx])}}
url=url.replace(/\{\s*filter(?:List)?\s*:\s*(\w*)\s*\}/g,arry.length?arry.join('&'):filterCol);p.currentFilters=filterList}
if($.isFunction(wo.pager_customAjaxUrl)){url=wo.pager_customAjaxUrl(c.table,url)}
if(ts.debug(c,'pager')){console.log('Pager >> Ajax url = '+url)}
return url},renderTable:function(c,rows){var $tb,index,count,added,table=c.table,p=c.pager,wo=c.widgetOptions,debug=ts.debug(c,'pager'),f=c.$table.hasClass('hasFilters'),l=rows&&rows.length||0,e=p.size==='all'?p.totalRows:p.size,s=(p.page*e);if(l<1){if(debug){console.warn('Pager >> No rows for pager to render')}
return}
if(p.page>=p.totalPages){return tsp.moveToLastPage(c,p)}
p.cacheIndex=[];p.isDisabled=!1;if(p.initialized){if(debug){console.log('Pager >> Triggering pagerChange')}
c.$table.triggerHandler('pagerChange',c)}
if(!wo.pager_removeRows){tsp.hideRows(c)}else{ts.clearTableBody(table);$tb=ts.processTbody(table,c.$tbodies.eq(0),!0);index=f?0:s;count=f?0:s;added=0;while(added<e&&index<rows.length){if(!f||!p.regexFiltered.test(rows[index][0].className)){count++;if(count>s&&added<=e){added++;p.cacheIndex[p.cacheIndex.length]=index;$tb.append(rows[index])}}
index++}
ts.processTbody(table,$tb,!1)}
tsp.updatePageDisplay(c);wo.pager_startPage=p.page;wo.pager_size=p.size;if(table.isUpdating){if(debug){console.log('Pager >> Triggering updateComplete')}
c.$table.triggerHandler('updateComplete',[table,!0])}},showAllRows:function(c){var index,$controls,len,table=c.table,p=c.pager,wo=c.widgetOptions;if(p.ajax){tsp.pagerArrows(c,!0)}else{$.data(table,'pagerLastPage',p.page);$.data(table,'pagerLastSize',p.size);p.page=0;p.size=p.totalRows;p.totalPages=1;c.$table.addClass('pagerDisabled').removeAttr('aria-describedby').find('tr.pagerSavedHeightSpacer').remove();tsp.renderTable(c,c.rowsCopy);p.isDisabled=!0;ts.applyWidget(table);if(ts.debug(c,'pager')){console.log('Pager >> Disabled')}}
$controls=p.$container.find(wo.pager_selectors.pageSize+','+wo.pager_selectors.gotoPage+','+'.ts-startRow, .ts-page');len=$controls.length;for(index=0;index<len;index++){$controls.eq(index).prop('aria-disabled','true').addClass(wo.pager_css.disabled)[0].disabled=!0}},updateCache:function(c){var p=c.pager;ts.updateCache(c,function(){if(!$.isEmptyObject(c.cache)){var index,rows=[],normalized=c.cache[0].normalized;p.totalRows=normalized.length;for(index=0;index<p.totalRows;index++){rows[rows.length]=normalized[index][c.columns].$row}
c.rowsCopy=rows;tsp.moveToPage(c,p,!0);p.last.currentFilters=[' ']}})},moveToPage:function(c,p,pageMoved){if(p.isDisabled){return}
if(pageMoved!==!1&&p.initialized&&$.isEmptyObject(c.cache)){return tsp.updateCache(c)}
var tmp,table=c.table,wo=c.widgetOptions,l=p.last,debug=ts.debug(c,'pager');if(p.ajax&&!wo.filter_initialized&&ts.hasWidget(table,'filter')){return}
tsp.parsePageNumber(c,p);tsp.calcFilters(c);l.currentFilters=(l.currentFilters||[]).join('')===''?[]:l.currentFilters;p.currentFilters=(p.currentFilters||[]).join('')===''?[]:p.currentFilters;if(l.page===p.page&&l.size===p.size&&l.totalRows===p.totalRows&&(l.currentFilters||[]).join(',')===(p.currentFilters||[]).join(',')&&(l.ajaxUrl||'')===(p.ajaxObject.url||'')&&(l.optAjaxUrl||'')===(wo.pager_ajaxUrl||'')&&l.sortList===(c.sortList||[]).join(',')){return}
if(debug){console.log('Pager >> Changing to page '+p.page)}
p.last={page:p.page,size:p.size,sortList:(c.sortList||[]).join(','),totalRows:p.totalRows,currentFilters:p.currentFilters||[],ajaxUrl:p.ajaxObject.url||'',optAjaxUrl:wo.pager_ajaxUrl};if(p.ajax){if(!wo.pager_processAjaxOnInit&&!$.isEmptyObject(wo.pager_initialRows)){wo.pager_processAjaxOnInit=!0;tmp=wo.pager_initialRows;p.totalRows=typeof tmp.total!=='undefined'?tmp.total:(debug?console.error('Pager >> No initial total page set!')||0:0);p.filteredRows=typeof tmp.filtered!=='undefined'?tmp.filtered:(debug?console.error('Pager >> No initial filtered page set!')||0:0);tsp.updatePageDisplay(c,!1)}else{tsp.getAjax(c)}}else if(!p.ajax){tsp.renderTable(c,c.rowsCopy)}
$.data(table,'pagerLastPage',p.page);if(p.initialized&&pageMoved!==!1){if(debug){console.log('Pager >> Triggering pageMoved')}
c.$table.triggerHandler('pageMoved',c);ts.applyWidget(table);if(!p.ajax&&table.isUpdating){if(debug){console.log('Pager >> Triggering updateComplete')}
c.$table.triggerHandler('updateComplete',[table,!0])}}},getTotalPages:function(c,p){return ts.hasWidget(c.table,'filter')?Math.min(p.totalPages,p.filteredPages):p.totalPages},parsePageNumber:function(c,p){var min=tsp.getTotalPages(c,p)-1;p.page=parseInt(p.page,10);if(p.page<0||isNaN(p.page)){p.page=0}
if(p.page>min&&min>=0){p.page=min}
return p.page},parsePageSize:function(c,size,mode){var p=c.pager,wo=c.widgetOptions,s=parseInt(size,10)||p.size||wo.pager_size||10;if(p.initialized&&(/all/i.test(s+' '+size)||s===p.totalRows)){return p.$container.find(wo.pager_selectors.pageSize+' option[value="all"]').length?'all':p.totalRows}
return mode==='get'?s:p.size},setPageSize:function(c,size){var p=c.pager,table=c.table;p.size=tsp.parsePageSize(c,size,'get');p.$container.find(c.widgetOptions.pager_selectors.pageSize).val(p.size);$.data(table,'pagerLastPage',tsp.parsePageNumber(c,p));$.data(table,'pagerLastSize',p.size);p.totalPages=p.size==='all'?1:Math.ceil(p.totalRows/p.size);p.filteredPages=p.size==='all'?1:Math.ceil(p.filteredRows/p.size)},moveToFirstPage:function(c,p){p.page=0;tsp.moveToPage(c,p,!0)},moveToLastPage:function(c,p){p.page=tsp.getTotalPages(c,p)-1;tsp.moveToPage(c,p,!0)},moveToNextPage:function(c,p){p.page++;var last=tsp.getTotalPages(c,p)-1;if(p.page>=last){p.page=last}
tsp.moveToPage(c,p,!0)},moveToPrevPage:function(c,p){p.page--;if(p.page<=0){p.page=0}
tsp.moveToPage(c,p,!0)},destroyPager:function(c,refreshing){var table=c.table,p=c.pager,s=c.widgetOptions.pager_selectors||{},ctrls=[s.first,s.prev,s.next,s.last,s.gotoPage,s.pageSize].join(','),namespace=c.namespace+'pager';if(p){p.initialized=!1;c.$table.off(namespace);p.$container.hide().find(ctrls).off(namespace);if(refreshing){return}
c.appender=null;tsp.showAllRows(c);if(ts.storage){ts.storage(table,c.widgetOptions.pager_storageKey,'')}
p.$container=null;c.pager=null;c.rowsCopy=null}},enablePager:function(c,triggered){var info,size,table=c.table,p=c.pager,wo=c.widgetOptions,$el=p.$container.find(wo.pager_selectors.pageSize);p.isDisabled=!1;p.page=$.data(table,'pagerLastPage')||p.page||0;size=$el.find('option[selected]').val();p.size=$.data(table,'pagerLastSize')||tsp.parsePageSize(c,size,'get');tsp.setPageSize(c,p.size);p.totalPages=p.size==='all'?1:Math.ceil(tsp.getTotalPages(c,p)/p.size);c.$table.removeClass('pagerDisabled');if(table.id&&!c.$table.attr('aria-describedby')){$el=p.$container.find(wo.pager_selectors.pageDisplay);info=$el.attr('id');if(!info){info=table.id+'_pager_info';$el.attr('id',info)}
c.$table.attr('aria-describedby',info)}
tsp.changeHeight(c);if(triggered){ts.update(c);tsp.setPageSize(c,p.size);tsp.moveToPage(c,p,!0);tsp.hideRowsSetup(c);if(ts.debug(c,'pager')){console.log('Pager >> Enabled')}}},appender:function(table,rows){var c=table.config,wo=c.widgetOptions,p=c.pager;if(!p.ajax){c.rowsCopy=rows;p.totalRows=wo.pager_countChildRows?c.$tbodies.eq(0).children('tr').length:rows.length;p.size=$.data(table,'pagerLastSize')||p.size||wo.pager_size||p.setSize||10;p.totalPages=p.size==='all'?1:Math.ceil(p.totalRows/p.size);tsp.moveToPage(c,p);tsp.updatePageDisplay(c,!1)}else{tsp.moveToPage(c,p,!0)}}};ts.showError=function(table,xhr,settings,exception){var $table=$(table),c=$table[0].config,wo=c&&c.widgetOptions,errorRow=c.pager&&c.pager.cssErrorRow||wo&&wo.pager_css&&wo.pager_css.errorRow||'tablesorter-errorRow',typ=typeof xhr,valid=!0,message='',removeRow=function(){c.$table.find('thead').find(c.selectorRemove).remove()};if(!$table.length){console.error('tablesorter showError: no table parameter passed');return}
if(typeof c.pager.ajaxError==='function'){valid=c.pager.ajaxError(c,xhr,settings,exception);if(valid===!1){return removeRow()}else{message=valid}}else if(typeof wo.pager_ajaxError==='function'){valid=wo.pager_ajaxError(c,xhr,settings,exception);if(valid===!1){return removeRow()}else{message=valid}}
if(message===''){if(typ==='object'){message=xhr.status===0?'Not connected, verify Network':xhr.status===404?'Requested page not found [404]':xhr.status===500?'Internal Server Error [500]':exception==='parsererror'?'Requested JSON parse failed':exception==='timeout'?'Time out error':exception==='abort'?'Ajax Request aborted':'Uncaught error: '+xhr.statusText+' ['+xhr.status+']'}else if(typ==='string'){message=xhr}else{return removeRow()}}
$(/tr\>/.test(message)?message:'<tr><td colspan="'+c.columns+'">'+message+'</td></tr>').click(function(){$(this).remove()}).appendTo(c.$table.find('thead:first')).addClass(errorRow+' '+c.selectorRemove.slice(1)).attr({role:'alert','aria-live':'assertive'})}})(jQuery);
/* rank:50standard - minify:ok. vendor_bundled/vendor/mottie/tablesorter/js/widgets/widget-filter-formatter-jui.js */
(function($){'use strict';var ts=$.tablesorter||{},compareSelect='.compare-select',tsff=ts.filterFormatter=$.extend({},ts.filterFormatter,{addCompare:function($cell,indx,options){if(options.compare&&$.isArray(options.compare)&&options.compare.length>1){var opt='',compareSelectClass=[compareSelect.slice(1),' '+compareSelect.slice(1),''],txt=options.cellText?'<label class="'+compareSelectClass.join('-label')+indx+'">'+options.cellText+'</label>':'';$.each(options.compare,function(i,c){opt+='<option '+(options.selected===i?'selected':'')+'>'+c+'</option>'});$cell.wrapInner('<div class="'+compareSelectClass.join('-wrapper')+indx+'" />').prepend(txt+'<select class="'+compareSelectClass.join('')+indx+'" />').find('select').append(opt)}},updateCompare:function($cell,$input,o){var val=$input.val()||'',num=val.replace(/\s*?[><=]\s*?/g,''),compare=val.match(/[><=]/g)||'';if(o.compare){if($.isArray(o.compare)){compare=(compare||[]).join('')||o.compare[o.selected||0]}
$cell.find(compareSelect).val(compare)}
return[val,num]},uiSpinner:function($cell,indx,spinnerDef){var o=$.extend({delayed:!0,addToggle:!0,exactMatch:!0,value:1,cellText:'',compare:'',min:0,max:100,step:1,disabled:!1},spinnerDef),c=$cell.closest('table')[0].config,$input=$('<input class="filter" type="hidden">').appendTo($cell).bind('change'+c.namespace+'filter',function(){updateSpinner({value:this.value,delayed:!1})}),$shcell=[],updateSpinner=function(ui,notrigger){var chkd=!0,state,v=ui&&ui.value&&ts.formatFloat((ui.value+'').replace(/[><=]/g,''))||$cell.find('.spinner').val()||o.value,compare=($.isArray(o.compare)?$cell.find(compareSelect).val()||o.compare[o.selected||0]:o.compare)||'',searchType=ui&&typeof ui.delayed==='boolean'?ui.delayed:c.$table[0].hasInitialized?o.delayed||'':!0;if(o.addToggle){chkd=$cell.find('.toggle').is(':checked')}
state=o.disabled||!chkd?'disable':'enable';if(!ts.isEmptyObject($cell.find('.spinner').data())){$cell.find('.filter').val(chkd?(compare?compare:o.exactMatch?'=':'')+v:'').trigger(notrigger?'':'search',searchType).end().find('.spinner').spinner(state).val(v);if($shcell.length){$shcell.find('.spinner').spinner(state).val(v).end().find(compareSelect).val(compare);if(o.addToggle){$shcell.find('.toggle')[0].checked=chkd}}}};o.oldcreate=o.create;o.oldspin=o.spin;o.create=function(event,ui){updateSpinner();if(typeof o.oldcreate==='function'){o.oldcreate(event,ui)}};o.spin=function(event,ui){updateSpinner(ui);if(typeof o.oldspin==='function'){o.oldspin(event,ui)}};if(o.addToggle){$('<div class="button"><input id="uispinnerbutton'+indx+'" type="checkbox" class="toggle" />'+'<label for="uispinnerbutton'+indx+'"></label></div>').appendTo($cell).find('.toggle').bind('change',function(){updateSpinner()})}
$cell.closest('thead').find('th[data-column='+indx+']').addClass('filter-parsed');$('<input class="spinner spinner'+indx+'" />').val(o.value).appendTo($cell).spinner(o).bind('change keyup',function(){updateSpinner()});c.$table.bind('filterFomatterUpdate'+c.namespace+'filter',function(){var val=tsff.updateCompare($cell,$input,o)[0];$cell.find('.spinner').val(val);updateSpinner({value:val},!0);ts.filter.formatterUpdated($cell,indx)});if(o.compare){tsff.addCompare($cell,indx,o);$cell.find(compareSelect).bind('change',function(){updateSpinner()})}
c.$table.bind('stickyHeadersInit'+c.namespace+'filter',function(){$shcell=c.widgetOptions.$sticky.find('.tablesorter-filter-row').children().eq(indx).empty();if(o.addToggle){$('<div class="button"><input id="stickyuispinnerbutton'+indx+'" type="checkbox" class="toggle" />'+'<label for="stickyuispinnerbutton'+indx+'"></label></div>').appendTo($shcell).find('.toggle').bind('change',function(){$cell.find('.toggle')[0].checked=this.checked;updateSpinner()})}
$('<input class="spinner spinner'+indx+'" />').val(o.value).appendTo($shcell).spinner(o).bind('change keyup',function(){$cell.find('.spinner').val(this.value);updateSpinner()});if(o.compare){tsff.addCompare($shcell,indx,o);$shcell.find(compareSelect).bind('change',function(){$cell.find(compareSelect).val($(this).val());updateSpinner()})}});c.$table.bind('filterReset'+c.namespace+'filter',function(){if($.isArray(o.compare)){$cell.add($shcell).find(compareSelect).val(o.compare[o.selected||0])}
if(o.addToggle){$cell.find('.toggle')[0].checked=!1}
$cell.find('.spinner').spinner('value',o.value);setTimeout(function(){updateSpinner()},0)});updateSpinner();return $input},uiSlider:function($cell,indx,sliderDef){var o=$.extend({delayed:!0,valueToHeader:!1,exactMatch:!0,cellText:'',compare:'',allText:'all',value:0,min:0,max:100,step:1,range:'min'},sliderDef),c=$cell.closest('table')[0].config,$input=$('<input class="filter" type="hidden">').appendTo($cell).bind('change'+c.namespace+'filter',function(){updateSlider({value:this.value})}),$shcell=[],updateSlider=function(ui,notrigger){var v=typeof ui!=='undefined'?ts.formatFloat((ui.value+'').replace(/[><=]/g,''))||o.value:o.value,val=o.compare?v:v===o.min?o.allText:v,compare=($.isArray(o.compare)?$cell.find(compareSelect).val()||o.compare[o.selected||0]:o.compare)||'',result=compare+val,searchType=ui&&typeof ui.delayed==='boolean'?ui.delayed:c.$table[0].hasInitialized?o.delayed||'':!0;if(o.valueToHeader){$cell.closest('thead').find('th[data-column='+indx+']').find('.curvalue').html(' ('+result+')')}else{$cell.find('.ui-slider-handle').addClass('value-popup').attr('data-value',result)}
if(!ts.isEmptyObject($cell.find('.slider').data())){$cell.find('.filter').val((compare?compare+v:v===o.min?'':(o.exactMatch?'=':'')+v)).trigger(notrigger?'':'search',searchType).end().find('.slider').slider('value',v);if($shcell.length){$shcell.find(compareSelect).val(compare).end().find('.slider').slider('value',v);if(o.valueToHeader){$shcell.closest('thead').find('th[data-column='+indx+']').find('.curvalue').html(' ('+result+')')}else{$shcell.find('.ui-slider-handle').addClass('value-popup').attr('data-value',result)}}}};$cell.closest('thead').find('th[data-column='+indx+']').addClass('filter-parsed');if(o.valueToHeader){$cell.closest('thead').find('th[data-column='+indx+']').find('.tablesorter-header-inner').append('<span class="curvalue" />')}
o.oldcreate=o.create;o.oldslide=o.slide;o.create=function(event,ui){updateSlider();if(typeof o.oldcreate==='function'){o.oldcreate(event,ui)}};o.slide=function(event,ui){updateSlider(ui);if(typeof o.oldslide==='function'){o.oldslide(event,ui)}};$('<div class="slider slider'+indx+'"/>').appendTo($cell).slider(o);c.$table.bind('filterFomatterUpdate'+c.namespace+'filter',function(){var val=tsff.updateCompare($cell,$input,o)[0];$cell.find('.slider').slider('value',val);updateSlider({value:val},!1);ts.filter.formatterUpdated($cell,indx)});if(o.compare){tsff.addCompare($cell,indx,o);$cell.find(compareSelect).bind('change',function(){updateSlider({value:$cell.find('.slider').slider('value')})})}
c.$table.bind('filterReset'+c.namespace+'filter',function(){if($.isArray(o.compare)){$cell.add($shcell).find(compareSelect).val(o.compare[o.selected||0])}
setTimeout(function(){updateSlider({value:o.value})},0)});c.$table.bind('stickyHeadersInit'+c.namespace+'filter',function(){$shcell=c.widgetOptions.$sticky.find('.tablesorter-filter-row').children().eq(indx).empty();$('<div class="slider slider'+indx+'"/>').val(o.value).appendTo($shcell).slider(o).bind('change keyup',function(){$cell.find('.slider').slider('value',this.value);updateSlider()});if(o.compare){tsff.addCompare($shcell,indx,o);$shcell.find(compareSelect).bind('change',function(){$cell.find(compareSelect).val($(this).val());updateSlider()})}});return $input},uiRange:function($cell,indx,rangeDef){var o=$.extend({delayed:!0,valueToHeader:!1,values:[0,100],min:0,max:100,range:!0},rangeDef),c=$cell.closest('table')[0].config,$input=$('<input class="filter" type="hidden">').appendTo($cell).bind('change'+c.namespace+'filter',function(){getRange()}),$shcell=[],getRange=function(){var val=$input.val(),v=val.split(' - ');if(val===''){v=[o.min,o.max]}
if(v&&v[1]){updateUiRange({values:v,delay:!1},!0)}},updateUiRange=function(ui,notrigger){var val=ui&&ui.values||o.values,result=val[0]+' - '+val[1],range=val[0]===o.min&&val[1]===o.max?'':result,searchType=ui&&typeof ui.delayed==='boolean'?ui.delayed:c.$table[0].hasInitialized?o.delayed||'':!0;if(o.valueToHeader){$cell.closest('thead').find('th[data-column='+indx+']').find('.currange').html(' ('+result+')')}else{$cell.find('.ui-slider-handle').addClass('value-popup').eq(0).attr('data-value',val[0]).end().eq(1).attr('data-value',val[1])}
if(!ts.isEmptyObject($cell.find('.range').data())){$cell.find('.filter').val(range).trigger(notrigger?'':'search',searchType).end().find('.range').slider('values',val);if($shcell.length){$shcell.find('.range').slider('values',val);if(o.valueToHeader){$shcell.closest('thead').find('th[data-column='+indx+']').find('.currange').html(' ('+result+')')}else{$shcell.find('.ui-slider-handle').addClass('value-popup').eq(0).attr('data-value',val[0]).end().eq(1).attr('data-value',val[1])}}}};$cell.closest('thead').find('th[data-column='+indx+']').addClass('filter-parsed');if(o.valueToHeader){$cell.closest('thead').find('th[data-column='+indx+']').find('.tablesorter-header-inner').append('<span class="currange"/>')}
o.oldcreate=o.create;o.oldslide=o.slide;o.create=function(event,ui){updateUiRange();if(typeof o.oldcreate==='function'){o.oldcreate(event,ui)}};o.slide=function(event,ui){updateUiRange(ui);if(typeof o.oldslide==='function'){o.oldslide(event,ui)}};$('<div class="range range'+indx+'"/>').appendTo($cell).slider(o);c.$table.bind('filterFomatterUpdate'+c.namespace+'filter',function(){getRange();ts.filter.formatterUpdated($cell,indx)});c.$table.bind('filterReset'+c.namespace+'filter',function(){$cell.find('.range').slider('values',o.values);setTimeout(function(){updateUiRange()},0)});c.$table.bind('stickyHeadersInit'+c.namespace+'filter',function(){$shcell=c.widgetOptions.$sticky.find('.tablesorter-filter-row').children().eq(indx).empty();$('<div class="range range'+indx+'"/>').val(o.value).appendTo($shcell).slider(o).bind('change keyup',function(){$cell.find('.range').val(this.value);updateUiRange()})});return $input},uiDateCompare:function($cell,indx,defDate){var o=$.extend({cellText:'',compare:'',endOfDay:!0,defaultDate:'',changeMonth:!0,changeYear:!0,numberOfMonths:1},defDate),$date,c=$cell.closest('table')[0].config,$hdr=$cell.closest('thead').find('th[data-column='+indx+']').addClass('filter-parsed'),$input=$('<input class="dateCompare" type="hidden">').appendTo($cell).bind('change'+c.namespace+'filter',function(){var v=this.value;if(v){o.onClose(v)}}),t,$shcell=[],date1Compare=function(notrigger){var date,query,getdate=$date.datepicker('getDate')||'',compare=($.isArray(o.compare)?$cell.find(compareSelect).val()||o.compare[o.selected||0]:o.compare)||'',searchType=c.$table[0].hasInitialized?o.delayed||'':!0;$date.datepicker('setDate',(getdate===''?'':getdate)||null);if(getdate===''){notrigger=!1}
date=$date.datepicker('getDate');query=date?(o.endOfDay&&/<=/.test(compare)?date.setHours(23,59,59,999):date.getTime())||'':'';if(date&&o.endOfDay&&compare==='='){compare='';query+=' - '+date.setHours(23,59,59,999);notrigger=!1}
$cell.find('.dateCompare').val(compare+query).trigger(notrigger?'':'search',searchType).end();if($shcell.length){$shcell.find('.dateCompare').val(compare+query).end().find(compareSelect).val(compare)}};t='<input type="text" class="date date'+indx+'" placeholder="'+($hdr.data('placeholder')||$hdr.attr('data-placeholder')||c.widgetOptions.filter_placeholder.search||'')+'" />';$date=$(t).appendTo($cell);o.oldonClose=o.onClose;o.onClose=function(selectedDate,ui){date1Compare();if(typeof o.oldonClose==='function'){o.oldonClose(selectedDate,ui)}};$date.datepicker(o);c.$table.bind('filterReset'+c.namespace+'filter',function(){if($.isArray(o.compare)){$cell.add($shcell).find(compareSelect).val(o.compare[o.selected||0])}
$cell.add($shcell).find('.date').val(o.defaultDate).datepicker('setDate',o.defaultDate||null);setTimeout(function(){date1Compare()},0)});c.$table.bind('filterFomatterUpdate'+c.namespace+'filter',function(){var num,v=$input.val();if(/\s+-\s+/.test(v)){$cell.find(compareSelect).val('=');num=v.split(/\s+-\s+/)[0];$date.datepicker('setDate',num||null)}else{num=(tsff.updateCompare($cell,$input,o)[1]).toString()||'';num=num!==''?/\d{5}/g.test(num)?new Date(Number(num)):num||'':''}
$cell.add($shcell).find('.date').datepicker('setDate',num||null);setTimeout(function(){date1Compare(!0);ts.filter.formatterUpdated($cell,indx)},0)});if(o.compare){tsff.addCompare($cell,indx,o);$cell.find(compareSelect).bind('change',function(){date1Compare()})}
c.$table.bind('stickyHeadersInit'+c.namespace+'filter',function(){$shcell=c.widgetOptions.$sticky.find('.tablesorter-filter-row').children().eq(indx).empty();$shcell.append(t).find('.date').datepicker(o);if(o.compare){tsff.addCompare($shcell,indx,o);$shcell.find(compareSelect).bind('change',function(){$cell.find(compareSelect).val($(this).val());date1Compare()})}});return $input.val(o.defaultDate?o.defaultDate:'')},uiDatepicker:function($cell,indx,defDate){var o=$.extend({endOfDay:!0,textFrom:'from',textTo:'to',from:'',to:'',changeMonth:!0,changeYear:!0,numberOfMonths:1},defDate),t,closeDate,$shcell=[],c=$cell.closest('table')[0].config,validDate=function(d){return d instanceof Date&&isFinite(d)},$input=$('<input class="dateRange" type="hidden">').appendTo($cell).bind('change'+c.namespace+'filter',function(){var v=this.value;if(v.match(' - ')){v=v.split(' - ');$cell.find('.dateTo').val(v[1]);closeDate(v[0])}else if(v.match('>=')){closeDate(v.replace('>=',''))}else if(v.match('<=')){closeDate(v.replace('<=',''))}}),$hdr=$cell.closest('thead').find('th[data-column='+indx+']').addClass('filter-parsed');t='<label>'+o.textFrom+'</label><input type="text" class="dateFrom" placeholder="'+($hdr.data('placeholderFrom')||$hdr.attr('data-placeholder-from')||c.widgetOptions.filter_placeholder.from||'')+'" />'+'<label>'+o.textTo+'</label><input type="text" class="dateTo" placeholder="'+($hdr.data('placeholderTo')||$hdr.attr('data-placeholder-to')||c.widgetOptions.filter_placeholder.to||'')+'" />';$(t).appendTo($cell);o.oldonClose=o.onClose;closeDate=o.onClose=function(selectedDate,ui){var range,from=$cell.find('.dateFrom').datepicker('getDate'),to=$cell.find('.dateTo').datepicker('getDate');from=validDate(from)?from.getTime():'';to=validDate(to)?(o.endOfDay?to.setHours(23,59,59,999):to.getTime())||'':'';range=from?(to?from+' - '+to:'>='+from):(to?'<='+to:'');$cell.add($shcell).find('.dateRange').val(range).trigger('search');from=from?new Date(from):'';to=to?new Date(to):'';if(/<=/.test(range)){$cell.add($shcell).find('.dateFrom').datepicker('option','maxDate',to||null).end().find('.dateTo').datepicker('option','minDate',null).datepicker('setDate',to||null)}else if(/>=/.test(range)){$cell.add($shcell).find('.dateFrom').datepicker('option','maxDate',null).datepicker('setDate',from||null).end().find('.dateTo').datepicker('option','minDate',from||null)}else{$cell.add($shcell).find('.dateFrom').datepicker('option','maxDate',null).datepicker('setDate',from||null).end().find('.dateTo').datepicker('option','minDate',null).datepicker('setDate',to||null)}
if(typeof o.oldonClose==='function'){o.oldonClose(selectedDate,ui)}};o.defaultDate=o.from||'';$cell.find('.dateFrom').datepicker(o);o.defaultDate=o.to||'+7d';$cell.find('.dateTo').datepicker(o);c.$table.bind('filterFomatterUpdate'+c.namespace+'filter',function(){var val=$input.val()||'',from='',to='';if(/\s+-\s+/.test(val)){val=val.split(/\s+-\s+/)||[];from=val[0]||'';to=val[1]||''}else if(/>=/.test(val)){from=val.replace(/>=/,'')||''}else if(/<=/.test(val)){to=val.replace(/<=/,'')||''}
from=from!==''?/\d{5}/g.test(from)?new Date(Number(from)):from||'':'';to=to!==''?/\d{5}/g.test(to)?new Date(Number(to)):to||'':'';$cell.add($shcell).find('.dateFrom').datepicker('setDate',from||null);$cell.add($shcell).find('.dateTo').datepicker('setDate',to||null);setTimeout(function(){closeDate();ts.filter.formatterUpdated($cell,indx)},0)});c.$table.bind('stickyHeadersInit'+c.namespace+'filter',function(){$shcell=c.widgetOptions.$sticky.find('.tablesorter-filter-row').children().eq(indx).empty();$shcell.append(t);o.defaultDate=o.from||'';$shcell.find('.dateFrom').datepicker(o);o.defaultDate=o.to||'+7d';$shcell.find('.dateTo').datepicker(o)});$cell.closest('table').bind('filterReset'+c.namespace+'filter',function(){$cell.add($shcell).find('.dateFrom').val('').datepicker('setDate',o.from||null);$cell.add($shcell).find('.dateTo').val('').datepicker('setDate',o.to||null);setTimeout(function(){closeDate()},0)});return $input.val(o.from?(o.to?o.from+' - '+o.to:'>='+o.from):(o.to?'<='+o.to:''))}})})(jQuery);
/* rank:50standard - minify:ok. vendor_bundled/vendor/mottie/tablesorter/js/widgets/widget-grouping.js */
(function($){'use strict';var ts=$.tablesorter,tsg=ts.grouping={types:{number:function(c,$column,txt,num){var result,ascSort=$column.hasClass(ts.css.sortAsc);if(num>1&&txt!==''){if(ascSort){result=Math.floor(parseFloat(txt)/num)*num}else{result=Math.ceil(parseFloat(txt)/num)*num}
result+=' - '+(result+(num-1)*(ascSort?1:-1))}else{result=parseFloat(txt)||txt}
return result},separator:function(c,$column,txt,num){var word=(txt+'').split(c.widgetOptions.group_separator);return $.trim(word[num-1]||'')},text:function(c,$column,txt){return txt},word:function(c,$column,txt,num){var word=(txt+' ').match(/\w+/g)||[];return word[num-1]||''},letter:function(c,$column,txt,num){return txt?(txt+' ').substring(0,num):''},date:function(c,$column,txt,part){var year,month,wo=c.widgetOptions,time=new Date(txt||'');if(time instanceof Date&&isFinite(time)){year=time.getFullYear();month=tsg.findMonth(wo,time.getMonth());return part==='year'?year:part==='month'?month:part==='monthyear'?month+' '+year:part==='day'?month+' '+time.getDate():part==='week'?tsg.findWeek(wo,time.getDay()):part==='time'?tsg.findTime(wo,time):part==='hour'?tsg.findTime(wo,time,'hour'):wo.group_dateString(time,c,$column)}else{return wo.group_dateInvalid}}},findMonth:function(wo,month){return wo.group_months[month+((wo.group_months[0]||'')===''?1:0)]},findWeek:function(wo,day){if($.isArray(wo.group_week)){return wo.group_week[day]}else if(!$.isEmptyObject(wo.group_week)){var cldrWeek=['sun','mon','tue','wed','thu','fri','sat'];return wo.group_week[cldrWeek[day]]}},findTime:function(wo,time,part){var suffix,isObj=wo.group_time.am&&wo.group_time.pm,h=time.getHours(),period=h>=12?1:0,p24=wo.group_time24Hour&&h>12?h-12:wo.group_time24Hour&&h===0?h+12:h,hours=('00'+p24).slice(-2),min=('00'+time.getMinutes()).slice(-2);suffix=wo.group_time[isObj?['am','pm'][period]:period];if(part==='hour'){return hours}
return hours+':'+min+(wo.group_time24Hour?'':' '+(suffix||''))},update:function(table){if($.isEmptyObject(table.config.cache)){return}
var c=table.config,wo=c.widgetOptions,hasSort=typeof c.sortList[0]!=='undefined',data={},column=$.isArray(wo.group_forceColumn)&&typeof wo.group_forceColumn[0]!=='undefined'?(wo.group_enforceSort&&!hasSort?-1:wo.group_forceColumn[0]):(hasSort?c.sortList[0][0]:-1);c.$table.find('tr.group-hidden').removeClass('group-hidden').end().find('tr.group-header').remove();if(wo.group_collapsible){c.$table.data('pagerSavedHeight',0)}
if(column>=0&&column<c.columns&&!c.$headerIndexed[column].hasClass('group-false')){wo.group_collapsedGroup='';wo.group_collapsedGroups={};data.column=column;data.groupClass=(c.$headerIndexed[column].attr('class')||'').match(/(group-\w+(-\w+)?)/g);data.grouping=data.groupClass?data.groupClass[0].split('-'):['group','letter',1];data.savedGroup=tsg.saveCurrentGrouping(c,wo,data);tsg.findColumnGroups(c,wo,data);tsg.processHeaders(c,wo,data);c.$table.triggerHandler(wo.group_complete)}},processHeaders:function(c,wo,data){var index,isHidden,$label,name,$rows,$row,$headers=c.$table.find('tr.group-header'),len=$headers.length;$headers.bind('selectstart',!1);for(index=0;index<len;index++){$row=$headers.eq(index);$rows=$row.nextUntil('tr.group-header').filter(':visible');if(wo.group_count||$.isFunction(wo.group_callback)){$label=$row.find('.group-count');if($label.length){if(wo.group_count){$label.html(wo.group_count.toString().replace(/\{num\}/g,$rows.length))}
if($.isFunction(wo.group_callback)){wo.group_callback($row.find('td'),$rows,data.column,c.table)}}}
if(wo.group_saveGroups&&!$.isEmptyObject(wo.group_collapsedGroups)&&wo.group_collapsedGroups[wo.group_collapsedGroup].length){name=$row.find('.group-name').text().toLowerCase()+$row.attr('data-group-index');isHidden=$.inArray(name,wo.group_collapsedGroups[wo.group_collapsedGroup])>-1;$row.toggleClass('collapsed',isHidden);$rows.toggleClass('group-hidden',isHidden)}else if(wo.group_collapsed&&wo.group_collapsible){$row.addClass('collapsed');$rows.addClass('group-hidden')}}},groupHeaderHTML:function(c,wo,data){var name=(data.currentGroup||'').toString().replace(/</g,'&lt;').replace(/>/g,'&gt;');return'<tr class="group-header '+c.selectorRemove.slice(1)+' '+(wo.columnSelector_classHasSpan||'hasSpan')+'" unselectable="on" '+(c.tabIndex?'tabindex="0" ':'')+'data-group-index="'+data.groupIndex+'">'+'<td colspan="'+c.columns+'">'+(wo.group_collapsible?'<i/>':'')+'<span class="group-name">'+name+'</span>'+'<span class="group-count"></span>'+'</td></tr>'},saveCurrentGrouping:function(c,wo,data){var saveName,direction,savedGroup=!1;if(wo.group_collapsible&&wo.group_saveGroups){wo.group_collapsedGroups=ts.storage&&ts.storage(c.table,'tablesorter-groups')||{};direction='dir'+c.sortList[0][1];saveName=wo.group_collapsedGroup=''+c.sortList[0][0]+direction+data.grouping.join('');if(!wo.group_collapsedGroups[saveName]){wo.group_collapsedGroups[saveName]=[]}else{savedGroup=!0}}
return savedGroup},findColumnGroups:function(c,wo,data){var tbodyIndex,norm_rows,rowIndex,end,undef,hasPager=ts.hasWidget(c.table,'pager'),p=c.pager||{};data.groupIndex=0;for(tbodyIndex=0;tbodyIndex<c.$tbodies.length;tbodyIndex++){norm_rows=c.cache[tbodyIndex].normalized;data.group=undef;rowIndex=hasPager&&!p.ajax?p.startRow-1:0;end=hasPager?p.endRow-(p.ajax?p.startRow:0):norm_rows.length;for(;rowIndex<end;rowIndex++){data.rowData=norm_rows[rowIndex];if(data.rowData){data.$row=data.rowData[c.columns].$row;if(data.$row.is(':visible')&&tsg.types[data.grouping[1]]){tsg.insertGroupHeader(c,wo,data)}}}}
if(ts.hasWidget(c.table,'columnSelector')){ts.columnSelector.setUpColspan(c,wo)}},insertGroupHeader:function(c,wo,data){var $header=c.$headerIndexed[data.column],txt=data.rowData[data.column],num=/date/.test(data.groupClass)?data.grouping[2]:parseInt(data.grouping[2]||1,10)||1;data.currentGroup=data.rowData?tsg.types[data.grouping[1]](c,$header,txt,num,data.group):data.currentGroup;if(data.group!==data.currentGroup){data.group=data.currentGroup;if($.isFunction(wo.group_formatter)){data.currentGroup=wo.group_formatter((data.group||'').toString(),data.column,c.table,c,wo,data)||data.group}
data.$row.first().before(tsg.groupHeaderHTML(c,wo,data));if(wo.group_saveGroups&&!data.savedGroup&&wo.group_collapsed&&wo.group_collapsible){wo.group_collapsedGroups[wo.group_collapsedGroup].push(data.currentGroup+data.groupIndex)}
data.groupIndex++}},bindEvents:function(table,c,wo){if(wo.group_collapsible){wo.group_collapsedGroups=[];c.$table.on('click toggleGroup keyup','tr.group-header',function(event){event.stopPropagation();if(event.type==='keyup'&&event.which!==13){return}
var isCollapsed,indx,$this=$(this),name=$this.find('.group-name').text().toLowerCase()+$this.attr('data-group-index');if(event.shiftKey&&(event.type==='click'||event.type==='keyup')){$this.siblings('.group-header').trigger('toggleGroup')}
$this.toggleClass('collapsed');$this.nextUntil('tr.group-header').toggleClass('group-hidden',$this.hasClass('collapsed'));isCollapsed=$this.hasClass('collapsed');if(!isCollapsed&&ts.hasWidget(c.$table,'zebra')){ts.applyWidgetId(c.$table,'zebra')}
if(wo.group_saveGroups&&ts.storage){if(!wo.group_collapsedGroups[wo.group_collapsedGroup]){wo.group_collapsedGroups[wo.group_collapsedGroup]=[]}
if(isCollapsed&&wo.group_collapsedGroup){wo.group_collapsedGroups[wo.group_collapsedGroup].push(name)}else if(wo.group_collapsedGroup){indx=$.inArray(name,wo.group_collapsedGroups[wo.group_collapsedGroup]);if(indx>-1){wo.group_collapsedGroups[wo.group_collapsedGroup].splice(indx,1)}}
ts.storage(table,'tablesorter-groups',wo.group_collapsedGroups)}})}
$(wo.group_saveReset).on('click',function(){tsg.clearSavedGroups(table)});c.$table.on('pagerChange.tsgrouping',function(){tsg.update(table)})},clearSavedGroups:function(table){if(table&&ts.storage){ts.storage(table,'tablesorter-groups','');tsg.update(table)}}};ts.addWidget({id:'group',priority:100,options:{group_collapsible:!0,group_collapsed:!1,group_saveGroups:!0,group_saveReset:null,group_count:' ({num})',group_separator:'-',group_formatter:null,group_callback:null,group_complete:'groupingComplete',group_forceColumn:[],group_enforceSort:!0,group_checkbox:['checked','unchecked'],group_months:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],group_week:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],group_time:['AM','PM'],group_time24Hour:!1,group_dateInvalid:'Invalid Date',group_dateString:function(date){return date.toLocaleString()}},init:function(table,thisWidget,c,wo){tsg.bindEvents(table,c,wo)},format:function(table){tsg.update(table)},remove:function(table,c){c.$table.off('click','tr.group-header').off('pagerChange.tsgrouping').find('.group-hidden').removeClass('group-hidden').end().find('tr.group-header').remove()}})})(jQuery);
/* rank:50standard - minify:ok. vendor_bundled/vendor/mottie/tablesorter/js/widgets/widget-columnSelector.js */
(function($){'use strict';var ts=$.tablesorter,namespace='.tscolsel',tsColSel=ts.columnSelector={queryAll:'@media only all { [columns] { display: none; } } ',queryBreak:'@media all and (min-width: [size]) { [columns] { display: table-cell; } } ',init:function(table,c,wo){var $t,colSel,debug=ts.debug(c,'columnSelector');$t=$(wo.columnSelector_layout);if(!$t.find('input').add($t.filter('input')).length){if(debug){console.error('ColumnSelector >> ERROR: Column Selector aborting, no input found in the layout! ***')}
return}
c.$table.addClass(c.namespace.slice(1)+'columnselector');colSel=c.selector={$container:$(wo.columnSelector_container||'<div>')};colSel.$style=$('<style></style>').prop('disabled',!0).appendTo('head');colSel.$breakpoints=$('<style></style>').prop('disabled',!0).appendTo('head');colSel.isInitializing=!0;tsColSel.setUpColspan(c,wo);tsColSel.setupSelector(c,wo);if(wo.columnSelector_mediaquery){tsColSel.setupBreakpoints(c,wo)}
colSel.isInitializing=!1;if(colSel.$container.length){tsColSel.updateCols(c,wo)}else if(debug){console.warn('ColumnSelector >> container not found')}
c.$table.off('refreshColumnSelector'+namespace).on('refreshColumnSelector'+namespace,function(e,optName,optState){tsColSel.refreshColumns(this.config,optName,optState)});if(debug){console.log('ColumnSelector >> Widget initialized')}},refreshColumns:function(c,optName,optState){var i,arry,$el,val,colSel=c.selector,isArry=$.isArray(optState||optName),wo=c.widgetOptions;if(typeof optName!=='undefined'&&optName!==null&&colSel.$container.length){if(optName==='selectors'){colSel.$container.empty();tsColSel.setupSelector(c,wo);tsColSel.setupBreakpoints(c,wo);if(typeof optState==='undefined'&&optState!==null){optState=colSel.auto}}
if(isArry){arry=optState||optName;$.each(arry,function(i,v){arry[i]=parseInt(v,10)});for(i=0;i<c.columns;i++){val=$.inArray(i,arry)>=0;$el=colSel.$container.find('input[data-column='+i+']');if($el.length){$el.prop('checked',val);colSel.states[i]=val}}}
val=optState===!0||optName===!0||optName==='auto'&&optState!==!1;$el=colSel.$container.find('input[data-column="auto"]').prop('checked',val);tsColSel.updateAuto(c,wo,$el)}else{tsColSel.updateBreakpoints(c,wo);tsColSel.updateCols(c,wo)}
tsColSel.saveValues(c,wo);tsColSel.adjustColspans(c,wo)},setupSelector:function(c,wo){var index,name,$header,priority,col,colId,$el,colSel=c.selector,$container=colSel.$container,useStorage=wo.columnSelector_saveColumns&&ts.storage,saved=useStorage?ts.storage(c.table,'tablesorter-columnSelector'):[],state=useStorage?ts.storage(c.table,'tablesorter-columnSelector-auto'):{};colSel.auto=$.isEmptyObject(state)||$.type(state.auto)!=='boolean'?wo.columnSelector_mediaqueryState:state.auto;colSel.states=[];colSel.$column=[];colSel.$wrapper=[];colSel.$checkbox=[];for(index=0;index<c.columns;index++){$header=c.$headerIndexed[index];priority=$header.attr(wo.columnSelector_priority)||1;colId=$header.attr('data-column');col=ts.getColumnData(c.table,c.headers,colId);state=ts.getData($header,col,'columnSelector');if(isNaN(priority)&&priority.length>0||state==='disable'||(wo.columnSelector_columns[colId]&&wo.columnSelector_columns[colId]==='disable')){colSel.states[colId]=null;continue}
colSel.states[colId]=saved&&(typeof saved[colId]!=='undefined'&&saved[colId]!==null)?saved[colId]:(typeof wo.columnSelector_columns[colId]!=='undefined'&&wo.columnSelector_columns[colId]!==null)?wo.columnSelector_columns[colId]:(state==='true'||state!=='false');colSel.$column[colId]=$(this);if($container.length){name=$header.attr(wo.columnSelector_name)||$header.text().trim();if(typeof wo.columnSelector_layoutCustomizer==='function'){$el=$header.find('.'+ts.css.headerIn);name=wo.columnSelector_layoutCustomizer($el.length?$el:$header,name,parseInt(colId,10))}
colSel.$wrapper[colId]=$(wo.columnSelector_layout.replace(/\{name\}/g,name)).appendTo($container);colSel.$checkbox[colId]=colSel.$wrapper[colId].find('input').add(colSel.$wrapper[colId].filter('input')).attr('data-column',colId).toggleClass(wo.columnSelector_cssChecked,colSel.states[colId]).prop('checked',colSel.states[colId]).on('change',function(){if(!colSel.isInitializing){var colId=$(this).attr('data-column');if(tsColSel.checkChange(c,this.checked)){c.selector.states[colId]=this.checked;tsColSel.updateCols(c,wo)}else{this.checked=!this.checked;return!1}}}).change()}}},checkChange:function(c,checked){var wo=c.widgetOptions,max=wo.columnSelector_maxVisible,min=wo.columnSelector_minVisible,states=c.selector.states,indx=states.length,count=0;while(indx-->=0){if(states[indx]){count++}}
if((checked&max!==null&&count>=max)||(!checked&&min!==null&&count<=min)){return!1}
return!0},setupBreakpoints:function(c,wo){var colSel=c.selector;if(wo.columnSelector_mediaquery){colSel.lastIndex=-1;tsColSel.updateBreakpoints(c,wo);c.$table.off('updateAll'+namespace).on('updateAll'+namespace,function(){tsColSel.setupSelector(c,wo);tsColSel.setupBreakpoints(c,wo);tsColSel.updateBreakpoints(c,wo);tsColSel.updateCols(c,wo)})}
if(colSel.$container.length){if(wo.columnSelector_mediaquery){colSel.$auto=$(wo.columnSelector_layout.replace(/\{name\}/g,wo.columnSelector_mediaqueryName)).prependTo(colSel.$container);colSel.$auto.find('input').add(colSel.$auto.filter('input')).attr('data-column','auto').prop('checked',colSel.auto).toggleClass(wo.columnSelector_cssChecked,colSel.auto).on('change',function(){tsColSel.updateAuto(c,wo,$(this))}).change()}
c.$table.off('update'+namespace).on('update'+namespace,function(){tsColSel.updateCols(c,wo)})}},updateAuto:function(c,wo,$el){var colSel=c.selector;colSel.auto=$el.prop('checked')||!1;$.each(colSel.$checkbox,function(i,$cb){if($cb){$cb[0].disabled=colSel.auto;colSel.$wrapper[i].toggleClass('disabled',colSel.auto)}});if(wo.columnSelector_mediaquery){tsColSel.updateBreakpoints(c,wo)}
tsColSel.updateCols(c,wo);if(c.selector.$popup){c.selector.$popup.find('.tablesorter-column-selector').html(colSel.$container.html()).find('input').each(function(){var indx=$(this).attr('data-column');$(this).prop('checked',indx==='auto'?colSel.auto:colSel.states[indx])})}
tsColSel.saveValues(c,wo);tsColSel.adjustColspans(c,wo);if(colSel.auto){c.$table.triggerHandler(wo.columnSelector_updated)}},addSelectors:function(wo,prefix,column){var array=[],temp=' col:nth-child('+column+')';array.push(prefix+temp+','+prefix+'_extra_table'+temp);temp=' tr:not(.'+wo.columnSelector_classHasSpan+') th[data-column="'+(column-1)+'"]';array.push(prefix+temp+','+prefix+'_extra_table'+temp);temp=' tr:not(.'+wo.columnSelector_classHasSpan+') td:nth-child('+column+')';array.push(prefix+temp+','+prefix+'_extra_table'+temp);temp=' tr td:not('+prefix+wo.columnSelector_classHasSpan+')[data-column="'+(column-1)+'"]';array.push(prefix+temp+','+prefix+'_extra_table'+temp);return array},updateBreakpoints:function(c,wo){var priority,col,column,breaks,isHidden=[],colSel=c.selector,prefix=c.namespace+'columnselector',mediaAll=[],breakpts='';if(wo.columnSelector_mediaquery&&!colSel.auto){colSel.$breakpoints.prop('disabled',!0);colSel.$style.prop('disabled',!1);return}
if(wo.columnSelector_mediaqueryHidden){for(column=0;column<c.columns;column++){col=ts.getColumnData(c.table,c.headers,column);isHidden[column+1]=ts.getData(c.$headerIndexed[column],col,'columnSelector')==='false';if(isHidden[column+1]){mediaAll=mediaAll.concat(tsColSel.addSelectors(wo,prefix,column+1))}}}
for(priority=0;priority<wo.columnSelector_maxPriorities;priority++){breaks=[];c.$headers.filter('['+wo.columnSelector_priority+'='+(priority+1)+']').each(function(){column=parseInt($(this).attr('data-column'),10)+1;if(!isHidden[column]){breaks=breaks.concat(tsColSel.addSelectors(wo,prefix,column))}});if(breaks.length){mediaAll=mediaAll.concat(breaks);breakpts+=tsColSel.queryBreak.replace(/\[size\]/g,wo.columnSelector_breakpoints[priority]).replace(/\[columns\]/g,breaks.join(','))}}
if(colSel.$style){colSel.$style.prop('disabled',!0)}
if(mediaAll.length){colSel.$breakpoints.prop('disabled',!1).text(tsColSel.queryAll.replace(/\[columns\]/g,mediaAll.join(','))+breakpts)}},updateCols:function(c,wo){if(wo.columnSelector_mediaquery&&c.selector.auto||c.selector.isInitializing){return}
var column,colSel=c.selector,styles=[],prefix=c.namespace+'columnselector';colSel.$container.find('input[data-column]').filter('[data-column!="auto"]').each(function(){if(!this.checked){column=parseInt($(this).attr('data-column'),10)+1;styles=styles.concat(tsColSel.addSelectors(wo,prefix,column))}
$(this).toggleClass(wo.columnSelector_cssChecked,this.checked)});if(wo.columnSelector_mediaquery){colSel.$breakpoints.prop('disabled',!0)}
if(colSel.$style){colSel.$style.prop('disabled',!1).text(styles.length?styles.join(',')+' { display: none; }':'')}
tsColSel.saveValues(c,wo);tsColSel.adjustColspans(c,wo);c.$table.triggerHandler(wo.columnSelector_updated)},setUpColspan:function(c,wo){var index,span,nspace,$window=$(window),hasSpans=!1,$cells=c.$table.add($(c.namespace+'_extra_table')).children().children('tr').children('th, td'),len=$cells.length;for(index=0;index<len;index++){span=$cells[index].colSpan;if(span>1){hasSpans=!0;$cells.eq(index).addClass(c.namespace.slice(1)+'columnselector'+wo.columnSelector_classHasSpan).attr('data-col-span',span);ts.computeColumnIndex($cells.eq(index).parent().addClass(wo.columnSelector_classHasSpan))}}
if(hasSpans&&wo.columnSelector_mediaquery){nspace=c.namespace+'columnselector';$window.off(nspace).on('resize'+nspace,ts.window_resize).on('resizeEnd'+nspace,function(){$window.off('resize'+nspace,ts.window_resize);tsColSel.adjustColspans(c,wo);$window.on('resize'+nspace,ts.window_resize)})}},findHeaders:function(c){var indx,$temp,sel='.'+ts.css.scrollerHeader+' thead > tr > ',$headers=$(sel+'th,'+sel+'td'),result=[];for(indx=0;indx<c.columns;indx++){$temp=$headers.filter('[data-column="'+indx+'"]');result[indx]=$temp.length?$temp.not('.sorter-false').length?$temp.not('.sorter-false').filter(':last'):$temp.filter(':last'):$()}
return result},adjustColspans:function(c,wo){var index,cols,col,span,end,$cell,colSel=c.selector,filtered=wo.filter_filteredRow||'filtered',autoModeOn=wo.columnSelector_mediaquery&&colSel.auto,$headers=c.$table.children('thead, tfoot').children().children().add($(c.namespace+'_extra_table').children('thead, tfoot').children().children()).add(c.$table.find('.group-header').children()),len=$headers.length,$headerIndexed=ts.hasWidget(c.table,'scroller')?tsColSel.findHeaders(c):c.$headerIndexed;for(index=0;index<len;index++){$cell=$headers.eq(index);col=parseInt($cell.attr('data-column'),10)||$cell[0].cellIndex;span=parseInt($cell.attr('data-col-span'),10)||1;end=col+span;if(span>1){for(cols=col;cols<end;cols++){if(!autoModeOn&&colSel.states[cols]===!1||autoModeOn&&$headerIndexed[cols]&&!$headerIndexed[cols].is(':visible')){span--}}
if(span){$cell.removeClass(filtered)[0].colSpan=span}else{$cell.addClass(filtered)}}else if(typeof colSel.states[col]!=='undefined'&&colSel.states[col]!==null){$cell.toggleClass(filtered,!autoModeOn&&!colSel.states[col])}}},saveValues:function(c,wo){if(wo.columnSelector_saveColumns&&ts.storage){var colSel=c.selector;ts.storage(c.$table[0],'tablesorter-columnSelector-auto',{auto:colSel.auto});ts.storage(c.$table[0],'tablesorter-columnSelector',colSel.states)}},attachTo:function(table,elm){table=$(table)[0];var colSel,wo,indx,c=table.config,$popup=$(elm);if($popup.length&&c){if(!$popup.find('.tablesorter-column-selector').length){$popup.append('<span class="tablesorter-column-selector"></span>')}
colSel=c.selector;wo=c.widgetOptions;$popup.find('.tablesorter-column-selector').html(colSel.$container.html()).find('input').each(function(){var indx=$(this).attr('data-column'),isChecked=indx==='auto'?colSel.auto:colSel.states[indx];$(this).toggleClass(wo.columnSelector_cssChecked,isChecked).prop('checked',isChecked)});colSel.$popup=$popup.on('change','input',function(){if(!colSel.isInitializing){if(tsColSel.checkChange(c,this.checked)){indx=$(this).toggleClass(wo.columnSelector_cssChecked,this.checked).attr('data-column');colSel.$container.find('input[data-column="'+indx+'"]').prop('checked',this.checked).trigger('change')}else{this.checked=!this.checked;return!1}}})}}};ts.window_resize=function(){if(ts.timer_resize){clearTimeout(ts.timer_resize)}
ts.timer_resize=setTimeout(function(){$(window).trigger('resizeEnd')},250)};ts.addWidget({id:'columnSelector',priority:10,options:{columnSelector_container:null,columnSelector_columns:{},columnSelector_saveColumns:!0,columnSelector_layout:'<label><input type="checkbox">{name}</label>',columnSelector_layoutCustomizer:null,columnSelector_name:'data-selector-name',columnSelector_mediaquery:!0,columnSelector_mediaqueryName:'Auto: ',columnSelector_mediaqueryState:!0,columnSelector_mediaqueryHidden:!1,columnSelector_maxVisible:null,columnSelector_minVisible:null,columnSelector_breakpoints:['20em','30em','40em','50em','60em','70em'],columnSelector_maxPriorities:6,columnSelector_priority:'data-priority',columnSelector_cssChecked:'checked',columnSelector_classHasSpan:'hasSpan',columnSelector_updated:'columnUpdate'},init:function(table,thisWidget,c,wo){tsColSel.init(table,c,wo)},remove:function(table,c,wo,refreshing){var csel=c.selector;if(refreshing||!csel){return}
if(csel){csel.$container.empty()}
if(csel.$popup){csel.$popup.empty()}
csel.$style.remove();csel.$breakpoints.remove();$(c.namespace+'columnselector'+wo.columnSelector_classHasSpan).removeClass(wo.filter_filteredRow||'filtered');c.$table.find('[data-col-span]').each(function(indx,el){var $el=$(el);$el.attr('colspan',$el.attr('data-col-span'))});c.$table.off('updateAll'+namespace+' update'+namespace)}})})(jQuery);
/* rank:50standard - minify:ok. vendor_bundled/vendor/mottie/tablesorter/js/parsers/parser-input-select.js */
(function($){'use strict';var updateServer=function(){};$.tablesorter.addParser({id:'inputs',is:function(){return!1},format:function(txt,table,cell){var $input=$(cell).find('input');return $input.length?$input.val():txt},parsed:!0,type:'text'});$.tablesorter.addParser({id:'inputs-numeric',is:function(){return!1},format:function(txt,table,cell){var $input=$(cell).find('input');var val=$input.length?$input.val():txt,num=$.tablesorter.formatFloat((val||'').replace(/[^\w,. \-()]/g,''),table);return txt&&typeof num==='number'?num:txt?$.trim(txt&&table.config.ignoreCase?txt.toLocaleLowerCase():txt):txt},parsed:!0,type:'numeric'});$.tablesorter.addParser({id:'checkbox',is:function(){return!1},format:function(txt,table,cell){var $cell=$(cell),wo=table.config.widgetOptions,status=wo.group_checkbox?wo.group_checkbox:['checked','unchecked'],$input=$cell.find('input[type="checkbox"]'),isChecked=$input.length?$input[0].checked:'';return $input.length?status[isChecked?0:1]:txt},parsed:!0,type:'text'});$.tablesorter.addParser({id:'radio',is:function(){return!1},format:function(txt,table,cell){var $input=$(cell).find('input:checked');return $input.length?$input.val():txt},parsed:!0,type:'text'});$.tablesorter.addParser({id:'select',is:function(){return!1},format:function(txt,table,cell){var $select=$(cell).find('select');return $select.length?$select.val():txt},parsed:!0,type:'text'});$.tablesorter.addParser({id:'select-text',is:function(){return!1},format:function(txt,table,cell){var $select=$(cell).find('select');return $select.length?$select.find('option:selected').text()||'':txt},parsed:!0,type:'text'});$.tablesorter.addParser({id:'textarea',is:function(){return!1},format:function(txt,table,cell){var $textarea=$(cell).find('textarea');return $textarea.length?$textarea.val():txt},parsed:!0,type:'text'});$.tablesorter.defaults.checkboxClass='';$.tablesorter.defaults.checkboxVisible='';$(function(){if(!$.fn.on){return}
var toggleRowClass=function($row,checkboxClass,indx,isChecked){$row.toggleClass(checkboxClass+'-'+indx,isChecked);if(($row[0].className||'').match(checkboxClass+'-')){$row.addClass(checkboxClass)}else{$row.removeClass(checkboxClass)}},updateCheckbox=function($el,state){if($el.length&&$el[0].nodeName!=='INPUT'){$el=$el.find('input[type="checkbox"]')}
if($el.length){var ua=window.navigator.userAgent;if(state==='indeterminate'){$el.prop('checked',!(ua.indexOf('Trident/')>-1||ua.indexOf('Edge/')>-1));$el.prop('indeterminate',!0)}else{$el.prop('checked',state);$el.prop('indeterminate',!1)}}},updateHeaderCheckbox=function($table,checkboxClass){var $sticky,$rows=$table.children('tbody').children(':visible'),len=$rows.length,c=$table[0].config,wo=c&&c.widgetOptions,$headers=c&&c.$headers.add($(c.namespace+'_extra_headers'))||$table.children('thead'),hasSticky=wo&&wo.$sticky;$headers.find('input[type="checkbox"]').each(function(){if(hasSticky){$sticky=hasSticky.find('[data-column="'+column+'"]')}
var column=$(this).closest('td, th').attr('data-column'),vis=$rows.filter('.'+checkboxClass+'-'+column).length,allChecked=vis===len&&len>0;if(vis===0||allChecked){updateCheckbox($(this),allChecked);if($sticky){updateCheckbox($sticky,allChecked)}}else{updateCheckbox($(this),'indeterminate');if($sticky){updateCheckbox($sticky,'indeterminate')}}})};$('table').on('tablesorter-initialized updateComplete',function(){this.tablesorterBusy=!1;var namespace='.parser-forms';$(this).addClass(this.config.namespace.slice(1)).children('tbody').off(namespace).on('mouseleave'+namespace,function(event){if(event.target.nodeName==='TBODY'){$(':focus').blur()}}).on('focus'+namespace,'select, input:not([type=checkbox]), textarea',function(event){var $row=$(event.target).closest('tr'),c=$row.closest('table')[0].config;if(!c||c&&c.ignoreChildRow&&$row.hasClass(c.cssChildRow)){return}
$(this).data('ts-original-value',this.value)}).on('blur'+namespace,'input:not([type=checkbox]), textarea',function(event){var $row=$(event.target).closest('tr'),c=$row.closest('table')[0].config;if(!c||c&&c.ignoreChildRow&&$row.hasClass(c.cssChildRow)){return}
this.value=$(this).data('ts-original-value')}).on('change keyup '.split(' ').join(namespace+' '),'select, input, textarea',function(event){var $row=$(this).closest('tr'),c=$row.closest('table')[0].config;if(!c||c&&c.ignoreChildRow&&$row.hasClass(c.cssChildRow)){return}
if(event.which===27&&!(this.nodeName==='INPUT'&&this.type==='checkbox')){this.value=$(this).data('ts-original-value');return}
if(event.type==='change'||(event.type==='keyup'&&event.which===13&&(event.target.nodeName==='INPUT'||event.target.nodeName==='TEXTAREA'&&event.altKey))){var undef,checkboxClass,$target=$(event.target),isCheckbox=event.target.type==='checkbox',$cell=$target.closest('td'),indx=$cell[0].cellIndex,busy=c.table.tablesorterBusy,$hdr=c.$headerIndexed&&c.$headerIndexed[indx]||[],val=isCheckbox?event.target.checked:$target.val();if($.isEmptyObject(c)||busy!==!1){return}
if(isCheckbox){checkboxClass=c.checkboxClass||'checked';toggleRowClass($cell.closest('tr'),checkboxClass,indx,val);updateHeaderCheckbox(c.$table,checkboxClass)}
if($hdr.length&&($hdr.hasClass('parser-false')||($hdr.hasClass('sorter-false')&&$hdr.hasClass('filter-false')))||(event.type==='change'&&c.table.isUpdating)){return}
if(c&&val!==$target.data('ts-original-value')||isCheckbox){$target.data('ts-original-value',val);c.table.tablesorterBusy=!0;$.tablesorter.updateCell(c,$cell,undef,function(){updateServer(event,c.$table,$target);c.table.tablesorterBusy=!1})}}});if($(this).children('thead').find('input[type="checkbox"]')){$(this).off(namespace).on('tablesorter-ready'+namespace,function(){var checkboxClass,$table=$(this),c=$table.length&&$table[0].config;if(!$.isEmptyObject(c)){this.tablesorterBusy=!0;checkboxClass=c&&c.checkboxClass||'checked';updateHeaderCheckbox($table,checkboxClass);this.tablesorterBusy=!1}}).children('thead').add(this.config.widgetOptions.$sticky).off(namespace).on('click'+namespace+' change'+namespace,'input[type="checkbox"]',function(event){var c,undef,onlyVisible,column,$target,isParsed,checkboxClass,$checkbox=$(this),isChecked=this.checked,$table=$checkbox.closest('table'),isSticky=$table.length&&$table[0].className.match(/(tablesorter\w+)_extra_table/);if(isSticky){isSticky=isSticky[1];$table=$('.'+isSticky+':not(.'+isSticky+'_extra_table)')}
c=$table.length&&$table[0].config;if($table.length&&c&&!$table[0].tablesorterBusy){column=parseInt($checkbox.closest('td, th').attr('data-column'),10);isParsed=c.parsers[column].id==='checkbox';onlyVisible=c.checkboxVisible;$table[0].tablesorterBusy=!0;updateCheckbox($target=$table.children('tbody').children('tr'+(typeof onlyVisible==='undefined'||onlyVisible===!0?':visible':'')).children(':nth-child('+(column+1)+')'),isChecked);checkboxClass=c.checkboxClass||'checked';$target.each(function(){toggleRowClass($(this).closest('tr'),checkboxClass,column,isChecked)});if(isSticky){updateCheckbox($table.children('thead').find('[data-column="'+column+'"]'),isChecked)}else if(c.widgetOptions.$sticky){updateCheckbox(c.widgetOptions.$sticky.find('thead').find('[data-column="'+column+'"]'),isChecked)}
updateHeaderCheckbox($table,checkboxClass);if(isParsed){$.tablesorter.update(c,undef,function(){updateServer(event,$table,$target);$table[0].tablesorterBusy=!1})}else{updateServer(event,$table,$target);$table[0].tablesorterBusy=!1}
return!0}
return!1})}})})})(jQuery);
/* rank:50standard - minify:ok. vendor_bundled/vendor/mottie/tablesorter/js/widgets/widget-math.js */
(function($){'use strict';var ts=$.tablesorter,math={error:{0:'Infinity result: Divide by zero',1:'Need more than one element to make this calculation','undef':'No elements found'},invalid:function(c,name,errorIndex){console.warn(name,math.error[errorIndex]);return c&&c.widgetOptions.math_none||''},events:('tablesorter-initialized update updateAll updateRows addRows updateCell filterReset ').split(' ').join('.tsmath '),processText:function(c,$cell){var tmp,wo=c.widgetOptions,txt=ts.getElementText(c,$cell,math.getCellIndex($cell)),prefix=c.widgetOptions.math_prefix;if(wo.math_textAttr){txt=$cell.attr(wo.math_textAttr)||txt}
if(/</.test(prefix)){tmp=$('<div>'+prefix+'</div>').text().replace(/\{content\}/g,'').trim();txt=txt.replace(tmp,'')}
txt=ts.formatFloat(txt.replace(/[^\w,. \-()]/g,''),c.table)||0;return isNaN(txt)?0:txt},getRow:function(c,$el,hasFilter){var $cells,wo=c.widgetOptions,arry=[],$row=$el.closest('tr'),isFiltered=$row.hasClass(wo.filter_filteredRow||'filtered');if(hasFilter){$row=$row.filter(hasFilter)}
if(hasFilter||!isFiltered){$cells=$row.children().not('['+wo.math_dataAttrib+'=ignore]');if(wo.math_ignore.length){$cells=$cells.filter(function(){return $.inArray(math.getCellIndex($(this)),wo.math_ignore)===-1})}
arry=$cells.not($el).map(function(){return math.processText(c,$(this))}).get()}
return arry},getColumn:function(c,$el,type,hasFilter){var index,$t,$tr,len,$mathRows,mathAbove,wo=c.widgetOptions,arry=[],$row=$el.closest('tr'),mathAttr=wo.math_dataAttrib,mathIgnore='['+mathAttr+'=ignore]',filtered=wo.filter_filteredRow||'filtered',cIndex=math.getCellIndex($el),$rows=c.$table.children('tbody').children(),mathAttrs=['['+mathAttr+'^=above]','['+mathAttr+'^=below]','['+mathAttr+'^=col]','['+mathAttr+'^=all]'];if(type==='above'){len=$rows.index($row);index=len;while(index>=0){$tr=$rows.eq(index);mathAbove=$tr.children().filter(mathAttrs[0]).length;if(hasFilter){$tr=$tr.filter(hasFilter)}
$t=$tr.children().filter(function(){return math.getCellIndex($(this))===cIndex});if(((hasFilter||!$tr.hasClass(filtered))&&$tr.not(mathIgnore).length&&index!==len)||mathAbove&&index!==len){if(mathAbove){index=0}else if($t.length&&$t.not(mathIgnore).length){arry[arry.length]=math.processText(c,$t)}}
index--}}else if(type==='below'){len=$rows.length;for(index=$rows.index($row)+1;index<len;index++){$tr=$rows.eq(index);if($tr.children().filter(mathAttrs[1]).length){break}
if(hasFilter){$tr=$tr.filter(hasFilter)}
$t=$tr.children().filter(function(){return math.getCellIndex($(this))===cIndex});if((hasFilter||!$tr.hasClass(filtered))&&$tr.not(mathIgnore).length&&$t.length&&$t.not(mathIgnore)){arry[arry.length]=math.processText(c,$t)}}}else{$mathRows=$rows.not(mathIgnore);len=$mathRows.length;for(index=0;index<len;index++){$tr=$mathRows.eq(index);if(hasFilter){$tr=$tr.filter(hasFilter)}
$t=$tr.children().filter(function(){return math.getCellIndex($(this))===cIndex});if((hasFilter||!$tr.hasClass(filtered))&&$t.not(mathAttrs.join(',')).length&&!$t.is($el)&&$t.not(mathIgnore).length){arry[arry.length]=math.processText(c,$t)}}}
return arry},getAll:function(c,hasFilter){var $t,col,$row,rowIndex,rowLen,$cells,cellIndex,cellLen,arry=[],wo=c.widgetOptions,mathAttr=wo.math_dataAttrib,mathIgnore='['+mathAttr+'=ignore]',filtered=wo.filter_filteredRow||'filtered',$rows=c.$table.children('tbody').children().not(mathIgnore);rowLen=$rows.length;for(rowIndex=0;rowIndex<rowLen;rowIndex++){$row=$rows.eq(rowIndex);if(hasFilter){$row=$row.filter(hasFilter)}
if(hasFilter||!$row.hasClass(filtered)){$cells=$row.children().not(mathIgnore);cellLen=$cells.length;for(cellIndex=0;cellIndex<cellLen;cellIndex++){$t=$cells.eq(cellIndex);col=math.getCellIndex($t);if(!$t.filter('['+mathAttr+']').length&&$.inArray(col,wo.math_ignore)<0){arry[arry.length]=math.processText(c,$t)}}}}
return arry},setColumnIndexes:function(c){var $table=c.$table,last=1,$rows=$table.children('tbody').children().filter(function(){var cells,indx,$this=$(this),include=$this.children('[colspan]').length>0;if(last>1){last--;include=!0}else if(last<1){last=1}
if($this.children('[rowspan]').length>0){cells=this.cells;for(indx=0;indx<cells.length;indx++){last=Math.max(cells[indx].rowSpan,last)}}
return include});ts.computeColumnIndex($rows,c)},getCellIndex:function($cell){var indx=$cell.attr('data-column');return typeof indx==='undefined'?$cell[0].cellIndex:parseInt(indx,10)},recalculate:function(c,wo,init){if(c&&(!wo.math_isUpdating||init)){var time,mathAttr,$mathCells,indx,len,changed=!1,filters={};if(c.debug||wo.math_debug){time=new Date()}
if(init){math.setColumnIndexes(c)}
wo.math_dataAttrib='data-'+(wo.math_data||'math');mathAttr=wo.math_dataAttrib;$mathCells=c.$tbodies.children('tr').children('['+mathAttr+']');changed=math.mathType(c,$mathCells,wo.math_priority)||changed;$mathCells=c.$table.children('.'+c.cssInfoBlock+', tfoot').children('tr').children('['+mathAttr+']');math.mathType(c,$mathCells,wo.math_priority);$mathCells=c.$table.children().children('tr').children('['+mathAttr+'^=all]');len=$mathCells.length;for(indx=0;indx<len;indx++){var $cell=$mathCells.eq(indx),filter=$cell.attr(mathAttr+'-filter')||wo.math_rowFilter;filters[filter]=filters[filter]?filters[filter].add($cell):$cell}
$.each(filters,function(hasFilter,$cells){changed=math.mathType(c,$cells,['all'],hasFilter)||changed});if(changed){wo.math_isUpdating=!0;if(c.debug||wo.math_debug){console[console.group?'group':'log']('Math widget updating the cache after recalculation')}
ts.updateCache(c,function(){math.updateComplete(c);if(!init&&typeof wo.math_completed==='function'){wo.math_completed(c)}
if(c.debug||wo.math_debug){console.log('Math widget update completed'+ts.benchmark(time))}})}else{if(!init&&typeof wo.math_completed==='function'){wo.math_completed(c)}
if(c.debug||wo.math_debug){console.log('Math widget found no changes in data'+ts.benchmark(time))}}}},updateComplete:function(c){var wo=c.widgetOptions;if(wo.math_isUpdating&&(c.debug||wo.math_debug)&&console.groupEnd){console.groupEnd()}
wo.math_isUpdating=!1},mathType:function(c,$cells,priority,hasFilter){if($cells.length){var getAll,changed=!1,wo=c.widgetOptions,mathAttr=wo.math_dataAttrib,equations=ts.equations;if(priority[0]==='all'){getAll=math.getAll(c,hasFilter)}
if(c.debug||wo.math_debug){console[console.group?'group':'log']('Tablesorter Math widget recalculation')}
$.each(priority,function(i,type){var index,arry,formula,result,$el,$targetCells=$cells.filter('['+mathAttr+'^='+type+']'),len=$targetCells.length;if(len){if(c.debug||wo.math_debug){console[console.group?'group':'log'](type)}
for(index=0;index<len;index++){$el=$targetCells.eq(index);if($el.parent().hasClass(wo.filter_filteredRow||'filtered')){continue}
hasFilter=$el.attr(mathAttr+'-filter')||wo.math_rowFilter;formula=($el.attr(mathAttr)||'').replace(type+'-','');arry=(type==='row')?math.getRow(c,$el,hasFilter):(type==='all')?getAll:math.getColumn(c,$el,type,hasFilter);if(equations[formula]){if(arry.length){result=equations[formula](arry,c);if(c.debug||wo.math_debug){console.log($el.attr(mathAttr),hasFilter?'("'+hasFilter+'")':'',arry,'=',result)}}else{result=math.invalid(c,formula,formula==='mean'?0:'undef')}
changed=math.output($el,c,result,arry)||changed}}
if((c.debug||wo.math_debug)&&console.groupEnd){console.groupEnd()}}});if((c.debug||wo.math_debug)&&console.groupEnd){console.groupEnd()}
return changed}
return!1},output:function($cell,c,value,arry){var $el,wo=c.widgetOptions,changed=!1,prev=$cell.html(),mask=$cell.attr('data-'+wo.math_data+'-mask')||wo.math_mask,target=$cell.attr('data-'+wo.math_data+'-target')||'',result=ts.formatMask(mask,value,wo.math_prefix,wo.math_suffix);if(target){$el=$cell.find(target);if($el.length){$cell=$el}}
if(typeof wo.math_complete==='function'){result=wo.math_complete($cell,wo,result,value,arry)}
if(result!==!1){changed=prev!==result;$cell.html(result)}
if(changed){$el=$cell.closest('tbody');if(!$el.length||$el.hasClass(c.cssInfoBlock)||$el.parent()[0]!==c.table){return!1}}
return changed}};ts.formatMask=function(mask,val,tmpPrefix,tmpSuffix){if(!mask||isNaN(+val)){return val}
var isNegative,result,decimal,group,posLeadZero,posTrailZero,posSeparator,part,szSep,integer,str,offset,index,end,inv,suffix='',len=mask.length,start=mask.search(/[0-9\-\+#]/),tmp=start>0?mask.substring(0,start):'',prefix=tmp;if(tmpPrefix){if(/\{content\}/.test(tmpPrefix||'')){prefix=(tmpPrefix||'').replace(/\{content\}/g,tmp||'')}else{prefix=(tmpPrefix||'')+tmp}}
inv=mask.split('').reverse().join('');end=inv.search(/[0-9\-\+#]/);index=len-end;index+=(mask.substring(index,index+1)==='.')?1:0;tmp=end>0?mask.substring(index,len):'';suffix=tmp;if(tmpSuffix){if(/\{content\}/.test(tmpSuffix||'')){suffix=(tmpSuffix||'').replace(/\{content\}/g,tmp||'')}else{suffix=tmp+(tmpSuffix||'')}}
mask=mask.substring(start,index);val=mask.charAt(0)==='-'?-val:+val;isNegative=val<0?val=-val:0;result=mask.match(/[^\d\-\+#]/g);decimal=(result&&result[result.length-1])||'.';group=(result&&result[1]&&result[0])||',';mask=mask.split(decimal);val=val.toFixed(mask[1]&&mask[1].length);val=+(val)+'';posTrailZero=mask[1]&&mask[1].lastIndexOf('0');part=val.split('.');if(!part[1]||(part[1]&&part[1].length<=posTrailZero)){val=(+val).toFixed(posTrailZero+1)}
szSep=mask[0].split(group);mask[0]=szSep.join('');posLeadZero=mask[0]&&mask[0].indexOf('0');if(posLeadZero>-1){while(part[0].length<(mask[0].length-posLeadZero)){part[0]='0'+part[0]}}else if(+part[0]===0){part[0]=''}
val=val.split('.');val[0]=part[0];posSeparator=(szSep[1]&&szSep[szSep.length-1].length);if(posSeparator){integer=val[0];str='';offset=integer.length%posSeparator;len=integer.length;for(index=0;index<len;index++){str+=integer.charAt(index);if(!((index-offset+1)%posSeparator)&&index<len-posSeparator){str+=group}}
val[0]=str}
val[1]=(mask[1]&&val[1])?decimal+val[1]:'';return prefix+((isNegative?'-':'')+val[0]+val[1])+suffix};ts.equations={count:function(arry){return arry.length},sum:function(arry){var index,len=arry.length,total=0;for(index=0;index<len;index++){total+=arry[index]}
return total},mean:function(arry){var total=ts.equations.sum(arry);return total/arry.length},median:function(arry,c){var half,len=arry.length;if(len>1){arry.sort(function(a,b){return a-b});half=Math.floor(len/2);return(len%2)?arry[half]:(arry[half-1]+arry[half])/2}
return math.invalid(c,'median',1)},mode:function(arry){var index,el,m,modeMap={},maxCount=1,modes=[arry[0]];for(index=0;index<arry.length;index++){el=arry[index];modeMap[el]=modeMap[el]?modeMap[el]+1:1;m=modeMap[el];if(m>maxCount){modes=[el];maxCount=m}else if(m===maxCount){modes[modes.length]=el;maxCount=m}}
return modes.sort(function(a,b){return a-b})},max:function(arry){return Math.max.apply(Math,arry)},min:function(arry){return Math.min.apply(Math,arry)},range:function(arry){var v=arry.sort(function(a,b){return a-b});return v[arry.length-1]-v[0]},variance:function(arry,population,c){var divisor,avg=ts.equations.mean(arry),v=0,i=arry.length;while(i--){v+=Math.pow((arry[i]-avg),2)}
divisor=(arry.length-(population?0:1));if(divisor===0){return math.invalid(c,'variance',0)}
v/=divisor;return v},varp:function(arry,c){return ts.equations.variance(arry,!0,c)},vars:function(arry,c){return ts.equations.variance(arry,!1,c)},stdevs:function(arry,c){var vars=ts.equations.variance(arry,!1,c);return Math.sqrt(vars)},stdevp:function(arry,c){var varp=ts.equations.variance(arry,!0,c);return Math.sqrt(varp)}};ts.addWidget({id:'math',priority:100,options:{math_data:'math',math_debug:!1,math_ignore:[],math_mask:'#,##0.00',math_complete:null,math_completed:function(){},math_priority:['row','above','below','col'],math_prefix:'',math_suffix:'',math_textAttr:'',math_none:'N/A',math_event:'recalculate',math_rowFilter:''},init:function(table,thisWidget,c,wo){var update=(ts.hasWidget(table,'filter')?'filterEnd':'updateComplete')+'.tsmath';math.events+=(ts.hasWidget(table,'pager')?'pagerComplete':'filterEnd')+'.tsmath ';c.$table.off((math.events+'updateComplete.tsmath '+wo.math_event).replace(/\s+/g,' ')).on(math.events+wo.math_event,function(e){if(!this.hasInitialized){return}
var init=e.type==='tablesorter-initialized';if(!wo.math_isUpdating||init){if(!/filter/.test(e.type)&&!init){math.setColumnIndexes(c)}
math.recalculate(c,wo,init)}}).on(update,function(){setTimeout(function(){math.updateComplete(c)},40)});wo.math_isUpdating=!1;if(table.hasInitialized){math.recalculate(c,wo,!0)}},remove:function(table,c,wo,refreshing){if(refreshing){return}
c.$table.off((math.events+' updateComplete.tsmath '+wo.math_event).replace(/\s+/g,' ')).children().children('tr').children('[data-'+wo.math_data+']').empty()}})})(jQuery);
/* rank:50standard - minify:ok. vendor_bundled/vendor/mottie/tablesorter/js/widgets/widget-sort2Hash.js */
(function($){'use strict';var ts=$.tablesorter||{},s2h=ts.sort2Hash={init:function(c,wo){var filter,temp,page,size,table=c.table,pager=c.pager,hasSaveSort=ts.hasWidget(table,'saveSort'),sort=s2h.decodeHash(c,wo,'sort');if((sort&&!hasSaveSort)||(sort&&hasSaveSort&&wo.sort2Hash_overrideSaveSort)){s2h.convertString2Sort(c,wo,sort)}
if(ts.hasWidget(c.table,'pager')){temp=parseInt(s2h.decodeHash(c,wo,'page'),10);page=pager.page=(temp<0?0:(temp>pager.totalPages?pager.totalPages-1:temp));size=pager.size=parseInt(s2h.decodeHash(c,wo,'size'),10)}
if(ts.hasWidget(table,'filter')){filter=s2h.decodeHash(c,wo,'filter');if(filter){filter=filter.split(wo.sort2Hash_separator);c.$table.one('tablesorter-ready',function(){setTimeout(function(){c.$table.one('filterEnd',function(){$(this).triggerHandler('pageAndSize',[page,size])});if(ts.filter.equalFilters){temp=ts.filter.equalFilters(c,c.lastSearch,filter)}else{temp=(c.lastSearch||[]).join('')!==(filter||[]).join('')}
if(!temp){$.tablesorter.setFilters(table,filter,!0)}},100)})}}
if(!filter){c.$table.one('tablesorter-ready',function(){c.$table.triggerHandler('pageAndSize',[page,size])})}
c.$table.on('sortEnd.sort2hash filterEnd.sort2hash pagerComplete.sort2Hash',function(){if(this.hasInitialized){s2h.setHash(this.config,this.config.widgetOptions)}})},getTableId:function(c,wo){return wo.sort2Hash_tableId||c.table.id||'table'+$('table').index(c.$table)},regexEscape:function(v){return v.replace(/([\.\^\$\*\+\-\?\(\)\[\]\{\}\\\|])/g,'\\$1')},convertString2Sort:function(c,wo,sortHash){var regex,column,direction,temp,index,$cell,arry=sortHash.split(wo.sort2Hash_separator),indx=0,len=arry.length,sort=[];while(indx<len){column=arry[indx++];temp=parseInt(column,10);if(isNaN(temp)||temp>c.columns){regex=new RegExp('('+s2h.regexEscape(column)+')','i');for(index=0;index<c.columns;index++){$cell=c.$headerIndexed[index];if(regex.test($cell.attr(wo.sort2Hash_headerTextAttr))){column=index;index=c.columns}}}
direction=arry[indx++];if(typeof column!=='undefined'&&typeof direction!=='undefined'){if(isNaN(direction)){direction=direction.indexOf(wo.sort2Hash_directionText[1])>-1?1:0}
sort.push([column,direction])}}
if(sort.length){c.sortList=sort}},convertSort2String:function(c,wo){var index,txt,column,direction,sort=[],arry=c.sortList||[],len=arry.length;for(index=0;index<len;index++){column=arry[index][0];txt=$.trim(c.$headerIndexed[column].attr(wo.sort2Hash_headerTextAttr));sort.push(txt!==''?encodeURIComponent(txt):column);direction=wo.sort2Hash_directionText[arry[index][1]];sort.push(direction)}
return sort.join(wo.sort2Hash_separator)},convertFilter2String:function(c,wo){var index,txt,column,direction,sort=[],arry=c.sortList||[],len=arry.length;for(index=0;index<len;index++){column=arry[index][0];txt=$.trim(c.$headerIndexed[column].attr(wo.sort2Hash_headerTextAttr));column=typeof txt!=='undefined'?encodeURIComponent(txt):column;sort.push(column);direction=wo.sort2Hash_directionText[arry[index][1]];sort.push(direction)}
return sort.join(wo.sort2Hash_separator)},getParam:function(name,hash,returnRegex){if(!hash){hash=window.location.hash}
var regex=new RegExp('[\\?&]'+s2h.regexEscape(name)+'=([^&#]*)'),match=regex.exec(hash);if(returnRegex){return regex}
return match===null?'':decodeURIComponent(match[1])},removeParam:function(name,hash){if(!hash){hash=window.location.hash}
var index,regex=s2h.getParam(name,hash,!0),result=[],parts=hash.split('&'),len=parts.length;for(index=0;index<len;index++){if(!regex.test('&'+parts[index])){result.push(parts[index])}}
return result.length?result.join('&'):''},encodeHash:function(c,wo,component,value,rawValue){var result=!1,tableId=s2h.getTableId(c,wo);if(typeof wo.sort2Hash_encodeHash==='function'){result=wo.sort2Hash_encodeHash(c,tableId,component,value,rawValue||value)}
if(result===!1){result='&'+component+'['+tableId+']='+value}
return result},decodeHash:function(c,wo,component){var result=!1,tableId=s2h.getTableId(c,wo);if(typeof wo.sort2Hash_decodeHash==='function'){result=wo.sort2Hash_decodeHash(c,tableId,component)}
if(result===!1){result=s2h.getParam(component+'['+tableId+']')}
return result||''},cleanHash:function(c,wo,component,hash){var result=!1,tableId=s2h.getTableId(c,wo);if(typeof wo.sort2Hash_cleanHash==='function'){result=wo.sort2Hash_cleanHash(c,tableId,component,hash)}
if(result===!1){result=s2h.removeParam(component+'['+tableId+']',hash)}
return result||''},setHash:function(c,wo){var str='',hash=window.location.hash,hasPager=ts.hasWidget(c.table,'pager'),hasFilter=ts.hasWidget(c.table,'filter'),sortList=s2h.convertSort2String(c,wo),filters=(hasFilter&&c.lastSearch.join('')!==''?c.lastSearch:[]),filtersStr=encodeURIComponent(filters.join(c.widgetOptions.sort2Hash_separator)),components={'sort':sortList?s2h.encodeHash(c,wo,'sort',sortList,c.sortList):'','page':hasPager?s2h.encodeHash(c,wo,'page',c.pager.page+1):'','size':hasPager?s2h.encodeHash(c,wo,'size',c.pager.size):'','filter':filtersStr?s2h.encodeHash(c,wo,'filter',filtersStr,filters):''};$.each(components,function(component,value){hash=s2h.cleanHash(c,wo,component,hash);str+=value});var hashChar=wo.sort2Hash_hash;var newHash=((window.location.hash||'').replace(hashChar,'').length?hash:hashChar)+str;if(wo.sort2Hash_replaceHistory){var baseUrl=window.location.href.split(hashChar)[0];var firstChar=newHash[0];if(firstChar!==hashChar){newHash=hashChar+newHash}
window.location.replace(baseUrl+newHash)}else{window.location.hash=newHash}}};ts.addWidget({id:'sort2Hash',priority:60,options:{sort2Hash_hash:'#',sort2Hash_separator:'-',sort2Hash_headerTextAttr:'data-header',sort2Hash_directionText:[0,1],sort2Hash_overrideSaveSort:!1,sort2Hash_replaceHistory:!1,sort2Hash_tableId:null,sort2Hash_encodeHash:null,sort2Hash_decodeHash:null,sort2Hash_cleanHash:null},init:function(table,thisWidget,c,wo){s2h.init(c,wo)},remove:function(table,c){c.$table.off('.sort2hash')}})})(jQuery);
/* rank:50standard - minify:ok. lib/jquery_tiki/tablesorter.js */
function tsAjaxGetRows(data,id,addcol,total)
{var parsedpage=$.parseHTML(data),table=$(parsedpage).find(id),r={};r.rows=$(table).find('tbody tr');if(addcol){$.each(addcol,function(key,value){$(r.rows).append('<td data-tsmath="row-'+value.formula+'" data-tsmath-filter="*"></td >')})}
r.total=total;r.filteredRows=$(table).data('count');r.headers=null;return r}
function tsAjaxUrl(url,p,a){var vars={},urlparams,oneparam,sorts=!1,sortindex,sortkey='sort-',filterindex,filterkey='filter-',params=[],dir,offset,newurl;if(a.custom!==!1){urlparams=url.slice(url.indexOf('?')+1).split('&');for(var i=0;i<urlparams.length;i++){oneparam=urlparams[i].split('=');if(oneparam[0].search('sort')>-1){sortindex=parseInt(oneparam[0].substr(5,oneparam[0].length-6));if($.isNumeric(sortindex)){sortkey=a.colselector?sortkey+$(a.tableid+' th:eq('+sortindex+')').attr('id'):sortkey+sortindex;vars[sortkey]=oneparam[1]}}else if(oneparam[0].search('filter')>-1){filterindex=parseInt(oneparam[0].substr(7,oneparam[0].length-8));if($.isNumeric(filterindex)){filterkey=a.colselector?filterkey+$(a.tableid+' th:eq('+filterindex+')').attr('id'):filterkey+filterindex;vars[filterkey]=oneparam[1]}}}
$.each(vars,function(key,value){if(a.asort&&key in a.asort){dir=value==0?'_asc':'_desc';!sorts?sorts=a.asort[key]+dir:sorts+=','+a.asort[key]+dir}
if($.inArray(value,a.extfilters)>-1){params.push(decodeURIComponent(value))}else if($.isPlainObject(a.colfilters)&&key in a.colfilters){a.colfilters[key]==value?params.push(a.colfilters[key][value]):params.push(a.colfilters[key]+'='+value)}});if(sorts){params.push(a.sortparam+'='+sorts)}
if(a.requiredparams){$.each(a.requiredparams,function(key,value){params.push(key+'='+value)})}
offset=((p.page*p.size)>=p.filteredRows)?'':'&'+a.offset+'='+(p.page*p.size);newurl=url.slice(0,url.indexOf('?'));newurl=newurl+'?'+a.numrows+'='+p.size+offset+'&tsAjax=y';$.each(params,function(key,value){newurl=newurl+'&'+value})}else{offset=((p.page*p.size)>=p.filteredRows)?'':'&'+a.offset+'='+(p.page*p.size);newurl=url+'&tsAjax=y'+offset+'&numrows='+p.size}
return newurl};
/* rank:50standard - minify:ok. vendor_bundled/vendor/jquery/plugins/tagcanvas/jquery.tagcanvas.js */
(function($){"use strict";var i,j,abs=Math.abs,sin=Math.sin,cos=Math.cos,max=Math.max,min=Math.min,ceil=Math.ceil,sqrt=Math.sqrt,pow=Math.pow,hexlookup3={},hexlookup2={},hexlookup1={0:"0,",1:"17,",2:"34,",3:"51,",4:"68,",5:"85,",6:"102,",7:"119,",8:"136,",9:"153,",a:"170,",A:"170,",b:"187,",B:"187,",c:"204,",C:"204,",d:"221,",D:"221,",e:"238,",E:"238,",f:"255,",F:"255,"},Oproto,Tproto,TCproto,Mproto,Vproto,TSproto,TCVproto,doc=document,ocanvas,handlers={};for(i=0;i<256;++i){j=i.toString(16);if(i<16)
j='0'+j;hexlookup2[j]=hexlookup2[j.toUpperCase()]=i.toString()+','}
function Defined(d){return typeof d!='undefined'}
function IsObject(o){return typeof o=='object'&&o!=null}
function Clamp(v,mn,mx){return isNaN(v)?mx:min(mx,max(mn,v))}
function Nop(){return!1}
function TimeNow(){return new Date().valueOf()}
function SortList(l,f){var nl=[],tl=l.length,i;for(i=0;i<tl;++i)
nl.push(l[i]);nl.sort(f);return nl}
function Shuffle(a){var i=a.length-1,t,p;while(i){p=~~(Math.random()*i);t=a[i];a[i]=a[p];a[p]=t;--i}}
function Vector(x,y,z){this.x=x;this.y=y;this.z=z}
Vproto=Vector.prototype;Vproto.length=function(){return sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};Vproto.dot=function(v){return this.x*v.x+this.y*v.y+this.z*v.z};Vproto.cross=function(v){var x=this.y*v.z-this.z*v.y,y=this.z*v.x-this.x*v.z,z=this.x*v.y-this.y*v.x;return new Vector(x,y,z)};Vproto.angle=function(v){var dot=this.dot(v),ac;if(dot==0)
return Math.PI/2.0;ac=dot/(this.length()*v.length());if(ac>=1)
return 0;if(ac<=-1)
return Math.PI;return Math.acos(ac)};Vproto.unit=function(){var l=this.length();return new Vector(this.x/l,this.y/l,this.z/l)};function MakeVector(lg,lt){lt=lt*Math.PI/180;lg=lg*Math.PI/180;var x=sin(lg)*cos(lt),y=-sin(lt),z=-cos(lg)*cos(lt);return new Vector(x,y,z)}
function Matrix(a){this[1]={1:a[0],2:a[1],3:a[2]};this[2]={1:a[3],2:a[4],3:a[5]};this[3]={1:a[6],2:a[7],3:a[8]}}
Mproto=Matrix.prototype;Matrix.Identity=function(){return new Matrix([1,0,0,0,1,0,0,0,1])};Matrix.Rotation=function(angle,u){var sina=sin(angle),cosa=cos(angle),mcos=1-cosa;return new Matrix([cosa+pow(u.x,2)*mcos,u.x*u.y*mcos-u.z*sina,u.x*u.z*mcos+u.y*sina,u.y*u.x*mcos+u.z*sina,cosa+pow(u.y,2)*mcos,u.y*u.z*mcos-u.x*sina,u.z*u.x*mcos-u.y*sina,u.z*u.y*mcos+u.x*sina,cosa+pow(u.z,2)*mcos])}
Mproto.mul=function(m){var a=[],i,j,mmatrix=(m.xform?1:0);for(i=1;i<=3;++i)
for(j=1;j<=3;++j){if(mmatrix)
a.push(this[i][1]*m[1][j]+this[i][2]*m[2][j]+this[i][3]*m[3][j]);else a.push(this[i][j]*m)}
return new Matrix(a)};Mproto.xform=function(p){var a={},x=p.x,y=p.y,z=p.z;a.x=x*this[1][1]+y*this[2][1]+z*this[3][1];a.y=x*this[1][2]+y*this[2][2]+z*this[3][2];a.z=x*this[1][3]+y*this[2][3]+z*this[3][3];return a};function PointsOnSphere(n,xr,yr,zr,magic){var i,y,r,phi,pts=[],off=2/n,inc;inc=Math.PI*(3-sqrt(5)+(parseFloat(magic)?parseFloat(magic):0));for(i=0;i<n;++i){y=i*off-1+(off/2);r=sqrt(1-y*y);phi=i*inc;pts.push([cos(phi)*r*xr,y*yr,sin(phi)*r*zr])}
return pts}
function Cylinder(n,o,xr,yr,zr,magic){var phi,pts=[],off=2/n,inc,i,j,k,l;inc=Math.PI*(3-sqrt(5)+(parseFloat(magic)?parseFloat(magic):0));for(i=0;i<n;++i){j=i*off-1+(off/2);phi=i*inc;k=cos(phi);l=sin(phi);pts.push(o?[j*xr,k*yr,l*zr]:[k*xr,j*yr,l*zr])}
return pts}
function Ring(o,n,xr,yr,zr,j){var phi,pts=[],inc=Math.PI*2/n,i,k,l;for(i=0;i<n;++i){phi=i*inc;k=cos(phi);l=sin(phi);pts.push(o?[j*xr,k*yr,l*zr]:[k*xr,j*yr,l*zr])}
return pts}
function PointsOnCylinderV(n,xr,yr,zr,m){return Cylinder(n,0,xr,yr,zr,m)}
function PointsOnCylinderH(n,xr,yr,zr,m){return Cylinder(n,1,xr,yr,zr,m)}
function PointsOnRingV(n,xr,yr,zr,offset){offset=isNaN(offset)?0:offset*1;return Ring(0,n,xr,yr,zr,offset)}
function PointsOnRingH(n,xr,yr,zr,offset){offset=isNaN(offset)?0:offset*1;return Ring(1,n,xr,yr,zr,offset)}
function CentreImage(t){var i=new Image;i.onload=function(){var dx=i.width/2,dy=i.height/2;t.centreFunc=function(c,w,h,cx,cy){c.setTransform(1,0,0,1,0,0);c.globalAlpha=1;c.drawImage(i,cx-dx,cy-dy)}};i.src=t.centreImage}
function SetAlpha(c,a){var d=c,p1,p2,ae=(a*1).toPrecision(3)+')';if(c[0]==='#'){if(!hexlookup3[c])
if(c.length===4)
hexlookup3[c]='rgba('+hexlookup1[c[1]]+hexlookup1[c[2]]+hexlookup1[c[3]];else hexlookup3[c]='rgba('+hexlookup2[c.substr(1,2)]+hexlookup2[c.substr(3,2)]+hexlookup2[c.substr(5,2)];d=hexlookup3[c]+ae}else if(c.substr(0,4)==='rgb('||c.substr(0,4)==='hsl('){d=(c.replace('(','a(').replace(')',','+ae))}else if(c.substr(0,5)==='rgba('||c.substr(0,5)==='hsla('){p1=c.lastIndexOf(',')+1,p2=c.indexOf(')');a*=parseFloat(c.substring(p1,p2));d=c.substr(0,p1)+a.toPrecision(3)+')'}
return d}
function NewCanvas(w,h){if(window.G_vmlCanvasManager)
return null;var c=doc.createElement('canvas');c.width=w;c.height=h;return c}
function ShadowAlphaBroken(){var cv=NewCanvas(3,3),c,i;if(!cv)
return!1;c=cv.getContext('2d');c.strokeStyle='#000';c.shadowColor='#fff';c.shadowBlur=3;c.globalAlpha=0;c.strokeRect(2,2,2,2);c.globalAlpha=1;i=c.getImageData(2,2,1,1);cv=null;return(i.data[0]>0)}
function SetGradient(c,l,o,g){var gd=c.createLinearGradient(0,0,l,0),i;for(i in g)
gd.addColorStop(1-i,g[i]);c.fillStyle=gd;c.fillRect(0,o,l,1);}
function FindGradientColour(tc,p,r){var l=1024,h=1,gl=tc.weightGradient,cv,c,i,d;if(tc.gCanvas){c=tc.gCanvas.getContext('2d');h=tc.gCanvas.height}else{if(IsObject(gl[0]))
h=gl.length;else gl=[gl];tc.gCanvas=cv=NewCanvas(l,h);if(!cv)
return null;c=cv.getContext('2d');for(i=0;i<h;++i)
SetGradient(c,l,i,gl[i]);}
r=max(min(r||0,h-1),0);d=c.getImageData(~~((l-1)*p),r,1,1).data;return'rgba('+d[0]+','+d[1]+','+d[2]+','+(d[3]/255)+')'}
function TextSet(ctxt,font,colour,strings,padx,pady,shadowColour,shadowBlur,shadowOffsets,maxWidth,widths,align){var xo=padx+(shadowBlur||0)+(shadowOffsets.length&&shadowOffsets[0]<0?abs(shadowOffsets[0]):0),yo=pady+(shadowBlur||0)+(shadowOffsets.length&&shadowOffsets[1]<0?abs(shadowOffsets[1]):0),i,xc;ctxt.font=font;ctxt.textBaseline='top';ctxt.fillStyle=colour;shadowColour&&(ctxt.shadowColor=shadowColour);shadowBlur&&(ctxt.shadowBlur=shadowBlur);shadowOffsets.length&&(ctxt.shadowOffsetX=shadowOffsets[0],ctxt.shadowOffsetY=shadowOffsets[1]);for(i=0;i<strings.length;++i){xc=0;if(widths){if('right'==align){xc=maxWidth-widths[i]}else if('centre'==align){xc=(maxWidth-widths[i])/2}}
ctxt.fillText(strings[i],xo+xc,yo);yo+=parseInt(font)}}
function RRect(c,x,y,w,h,r,s){if(r){c.beginPath();c.moveTo(x,y+h-r);c.arcTo(x,y,x+r,y,r);c.arcTo(x+w,y,x+w,y+r,r);c.arcTo(x+w,y+h,x+w-r,y+h,r);c.arcTo(x,y+h,x,y+h-r,r);c.closePath();c[s?'stroke':'fill']()}else{c[s?'strokeRect':'fillRect'](x,y,w,h)}}
function TextCanvas(strings,font,w,h,maxWidth,stringWidths,align,valign,scale){this.strings=strings;this.font=font;this.width=w;this.height=h;this.maxWidth=maxWidth;this.stringWidths=stringWidths;this.align=align;this.valign=valign;this.scale=scale}
TCVproto=TextCanvas.prototype;TCVproto.SetImage=function(image,w,h,position,padding,align,valign,scale){this.image=image;this.iwidth=w*this.scale;this.iheight=h*this.scale;this.ipos=position;this.ipad=padding*this.scale;this.iscale=scale;this.ialign=align;this.ivalign=valign};TCVproto.Align=function(size,space,a){var pos=0;if(a=='right'||a=='bottom')
pos=space-size;else if(a!='left'&&a!='top')
pos=(space-size)/2;return pos};TCVproto.Create=function(colour,bgColour,bgOutline,bgOutlineThickness,shadowColour,shadowBlur,shadowOffsets,padding,radius){var cv,cw,ch,c,x1,x2,y1,y2,offx,offy,ix,iy,iw,ih,rr,sox=abs(shadowOffsets[0]),soy=abs(shadowOffsets[1]),shadowcv,shadowc;padding=max(padding,sox+shadowBlur,soy+shadowBlur);x1=2*(padding+bgOutlineThickness);y1=2*(padding+bgOutlineThickness);cw=this.width+x1;ch=this.height+y1;offx=offy=padding+bgOutlineThickness;if(this.image){ix=iy=padding+bgOutlineThickness;iw=this.iwidth;ih=this.iheight;if(this.ipos=='top'||this.ipos=='bottom'){if(iw<this.width)
ix+=this.Align(iw,this.width,this.ialign);else offx+=this.Align(this.width,iw,this.align);if(this.ipos=='top')
offy+=ih+this.ipad;else iy+=this.height+this.ipad;cw=max(cw,iw+x1);ch+=ih+this.ipad}else{if(ih<this.height)
iy+=this.Align(ih,this.height,this.ivalign);else offy+=this.Align(this.height,ih,this.valign);if(this.ipos=='right')
ix+=this.width+this.ipad;else offx+=iw+this.ipad;cw+=iw+this.ipad;ch=max(ch,ih+y1)}}
cv=NewCanvas(cw,ch);if(!cv)
return null;x1=y1=bgOutlineThickness/2;x2=cw-bgOutlineThickness;y2=ch-bgOutlineThickness;rr=min(radius,x2/2,y2/2);c=cv.getContext('2d');if(bgColour){c.fillStyle=bgColour;RRect(c,x1,y1,x2,y2,rr)}
if(bgOutlineThickness){c.strokeStyle=bgOutline;c.lineWidth=bgOutlineThickness;RRect(c,x1,y1,x2,y2,rr,!0)}
if(shadowBlur||sox||soy){shadowcv=NewCanvas(cw,ch);if(shadowcv){shadowc=c;c=shadowcv.getContext('2d')}}
TextSet(c,this.font,colour,this.strings,offx,offy,0,0,[],this.maxWidth,this.stringWidths,this.align);if(this.image)
c.drawImage(this.image,ix,iy,iw,ih);if(shadowc){c=shadowc;shadowColour&&(c.shadowColor=shadowColour);shadowBlur&&(c.shadowBlur=shadowBlur);c.shadowOffsetX=shadowOffsets[0];c.shadowOffsetY=shadowOffsets[1];c.drawImage(shadowcv,0,0)}
return cv};function ExpandImage(i,w,h){var cv=NewCanvas(w,h),c;if(!cv)
return null;c=cv.getContext('2d');c.drawImage(i,(w-i.width)/2,(h-i.height)/2);return cv}
function ScaleImage(i,w,h){var cv=NewCanvas(w,h),c;if(!cv)
return null;c=cv.getContext('2d');c.drawImage(i,0,0,w,h);return cv}
function AddBackgroundToImage(i,w,h,scale,colour,othickness,ocolour,padding,radius,ofill){var cw=w+((2*padding)+othickness)*scale,ch=h+((2*padding)+othickness)*scale,cv=NewCanvas(cw,ch),c,x1,y1,x2,y2,ocanvas,cc,rr;if(!cv)
return null;othickness*=scale;radius*=scale;x1=y1=othickness/2;x2=cw-othickness;y2=ch-othickness;padding=(padding*scale)+x1;c=cv.getContext('2d');rr=min(radius,x2/2,y2/2);if(colour){c.fillStyle=colour;RRect(c,x1,y1,x2,y2,rr)}
if(othickness){c.strokeStyle=ocolour;c.lineWidth=othickness;RRect(c,x1,y1,x2,y2,rr,!0)}
if(ofill){ocanvas=NewCanvas(cw,ch);cc=ocanvas.getContext('2d');cc.drawImage(i,padding,padding,w,h);cc.globalCompositeOperation='source-in';cc.fillStyle=ocolour;cc.fillRect(0,0,cw,ch);cc.globalCompositeOperation='destination-over';cc.drawImage(cv,0,0);cc.globalCompositeOperation='source-over';c.drawImage(ocanvas,0,0)}else{c.drawImage(i,padding,padding,i.width,i.height)}
return{image:cv,width:cw/scale,height:ch/scale}}
function RoundImage(i,r,iw,ih,s){var cv,c,r1=parseFloat(r),l=max(iw,ih);cv=NewCanvas(iw,ih);if(!cv)
return null;if(r.indexOf('%')>0)
r1=l*r1/100;else r1=r1*s;c=cv.getContext('2d');c.globalCompositeOperation='source-over';c.fillStyle='#fff';if(r1>=l/2){r1=min(iw,ih)/2;c.beginPath();c.moveTo(iw/2,ih/2);c.arc(iw/2,ih/2,r1,0,2*Math.PI,!1);c.fill();c.closePath()}else{r1=min(iw/2,ih/2,r1);RRect(c,0,0,iw,ih,r1,!0);c.fill()}
c.globalCompositeOperation='source-in';c.drawImage(i,0,0,iw,ih);return cv}
function AddShadowToImage(i,w,h,scale,sc,sb,so){var sw=abs(so[0]),sh=abs(so[1]),cw=w+(sw>sb?sw+sb:sb*2)*scale,ch=h+(sh>sb?sh+sb:sb*2)*scale,xo=scale*((sb||0)+(so[0]<0?sw:0)),yo=scale*((sb||0)+(so[1]<0?sh:0)),cv,c;cv=NewCanvas(cw,ch);if(!cv)
return null;c=cv.getContext('2d');sc&&(c.shadowColor=sc);sb&&(c.shadowBlur=sb*scale);so&&(c.shadowOffsetX=so[0]*scale,c.shadowOffsetY=so[1]*scale);c.drawImage(i,xo,yo,w,h);return{image:cv,width:cw/scale,height:ch/scale}}
function FindTextBoundingBox(s,f,ht){var w=parseInt(s.toString().length*ht),h=parseInt(ht*2*s.length),cv=NewCanvas(w,h),c,idata,w1,h1,x,y,i,ex;if(!cv)
return null;c=cv.getContext('2d');c.fillStyle='#000';c.fillRect(0,0,w,h);TextSet(c,ht+'px '+f,'#fff',s,0,0,0,0,[],'centre')
idata=c.getImageData(0,0,w,h);w1=idata.width;h1=idata.height;ex={min:{x:w1,y:h1},max:{x:-1,y:-1}};for(y=0;y<h1;++y){for(x=0;x<w1;++x){i=(y*w1+x)*4;if(idata.data[i+1]>0){if(x<ex.min.x)ex.min.x=x;if(x>ex.max.x)ex.max.x=x;if(y<ex.min.y)ex.min.y=y;if(y>ex.max.y)ex.max.y=y}}}
if(w1!=w){ex.min.x*=(w/w1);ex.max.x*=(w/w1)}
if(h1!=h){ex.min.y*=(w/h1);ex.max.y*=(w/h1)}
cv=null;return ex}
function FixFont(f){return"'"+f.replace(/(\'|\")/g,'').replace(/\s*,\s*/g,"', '")+"'"}
function AddHandler(h,f,e){e=e||doc;if(e.addEventListener)
e.addEventListener(h,f,!1);else e.attachEvent('on'+h,f)}
function RemoveHandler(h,f,e){e=e||doc;if(e.removeEventListener)
e.removeEventListener(h,f);else e.detachEvent('on'+h,f)}
function AddImage(i,o,t,tc){var s=tc.imageScale,mscale,ic,bc,oc,iw,ih;if(!o.complete)
return AddHandler('load',function(){AddImage(i,o,t,tc)},o);if(!i.complete)
return AddHandler('load',function(){AddImage(i,o,t,tc)},i);o.width=o.width;o.height=o.height;if(s){i.width=o.width*s;i.height=o.height*s}
t.iw=i.width;t.ih=i.height;if(tc.txtOpt){ic=i;mscale=tc.zoomMax*tc.txtScale;iw=t.iw*mscale;ih=t.ih*mscale;if(iw<o.naturalWidth||ih<o.naturalHeight){ic=ScaleImage(i,iw,ih);if(ic)
t.fimage=ic}else{iw=t.iw;ih=t.ih;mscale=1}
if(parseFloat(tc.imageRadius))
t.image=t.fimage=i=RoundImage(t.image,tc.imageRadius,iw,ih,mscale);if(!t.HasText()){if(tc.shadow){ic=AddShadowToImage(t.image,iw,ih,mscale,tc.shadow,tc.shadowBlur,tc.shadowOffset);if(ic){t.fimage=ic.image;t.w=ic.width;t.h=ic.height}}
if(tc.bgColour||tc.bgOutlineThickness){bc=tc.bgColour=='tag'?GetProperty(t.a,'background-color'):tc.bgColour;oc=tc.bgOutline=='tag'?GetProperty(t.a,'color'):(tc.bgOutline||tc.textColour);iw=t.fimage.width;ih=t.fimage.height;if(tc.outlineMethod=='colour'){ic=AddBackgroundToImage(t.fimage,iw,ih,mscale,bc,tc.bgOutlineThickness,t.outline.colour,tc.padding,tc.bgRadius,1);if(ic)
t.oimage=ic.image}
ic=AddBackgroundToImage(t.fimage,iw,ih,mscale,bc,tc.bgOutlineThickness,oc,tc.padding,tc.bgRadius);if(ic){t.fimage=ic.image;t.w=ic.width;t.h=ic.height}}
if(tc.outlineMethod=='size'){if(tc.outlineIncrease>0){t.iw+=2*tc.outlineIncrease;t.ih+=2*tc.outlineIncrease;iw=mscale*t.iw;ih=mscale*t.ih;ic=ScaleImage(t.fimage,iw,ih);t.oimage=ic;t.fimage=ExpandImage(t.fimage,t.oimage.width,t.oimage.height)}else{iw=mscale*(t.iw+(2*tc.outlineIncrease));ih=mscale*(t.ih+(2*tc.outlineIncrease));ic=ScaleImage(t.fimage,iw,ih);t.oimage=ExpandImage(ic,t.fimage.width,t.fimage.height)}}}}
t.Init()}
function GetProperty(e,p){var dv=doc.defaultView,pc=p.replace(/\-([a-z])/g,function(a){return a.charAt(1).toUpperCase()});return(dv&&dv.getComputedStyle&&dv.getComputedStyle(e,null).getPropertyValue(p))||(e.currentStyle&&e.currentStyle[pc])}
function FindWeight(a,wFrom,tHeight){var w=1,p;if(wFrom){w=1*(a.getAttribute(wFrom)||tHeight)}else if(p=GetProperty(a,'font-size')){w=(p.indexOf('px')>-1&&p.replace('px','')*1)||(p.indexOf('pt')>-1&&p.replace('pt','')*1.25)||p*3.3}
return w}
function EventToCanvasId(e){return e.target&&Defined(e.target.id)?e.target.id:e.srcElement.parentNode.id}
function EventXY(e,c){var xy,p,xmul=parseInt(GetProperty(c,'width'))/c.width,ymul=parseInt(GetProperty(c,'height'))/c.height;if(Defined(e.offsetX)){xy={x:e.offsetX,y:e.offsetY}}else{p=AbsPos(c.id);if(Defined(e.changedTouches))
e=e.changedTouches[0];if(e.pageX)
xy={x:e.pageX-p.x,y:e.pageY-p.y}}
if(xy&&xmul&&ymul){xy.x/=xmul;xy.y/=ymul}
return xy}
function MouseOut(e){var cv=e.target||e.fromElement.parentNode,tc=TagCanvas.tc[cv.id];if(tc){tc.mx=tc.my=-1;tc.UnFreeze();tc.EndDrag()}}
function MouseMove(e){var i,t=TagCanvas,tc,p,tg=EventToCanvasId(e);for(i in t.tc){tc=t.tc[i];if(tc.tttimer){clearTimeout(tc.tttimer);tc.tttimer=null}}
if(tg&&t.tc[tg]){tc=t.tc[tg];if(p=EventXY(e,tc.canvas)){tc.mx=p.x;tc.my=p.y;tc.Drag(e,p)}
tc.drawn=0}}
function MouseDown(e){var t=TagCanvas,cb=doc.addEventListener?0:1,tg=EventToCanvasId(e);if(tg&&e.button==cb&&t.tc[tg]){t.tc[tg].BeginDrag(e)}}
function MouseUp(e){var t=TagCanvas,cb=doc.addEventListener?0:1,tg=EventToCanvasId(e),tc;if(tg&&e.button==cb&&t.tc[tg]){tc=t.tc[tg];MouseMove(e);if(!tc.EndDrag()&&!tc.touchState)
tc.Clicked(e)}}
function TouchDown(e){var tg=EventToCanvasId(e),tc=(tg&&TagCanvas.tc[tg]),p;if(tc&&e.changedTouches){if(e.touches.length==1&&tc.touchState==0){tc.touchState=1;tc.BeginDrag(e);if(p=EventXY(e,tc.canvas)){tc.mx=p.x;tc.my=p.y;tc.drawn=0}}else if(e.targetTouches.length==2&&tc.pinchZoom){tc.touchState=3;tc.EndDrag();tc.BeginPinch(e)}else{tc.EndDrag();tc.EndPinch();tc.touchState=0}}}
function TouchUp(e){var tg=EventToCanvasId(e),tc=(tg&&TagCanvas.tc[tg]);if(tc&&e.changedTouches){switch(tc.touchState){case 1:tc.Draw();tc.Clicked();break;case 2:tc.EndDrag();break;case 3:tc.EndPinch()}
tc.touchState=0}}
function TouchMove(e){var i,t=TagCanvas,tc,p,tg=EventToCanvasId(e);for(i in t.tc){tc=t.tc[i];if(tc.tttimer){clearTimeout(tc.tttimer);tc.tttimer=null}}
tc=(tg&&t.tc[tg]);if(tc&&e.changedTouches&&tc.touchState){switch(tc.touchState){case 1:case 2:if(p=EventXY(e,tc.canvas)){tc.mx=p.x;tc.my=p.y;if(tc.Drag(e,p))
tc.touchState=2}
break;case 3:tc.Pinch(e)}
tc.drawn=0}}
function MouseWheel(e){var t=TagCanvas,tg=EventToCanvasId(e);if(tg&&t.tc[tg]){e.cancelBubble=!0;e.returnValue=!1;e.preventDefault&&e.preventDefault();t.tc[tg].Wheel((e.wheelDelta||e.detail)>0)}}
function Scroll(e){var i,t=TagCanvas;clearTimeout(t.scrollTimer);for(i in t.tc){t.tc[i].Pause()}
t.scrollTimer=setTimeout(function(){var i,t=TagCanvas;for(i in t.tc){t.tc[i].Resume()}},t.scrollPause)}
function DrawCanvas(){DrawCanvasRAF(TimeNow())}
function DrawCanvasRAF(t){var tc=TagCanvas.tc,i;TagCanvas.NextFrame(TagCanvas.interval);t=t||TimeNow();for(i in tc)
tc[i].Draw(t);}
function AbsPos(id){var e=doc.getElementById(id),r=e.getBoundingClientRect(),dd=doc.documentElement,b=doc.body,w=window,xs=w.pageXOffset||dd.scrollLeft,ys=w.pageYOffset||dd.scrollTop,xo=dd.clientLeft||b.clientLeft,yo=dd.clientTop||b.clientTop;return{x:r.left+xs-xo,y:r.top+ys-yo}}
function Project(tc,p1,sx,sy){var m=tc.radius*tc.z1/(tc.z1+tc.z2+p1.z);return{x:p1.x*m*sx,y:p1.y*m*sy,z:p1.z,w:(tc.z1-p1.z)/tc.z2}}
function TextSplitter(e){this.e=e;this.br=0;this.line=[];this.text=[];this.original=e.innerText||e.textContent}
TSproto=TextSplitter.prototype;TSproto.Empty=function(){for(var i=0;i<this.text.length;++i)
if(this.text[i].length)
return!1;return!0};TSproto.Lines=function(e){var r=e?1:0,cn,cl,i;e=e||this.e;cn=e.childNodes;cl=cn.length;for(i=0;i<cl;++i){if(cn[i].nodeName=='BR'){this.text.push(this.line.join(' '));this.br=1}else if(cn[i].nodeType==3){if(this.br){this.line=[cn[i].nodeValue];this.br=0}else{this.line.push(cn[i].nodeValue)}}else{this.Lines(cn[i])}}
r||this.br||this.text.push(this.line.join(' '));return this.text};TSproto.SplitWidth=function(w,c,f,h){var i,j,words,text=[];c.font=h+'px '+f;for(i=0;i<this.text.length;++i){words=this.text[i].split(/\s+/);this.line=[words[0]];for(j=1;j<words.length;++j){if(c.measureText(this.line.join(' ')+' '+words[j]).width>w){text.push(this.line.join(' '));this.line=[words[j]]}else{this.line.push(words[j])}}
text.push(this.line.join(' '))}
return this.text=text};function Outline(tc,t){this.ts=null;this.tc=tc;this.tag=t;this.x=this.y=this.w=this.h=this.sc=1;this.z=0;this.pulse=1;this.pulsate=tc.pulsateTo<1;this.colour=tc.outlineColour;this.adash=~~tc.outlineDash;this.agap=~~tc.outlineDashSpace||this.adash;this.aspeed=tc.outlineDashSpeed*1;if(this.colour=='tag')
this.colour=GetProperty(t.a,'color');else if(this.colour=='tagbg')
this.colour=GetProperty(t.a,'background-color');this.Draw=this.pulsate?this.DrawPulsate:this.DrawSimple;this.radius=tc.outlineRadius|0;this.SetMethod(tc.outlineMethod)}
Oproto=Outline.prototype;Oproto.SetMethod=function(om){var methods={block:['PreDraw','DrawBlock'],colour:['PreDraw','DrawColour'],outline:['PostDraw','DrawOutline'],classic:['LastDraw','DrawOutline'],size:['PreDraw','DrawSize'],none:['LastDraw']},funcs=methods[om]||methods.outline;if(om=='none'){this.Draw=function(){return 1}}else{this.drawFunc=this[funcs[1]]}
this[funcs[0]]=this.Draw};Oproto.Update=function(x,y,w,h,sc,z,xo,yo){var o=this.tc.outlineOffset,o2=2*o;this.x=sc*x+xo-o;this.y=sc*y+yo-o;this.w=sc*w+o2;this.h=sc*h+o2;this.sc=sc;this.z=z};Oproto.Ants=function(c){if(!this.adash)
return;var l=this.adash,g=this.agap,s=this.aspeed,length=l+g,l1=0,l2=l,g1=g,g2=0,seq=0,ants;if(s){seq=abs(s)*(TimeNow()-this.ts)/50;if(s<0)
seq=8.64e6-seq;s=~~seq%length}
if(s){if(l>=s){l1=l-s;l2=s}else{g1=length-s;g2=g-g1}
ants=[l1,g1,l2,g2]}else{ants=[l,g]}
c.setLineDash(ants)}
Oproto.DrawOutline=function(c,x,y,w,h,colour){var r=min(this.radius,h/2,w/2);c.strokeStyle=colour;this.Ants(c);RRect(c,x,y,w,h,r,!0)};Oproto.DrawSize=function(c,x,y,w,h,colour,tag,x1,y1){var tw=tag.w,th=tag.h,m,i,sc;if(this.pulsate){if(tag.image)
sc=(tag.image.height+this.tc.outlineIncrease)/tag.image.height;else sc=tag.oscale;i=tag.fimage||tag.image;m=1+((sc-1)*(1-this.pulse));tag.h*=m;tag.w*=m}else{i=tag.oimage}
tag.alpha=1;tag.Draw(c,x1,y1,i);tag.h=th;tag.w=tw;return 1};Oproto.DrawColour=function(c,x,y,w,h,colour,tag,x1,y1){if(tag.oimage){if(this.pulse<1){tag.alpha=1-pow(this.pulse,2);tag.Draw(c,x1,y1,tag.fimage);tag.alpha=this.pulse}else{tag.alpha=1}
tag.Draw(c,x1,y1,tag.oimage);return 1}
return this[tag.image?'DrawColourImage':'DrawColourText'](c,x,y,w,h,colour,tag,x1,y1)};Oproto.DrawColourText=function(c,x,y,w,h,colour,tag,x1,y1){var normal=tag.colour;tag.colour=colour;tag.alpha=1;tag.Draw(c,x1,y1);tag.colour=normal;return 1};Oproto.DrawColourImage=function(c,x,y,w,h,colour,tag,x1,y1){var ccanvas=c.canvas,fx=~~max(x,0),fy=~~max(y,0),fw=min(ccanvas.width-fx,w)+.5|0,fh=min(ccanvas.height-fy,h)+.5|0,cc;if(ocanvas)
ocanvas.width=fw,ocanvas.height=fh;else ocanvas=NewCanvas(fw,fh);if(!ocanvas)
return this.SetMethod('outline');cc=ocanvas.getContext('2d');cc.drawImage(ccanvas,fx,fy,fw,fh,0,0,fw,fh);c.clearRect(fx,fy,fw,fh);if(this.pulsate){tag.alpha=1-pow(this.pulse,2)}else{tag.alpha=1}
tag.Draw(c,x1,y1);c.setTransform(1,0,0,1,0,0);c.save();c.beginPath();c.rect(fx,fy,fw,fh);c.clip();c.globalCompositeOperation='source-in';c.fillStyle=colour;c.fillRect(fx,fy,fw,fh);c.restore();c.globalAlpha=1;c.globalCompositeOperation='destination-over';c.drawImage(ocanvas,0,0,fw,fh,fx,fy,fw,fh);c.globalCompositeOperation='source-over';return 1};Oproto.DrawBlock=function(c,x,y,w,h,colour){var r=min(this.radius,h/2,w/2);c.fillStyle=colour;RRect(c,x,y,w,h,r)};Oproto.DrawSimple=function(c,tag,x1,y1,ga,useGa){var t=this.tc;c.setTransform(1,0,0,1,0,0);c.strokeStyle=this.colour;c.lineWidth=t.outlineThickness;c.shadowBlur=c.shadowOffsetX=c.shadowOffsetY=0;c.globalAlpha=useGa?ga:1;return this.drawFunc(c,this.x,this.y,this.w,this.h,this.colour,tag,x1,y1)};Oproto.DrawPulsate=function(c,tag,x1,y1){var diff=TimeNow()-this.ts,t=this.tc,ga=t.pulsateTo+((1-t.pulsateTo)*(0.5+(cos(2*Math.PI*diff/(1000*t.pulsateTime))/2)));this.pulse=ga=TagCanvas.Smooth(1,ga);return this.DrawSimple(c,tag,x1,y1,ga,1)};Oproto.Active=function(c,x,y){var a=(x>=this.x&&y>=this.y&&x<=this.x+this.w&&y<=this.y+this.h);if(a){this.ts=this.ts||TimeNow()}else{this.ts=null}
return a};Oproto.PreDraw=Oproto.PostDraw=Oproto.LastDraw=Nop;function Tag(tc,text,a,v,w,h,col,bcol,bradius,boutline,bothickness,font,padding,original){this.tc=tc;this.image=null;this.text=text;this.text_original=original;this.line_widths=[];this.title=a.title||null;this.a=a;this.position=new Vector(v[0],v[1],v[2]);this.x=this.y=this.z=0;this.w=w;this.h=h;this.colour=col||tc.textColour;this.bgColour=bcol||tc.bgColour;this.bgRadius=bradius|0;this.bgOutline=boutline||this.colour;this.bgOutlineThickness=bothickness|0;this.textFont=font||tc.textFont;this.padding=padding|0;this.sc=this.alpha=1;this.weighted=!tc.weight;this.outline=new Outline(tc,this)}
Tproto=Tag.prototype;Tproto.Init=function(e){var tc=this.tc;this.textHeight=tc.textHeight;if(this.HasText()){this.Measure(tc.ctxt,tc)}else{this.w=this.iw;this.h=this.ih}
this.SetShadowColour=tc.shadowAlpha?this.SetShadowColourAlpha:this.SetShadowColourFixed;this.SetDraw(tc)};Tproto.Draw=Nop;Tproto.HasText=function(){return this.text&&this.text[0].length>0};Tproto.EqualTo=function(e){var i=e.getElementsByTagName('img');if(this.a.href!=e.href)
return 0;if(i.length)
return this.image.src==i[0].src;return(e.innerText||e.textContent)==this.text_original};Tproto.SetImage=function(i){this.image=this.fimage=i};Tproto.SetDraw=function(t){this.Draw=this.fimage?(t.ie>7?this.DrawImageIE:this.DrawImage):this.DrawText;t.noSelect&&(this.CheckActive=Nop)};Tproto.MeasureText=function(c){var i,l=this.text.length,w=0,wl;for(i=0;i<l;++i){this.line_widths[i]=wl=c.measureText(this.text[i]).width;w=max(w,wl)}
return w};Tproto.Measure=function(c,t){var extents=FindTextBoundingBox(this.text,this.textFont,this.textHeight),s,th,f,soff,cw,twidth,theight,img,tcv;theight=extents?extents.max.y+extents.min.y:this.textHeight;c.font=this.font=this.textHeight+'px '+this.textFont;twidth=this.MeasureText(c);if(t.txtOpt){s=t.txtScale;th=s*this.textHeight;f=th+'px '+this.textFont;soff=[s*t.shadowOffset[0],s*t.shadowOffset[1]];c.font=f;cw=this.MeasureText(c);tcv=new TextCanvas(this.text,f,cw+s,(s*theight)+s,cw,this.line_widths,t.textAlign,t.textVAlign,s);if(this.image)
tcv.SetImage(this.image,this.iw,this.ih,t.imagePosition,t.imagePadding,t.imageAlign,t.imageVAlign,t.imageScale);img=tcv.Create(this.colour,this.bgColour,this.bgOutline,s*this.bgOutlineThickness,t.shadow,s*t.shadowBlur,soff,s*this.padding,s*this.bgRadius);if(t.outlineMethod=='colour'){this.oimage=tcv.Create(this.outline.colour,this.bgColour,this.outline.colour,s*this.bgOutlineThickness,t.shadow,s*t.shadowBlur,soff,s*this.padding,s*this.bgRadius)}else if(t.outlineMethod=='size'){extents=FindTextBoundingBox(this.text,this.textFont,this.textHeight+t.outlineIncrease);th=extents.max.y+extents.min.y;f=(s*(this.textHeight+t.outlineIncrease))+'px '+this.textFont;c.font=f;cw=this.MeasureText(c);tcv=new TextCanvas(this.text,f,cw+s,(s*th)+s,cw,this.line_widths,t.textAlign,t.textVAlign,s);if(this.image)
tcv.SetImage(this.image,this.iw+t.outlineIncrease,this.ih+t.outlineIncrease,t.imagePosition,t.imagePadding,t.imageAlign,t.imageVAlign,t.imageScale);this.oimage=tcv.Create(this.colour,this.bgColour,this.bgOutline,s*this.bgOutlineThickness,t.shadow,s*t.shadowBlur,soff,s*this.padding,s*this.bgRadius);this.oscale=this.oimage.width/img.width;if(t.outlineIncrease>0)
img=ExpandImage(img,this.oimage.width,this.oimage.height);else this.oimage=ExpandImage(this.oimage,img.width,img.height)}
if(img){this.fimage=img;twidth=this.fimage.width/s;theight=this.fimage.height/s}
this.SetDraw(t);t.txtOpt=!!this.fimage}
this.h=theight;this.w=twidth};Tproto.SetFont=function(f,c,bc,boc){this.textFont=f;this.colour=c;this.bgColour=bc;this.bgOutline=boc;this.Measure(this.tc.ctxt,this.tc)};Tproto.SetWeight=function(w){var tc=this.tc,modes=tc.weightMode.split(/[, ]/),m,s,wl=w.length;if(!this.HasText())
return;this.weighted=!0;for(s=0;s<wl;++s){m=modes[s]||'size';if('both'==m){this.Weight(w[s],tc.ctxt,tc,'size',tc.min_weight[s],tc.max_weight[s],s);this.Weight(w[s],tc.ctxt,tc,'colour',tc.min_weight[s],tc.max_weight[s],s)}else{this.Weight(w[s],tc.ctxt,tc,m,tc.min_weight[s],tc.max_weight[s],s)}}
this.Measure(tc.ctxt,tc)};Tproto.Weight=function(w,c,t,m,wmin,wmax,wnum){w=isNaN(w)?1:w;var nweight=(w-wmin)/(wmax-wmin);if('colour'==m)
this.colour=FindGradientColour(t,nweight,wnum);else if('bgcolour'==m)
this.bgColour=FindGradientColour(t,nweight,wnum);else if('bgoutline'==m)
this.bgOutline=FindGradientColour(t,nweight,wnum);else if('outline'==m)
this.outline.colour=FindGradientColour(t,nweight,wnum);else if('size'==m){if(t.weightSizeMin>0&&t.weightSizeMax>t.weightSizeMin){this.textHeight=t.weightSize*(t.weightSizeMin+(t.weightSizeMax-t.weightSizeMin)*nweight)}else{this.textHeight=max(1,w*t.weightSize)}}};Tproto.SetShadowColourFixed=function(c,s,a){c.shadowColor=s};Tproto.SetShadowColourAlpha=function(c,s,a){c.shadowColor=SetAlpha(s,a)};Tproto.DrawText=function(c,xoff,yoff){var t=this.tc,x=this.x,y=this.y,s=this.sc,i,xl;c.globalAlpha=this.alpha;c.fillStyle=this.colour;t.shadow&&this.SetShadowColour(c,t.shadow,this.alpha);c.font=this.font;x+=xoff/s;y+=(yoff/s)-(this.h/2);for(i=0;i<this.text.length;++i){xl=x;if('right'==t.textAlign){xl+=this.w/2-this.line_widths[i]}else if('centre'==t.textAlign){xl-=this.line_widths[i]/2}else{xl-=this.w/2}
c.setTransform(s,0,0,s,s*xl,s*y);c.fillText(this.text[i],0,0);y+=this.textHeight}};Tproto.DrawImage=function(c,xoff,yoff,im){var x=this.x,y=this.y,s=this.sc,i=im||this.fimage,w=this.w,h=this.h,a=this.alpha,shadow=this.shadow;c.globalAlpha=a;shadow&&this.SetShadowColour(c,shadow,a);x+=(xoff/s)-(w/2);y+=(yoff/s)-(h/2);c.setTransform(s,0,0,s,s*x,s*y);c.drawImage(i,0,0,w,h)};Tproto.DrawImageIE=function(c,xoff,yoff){var i=this.fimage,s=this.sc,w=i.width=this.w*s,h=i.height=this.h*s,x=(this.x*s)+xoff-(w/2),y=(this.y*s)+yoff-(h/2);c.setTransform(1,0,0,1,0,0);c.globalAlpha=this.alpha;c.drawImage(i,x,y)};Tproto.Calc=function(m,a){var pp,t=this.tc,mnb=t.minBrightness,mxb=t.maxBrightness,r=t.max_radius;pp=m.xform(this.position);this.xformed=pp;pp=Project(t,pp,t.stretchX,t.stretchY);this.x=pp.x;this.y=pp.y;this.z=pp.z;this.sc=pp.w;this.alpha=a*Clamp(mnb+(mxb-mnb)*(r-this.z)/(2*r),0,1);return this.xformed};Tproto.UpdateActive=function(c,xoff,yoff){var o=this.outline,w=this.w,h=this.h,x=this.x-w/2,y=this.y-h/2;o.Update(x,y,w,h,this.sc,this.z,xoff,yoff);return o};Tproto.CheckActive=function(c,xoff,yoff){var t=this.tc,o=this.UpdateActive(c,xoff,yoff);return o.Active(c,t.mx,t.my)?o:null};Tproto.Clicked=function(e){var a=this.a,t=a.target,h=a.href,evt;if(t!=''&&t!='_self'){if(self.frames[t]){self.frames[t].document.location=h}else{try{if(top.frames[t]){top.frames[t].document.location=h;return}}catch(err){}
window.open(h,t)}
return}
if(doc.createEvent){evt=doc.createEvent('MouseEvents');evt.initMouseEvent('click',1,1,window,0,0,0,0,0,0,0,0,0,0,null);if(!a.dispatchEvent(evt))
return}else if(a.fireEvent){if(!a.fireEvent('onclick'))
return}
doc.location=h};function TagCanvas(cid,lctr,opt){var i,p,c=doc.getElementById(cid),cp=['id','class','innerHTML'],raf;if(!c)throw 0;if(Defined(window.G_vmlCanvasManager)){c=window.G_vmlCanvasManager.initElement(c);this.ie=parseFloat(navigator.appVersion.split('MSIE')[1])}
if(c&&(!c.getContext||!c.getContext('2d').fillText)){p=doc.createElement('DIV');for(i=0;i<cp.length;++i)
p[cp[i]]=c[cp[i]];c.parentNode.insertBefore(p,c);c.parentNode.removeChild(c);throw 0}
for(i in TagCanvas.options)
this[i]=opt&&Defined(opt[i])?opt[i]:(Defined(TagCanvas[i])?TagCanvas[i]:TagCanvas.options[i]);this.canvas=c;this.ctxt=c.getContext('2d');this.z1=250/max(this.depth,0.001);this.z2=this.z1/this.zoom;this.radius=min(c.height,c.width)*0.0075;this.max_radius=100;this.max_weight=[];this.min_weight=[];this.textFont=this.textFont&&FixFont(this.textFont);this.textHeight*=1;this.imageRadius=this.imageRadius.toString();this.pulsateTo=Clamp(this.pulsateTo,0,1);this.minBrightness=Clamp(this.minBrightness,0,1);this.maxBrightness=Clamp(this.maxBrightness,this.minBrightness,1);this.ctxt.textBaseline='top';this.lx=(this.lock+'').indexOf('x')+1;this.ly=(this.lock+'').indexOf('y')+1;this.frozen=this.dx=this.dy=this.fixedAnim=this.touchState=0;this.fixedAlpha=1;this.source=lctr||cid;this.repeatTags=min(64,~~this.repeatTags);this.minTags=min(200,~~this.minTags);if(~~this.scrollPause>0)
TagCanvas.scrollPause=~~this.scrollPause;else this.scrollPause=0;if(this.minTags>0&&this.repeatTags<1&&(i=this.GetTags().length))
this.repeatTags=ceil(this.minTags/i)-1;this.transform=Matrix.Identity();this.startTime=this.time=TimeNow();this.mx=this.my=-1;this.centreImage&&CentreImage(this);this.Animate=this.dragControl?this.AnimateDrag:this.AnimatePosition;this.animTiming=(typeof TagCanvas[this.animTiming]=='function'?TagCanvas[this.animTiming]:TagCanvas.Smooth);if(this.shadowBlur||this.shadowOffset[0]||this.shadowOffset[1]){this.ctxt.shadowColor=this.shadow;this.shadow=this.ctxt.shadowColor;this.shadowAlpha=ShadowAlphaBroken()}else{delete this.shadow}
this.Load();if(lctr&&this.hideTags){(function(t){if(TagCanvas.loaded)
t.HideTags();else AddHandler('load',function(){t.HideTags()},window)})(this)}
this.yaw=this.initial?this.initial[0]*this.maxSpeed:0;this.pitch=this.initial?this.initial[1]*this.maxSpeed:0;if(this.tooltip){this.ctitle=c.title;c.title='';if(this.tooltip=='native'){this.Tooltip=this.TooltipNative}else{this.Tooltip=this.TooltipDiv;if(!this.ttdiv){this.ttdiv=doc.createElement('div');this.ttdiv.className=this.tooltipClass;this.ttdiv.style.position='absolute';this.ttdiv.style.zIndex=c.style.zIndex+1;AddHandler('mouseover',function(e){e.target.style.display='none'},this.ttdiv);doc.body.appendChild(this.ttdiv)}}}else{this.Tooltip=this.TooltipNone}
if(!this.noMouse&&!handlers[cid]){handlers[cid]=[['mousemove',MouseMove],['mouseout',MouseOut],['mouseup',MouseUp],['touchstart',TouchDown],['touchend',TouchUp],['touchcancel',TouchUp],['touchmove',TouchMove]];if(this.dragControl){handlers[cid].push(['mousedown',MouseDown]);handlers[cid].push(['selectstart',Nop])}
if(this.wheelZoom){handlers[cid].push(['mousewheel',MouseWheel]);handlers[cid].push(['DOMMouseScroll',MouseWheel])}
if(this.scrollPause){handlers[cid].push(['scroll',Scroll,window])}
for(i=0;i<handlers[cid].length;++i){p=handlers[cid][i];AddHandler(p[0],p[1],p[2]?p[2]:c)}}
if(!TagCanvas.started){raf=window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;TagCanvas.NextFrame=raf?TagCanvas.NextFrameRAF:TagCanvas.NextFrameTimeout;TagCanvas.interval=this.interval;TagCanvas.NextFrame(this.interval);TagCanvas.started=1}}
TCproto=TagCanvas.prototype;TCproto.SourceElements=function(){if(doc.querySelectorAll)
return doc.querySelectorAll('#'+this.source);return[doc.getElementById(this.source)]};TCproto.HideTags=function(){var el=this.SourceElements(),i;for(i=0;i<el.length;++i)
el[i].style.display='none'};TCproto.GetTags=function(){var el=this.SourceElements(),etl,tl=[],i,j,k;for(k=0;k<=this.repeatTags;++k){for(i=0;i<el.length;++i){etl=el[i].getElementsByTagName('a');for(j=0;j<etl.length;++j){tl.push(etl[j])}}}
return tl};TCproto.Message=function(text){var tl=[],i,p,tc=text.split(''),a,t,x,z;for(i=0;i<tc.length;++i){if(tc[i]!=' '){p=i-tc.length/2;a=doc.createElement('A');a.href='#';a.innerText=tc[i];x=100*sin(p/9);z=-100*cos(p/9);t=new Tag(this,tc[i],a,[x,0,z],2,18,'#000','#fff',0,0,0,'monospace',2,tc[i]);t.Init();tl.push(t)}}
return tl};TCproto.CreateTag=function(e){var im,i,t,txt,ts,font,bc,boc,p=[0,0,0];if('text'!=this.imageMode){im=e.getElementsByTagName('img');if(im.length){i=new Image;i.src=im[0].src;if(!this.imageMode){t=new Tag(this,"",e,p,0,0);t.SetImage(i);AddImage(i,im[0],t,this);return t}}}
if('image'!=this.imageMode){ts=new TextSplitter(e);txt=ts.Lines();if(!ts.Empty()){font=this.textFont||FixFont(GetProperty(e,'font-family'));if(this.splitWidth)
txt=ts.SplitWidth(this.splitWidth,this.ctxt,font,this.textHeight);bc=this.bgColour=='tag'?GetProperty(e,'background-color'):this.bgColour;boc=this.bgOutline=='tag'?GetProperty(e,'color'):this.bgOutline}else{ts=null}}
if(ts||i){t=new Tag(this,txt,e,p,2,this.textHeight+2,this.textColour||GetProperty(e,'color'),bc,this.bgRadius,boc,this.bgOutlineThickness,font,this.padding,ts&&ts.original);if(i){t.SetImage(i);AddImage(i,im[0],t,this)}else{t.Init()}
return t}};TCproto.UpdateTag=function(t,a){var colour=this.textColour||GetProperty(a,'color'),font=this.textFont||FixFont(GetProperty(a,'font-family')),bc=this.bgColour=='tag'?GetProperty(a,'background-color'):this.bgColour,boc=this.bgOutline=='tag'?GetProperty(a,'color'):this.bgOutline;t.a=a;t.title=a.title;if(t.colour!=colour||t.textFont!=font||t.bgColour!=bc||t.bgOutline!=boc)
t.SetFont(font,colour,bc,boc)};TCproto.Weight=function(tl){var ll=tl.length,w,i,s,weights=[],valid,wfrom=this.weightFrom?this.weightFrom.split(/[, ]/):[null],wl=wfrom.length;for(i=0;i<ll;++i){weights[i]=[];for(s=0;s<wl;++s){w=FindWeight(tl[i].a,wfrom[s],this.textHeight);if(!this.max_weight[s]||w>this.max_weight[s])
this.max_weight[s]=w;if(!this.min_weight[s]||w<this.min_weight[s])
this.min_weight[s]=w;weights[i][s]=w}}
for(s=0;s<wl;++s){if(this.max_weight[s]>this.min_weight[s])
valid=1}
if(valid){for(i=0;i<ll;++i){tl[i].SetWeight(weights[i])}}};TCproto.Load=function(){var tl=this.GetTags(),taglist=[],shape,t,shapeArgs,rx,ry,rz,vl,i,tagmap=[],pfuncs={sphere:PointsOnSphere,vcylinder:PointsOnCylinderV,hcylinder:PointsOnCylinderH,vring:PointsOnRingV,hring:PointsOnRingH};if(tl.length){tagmap.length=tl.length;for(i=0;i<tl.length;++i)
tagmap[i]=i;this.shuffleTags&&Shuffle(tagmap);rx=100*this.radiusX;ry=100*this.radiusY;rz=100*this.radiusZ;this.max_radius=max(rx,max(ry,rz));for(i=0;i<tl.length;++i){t=this.CreateTag(tl[tagmap[i]]);if(t)
taglist.push(t)}
this.weight&&this.Weight(taglist,!0);if(this.shapeArgs){this.shapeArgs[0]=taglist.length}else{shapeArgs=this.shape.toString().split(/[(),]/);shape=shapeArgs.shift();if(typeof window[shape]==='function')
this.shape=window[shape];else this.shape=pfuncs[shape]||pfuncs.sphere;this.shapeArgs=[taglist.length,rx,ry,rz].concat(shapeArgs)}
vl=this.shape.apply(this,this.shapeArgs);this.listLength=taglist.length;for(i=0;i<taglist.length;++i)
taglist[i].position=new Vector(vl[i][0],vl[i][1],vl[i][2]);}
if(this.noTagsMessage&&!taglist.length){i=(this.imageMode&&this.imageMode!='both'?this.imageMode+' ':'');taglist=this.Message('No '+i+'tags')}
this.taglist=taglist};TCproto.Update=function(){var tl=this.GetTags(),newlist=[],taglist=this.taglist,found,added=[],removed=[],vl,ol,nl,i,j;if(!this.shapeArgs)
return this.Load();if(tl.length){nl=this.listLength=tl.length;ol=taglist.length;for(i=0;i<ol;++i){newlist.push(taglist[i]);removed.push(i)}
for(i=0;i<nl;++i){for(j=0,found=0;j<ol;++j){if(taglist[j].EqualTo(tl[i])){this.UpdateTag(newlist[j],tl[i]);found=removed[j]=-1}}
if(!found)
added.push(i)}
for(i=0,j=0;i<ol;++i){if(removed[j]==-1)
removed.splice(j,1);else ++j}
if(removed.length){Shuffle(removed);while(removed.length&&added.length){i=removed.shift();j=added.shift();newlist[i]=this.CreateTag(tl[j])}
removed.sort(function(a,b){return a-b});while(removed.length){newlist.splice(removed.pop(),1)}}
j=newlist.length/(added.length+1);i=0;while(added.length){newlist.splice(ceil(++i*j),0,this.CreateTag(tl[added.shift()]))}
this.shapeArgs[0]=nl=newlist.length;vl=this.shape.apply(this,this.shapeArgs);for(i=0;i<nl;++i)
newlist[i].position=new Vector(vl[i][0],vl[i][1],vl[i][2]);this.weight&&this.Weight(newlist)}
this.taglist=newlist};TCproto.SetShadow=function(c){c.shadowBlur=this.shadowBlur;c.shadowOffsetX=this.shadowOffset[0];c.shadowOffsetY=this.shadowOffset[1]};TCproto.Draw=function(t){if(this.paused)
return;var cv=this.canvas,cw=cv.width,ch=cv.height,max_sc=0,tdelta=(t-this.time)*TagCanvas.interval/1000,x=cw/2+this.offsetX,y=ch/2+this.offsetY,c=this.ctxt,active,a,i,aindex=-1,tl=this.taglist,l=tl.length,frontsel=this.frontSelect,centreDrawn=(this.centreFunc==Nop),fixed;this.time=t;if(this.frozen&&this.drawn)
return this.Animate(cw,ch,tdelta);fixed=this.AnimateFixed();c.setTransform(1,0,0,1,0,0);for(i=0;i<l;++i)
tl[i].Calc(this.transform,this.fixedAlpha);tl=SortList(tl,function(a,b){return b.z-a.z});if(fixed&&this.fixedAnim.active){active=this.fixedAnim.tag.UpdateActive(c,x,y)}else{this.active=null;for(i=0;i<l;++i){a=this.mx>=0&&this.my>=0&&this.taglist[i].CheckActive(c,x,y);if(a&&a.sc>max_sc&&(!frontsel||a.z<=0)){active=a;aindex=i;active.tag=this.taglist[i];max_sc=a.sc}}
this.active=active}
this.txtOpt||(this.shadow&&this.SetShadow(c));c.clearRect(0,0,cw,ch);for(i=0;i<l;++i){if(!centreDrawn&&tl[i].z<=0){try{this.centreFunc(c,cw,ch,x,y)}
catch(e){alert(e);this.centreFunc=Nop}
centreDrawn=!0}
if(!(active&&active.tag==tl[i]&&active.PreDraw(c,tl[i],x,y)))
tl[i].Draw(c,x,y);active&&active.tag==tl[i]&&active.PostDraw(c)}
if(this.freezeActive&&active){this.Freeze()}else{this.UnFreeze();this.drawn=(l==this.listLength)}
if(this.fixedCallback){this.fixedCallback(this,this.fixedCallbackTag);this.fixedCallback=null}
fixed||this.Animate(cw,ch,tdelta);active&&active.LastDraw(c);cv.style.cursor=active?this.activeCursor:'';this.Tooltip(active,this.taglist[aindex])};TCproto.TooltipNone=function(){};TCproto.TooltipNative=function(active,tag){if(active)
this.canvas.title=tag&&tag.title?tag.title:'';else this.canvas.title=this.ctitle};TCproto.SetTTDiv=function(title,tag){var tc=this,s=tc.ttdiv.style;if(title!=tc.ttdiv.innerHTML)
s.display='none';tc.ttdiv.innerHTML=title;tag&&(tag.title=tc.ttdiv.innerHTML);if(s.display=='none'&&!tc.tttimer){tc.tttimer=setTimeout(function(){var p=AbsPos(tc.canvas.id);s.display='block';s.left=p.x+tc.mx+'px';s.top=p.y+tc.my+24+'px';tc.tttimer=null},tc.tooltipDelay)}};TCproto.TooltipDiv=function(active,tag){if(active&&tag&&tag.title){this.SetTTDiv(tag.title,tag)}else if(!active&&this.mx!=-1&&this.my!=-1&&this.ctitle.length){this.SetTTDiv(this.ctitle)}else{this.ttdiv.style.display='none'}};TCproto.Transform=function(tc,p,y){if(p||y){var sp=sin(p),cp=cos(p),sy=sin(y),cy=cos(y),ym=new Matrix([cy,0,sy,0,1,0,-sy,0,cy]),pm=new Matrix([1,0,0,0,cp,-sp,0,sp,cp]);tc.transform=tc.transform.mul(ym.mul(pm))}};TCproto.AnimateFixed=function(){var fa,t1,angle,m,d;if(this.fadeIn){t1=TimeNow()-this.startTime;if(t1>=this.fadeIn){this.fadeIn=0;this.fixedAlpha=1}else{this.fixedAlpha=t1/this.fadeIn}}
if(this.fixedAnim){if(!this.fixedAnim.transform)
this.fixedAnim.transform=this.transform;fa=this.fixedAnim,t1=TimeNow()-fa.t0,angle=fa.angle,m,d=this.animTiming(fa.t,t1);this.transform=fa.transform;if(t1>=fa.t){this.fixedCallbackTag=fa.tag;this.fixedCallback=fa.cb;this.fixedAnim=this.yaw=this.pitch=0}else{angle*=d}
m=Matrix.Rotation(angle,fa.axis);this.transform=this.transform.mul(m);return(this.fixedAnim!=0)}
return!1};TCproto.AnimatePosition=function(w,h,t){var tc=this,x=tc.mx,y=tc.my,s,r;if(!tc.frozen&&x>=0&&y>=0&&x<w&&y<h){s=tc.maxSpeed,r=tc.reverse?-1:1;tc.lx||(tc.yaw=((x*2*s/w)-s)*r*t);tc.ly||(tc.pitch=((y*2*s/h)-s)*-r*t);tc.initial=null}else if(!tc.initial){if(tc.frozen&&!tc.freezeDecel)
tc.yaw=tc.pitch=0;else tc.Decel(tc)}
this.Transform(tc,tc.pitch,tc.yaw)};TCproto.AnimateDrag=function(w,h,t){var tc=this,rs=100*t*tc.maxSpeed/tc.max_radius/tc.zoom;if(tc.dx||tc.dy){tc.lx||(tc.yaw=tc.dx*rs/tc.stretchX);tc.ly||(tc.pitch=tc.dy*-rs/tc.stretchY);tc.dx=tc.dy=0;tc.initial=null}else if(!tc.initial){tc.Decel(tc)}
this.Transform(tc,tc.pitch,tc.yaw)};TCproto.Freeze=function(){if(!this.frozen){this.preFreeze=[this.yaw,this.pitch];this.frozen=1;this.drawn=0}};TCproto.UnFreeze=function(){if(this.frozen){this.yaw=this.preFreeze[0];this.pitch=this.preFreeze[1];this.frozen=0}};TCproto.Decel=function(tc){var s=tc.minSpeed,ay=abs(tc.yaw),ap=abs(tc.pitch);if(!tc.lx&&ay>s)
tc.yaw=ay>tc.z0?tc.yaw*tc.decel:0;if(!tc.ly&&ap>s)
tc.pitch=ap>tc.z0?tc.pitch*tc.decel:0};TCproto.Zoom=function(r){this.z2=this.z1*(1/r);this.drawn=0};TCproto.Clicked=function(e){var a=this.active;try{if(a&&a.tag)
if(this.clickToFront===!1||this.clickToFront===null)
a.tag.Clicked(e);else this.TagToFront(a.tag,this.clickToFront,function(){a.tag.Clicked(e)},!0)}catch(ex){}};TCproto.Wheel=function(i){var z=this.zoom+this.zoomStep*(i?1:-1);this.zoom=min(this.zoomMax,max(this.zoomMin,z));this.Zoom(this.zoom)};TCproto.BeginDrag=function(e){this.down=EventXY(e,this.canvas);e.cancelBubble=!0;e.returnValue=!1;e.preventDefault&&e.preventDefault()};TCproto.Drag=function(e,p){if(this.dragControl&&this.down){var t2=this.dragThreshold*this.dragThreshold,dx=p.x-this.down.x,dy=p.y-this.down.y;if(this.dragging||dx*dx+dy*dy>t2){this.dx=dx;this.dy=dy;this.dragging=1;this.down=p}}
return this.dragging};TCproto.EndDrag=function(){var res=this.dragging;this.dragging=this.down=null;return res};function PinchDistance(e){var t1=e.targetTouches[0],t2=e.targetTouches[1];return sqrt(pow(t2.pageX-t1.pageX,2)+pow(t2.pageY-t1.pageY,2))}
TCproto.BeginPinch=function(e){this.pinched=[PinchDistance(e),this.zoom];e.preventDefault&&e.preventDefault()};TCproto.Pinch=function(e){var z,d,p=this.pinched;if(!p)
return;d=PinchDistance(e);z=p[1]*d/p[0];this.zoom=min(this.zoomMax,max(this.zoomMin,z));this.Zoom(this.zoom)};TCproto.EndPinch=function(e){this.pinched=null};TCproto.Pause=function(){this.paused=!0};TCproto.Resume=function(){this.paused=!1};TCproto.SetSpeed=function(i){this.initial=i;this.yaw=i[0]*this.maxSpeed;this.pitch=i[1]*this.maxSpeed};TCproto.FindTag=function(t){if(!Defined(t))
return null;Defined(t.index)&&(t=t.index);if(!IsObject(t))
return this.taglist[t];var srch,tgt,i;if(Defined(t.id))
srch='id',tgt=t.id;else if(Defined(t.text))
srch='innerText',tgt=t.text;for(i=0;i<this.taglist.length;++i)
if(this.taglist[i].a[srch]==tgt)
return this.taglist[i]};TCproto.RotateTag=function(tag,lt,lg,time,callback,active){var t=tag.Calc(this.transform,1),v1=new Vector(t.x,t.y,t.z),v2=MakeVector(lg,lt),angle=v1.angle(v2),u=v1.cross(v2).unit();if(angle==0){this.fixedCallbackTag=tag;this.fixedCallback=callback}else{this.fixedAnim={angle:-angle,axis:u,t:time,t0:TimeNow(),cb:callback,tag:tag,active:active}}};TCproto.TagToFront=function(tag,time,callback,active){this.RotateTag(tag,0,0,time,callback,active)};TagCanvas.Start=function(id,l,o){TagCanvas.Delete(id);TagCanvas.tc[id]=new TagCanvas(id,l,o)};function tccall(f,id){TagCanvas.tc[id]&&TagCanvas.tc[id][f]()}
TagCanvas.Linear=function(t,t0){return t0/t}
TagCanvas.Smooth=function(t,t0){return 0.5-cos(t0*Math.PI/t)/2}
TagCanvas.Pause=function(id){tccall('Pause',id)};TagCanvas.Resume=function(id){tccall('Resume',id)};TagCanvas.Reload=function(id){tccall('Load',id)};TagCanvas.Update=function(id){tccall('Update',id)};TagCanvas.SetSpeed=function(id,speed){if(IsObject(speed)&&TagCanvas.tc[id]&&!isNaN(speed[0])&&!isNaN(speed[1])){TagCanvas.tc[id].SetSpeed(speed);return!0}
return!1};TagCanvas.TagToFront=function(id,options){if(!IsObject(options))
return!1;options.lat=options.lng=0;return TagCanvas.RotateTag(id,options)};TagCanvas.RotateTag=function(id,options){if(IsObject(options)&&TagCanvas.tc[id]){if(isNaN(options.time))
options.time=500;var tt=TagCanvas.tc[id].FindTag(options);if(tt){TagCanvas.tc[id].RotateTag(tt,options.lat,options.lng,options.time,options.callback,options.active);return!0}}
return!1};TagCanvas.Delete=function(id){var i,c;if(handlers[id]){c=doc.getElementById(id);if(c){for(i=0;i<handlers[id].length;++i)
RemoveHandler(handlers[id][i][0],handlers[id][i][1],c);}}
delete handlers[id];delete TagCanvas.tc[id]};TagCanvas.NextFrameRAF=function(){requestAnimationFrame(DrawCanvasRAF)};TagCanvas.NextFrameTimeout=function(iv){setTimeout(DrawCanvas,iv)};TagCanvas.tc={};TagCanvas.options={z1:20000,z2:20000,z0:0.0002,freezeActive:!1,freezeDecel:!1,activeCursor:'pointer',pulsateTo:1,pulsateTime:3,reverse:!1,depth:0.5,maxSpeed:0.05,minSpeed:0,decel:0.95,interval:20,minBrightness:0.1,maxBrightness:1,outlineColour:'#ffff99',outlineThickness:2,outlineOffset:5,outlineMethod:'outline',outlineRadius:0,textColour:'#ff99ff',textHeight:15,textFont:'Helvetica, Arial, sans-serif',shadow:'#000',shadowBlur:0,shadowOffset:[0,0],initial:null,hideTags:!0,zoom:1,weight:!1,weightMode:'size',weightFrom:null,weightSize:1,weightSizeMin:null,weightSizeMax:null,weightGradient:{0:'#f00',0.33:'#ff0',0.66:'#0f0',1:'#00f'},txtOpt:!0,txtScale:2,frontSelect:!1,wheelZoom:!0,zoomMin:0.3,zoomMax:3,zoomStep:0.05,shape:'sphere',lock:null,tooltip:null,tooltipDelay:300,tooltipClass:'tctooltip',radiusX:1,radiusY:1,radiusZ:1,stretchX:1,stretchY:1,offsetX:0,offsetY:0,shuffleTags:!1,noSelect:!1,noMouse:!1,imageScale:1,paused:!1,dragControl:!1,dragThreshold:4,centreFunc:Nop,splitWidth:0,animTiming:'Smooth',clickToFront:!1,fadeIn:0,padding:0,bgColour:null,bgRadius:0,bgOutline:null,bgOutlineThickness:0,outlineIncrease:4,textAlign:'centre',textVAlign:'middle',imageMode:null,imagePosition:null,imagePadding:2,imageAlign:'centre',imageVAlign:'middle',noTagsMessage:!0,centreImage:null,pinchZoom:!1,repeatTags:0,minTags:0,imageRadius:0,scrollPause:!1,outlineDash:0,outlineDashSpace:0,outlineDashSpeed:1};for(i in TagCanvas.options)TagCanvas[i]=TagCanvas.options[i];window.TagCanvas=TagCanvas;jQuery.fn.tagcanvas=function(options,lctr){var fn={pause:function(){$(this).each(function(){tccall('Pause',$(this)[0].id)})},resume:function(){$(this).each(function(){tccall('Resume',$(this)[0].id)})},reload:function(){$(this).each(function(){tccall('Load',$(this)[0].id)})},update:function(){$(this).each(function(){tccall('Update',$(this)[0].id)})},tagtofront:function(){$(this).each(function(){TagCanvas.TagToFront($(this)[0].id,lctr)})},rotatetag:function(){$(this).each(function(){TagCanvas.RotateTag($(this)[0].id,lctr)})},'delete':function(){$(this).each(function(){TagCanvas.Delete($(this)[0].id)})},setspeed:function(){$(this).each(function(){TagCanvas.SetSpeed($(this)[0].id,lctr)})}};if(typeof options=='string'&&fn[options]){fn[options].apply(this);return this}else{TagCanvas.jquery=1;$(this).each(function(){TagCanvas.Start($(this)[0].id,lctr,options)});return TagCanvas.started}};AddHandler('load',function(){TagCanvas.loaded=1},window)})(jQuery);
/* rank:50standard - minify:ok. vendor_bundled/vendor/jquery/plugins/colorbox/jquery.colorbox.js */
(function($,document,window){var
defaults={html:!1,photo:!1,iframe:!1,inline:!1,transition:"elastic",speed:300,fadeOut:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,opacity:0.9,preloading:!0,className:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:undefined,closeButton:!0,fastIframe:!0,open:!1,reposition:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",photoRegex:/\.(gif|png|jp(e|g|eg)|bmp|ico|webp|jxr|svg)((#|\?).*)?$/i,retinaImage:!1,retinaUrl:!1,retinaSuffix:'@2x.$1',current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",returnFocus:!0,trapFocus:!0,onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,rel:function(){return this.rel},href:function(){return $(this).attr('href')},title:function(){return this.title},createImg:function(){var img=new Image();var attrs=$(this).data('cbox-img-attrs');if(typeof attrs==='object'){$.each(attrs,function(key,val){img[key]=val})}
return img},createIframe:function(){var iframe=document.createElement('iframe');var attrs=$(this).data('cbox-iframe-attrs');if(typeof attrs==='object'){$.each(attrs,function(key,val){iframe[key]=val})}
if('frameBorder' in iframe){iframe.frameBorder=0}
if('allowTransparency' in iframe){iframe.allowTransparency="true"}
iframe.name=(new Date()).getTime();iframe.allowFullscreen=!0;return iframe}},colorbox='colorbox',prefix='cbox',boxElement=prefix+'Element',event_open=prefix+'_open',event_load=prefix+'_load',event_complete=prefix+'_complete',event_cleanup=prefix+'_cleanup',event_closed=prefix+'_closed',event_purge=prefix+'_purge',$overlay,$box,$wrap,$content,$topBorder,$leftBorder,$rightBorder,$bottomBorder,$related,$window,$loaded,$loadingBay,$loadingOverlay,$title,$current,$slideshow,$next,$prev,$close,$groupControls,$events=$('<a/>'),settings,interfaceHeight,interfaceWidth,loadedHeight,loadedWidth,index,photo,open,active,closing,loadingTimer,publicMethod,div="div",requests=0,previousCSS={},init;function $tag(tag,id,css){var element=document.createElement(tag);if(id){element.id=prefix+id}
if(css){element.style.cssText=css}
return $(element)}
function winheight(){return window.innerHeight?window.innerHeight:$(window).height()}
function Settings(element,options){if(options!==Object(options)){options={}}
this.cache={};this.el=element;this.value=function(key){var dataAttr;if(this.cache[key]===undefined){dataAttr=$(this.el).attr('data-cbox-'+key);if(dataAttr!==undefined){this.cache[key]=dataAttr}else if(options[key]!==undefined){this.cache[key]=options[key]}else if(defaults[key]!==undefined){this.cache[key]=defaults[key]}}
return this.cache[key]};this.get=function(key){var value=this.value(key);return $.isFunction(value)?value.call(this.el,this):value}}
function getIndex(increment){var
max=$related.length,newIndex=(index+increment)%max;return(newIndex<0)?max+newIndex:newIndex}
function setSize(size,dimension){return Math.round((/%/.test(size)?((dimension==='x'?$window.width():winheight())/100):1)*parseInt(size,10))}
function isImage(settings,url){return settings.get('photo')||settings.get('photoRegex').test(url)}
function retinaUrl(settings,url){return settings.get('retinaUrl')&&window.devicePixelRatio>1?url.replace(settings.get('photoRegex'),settings.get('retinaSuffix')):url}
function trapFocus(e){if('contains' in $box[0]&&!$box[0].contains(e.target)&&e.target!==$overlay[0]){e.stopPropagation();$box.focus()}}
function setClass(str){if(setClass.str!==str){$box.add($overlay).removeClass(setClass.str).addClass(str);setClass.str=str}}
function getRelated(rel){index=0;if(rel&&rel!==!1&&rel!=='nofollow'){$related=$('.'+boxElement).filter(function(){var options=$.data(this,colorbox);var settings=new Settings(this,options);return(settings.get('rel')===rel)});index=$related.index(settings.el);if(index===-1){$related=$related.add(settings.el);index=$related.length-1}}else{$related=$(settings.el)}}
function trigger(event){$(document).trigger(event);$events.triggerHandler(event)}
var slideshow=(function(){var active,className=prefix+"Slideshow_",click="click."+prefix,timeOut;function clear(){clearTimeout(timeOut)}
function set(){if(settings.get('loop')||$related[index+1]){clear();timeOut=setTimeout(publicMethod.next,settings.get('slideshowSpeed'))}}
function start(){$slideshow.html(settings.get('slideshowStop')).unbind(click).one(click,stop);$events.bind(event_complete,set).bind(event_load,clear);$box.removeClass(className+"off").addClass(className+"on")}
function stop(){clear();$events.unbind(event_complete,set).unbind(event_load,clear);$slideshow.html(settings.get('slideshowStart')).unbind(click).one(click,function(){publicMethod.next();start()});$box.removeClass(className+"on").addClass(className+"off")}
function reset(){active=!1;$slideshow.hide();clear();$events.unbind(event_complete,set).unbind(event_load,clear);$box.removeClass(className+"off "+className+"on")}
return function(){if(active){if(!settings.get('slideshow')){$events.unbind(event_cleanup,reset);reset()}}else{if(settings.get('slideshow')&&$related[1]){active=!0;$events.one(event_cleanup,reset);if(settings.get('slideshowAuto')){start()}else{stop()}
$slideshow.show()}}}}());function launch(element){var options;if(!closing){options=$(element).data(colorbox);settings=new Settings(element,options);getRelated(settings.get('rel'));if(!open){open=active=!0;setClass(settings.get('className'));$box.css({visibility:'hidden',display:'block',opacity:''});$loaded=$tag(div,'LoadedContent','width:0; height:0; overflow:hidden; visibility:hidden');$content.css({width:'',height:''}).append($loaded);interfaceHeight=$topBorder.height()+$bottomBorder.height()+$content.outerHeight(!0)-$content.height();interfaceWidth=$leftBorder.width()+$rightBorder.width()+$content.outerWidth(!0)-$content.width();loadedHeight=$loaded.outerHeight(!0);loadedWidth=$loaded.outerWidth(!0);var initialWidth=setSize(settings.get('initialWidth'),'x');var initialHeight=setSize(settings.get('initialHeight'),'y');var maxWidth=settings.get('maxWidth');var maxHeight=settings.get('maxHeight');settings.w=Math.max((maxWidth!==!1?Math.min(initialWidth,setSize(maxWidth,'x')):initialWidth)-loadedWidth-interfaceWidth,0);settings.h=Math.max((maxHeight!==!1?Math.min(initialHeight,setSize(maxHeight,'y')):initialHeight)-loadedHeight-interfaceHeight,0);$loaded.css({width:'',height:settings.h});publicMethod.position();trigger(event_open);settings.get('onOpen');$groupControls.add($title).hide();$box.focus();if(settings.get('trapFocus')){if(document.addEventListener){document.addEventListener('focus',trapFocus,!0);$events.one(event_closed,function(){document.removeEventListener('focus',trapFocus,!0)})}}
if(settings.get('returnFocus')){$events.one(event_closed,function(){$(settings.el).focus()})}}
var opacity=parseFloat(settings.get('opacity'));$overlay.css({opacity:opacity===opacity?opacity:'',cursor:settings.get('overlayClose')?'pointer':'',visibility:'visible'}).show();if(settings.get('closeButton')){$close.html(settings.get('close')).appendTo($content)}else{$close.appendTo('<div/>')}
load()}}
function appendHTML(){if(!$box){init=!1;$window=$(window);$box=$tag(div).attr({id:colorbox,'class':$.support.opacity===!1?prefix+'IE':'',role:'dialog',tabindex:'-1'}).hide();$overlay=$tag(div,"Overlay").hide();$loadingOverlay=$([$tag(div,"LoadingOverlay")[0],$tag(div,"LoadingGraphic")[0]]);$wrap=$tag(div,"Wrapper");$content=$tag(div,"Content").append($title=$tag(div,"Title"),$current=$tag(div,"Current"),$prev=$('<button type="button"/>').attr({id:prefix+'Previous'}),$next=$('<button type="button"/>').attr({id:prefix+'Next'}),$slideshow=$('<button type="button"/>').attr({id:prefix+'Slideshow'}),$loadingOverlay);$close=$('<button type="button"/>').attr({id:prefix+'Close'});$wrap.append($tag(div).append($tag(div,"TopLeft"),$topBorder=$tag(div,"TopCenter"),$tag(div,"TopRight")),$tag(div,!1,'clear:left').append($leftBorder=$tag(div,"MiddleLeft"),$content,$rightBorder=$tag(div,"MiddleRight")),$tag(div,!1,'clear:left').append($tag(div,"BottomLeft"),$bottomBorder=$tag(div,"BottomCenter"),$tag(div,"BottomRight"))).find('div div').css({'float':'left'});$loadingBay=$tag(div,!1,'position:absolute; width:9999px; visibility:hidden; display:none; max-width:none;');$groupControls=$next.add($prev).add($current).add($slideshow)}
if(document.body&&!$box.parent().length){$(document.body).append($overlay,$box.append($wrap,$loadingBay))}}
function addBindings(){function clickHandler(e){if(!(e.which>1||e.shiftKey||e.altKey||e.metaKey||e.ctrlKey)){e.preventDefault();launch(this)}}
if($box){if(!init){init=!0;$next.click(function(){publicMethod.next()});$prev.click(function(){publicMethod.prev()});$close.click(function(){publicMethod.close()});$overlay.click(function(){if(settings.get('overlayClose')){publicMethod.close()}});$(document).bind('keydown.'+prefix,function(e){var key=e.keyCode;if(open&&settings.get('escKey')&&key===27){e.preventDefault();publicMethod.close()}
if(open&&settings.get('arrowKey')&&$related[1]&&!e.altKey){if(key===37){e.preventDefault();$prev.click()}else if(key===39){e.preventDefault();$next.click()}}});if($.isFunction($.fn.on)){$(document).on('click.'+prefix,'.'+boxElement,clickHandler)}else{$('.'+boxElement).live('click.'+prefix,clickHandler)}}
return!0}
return!1}
if($[colorbox]){return}
$(appendHTML);publicMethod=$.fn[colorbox]=$[colorbox]=function(options,callback){var settings;var $obj=this;options=options||{};if($.isFunction($obj)){$obj=$('<a/>');options.open=!0}
if(!$obj[0]){return $obj}
appendHTML();if(addBindings()){if(callback){options.onComplete=callback}
$obj.each(function(){var old=$.data(this,colorbox)||{};$.data(this,colorbox,$.extend(old,options))}).addClass(boxElement);settings=new Settings($obj[0],options);if(settings.get('open')){launch($obj[0])}}
return $obj};publicMethod.position=function(speed,loadedCallback){var
css,top=0,left=0,offset=$box.offset(),scrollTop,scrollLeft;$window.unbind('resize.'+prefix);$box.css({top:-9e4,left:-9e4});scrollTop=$window.scrollTop();scrollLeft=$window.scrollLeft();if(settings.get('fixed')){offset.top-=scrollTop;offset.left-=scrollLeft;$box.css({position:'fixed'})}else{top=scrollTop;left=scrollLeft;$box.css({position:'absolute'})}
if(settings.get('right')!==!1){left+=Math.max($window.width()-settings.w-loadedWidth-interfaceWidth-setSize(settings.get('right'),'x'),0)}else if(settings.get('left')!==!1){left+=setSize(settings.get('left'),'x')}else{left+=Math.round(Math.max($window.width()-settings.w-loadedWidth-interfaceWidth,0)/2)}
if(settings.get('bottom')!==!1){top+=Math.max(winheight()-settings.h-loadedHeight-interfaceHeight-setSize(settings.get('bottom'),'y'),0)}else if(settings.get('top')!==!1){top+=setSize(settings.get('top'),'y')}else{top+=Math.round(Math.max(winheight()-settings.h-loadedHeight-interfaceHeight,0)/2)}
$box.css({top:offset.top,left:offset.left,visibility:'visible'});$wrap[0].style.width=$wrap[0].style.height="9999px";function modalDimensions(){$topBorder[0].style.width=$bottomBorder[0].style.width=$content[0].style.width=(parseInt($box[0].style.width,10)-interfaceWidth)+'px';$content[0].style.height=$leftBorder[0].style.height=$rightBorder[0].style.height=(parseInt($box[0].style.height,10)-interfaceHeight)+'px'}
css={width:settings.w+loadedWidth+interfaceWidth,height:settings.h+loadedHeight+interfaceHeight,top:top,left:left};if(speed){var tempSpeed=0;$.each(css,function(i){if(css[i]!==previousCSS[i]){tempSpeed=speed;return}});speed=tempSpeed}
previousCSS=css;if(!speed){$box.css(css)}
$box.dequeue().animate(css,{duration:speed||0,complete:function(){modalDimensions();active=!1;$wrap[0].style.width=(settings.w+loadedWidth+interfaceWidth)+"px";$wrap[0].style.height=(settings.h+loadedHeight+interfaceHeight)+"px";if(settings.get('reposition')){setTimeout(function(){$window.bind('resize.'+prefix,publicMethod.position)},1)}
if($.isFunction(loadedCallback)){loadedCallback()}},step:modalDimensions})};publicMethod.resize=function(options){var scrolltop;if(open){options=options||{};if(options.width){settings.w=setSize(options.width,'x')-loadedWidth-interfaceWidth}
if(options.innerWidth){settings.w=setSize(options.innerWidth,'x')}
$loaded.css({width:settings.w});if(options.height){settings.h=setSize(options.height,'y')-loadedHeight-interfaceHeight}
if(options.innerHeight){settings.h=setSize(options.innerHeight,'y')}
if(!options.innerHeight&&!options.height){scrolltop=$loaded.scrollTop();$loaded.css({height:"auto"});settings.h=$loaded.height()}
$loaded.css({height:settings.h});if(scrolltop){$loaded.scrollTop(scrolltop)}
publicMethod.position(settings.get('transition')==="none"?0:settings.get('speed'))}};publicMethod.prep=function(object){if(!open){return}
var callback,speed=settings.get('transition')==="none"?0:settings.get('speed');$loaded.remove();$loaded=$tag(div,'LoadedContent').append(object);function getWidth(){settings.w=settings.w||$loaded.width();settings.w=settings.mw&&settings.mw<settings.w?settings.mw:settings.w;return settings.w}
function getHeight(){settings.h=settings.h||$loaded.height();settings.h=settings.mh&&settings.mh<settings.h?settings.mh:settings.h;return settings.h}
$loaded.hide().appendTo($loadingBay.show()).css({width:getWidth(),overflow:settings.get('scrolling')?'auto':'hidden'}).css({height:getHeight()}).prependTo($content);$loadingBay.hide();$(photo).css({'float':'none'});setClass(settings.get('className'));callback=function(){var total=$related.length,iframe,complete;if(!open){return}
function removeFilter(){if($.support.opacity===!1){$box[0].style.removeAttribute('filter')}}
complete=function(){clearTimeout(loadingTimer);$loadingOverlay.hide();trigger(event_complete);settings.get('onComplete')};$title.html(settings.get('title')).show();$loaded.show();if(total>1){if(typeof settings.get('current')==="string"){$current.html(settings.get('current').replace('{current}',index+1).replace('{total}',total)).show()}
$next[(settings.get('loop')||index<total-1)?"show":"hide"]().html(settings.get('next'));$prev[(settings.get('loop')||index)?"show":"hide"]().html(settings.get('previous'));slideshow();if(settings.get('preloading')){$.each([getIndex(-1),getIndex(1)],function(){var img,i=$related[this],settings=new Settings(i,$.data(i,colorbox)),src=settings.get('href');if(src&&isImage(settings,src)){src=retinaUrl(settings,src);img=document.createElement('img');img.src=src}})}}else{$groupControls.hide()}
if(settings.get('iframe')){iframe=settings.get('createIframe');if(!settings.get('scrolling')){iframe.scrolling="no"}
$(iframe).attr({src:settings.get('href'),'class':prefix+'Iframe'}).one('load',complete).appendTo($loaded);$events.one(event_purge,function(){iframe.src="//about:blank"});if(settings.get('fastIframe')){$(iframe).trigger('load')}}else{complete()}
if(settings.get('transition')==='fade'){$box.fadeTo(speed,1,removeFilter)}else{removeFilter()}};if(settings.get('transition')==='fade'){$box.fadeTo(speed,0,function(){publicMethod.position(0,callback)})}else{publicMethod.position(speed,callback)}};function load(){var href,setResize,prep=publicMethod.prep,$inline,request=++requests;active=!0;photo=!1;trigger(event_purge);trigger(event_load);settings.get('onLoad');settings.h=settings.get('height')?setSize(settings.get('height'),'y')-loadedHeight-interfaceHeight:settings.get('innerHeight')&&setSize(settings.get('innerHeight'),'y');settings.w=settings.get('width')?setSize(settings.get('width'),'x')-loadedWidth-interfaceWidth:settings.get('innerWidth')&&setSize(settings.get('innerWidth'),'x');settings.mw=settings.w;settings.mh=settings.h;if(settings.get('maxWidth')){settings.mw=setSize(settings.get('maxWidth'),'x')-loadedWidth-interfaceWidth;settings.mw=settings.w&&settings.w<settings.mw?settings.w:settings.mw}
if(settings.get('maxHeight')){settings.mh=setSize(settings.get('maxHeight'),'y')-loadedHeight-interfaceHeight;settings.mh=settings.h&&settings.h<settings.mh?settings.h:settings.mh}
href=settings.get('href');loadingTimer=setTimeout(function(){$loadingOverlay.show()},100);if(settings.get('inline')){var $target=$(href).eq(0);$inline=$('<div>').hide().insertBefore($target);$events.one(event_purge,function(){$inline.replaceWith($target)});prep($target)}else if(settings.get('iframe')){prep(" ")}else if(settings.get('html')){prep(settings.get('html'))}else if(isImage(settings,href)){href=retinaUrl(settings,href);photo=settings.get('createImg');$(photo).addClass(prefix+'Photo').bind('error.'+prefix,function(){prep($tag(div,'Error').html(settings.get('imgError')))}).one('load',function(){if(request!==requests){return}
setTimeout(function(){var percent;if(settings.get('retinaImage')&&window.devicePixelRatio>1){photo.height=photo.height/window.devicePixelRatio;photo.width=photo.width/window.devicePixelRatio}
if(settings.get('scalePhotos')){setResize=function(){photo.height-=photo.height*percent;photo.width-=photo.width*percent};if(settings.mw&&photo.width>settings.mw){percent=(photo.width-settings.mw)/photo.width;setResize()}
if(settings.mh&&photo.height>settings.mh){percent=(photo.height-settings.mh)/photo.height;setResize()}}
if(settings.h){photo.style.marginTop=Math.max(settings.mh-photo.height,0)/2+'px'}
if($related[1]&&(settings.get('loop')||$related[index+1])){photo.style.cursor='pointer';$(photo).bind('click.'+prefix,function(){publicMethod.next()})}
photo.style.width=photo.width+'px';photo.style.height=photo.height+'px';prep(photo)},1)});photo.src=href}else if(href){$loadingBay.load(href,settings.get('data'),function(data,status){if(request===requests){prep(status==='error'?$tag(div,'Error').html(settings.get('xhrError')):$(this).contents())}})}}
publicMethod.next=function(){if(!active&&$related[1]&&(settings.get('loop')||$related[index+1])){index=getIndex(1);launch($related[index])}};publicMethod.prev=function(){if(!active&&$related[1]&&(settings.get('loop')||index)){index=getIndex(-1);launch($related[index])}};publicMethod.close=function(){if(open&&!closing){closing=!0;open=!1;trigger(event_cleanup);settings.get('onCleanup');$window.unbind('.'+prefix);$overlay.fadeTo(settings.get('fadeOut')||0,0);$box.stop().fadeTo(settings.get('fadeOut')||0,0,function(){$box.hide();$overlay.hide();trigger(event_purge);$loaded.remove();setTimeout(function(){closing=!1;trigger(event_closed);settings.get('onClosed')},1)})}};publicMethod.remove=function(){if(!$box){return}
$box.stop();$[colorbox].close();$box.stop(!1,!0).remove();$overlay.remove();closing=!1;$box=null;$('.'+boxElement).removeData(colorbox).removeClass(boxElement);$(document).unbind('click.'+prefix).unbind('keydown.'+prefix)};publicMethod.element=function(){return $(settings.el)};publicMethod.settings=defaults}(jQuery,document,window));
/* rank:50standard - minify:ok. vendor_bundled/vendor/jquery/plugins/jquery-validation/dist/jquery.validate.js */
(function(factory){if(typeof define==="function"&&define.amd){define(["jquery"],factory)}else{factory(jQuery)}}(function($){$.extend($.fn,{validate:function(options){if(!this.length){if(options&&options.debug&&window.console){console.warn("Nothing selected, can't validate, returning nothing.")}
return}
var validator=$.data(this[0],"validator");if(validator){return validator}
this.attr("novalidate","novalidate");validator=new $.validator(options,this[0]);$.data(this[0],"validator",validator);if(validator.settings.onsubmit){this.validateDelegate(":submit","click",function(event){if(validator.settings.submitHandler){validator.submitButton=event.target}
if($(event.target).hasClass("cancel")){validator.cancelSubmit=!0}
if($(event.target).attr("formnovalidate")!==undefined){validator.cancelSubmit=!0}});this.submit(function(event){if(validator.settings.debug){event.preventDefault()}
function handle(){var hidden,result;if(validator.settings.submitHandler){if(validator.submitButton){hidden=$("<input type='hidden'/>").attr("name",validator.submitButton.name).val($(validator.submitButton).val()).appendTo(validator.currentForm)}
result=validator.settings.submitHandler.call(validator,validator.currentForm,event);if(validator.submitButton){hidden.remove()}
if(result!==undefined){return result}
return!1}
return!0}
if(validator.cancelSubmit){validator.cancelSubmit=!1;return handle()}
if(validator.form()){if(validator.pendingRequest){validator.formSubmitted=!0;return!1}
return handle()}else{validator.focusInvalid();return!1}})}
return validator},valid:function(){var valid,validator;if($(this[0]).is("form")){valid=this.validate().form()}else{valid=!0;validator=$(this[0].form).validate();this.each(function(){valid=validator.element(this)&&valid})}
return valid},removeAttrs:function(attributes){var result={},$element=this;$.each(attributes.split(/\s/),function(index,value){result[value]=$element.attr(value);$element.removeAttr(value)});return result},rules:function(command,argument){var element=this[0],settings,staticRules,existingRules,data,param,filtered;if(command){settings=$.data(element.form,"validator").settings;staticRules=settings.rules;existingRules=$.validator.staticRules(element);switch(command){case "add":$.extend(existingRules,$.validator.normalizeRule(argument));delete existingRules.messages;staticRules[element.name]=existingRules;if(argument.messages){settings.messages[element.name]=$.extend(settings.messages[element.name],argument.messages)}
break;case "remove":if(!argument){delete staticRules[element.name];return existingRules}
filtered={};$.each(argument.split(/\s/),function(index,method){filtered[method]=existingRules[method];delete existingRules[method];if(method==="required"){$(element).removeAttr("aria-required")}});return filtered}}
data=$.validator.normalizeRules($.extend({},$.validator.classRules(element),$.validator.attributeRules(element),$.validator.dataRules(element),$.validator.staticRules(element)),element);if(data.required){param=data.required;delete data.required;data=$.extend({required:param},data);$(element).attr("aria-required","true")}
if(data.remote){param=data.remote;delete data.remote;data=$.extend(data,{remote:param})}
return data}});$.extend($.expr[":"],{blank:function(a){return!$.trim(""+$(a).val())},filled:function(a){return!!$.trim(""+$(a).val())},unchecked:function(a){return!$(a).prop("checked")}});$.validator=function(options,form){this.settings=$.extend(!0,{},$.validator.defaults,options);this.currentForm=form;this.init()};$.validator.format=function(source,params){if(arguments.length===1){return function(){var args=$.makeArray(arguments);args.unshift(source);return $.validator.format.apply(this,args)}}
if(arguments.length>2&&params.constructor!==Array){params=$.makeArray(arguments).slice(1)}
if(params.constructor!==Array){params=[params]}
$.each(params,function(i,n){source=source.replace(new RegExp("\\{"+i+"\\}","g"),function(){return n})});return source};$.extend($.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:$([]),errorLabelContainer:$([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(element){this.lastActive=element;if(this.settings.focusCleanup){if(this.settings.unhighlight){this.settings.unhighlight.call(this,element,this.settings.errorClass,this.settings.validClass)}
this.hideThese(this.errorsFor(element))}},onfocusout:function(element){if(!this.checkable(element)&&(element.name in this.submitted||!this.optional(element))){this.element(element)}},onkeyup:function(element,event){if(event.which===9&&this.elementValue(element)===""){return}else if(element.name in this.submitted||element===this.lastElement){this.element(element)}},onclick:function(element){if(element.name in this.submitted){this.element(element)}else if(element.parentNode.name in this.submitted){this.element(element.parentNode)}},highlight:function(element,errorClass,validClass){if(element.type==="radio"){this.findByName(element.name).addClass(errorClass).removeClass(validClass)}else{$(element).addClass(errorClass).removeClass(validClass)}},unhighlight:function(element,errorClass,validClass){if(element.type==="radio"){this.findByName(element.name).removeClass(errorClass).addClass(validClass)}else{$(element).removeClass(errorClass).addClass(validClass)}}},setDefaults:function(settings){$.extend($.validator.defaults,settings)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:$.validator.format("Please enter no more than {0} characters."),minlength:$.validator.format("Please enter at least {0} characters."),rangelength:$.validator.format("Please enter a value between {0} and {1} characters long."),range:$.validator.format("Please enter a value between {0} and {1}."),max:$.validator.format("Please enter a value less than or equal to {0}."),min:$.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){this.labelContainer=$(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||$(this.currentForm);this.containers=$(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var groups=(this.groups={}),rules;$.each(this.settings.groups,function(key,value){if(typeof value==="string"){value=value.split(/\s/)}
$.each(value,function(index,name){groups[name]=key})});rules=this.settings.rules;$.each(rules,function(key,value){rules[key]=$.validator.normalizeRule(value)});function delegate(event){var validator=$.data(this[0].form,"validator"),eventType="on"+event.type.replace(/^validate/,""),settings=validator.settings;if(settings[eventType]&&!this.is(settings.ignore)){settings[eventType].call(validator,this[0],event)}}
$(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, "+"[type='number'], [type='search'] ,[type='tel'], [type='url'], "+"[type='email'], [type='datetime'], [type='date'], [type='month'], "+"[type='week'], [type='time'], [type='datetime-local'], "+"[type='range'], [type='color'], [type='radio'], [type='checkbox']","focusin focusout keyup",delegate).validateDelegate("select, option, [type='radio'], [type='checkbox']","click",delegate);if(this.settings.invalidHandler){$(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)}
$(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){this.checkForm();$.extend(this.submitted,this.errorMap);this.invalid=$.extend({},this.errorMap);if(!this.valid()){$(this.currentForm).triggerHandler("invalid-form",[this])}
this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var i=0,elements=(this.currentElements=this.elements());elements[i];i++){this.check(elements[i])}
return this.valid()},element:function(element){var cleanElement=this.clean(element),checkElement=this.validationTargetFor(cleanElement),result=!0;this.lastElement=checkElement;if(checkElement===undefined){delete this.invalid[cleanElement.name]}else{this.prepareElement(checkElement);this.currentElements=$(checkElement);result=this.check(checkElement)!==!1;if(result){delete this.invalid[checkElement.name]}else{this.invalid[checkElement.name]=!0}}
$(element).attr("aria-invalid",!result);if(!this.numberOfInvalids()){this.toHide=this.toHide.add(this.containers)}
this.showErrors();return result},showErrors:function(errors){if(errors){$.extend(this.errorMap,errors);this.errorList=[];for(var name in errors){this.errorList.push({message:errors[name],element:this.findByName(name)[0]})}
this.successList=$.grep(this.successList,function(element){return!(element.name in errors)})}
if(this.settings.showErrors){this.settings.showErrors.call(this,this.errorMap,this.errorList)}else{this.defaultShowErrors()}},resetForm:function(){if($.fn.resetForm){$(this.currentForm).resetForm()}
this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass).removeData("previousValue").removeAttr("aria-invalid")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(obj){var count=0,i;for(i in obj){count++}
return count},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(errors){errors.not(this.containers).text("");this.addWrapper(errors).hide()},valid:function(){return this.size()===0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid){try{$(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}}},findLastActive:function(){var lastActive=this.lastActive;return lastActive&&$.grep(this.errorList,function(n){return n.element.name===lastActive.name}).length===1&&lastActive},elements:function(){var validator=this,rulesCache={};return $(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled], [readonly]").not(this.settings.ignore).filter(function(){if(!this.name&&validator.settings.debug&&window.console){console.error("%o has no name assigned",this)}
if(this.name in rulesCache||!validator.objectLength($(this).rules())){return!1}
rulesCache[this.name]=!0;return!0})},clean:function(selector){return $(selector)[0]},errors:function(){var errorClass=this.settings.errorClass.split(" ").join(".");return $(this.settings.errorElement+"."+errorClass,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=$([]);this.toHide=$([]);this.currentElements=$([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(element){this.reset();this.toHide=this.errorsFor(element)},elementValue:function(element){var val,$element=$(element),type=element.type;if(type==="radio"||type==="checkbox"){return $("input[name='"+element.name+"']:checked").val()}else if(type==="number"&&typeof element.validity!=="undefined"){return element.validity.badInput?!1:$element.val()}
val=$element.val();if(typeof val==="string"){return val.replace(/\r/g,"")}
return val},check:function(element){element=this.validationTargetFor(this.clean(element));var rules=$(element).rules(),rulesCount=$.map(rules,function(n,i){return i}).length,dependencyMismatch=!1,val=this.elementValue(element),result,method,rule;for(method in rules){rule={method:method,parameters:rules[method]};try{result=$.validator.methods[method].call(this,val,element,rule.parameters);if(result==="dependency-mismatch"&&rulesCount===1){dependencyMismatch=!0;continue}
dependencyMismatch=!1;if(result==="pending"){this.toHide=this.toHide.not(this.errorsFor(element));return}
if(!result){this.formatAndAdd(element,rule);return!1}}catch(e){if(this.settings.debug&&window.console){console.log("Exception occurred when checking element "+element.id+", check the '"+rule.method+"' method.",e)}
throw e}}
if(dependencyMismatch){return}
if(this.objectLength(rules)){this.successList.push(element)}
return!0},customDataMessage:function(element,method){return $(element).data("msg"+method.charAt(0).toUpperCase()+method.substring(1).toLowerCase())||$(element).data("msg")},customMessage:function(name,method){var m=this.settings.messages[name];return m&&(m.constructor===String?m:m[method])},findDefined:function(){for(var i=0;i<arguments.length;i++){if(arguments[i]!==undefined){return arguments[i]}}
return undefined},defaultMessage:function(element,method){return this.findDefined(this.customMessage(element.name,method),this.customDataMessage(element,method),!this.settings.ignoreTitle&&element.title||undefined,$.validator.messages[method],"<strong>Warning: No message defined for "+element.name+"</strong>")},formatAndAdd:function(element,rule){var message=this.defaultMessage(element,rule.method),theregex=/\$?\{(\d+)\}/g;if(typeof message==="function"){message=message.call(this,rule.parameters,element)}else if(theregex.test(message)){message=$.validator.format(message.replace(theregex,"{$1}"),rule.parameters)}
this.errorList.push({message:message,element:element,method:rule.method});this.errorMap[element.name]=message;this.submitted[element.name]=message},addWrapper:function(toToggle){if(this.settings.wrapper){toToggle=toToggle.add(toToggle.parent(this.settings.wrapper))}
return toToggle},defaultShowErrors:function(){var i,elements,error;for(i=0;this.errorList[i];i++){error=this.errorList[i];if(this.settings.highlight){this.settings.highlight.call(this,error.element,this.settings.errorClass,this.settings.validClass)}
this.showLabel(error.element,error.message)}
if(this.errorList.length){this.toShow=this.toShow.add(this.containers)}
if(this.settings.success){for(i=0;this.successList[i];i++){this.showLabel(this.successList[i])}}
if(this.settings.unhighlight){for(i=0,elements=this.validElements();elements[i];i++){this.settings.unhighlight.call(this,elements[i],this.settings.errorClass,this.settings.validClass)}}
this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return $(this.errorList).map(function(){return this.element})},showLabel:function(element,message){var place,group,errorID,error=this.errorsFor(element),elementID=this.idOrName(element),describedBy=$(element).attr("aria-describedby");if(error.length){error.removeClass(this.settings.validClass).addClass(this.settings.errorClass);error.html(message)}else{error=$("<"+this.settings.errorElement+">").attr("id",elementID+"-error").addClass(this.settings.errorClass).html(message||"");place=error;if(this.settings.wrapper){place=error.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()}
if(this.labelContainer.length){this.labelContainer.append(place)}else if(this.settings.errorPlacement){this.settings.errorPlacement(place,$(element))}else{place.insertAfter(element)}
if(error.is("label")){error.attr("for",elementID)}else if(error.parents("label[for='"+elementID+"']").length===0){errorID=error.attr("id").replace(/(:|\.|\[|\])/g,"\\$1");if(!describedBy){describedBy=errorID}else if(!describedBy.match(new RegExp("\\b"+errorID+"\\b"))){describedBy+=" "+errorID}
$(element).attr("aria-describedby",describedBy);group=this.groups[element.name];if(group){$.each(this.groups,function(name,testgroup){if(testgroup===group){$("[name='"+name+"']",this.currentForm).attr("aria-describedby",error.attr("id"))}})}}}
if(!message&&this.settings.success){error.text("");if(typeof this.settings.success==="string"){error.addClass(this.settings.success)}else{this.settings.success(error,element)}}
this.toShow=this.toShow.add(error)},errorsFor:function(element){var name=this.idOrName(element),describer=$(element).attr("aria-describedby"),selector="label[for='"+name+"'], label[for='"+name+"'] *";if(describer){selector=selector+", #"+describer.replace(/\s+/g,", #")}
return this.errors().filter(selector)},idOrName:function(element){return this.groups[element.name]||(this.checkable(element)?element.name:element.id||element.name)},validationTargetFor:function(element){if(this.checkable(element)){element=this.findByName(element.name)}
return $(element).not(this.settings.ignore)[0]},checkable:function(element){return(/radio|checkbox/i).test(element.type)},findByName:function(name){return $(this.currentForm).find("[name='"+name+"']")},getLength:function(value,element){switch(element.nodeName.toLowerCase()){case "select":return $("option:selected",element).length;case "input":if(this.checkable(element)){return this.findByName(element.name).filter(":checked").length}}
return value.length},depend:function(param,element){return this.dependTypes[typeof param]?this.dependTypes[typeof param](param,element):!0},dependTypes:{"boolean":function(param){return param},"string":function(param,element){return!!$(param,element.form).length},"function":function(param,element){return param(element)}},optional:function(element){var val=this.elementValue(element);return!$.validator.methods.required.call(this,val,element)&&"dependency-mismatch"},startRequest:function(element){if(!this.pending[element.name]){this.pendingRequest++;this.pending[element.name]=!0}},stopRequest:function(element,valid){this.pendingRequest--;if(this.pendingRequest<0){this.pendingRequest=0}
delete this.pending[element.name];if(valid&&this.pendingRequest===0&&this.formSubmitted&&this.form()){$(this.currentForm).submit();this.formSubmitted=!1}else if(!valid&&this.pendingRequest===0&&this.formSubmitted){$(this.currentForm).triggerHandler("invalid-form",[this]);this.formSubmitted=!1}},previousValue:function(element){return $.data(element,"previousValue")||$.data(element,"previousValue",{old:null,valid:!0,message:this.defaultMessage(element,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(className,rules){if(className.constructor===String){this.classRuleSettings[className]=rules}else{$.extend(this.classRuleSettings,className)}},classRules:function(element){var rules={},classes=$(element).attr("class");if(classes){$.each(classes.split(" "),function(){if(this in $.validator.classRuleSettings){$.extend(rules,$.validator.classRuleSettings[this])}})}
return rules},attributeRules:function(element){var rules={},$element=$(element),type=element.getAttribute("type"),method,value;for(method in $.validator.methods){if(method==="required"){value=element.getAttribute(method);if(value===""){value=!0}
value=!!value}else{value=$element.attr(method)}
if(/min|max/.test(method)&&(type===null||/number|range|text/.test(type))){value=Number(value)}
if(value||value===0){rules[method]=value}else if(type===method&&type!=="range"){rules[method]=!0}}
if(rules.maxlength&&/-1|2147483647|524288/.test(rules.maxlength)){delete rules.maxlength}
return rules},dataRules:function(element){var method,value,rules={},$element=$(element);for(method in $.validator.methods){value=$element.data("rule"+method.charAt(0).toUpperCase()+method.substring(1).toLowerCase());if(value!==undefined){rules[method]=value}}
return rules},staticRules:function(element){var rules={},validator=$.data(element.form,"validator");if(validator.settings.rules){rules=$.validator.normalizeRule(validator.settings.rules[element.name])||{}}
return rules},normalizeRules:function(rules,element){$.each(rules,function(prop,val){if(val===!1){delete rules[prop];return}
if(val.param||val.depends){var keepRule=!0;switch(typeof val.depends){case "string":keepRule=!!$(val.depends,element.form).length;break;case "function":keepRule=val.depends.call(element,element);break}
if(keepRule){rules[prop]=val.param!==undefined?val.param:!0}else{delete rules[prop]}}});$.each(rules,function(rule,parameter){rules[rule]=$.isFunction(parameter)?parameter(element):parameter});$.each(["minlength","maxlength"],function(){if(rules[this]){rules[this]=Number(rules[this])}});$.each(["rangelength","range"],function(){var parts;if(rules[this]){if($.isArray(rules[this])){rules[this]=[Number(rules[this][0]),Number(rules[this][1])]}else if(typeof rules[this]==="string"){parts=rules[this].replace(/[\[\]]/g,"").split(/[\s,]+/);rules[this]=[Number(parts[0]),Number(parts[1])]}}});if($.validator.autoCreateRanges){if(rules.min!=null&&rules.max!=null){rules.range=[rules.min,rules.max];delete rules.min;delete rules.max}
if(rules.minlength!=null&&rules.maxlength!=null){rules.rangelength=[rules.minlength,rules.maxlength];delete rules.minlength;delete rules.maxlength}}
return rules},normalizeRule:function(data){if(typeof data==="string"){var transformed={};$.each(data.split(/\s/),function(){transformed[this]=!0});data=transformed}
return data},addMethod:function(name,method,message){$.validator.methods[name]=method;$.validator.messages[name]=message!==undefined?message:$.validator.messages[name];if(method.length<3){$.validator.addClassRules(name,$.validator.normalizeRule(name))}},methods:{required:function(value,element,param){if(!this.depend(param,element)){return"dependency-mismatch"}
if(element.nodeName.toLowerCase()==="select"){var val=$(element).val();return val&&val.length>0}
if(this.checkable(element)){return this.getLength(value,element)>0}
return $.trim(value).length>0},email:function(value,element){return this.optional(element)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(value)},url:function(value,element){return this.optional(element)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(value)},date:function(value,element){return this.optional(element)||!/Invalid|NaN/.test(new Date(value).toString())},dateISO:function(value,element){return this.optional(element)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(value)},number:function(value,element){return this.optional(element)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(value)},digits:function(value,element){return this.optional(element)||/^\d+$/.test(value)},creditcard:function(value,element){if(this.optional(element)){return"dependency-mismatch"}
if(/[^0-9 \-]+/.test(value)){return!1}
var nCheck=0,nDigit=0,bEven=!1,n,cDigit;value=value.replace(/\D/g,"");if(value.length<13||value.length>19){return!1}
for(n=value.length-1;n>=0;n--){cDigit=value.charAt(n);nDigit=parseInt(cDigit,10);if(bEven){if((nDigit*=2)>9){nDigit-=9}}
nCheck+=nDigit;bEven=!bEven}
return(nCheck%10)===0},minlength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength(value,element);return this.optional(element)||length>=param},maxlength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength(value,element);return this.optional(element)||length<=param},rangelength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength(value,element);return this.optional(element)||(length>=param[0]&&length<=param[1])},min:function(value,element,param){return this.optional(element)||value>=param},max:function(value,element,param){return this.optional(element)||value<=param},range:function(value,element,param){return this.optional(element)||(value>=param[0]&&value<=param[1])},equalTo:function(value,element,param){var target=$(param);if(this.settings.onfocusout){target.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){$(element).valid()})}
return value===target.val()},remote:function(value,element,param){if(this.optional(element)){return"dependency-mismatch"}
var previous=this.previousValue(element),validator,data;if(!this.settings.messages[element.name]){this.settings.messages[element.name]={}}
previous.originalMessage=this.settings.messages[element.name].remote;this.settings.messages[element.name].remote=previous.message;param=typeof param==="string"&&{url:param}||param;if(previous.old===value){return previous.valid}
previous.old=value;validator=this;this.startRequest(element);data={};data[element.name]=value;$.ajax($.extend(!0,{url:param,mode:"abort",port:"validate"+element.name,dataType:"json",data:data,context:validator.currentForm,success:function(response){var valid=response===!0||response==="true",errors,message,submitted;validator.settings.messages[element.name].remote=previous.originalMessage;if(valid){submitted=validator.formSubmitted;validator.prepareElement(element);validator.formSubmitted=submitted;validator.successList.push(element);delete validator.invalid[element.name];validator.showErrors()}else{errors={};message=response||validator.defaultMessage(element,"remote");errors[element.name]=previous.message=$.isFunction(message)?message(value):message;validator.invalid[element.name]=!0;validator.showErrors(errors)}
previous.valid=valid;validator.stopRequest(element,valid)}},param));return"pending"}}});$.format=function deprecated(){throw "$.format has been deprecated. Please use $.validator.format instead."};var pendingRequests={},ajax;if($.ajaxPrefilter){$.ajaxPrefilter(function(settings,_,xhr){var port=settings.port;if(settings.mode==="abort"){if(pendingRequests[port]){pendingRequests[port].abort()}
pendingRequests[port]=xhr}})}else{ajax=$.ajax;$.ajax=function(settings){var mode=("mode" in settings?settings:$.ajaxSettings).mode,port=("port" in settings?settings:$.ajaxSettings).port;if(mode==="abort"){if(pendingRequests[port]){pendingRequests[port].abort()}
pendingRequests[port]=ajax.apply(this,arguments);return pendingRequests[port]}
return ajax.apply(this,arguments)}}
$.extend($.fn,{validateDelegate:function(delegate,type,handler){return this.bind(type,function(event){var target=$(event.target);if(target.is(delegate)){return handler.apply(target,arguments)}})}})}));
/* rank:50standard - minify:ok. lib/validators/validator_tiki.js */
jQuery.validator.setDefaults({errorClass:'label label-warning',errorPlacement:function(error,element){if($(element).parents('.input-group').length>0){error.insertAfter($(element).parents('.input-group').first())}else if($(element).parents('.has-error').length>0){error.appendTo($(element).parents('.has-error').first())}else{error.insertAfter(element)}},highlight:function(element){$(element).parents('div, p').first().addClass('has-error')},unhighlight:function(element){$(element).parents('div, p').first().removeClass('has-error')},ignore:'.ignore'});jQuery.validator.addMethod("required_in_group",function(value,element,options){var numberRequired=options[0],excluded;var selector=options[1];if(typeof options[2]!='undefined'){excluded=options[2]}else{excluded=''}
var validOrNot=$(selector,element.form).filter(function(){if($(this).data('tiki_never_visited'))return'dummy-value-for-validation';return($(this).val()&&$(this).val().toLowerCase()!=excluded)}).length>=numberRequired;var validator=this;if(!$(element).data('being_validated')){var fields=$(selector,element.form);fields.data('being_validated',!0);validator.valid();fields.data('being_validated',!1)}
return validOrNot},jQuery.validator.format(tr("Please fill out {0} of these fields.")));jQuery.validator.addMethod("required_tracker_file",function(value,element,options){var numberRequired=options[0];var selector=options[1];var validOrNot=$(selector,element.form).filter(function(){return $(this).val()}).length>=numberRequired;if(!$(element).data('being_validated')){var fields=$(selector,element.form);fields.data('being_validated',!0);fields.valid();fields.data('being_validated',!1)}
return validOrNot},jQuery.validator.format("File required"));jQuery.validator.addMethod("email_multi",function(value,element,options){var separator=options[0]||",";var emails=$(element).val().split(separator);for(var i=0;i<emails.length;i++){if(!$.validator.methods.email.call(this,$.trim(emails[i]),element)){return!1}}
return!0},jQuery.validator.format("Please enter valid email addresses separated by commas"));jQuery.validator.addClassRules("email_multi",{email_multi:!0});function process_submit(form,event){var $form=$(form);if(!$form.attr("is_validating")){$form.attr("is_validating",!0);$form.validate()}
if($form.validate().pendingRequest>0){$(form).data("resubmit",!0);setTimeout(function(){process_submit(form,event)},500);return!1}
$form.attr("is_validating",!1);if(!$form.valid()){return!1}
$form.find("input[type=submit]").off("click").css("opacity",0.3);$form.parents(".modal").find(".auto-btn").off("click").css("opacity",0.3);if($(form).hasClass("confirm-action")){$form.tikiModal(tr("Saving..."))}
if(!$form.data('submitted')){$form.data('submitted',!0)}else{return!1}
if(typeof event!=='undefined'&&event.target){var btn=$(event.target);if(btn.is('form')){var btn=btn.find("input[type=submit]:focus")}
$("<input type='hidden'/>").attr("name",btn.attr('name')).val(btn.val()).appendTo($form)}
if($form.data("resubmit")){$form.data("resubmit",!1);$form.submit()}
return!0}
jQuery.validator.addMethod("validate_cron_runtime",function(value,element,options){var cronTime=value.trim();var regex="^(\\*|((\\*\\/)?[1-5]?[0-9])|[1-5]?[0-9]-[1-5]?[0-9]|[1-5]?[0-9](,[1-5]?[0-9])*) (\\*|((\\*\\/)?(1?[0-9]|2[0-3]))|(1?[0-9]|2[0-3])-(1?[0-9]|2[0-3])|(1?[0-9]|2[0-3])(,(1?[0-9]|2[0-3]))*) (\\*|((\\*\\/)?([1-9]|[12][0-9]|3[0-1]))|([1-9]|[12][0-9]|3[0-1])-([1-9]|[12][0-9]|3[0-1])|([1-9]|[12][0-9]|3[0-1])(,([1-9]|[12][0-9]|3[0-1]))*) (\\*|((\\*\\/)?([1-9]|1[0-2])|([1-9]|1[0-2])-([1-9]|1[0-2])|([1-9]|1[0-2])(,([1-9]|1[0-2]))*)) (\\*|((\\*\\/)?[0-6])|[0-6](,[0-6])*|[0-6]-[0-6])$";if(cronTime.match(regex)===null){$(element).parents('.form-group').first().addClass('has-error');return!1}
$(element).parents('.form-group').first().removeClass('has-error');return!0},jQuery.validator.format(tr("Cron run time is not valid")));
/* rank:50standard - minify:ok. vendor_bundled/vendor/jquery/plugins/async/jquery.async.js */
(function($){$.whileAsync=function(opts)
{var delay=Math.abs(opts.delay)||10,bulk=isNaN(opts.bulk)?500:Math.abs(opts.bulk),test=opts.test||function(){return!0},loop=opts.loop||function(){},end=opts.end||function(){};(function(){var t=!1,begin=new Date();while(t=test())
{loop();if(bulk===0||(new Date()-begin)>bulk)
{break}}
if(t)
{setTimeout(arguments.callee,delay)}
else{end()}})()}
$.eachAsync=function(array,opts)
{var i=0,l=array.length,loop=opts.loop||function(){};$.whileAsync($.extend(opts,{test:function(){return i<l},loop:function()
{var val=array[i];return loop.call(val,i++,val)}}))}
$.fn.eachAsync=function(opts)
{$.eachAsync(this,opts);return this}})(jQuery);
/* rank:50standard - minify:ok. vendor_bundled/vendor/jquery/plugins/treetable/jquery.treetable.js */
(function($){var Node,Tree,methods;Node=(function(){function Node(row,tree,settings){var parentId;this.row=row;this.tree=tree;this.settings=settings;this.id=this.row.data(this.settings.nodeIdAttr);parentId=this.row.data(this.settings.parentIdAttr);if(parentId!=null&&parentId!==""){this.parentId=parentId}
this.treeCell=$(this.row.children(this.settings.columnElType)[this.settings.column]);this.expander=$(this.settings.expanderTemplate);this.indenter=$(this.settings.indenterTemplate);this.children=[];this.initialized=!1;this.treeCell.prepend(this.indenter)}
Node.prototype.addChild=function(child){return this.children.push(child)};Node.prototype.ancestors=function(){var ancestors,node;node=this;ancestors=[];while(node=node.parentNode()){ancestors.push(node)}
return ancestors};Node.prototype.collapse=function(){if(this.collapsed()){return this}
this.row.removeClass("expanded").addClass("collapsed");this._hideChildren();this.expander.attr("title",this.settings.stringExpand);if(this.initialized&&this.settings.onNodeCollapse!=null){this.settings.onNodeCollapse.apply(this)}
return this};Node.prototype.collapsed=function(){return this.row.hasClass("collapsed")};Node.prototype.expand=function(){if(this.expanded()){return this}
this.row.removeClass("collapsed").addClass("expanded");if(this.initialized&&this.settings.onNodeExpand!=null){this.settings.onNodeExpand.apply(this)}
if($(this.row).is(":visible")){this._showChildren()}
this.expander.attr("title",this.settings.stringCollapse);return this};Node.prototype.expanded=function(){return this.row.hasClass("expanded")};Node.prototype.hide=function(){this._hideChildren();this.row.hide();return this};Node.prototype.isBranchNode=function(){if(this.children.length>0||this.row.data(this.settings.branchAttr)===!0){return!0}else{return!1}};Node.prototype.updateBranchLeafClass=function(){this.row.removeClass('branch');this.row.removeClass('leaf');this.row.addClass(this.isBranchNode()?'branch':'leaf')};Node.prototype.level=function(){return this.ancestors().length};Node.prototype.parentNode=function(){if(this.parentId!=null){return this.tree[this.parentId]}else{return null}};Node.prototype.removeChild=function(child){var i=$.inArray(child,this.children);return this.children.splice(i,1)};Node.prototype.render=function(){var handler,settings=this.settings,target;if(settings.expandable===!0&&this.isBranchNode()){handler=function(e){$(this).parents("table").treetable("node",$(this).parents("tr").data(settings.nodeIdAttr)).toggle();return e.preventDefault()};this.indenter.html(this.expander);target=settings.clickableNodeNames===!0?this.treeCell:this.expander;target.off("click.treetable").on("click.treetable",handler);target.off("keydown.treetable").on("keydown.treetable",function(e){if(e.keyCode==13){handler.apply(this,[e])}})}
this.indenter[0].style.paddingLeft=""+(this.level()*settings.indent)+"px";return this};Node.prototype.reveal=function(){if(this.parentId!=null){this.parentNode().reveal()}
return this.expand()};Node.prototype.setParent=function(node){if(this.parentId!=null){this.tree[this.parentId].removeChild(this)}
this.parentId=node.id;this.row.data(this.settings.parentIdAttr,node.id);return node.addChild(this)};Node.prototype.show=function(){if(!this.initialized){this._initialize()}
this.row.show();if(this.expanded()){this._showChildren()}
return this};Node.prototype.toggle=function(){if(this.expanded()){this.collapse()}else{this.expand()}
return this};Node.prototype._hideChildren=function(){var child,_i,_len,_ref,_results;_ref=this.children;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){child=_ref[_i];_results.push(child.hide())}
return _results};Node.prototype._initialize=function(){var settings=this.settings;this.render();if(settings.expandable===!0&&settings.initialState==="collapsed"){this.collapse()}else{this.expand()}
if(settings.onNodeInitialized!=null){settings.onNodeInitialized.apply(this)}
return this.initialized=!0};Node.prototype._showChildren=function(){var child,_i,_len,_ref,_results;_ref=this.children;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){child=_ref[_i];_results.push(child.show())}
return _results};return Node})();Tree=(function(){function Tree(table,settings){this.table=table;this.settings=settings;this.tree={};this.nodes=[];this.roots=[]}
Tree.prototype.collapseAll=function(){var node,_i,_len,_ref,_results;_ref=this.nodes;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){node=_ref[_i];_results.push(node.collapse())}
return _results};Tree.prototype.expandAll=function(){var node,_i,_len,_ref,_results;_ref=this.nodes;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){node=_ref[_i];_results.push(node.expand())}
return _results};Tree.prototype.findLastNode=function(node){if(node.children.length>0){return this.findLastNode(node.children[node.children.length-1])}else{return node}};Tree.prototype.loadRows=function(rows){var node,row,i;if(rows!=null){for(i=0;i<rows.length;i++){row=$(rows[i]);if(row.data(this.settings.nodeIdAttr)!=null){node=new Node(row,this.tree,this.settings);this.nodes.push(node);this.tree[node.id]=node;if(node.parentId!=null&&this.tree[node.parentId]){this.tree[node.parentId].addChild(node)}else{this.roots.push(node)}}}}
for(i=0;i<this.nodes.length;i++){node=this.nodes[i].updateBranchLeafClass()}
return this};Tree.prototype.move=function(node,destination){var nodeParent=node.parentNode();if(node!==destination&&destination.id!==node.parentId&&$.inArray(node,destination.ancestors())===-1){node.setParent(destination);this._moveRows(node,destination);if(node.parentNode().children.length===1){node.parentNode().render()}}
if(nodeParent){nodeParent.updateBranchLeafClass()}
if(node.parentNode()){node.parentNode().updateBranchLeafClass()}
node.updateBranchLeafClass();return this};Tree.prototype.removeNode=function(node){this.unloadBranch(node);node.row.remove();if(node.parentId!=null){node.parentNode().removeChild(node)}
delete this.tree[node.id];this.nodes.splice($.inArray(node,this.nodes),1);return this}
Tree.prototype.render=function(){var root,_i,_len,_ref;_ref=this.roots;for(_i=0,_len=_ref.length;_i<_len;_i++){root=_ref[_i];root.show()}
return this};Tree.prototype.sortBranch=function(node,sortFun){node.children.sort(sortFun);this._sortChildRows(node);return this};Tree.prototype.unloadBranch=function(node){var children=node.children.slice(0),i;for(i=0;i<children.length;i++){this.removeNode(children[i])}
node.children=[];node.updateBranchLeafClass();return this};Tree.prototype._moveRows=function(node,destination){var children=node.children,i;node.row.insertAfter(destination.row);node.render();for(i=children.length-1;i>=0;i--){this._moveRows(children[i],node)}};Tree.prototype._sortChildRows=function(parentNode){return this._moveRows(parentNode,parentNode)};return Tree})();methods={init:function(options,force){var settings;settings=$.extend({branchAttr:"ttBranch",clickableNodeNames:!1,column:0,columnElType:"td",expandable:!1,expanderTemplate:"<a href='#'>&nbsp;</a>",indent:19,indenterTemplate:"<span class='indenter'></span>",initialState:"collapsed",nodeIdAttr:"ttId",parentIdAttr:"ttParentId",stringExpand:"Expand",stringCollapse:"Collapse",onInitialized:null,onNodeCollapse:null,onNodeExpand:null,onNodeInitialized:null},options);return this.each(function(){var el=$(this),tree;if(force||el.data("treetable")===undefined){tree=new Tree(this,settings);tree.loadRows(this.rows).render();el.addClass("treetable").data("treetable",tree);if(settings.onInitialized!=null){settings.onInitialized.apply(tree)}}
return el})},destroy:function(){return this.each(function(){return $(this).removeData("treetable").removeClass("treetable")})},collapseAll:function(){this.data("treetable").collapseAll();return this},collapseNode:function(id){var node=this.data("treetable").tree[id];if(node){node.collapse()}else{throw new Error("Unknown node '"+id+"'")}
return this},expandAll:function(){this.data("treetable").expandAll();return this},expandNode:function(id){var node=this.data("treetable").tree[id];if(node){if(!node.initialized){node._initialize()}
node.expand()}else{throw new Error("Unknown node '"+id+"'")}
return this},loadBranch:function(node,rows){var settings=this.data("treetable").settings,tree=this.data("treetable").tree;rows=$(rows);if(node==null){this.append(rows)}else{var lastNode=this.data("treetable").findLastNode(node);rows.insertAfter(lastNode.row)}
this.data("treetable").loadRows(rows);rows.filter("tr").each(function(){tree[$(this).data(settings.nodeIdAttr)].show()});if(node!=null){node.render().expand()}
return this},move:function(nodeId,destinationId){var destination,node;node=this.data("treetable").tree[nodeId];destination=this.data("treetable").tree[destinationId];this.data("treetable").move(node,destination);return this},node:function(id){return this.data("treetable").tree[id]},removeNode:function(id){var node=this.data("treetable").tree[id];if(node){this.data("treetable").removeNode(node)}else{throw new Error("Unknown node '"+id+"'")}
return this},reveal:function(id){var node=this.data("treetable").tree[id];if(node){node.reveal()}else{throw new Error("Unknown node '"+id+"'")}
return this},sortBranch:function(node,columnOrFunction){var settings=this.data("treetable").settings,prepValue,sortFun;columnOrFunction=columnOrFunction||settings.column;sortFun=columnOrFunction;if($.isNumeric(columnOrFunction)){sortFun=function(a,b){var extractValue,valA,valB;extractValue=function(node){var val=node.row.find("td:eq("+columnOrFunction+")").text();return $.trim(val).toUpperCase()}
valA=extractValue(a);valB=extractValue(b);if(valA<valB)return-1;if(valA>valB)return 1;return 0}}
this.data("treetable").sortBranch(node,sortFun);return this},unloadBranch:function(node){this.data("treetable").unloadBranch(node);return this}};$.fn.treetable=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments)}else{return $.error("Method "+method+" does not exist on jQuery.treetable")}};this.TreeTable||(this.TreeTable={});this.TreeTable.Node=Node;this.TreeTable.Tree=Tree})(jQuery);
/* rank:50standard - minify:ok. vendor_bundled/vendor/cwspear/bootstrap-hover-dropdown/bootstrap-hover-dropdown.js */
(function($,window,undefined){var $allDropdowns=$();$.fn.dropdownHover=function(options){if('ontouchstart' in document)return this;$allDropdowns=$allDropdowns.add(this.parent());return this.each(function(){var $this=$(this),$parent=$this.parent(),defaults={delay:500,hoverDelay:0,instantlyCloseOthers:!0},data={delay:$(this).data('delay'),hoverDelay:$(this).data('hover-delay'),instantlyCloseOthers:$(this).data('close-others')},showEvent='show.bs.dropdown',hideEvent='hide.bs.dropdown',settings=$.extend(!0,{},defaults,options,data),timeout,timeoutHover;$parent.hover(function(event){if(!$parent.hasClass('open')&&!$this.is(event.target)){return!0}
openDropdown(event)},function(){window.clearTimeout(timeoutHover)
timeout=window.setTimeout(function(){$this.attr('aria-expanded','false');$parent.removeClass('open');$this.trigger(hideEvent)},settings.delay)});$this.hover(function(event){if(!$parent.hasClass('open')&&!$parent.is(event.target)){return!0}
openDropdown(event)});$parent.find('.dropdown-submenu').each(function(){var $this=$(this);var subTimeout;$this.hover(function(){window.clearTimeout(subTimeout);$this.children('.dropdown-menu').show();$this.siblings().children('.dropdown-menu').hide()},function(){var $submenu=$this.children('.dropdown-menu');subTimeout=window.setTimeout(function(){$submenu.hide()},settings.delay)})});function openDropdown(event){if($this.parents(".navbar").find(".navbar-toggle").is(":visible")){return}
window.clearTimeout(timeout);window.clearTimeout(timeoutHover);timeoutHover=window.setTimeout(function(){$allDropdowns.find(':focus').blur();if(settings.instantlyCloseOthers===!0)
$allDropdowns.removeClass('open');window.clearTimeout(timeoutHover);$this.attr('aria-expanded','true');$parent.addClass('open');$this.trigger(showEvent)},settings.hoverDelay)}})};$(document).ready(function(){$('[data-hover="dropdown"]').dropdownHover()})})(jQuery,window);
/* rank:50standard - minify:ok. lib/jquery_tiki/files.js */
(function($){var handleFiles,ProgressBar,FileList,FileListInline;$.fileTypeIcon=function(fileId,file){if(typeof file.type=='undefined'){return $('<img height="16" width="16" title="'+file.type+'" alt="'+file.type+'" src="img/icons/mime/default.png">')}else if(file.type.substring(0,6)=='image/'){return $('<img src="tiki-download_file.php?fileId='+fileId+'&display&height=24" height="24">')}else if(file.type=='application/pdf'){return $('<img height="16" width="16" title="application/pdf" alt="application/pdf" src="img/icons/mime/pdf.png">')}else if(file.type.indexOf("sheet")!=-1){return $('<img height="16" width="16" title="'+file.type+'" alt="'+file.type+'" src="img/icons/mime/xls.png">')}else if(file.type.indexOf("zip")!=-1){return $('<img height="16" width="16" title="'+file.type+'" alt="'+file.type+'" src="img/icons/mime/zip.png">')}else if(file.type.substring(0,6)=='video/'){return $('<img height="16" width="16" title="'+file.type+'" alt="'+file.type+'" src="img/icons/mime/flv.png">')}else if(file.type.indexOf("word")!=-1){return $('<img height="16" width="16" title="'+file.type+'" alt="'+file.type+'" src="img/icons/mime/doc.png">')}else{return $('<img height="16" width="16" title="'+file.type+'" alt="'+file.type+'" src="img/icons/mime/default.png">')}};ProgressBar=function(options){var bar=this;this.segments=[];this.updateSegment=function(number,current,total){bar.segments[number]=[current,total];bar.update()};this.update=function(){var total=0,current=0;$.each(bar.segments,function(k,item){current+=item[0];total+=item[1]});options.progress(current,total);if(current===total){options.done()}}};FileList=function(options){var $list=$(options.list);this.clearErrors=function(){$list.find('.text-danger').remove()};this.addError=function(file,message){var $li=$('<li>').appendTo($list);$li.text(file.name);$li.addClass('text-danger');$li.append(' ('+(message?message:tr('uploading failed'))+')')};this.addFile=function(fileId,file){var $li=$('<li>').addClass("row margin-bottom-md").appendTo($list);$("<div>").addClass("col-sm-12").text(file.name).prepend($.fileTypeIcon(fileId,file).css("margin-right","1em")).appendTo($li);$('<input type="hidden" name="file[]">').attr('value',fileId).appendTo($li);if($list.data("adddescription")){$("<label>").addClass("control-label col-sm-4").text(tr("Description")).appendTo($li);$("<div>").addClass("col-sm-12").append($('<textarea name="description[]">').addClass("form-control col-sm-8")).appendTo($li)}}};FileListInline=function(options){var $list=$(options.list),$form=$(options.form),$files=[];this.clearErrors=function(){$list.find('.text-danger').remove()};this.addError=function(file){var $li=$('<li>').appendTo($form);$li.text(file.name);$li.addClass('text-danger');$li.append(' ('+tr('uploading failed')+')')};this.success=function(data){$form.trigger('submit',[{files:$files}])};this.addFile=function(fileId,file){file.fileId=fileId;$files.push(file);var action=$form.attr('data-action');$.ajax(action,{type:'POST',dataType:'json',data:{files:[fileId]},success:this.success})}};handleFiles=function(input){var files=input.files,accept=input.accept,galleryId=input.galleryId,image_max_size_x=input.image_max_size_x,image_max_size_y=input.image_max_size_y,progressBar=input.progress,fileList=input.list;var uploadUrl=$.service('file','upload');var restoreExif=function(sourceImageData,newImageData){if(sourceImageData.indexOf('data:image/jpeg;base64,')!==0){return newImageData}
var sourceImageSegments=MinifyJpeg.slice2Segments(MinifyJpeg.decode64(sourceImageData.replace("data:image/jpeg;base64,","")));var exifInfo=MinifyJpeg.getExif(sourceImageSegments);var newImageBinArray=MinifyJpeg.insertExif(newImageData,exifInfo);return"data:image/jpeg;base64,"+MinifyJpeg.encode64(newImageBinArray)};$.each(files,function(k,file){var reader=new FileReader();progressBar.updateSegment(k,0,file.size);window.lastFile=file;$(window).queue('process-upload',function(){reader.onloadend=function(e){var xhr,provider,sendData,data,valid=!0;xhr=jQuery.ajaxSettings.xhr();if(xhr.upload){xhr.upload.addEventListener('progress',function(e){if(e.lengthComputable){progressBar.updateSegment(k,e.loaded,e.total)}},!1)}
provider=function(){return xhr};sendData={type:'POST',url:uploadUrl,xhr:provider,dataType:'json',global:!1,success:function(data){fileList.addFile(data.fileId,file)},error:function(jqXHR,textStatus,errorThrown){progressBar.updateSegment(k,0,0);fileList.addError(file,errorThrown)},complete:function(){$(window).dequeue('process-upload')}};if(window.FormData){sendData.processData=!1;sendData.contentType=!1;sendData.cache=!1;sendData.data=new FormData;sendData.data.append('galleryId',galleryId);sendData.data.append('image_max_size_x',image_max_size_x);sendData.data.append('image_max_size_y',image_max_size_y);sendData.data.append('name',file.name);var waiting=!1;if(file.type.substring(0,6)=='image/'&&(image_max_size_x!=''||image_max_size_y!='')){waiting=!0;var imageData;var picFile=e.target;imageData=picFile.result;var img=new Image();var blobImage=null;img.src=imageData;img.onload=function(){var width=parseInt(image_max_size_x);var height=parseInt(image_max_size_y);var image_x=parseInt(image_max_size_x);var image_y=parseInt(image_max_size_y);var ratio;if(img.width>image_x||img.height>image_y){if(img.width>image_x){width=image_x;ratio=image_x/img.width;height=Math.round(img.height*ratio)}
if(height>image_y){height=image_y;ratio=image_y/img.height;width=Math.round(img.width*ratio)}}
else{width=img.width;height=img.height}
var canvas=$("<canvas/>").get(0);canvas.width=width;canvas.height=height;var context=canvas.getContext('2d');context.drawImage(img,0,0,width,height);var resizedImage=restoreExif(imageData,canvas.toDataURL('image/jpeg'));blobImage=dataURItoBlob(resizedImage);sendData.data.append('data',blobImage,file.name);$.ajax(sendData)}}
else sendData.data.append('data',file)}else{data=e.target.result;sendData.data={name:file.name,size:file.size,type:file.type,data:data.substr(data.indexOf('base64')+7),galleryId:galleryId,image_max_size_x:image_max_size_x,image_max_size_y:image_max_size_y}}
if(accept){valid=file.type.match(new RegExp(".?("+accept.replace('*','.*')+")$","i"))}
if(valid&&!waiting){$.ajax(sendData)}else if(!valid){sendData.error(null)}};reader.readAsDataURL(file)})});$(window).dequeue('process-upload')};$(document).on('submit','form.file-uploader',function(e){e.preventDefault()});function doUpload($form,files){var progress,list;progress=new ProgressBar({progress:function(current,total){var percentage=Math.round(current/total*100);$form.find('.progress').removeClass('hidden');$form.find('.progress-bar').attr('aria-valuenow',percentage).width(percentage+'%');$form.find('.progress-bar .sr-only .count').text(percentage)},done:function(){$form.find('.progress').addClass('hidden');$form.find('.progress-bar').attr('aria-valuenow',0).width('0%');$form.find('.progress-bar .sr-only .count').text('0%')}});if($form.is(".inline")){list=new FileListInline({list:$form.parent().find('.file-uploader-result ul')[0],form:$form})}else{list=new FileList({list:$form.parent().find('.file-uploader-result ul')[0]})}
list.clearErrors();handleFiles({accept:$form.find(':file').attr('accept'),galleryId:$form.data('gallery-id'),image_max_size_x:$form.data('image_max_size_x'),image_max_size_y:$form.data('image_max_size_y'),files:files,progress:progress,list:list})}
$(document).on('change','.file-uploader input[type=file]',function(){var $clone,$form=$(this).closest('.file-uploader'),progress,list;if(this.files){doUpload($form,this.files);$(this).val('');$clone=$(this).clone(!0);$(this).replaceWith($clone)}});if(window.FileReader){$(document).ready(function(){$('.drop-message').show()});$(document).on('dragenter','.file-uploader',function(e){e.preventDefault();e.stopPropagation();$(this).css('border','2px dashed gray');return!1});$(document).on('dragexit','.file-uploader',function(e){e.preventDefault();e.stopPropagation();$(this).css('border','');return!1});$(document).on('dragover','.file-uploader',function(e){e.preventDefault();e.stopPropagation();return!1});$(document).on('drop','.file-uploader',function(e){var $form=$(this);e.preventDefault();e.stopPropagation();$(this).css('border','');var dataTransfer=e.dataTransfer;if(!dataTransfer){dataTransfer=e.originalEvent.dataTransfer}
if(dataTransfer&&dataTransfer.files){doUpload($form,dataTransfer.files)}
return!1})}
function browserRemoveFile(link)
{var list=$(link).closest('ul');$(link).closest('li').remove();list.closest('.file-browser').trigger('selection-update')}
function browserAddFile(link)
{var content=$(link).closest('.media-body').clone(!0),icon=$(link).closest('.media, .panel').find('.media-object, .panel-body a').children('img').clone(!0).width('16px'),nav=$(link).closest('.file-browser').find('.selection ul'),item=$('<li>'),a=$('<a>').text($(link).text()),id=$(link).data('object'),limit=nav.closest('form').data('limit'),current=nav.find('input[type=hidden]').filter(function(){return parseInt($(this).val(),10)===id});if(current.length>0){browserRemoveFile(current[0]);return}
if(limit===1){nav.empty()}else if(limit&&nav.children('li').length>=limit){alert(nav.closest('form').data('limit-reached-message'));return}
a.prepend(' ').prepend(icon);item.append(a);nav.append(item);item.append($('<input type="hidden" name="file[]">').attr('value',id));nav.closest('.file-browser').trigger('selection-update')}
$(document).on('selection-update','.file-browser',function(e){var selection=$('.selection input[type=hidden]',this).map(function(){return parseInt($(this).val(),10)});$('.gallery-list .media-heading a, .gallery-list .panel-body a',this).each(function(){var id=$(this).data('object');$(this).closest('.media').toggleClass('bg-info',-1!==$.inArray(id,selection));$(this).closest('.panel').toggleClass('panel-info',-1!==$.inArray(id,selection))});$('.selection',this).toggleClass('hidden',selection.length===0)});$(document).on('click','.file-browser .gallery-list .pagination a',function(e){e.preventDefault();$(this).closest('.modal').animate({scrollTop:0},'slow');$(this).closest('.gallery-list').tikiModal(tr('Loading...')).load($(this).attr('href'),function(){$(this).tikiModal('');$(this).closest('.file-browser').trigger('selection-update')})});$(document).on('click','.file-browser .gallery-list .media-heading a, .file-browser .gallery-list .panel-body a',function(e){e.preventDefault();e.stopPropagation();browserAddFile(this)});$(document).on('click','.file-browser .gallery-list .media, .file-browser .gallery-list .panel',function(e){e.preventDefault();$('.media-heading a, .panel-body a',this).click()});$(document).on('click','.file-browser .selection a',function(e){e.preventDefault();browserRemoveFile(this)});$(document).on('submit','.file-browser .form-inline',function(e){e.preventDefault();$(this).closest('.file-browser').find('.gallery-list').tikiModal(tr('Loading...')).load($(this).attr('action'),$(this).serialize(),function(){$(this).tikiModal('');$(this).closest('.file-browser').trigger('selection-update')})});$(document).on('click','.file-browser .submit .upload-files',function(e){var $list=$(this).closest('.file-browser').find('.selection ul'),handler=$.clickModal({success:function(data){$.each(data.files,function(k,file){$('<li>').append($('<a href="#">').data('object',file.fileId).data('type','file').text(file.label)).append($('<input type="hidden" name="file[]">').attr('value',file.fileId)).appendTo($list);$list.closest('.file-browser').trigger('selection-update')});$.closeModal()}});handler.apply(this,arguments)});$(document).on('click','.file-selector a',function(){if(!$(this).data('initial-href')){$(this).data('initial-href',$(this).attr('href'))}
$(this).attr('href',$(this).data('initial-href')+'&file='+$(this).parent().children('input').val())});$(document).on('click','.file-selector a',$.clickModal({size:'modal-lg',success:function(data){var files=[];$.each(data.files,function(k,f){files.push(f.fileId)});$(this).parent().children('input').val(files.join(','));$(this).text($(this).text().replace(/\d+/,files.length));$.closeModal()}}))})(jQuery);function resizeFile(e,imageData,image_x,image_y){return blobImage}
function dataURItoBlob(dataURI){var byteString;if(dataURI.split(',')[0].indexOf('base64')>=0)
byteString=atob(dataURI.split(',')[1]);else byteString=unescape(dataURI.split(',')[1]);var mimeString=dataURI.split(',')[0].split(':')[1].split(';')[0];var ia=new Uint8Array(byteString.length);for(var i=0;i<byteString.length;i++){ia[i]=byteString.charCodeAt(i)}
return new Blob([ia],{type:'image/jpeg'})}
var MinifyJpeg=(function()
{var that={};that.KEY_STR="ABCDEFGHIJKLMNOP"+"QRSTUVWXYZabcdef"+"ghijklmnopqrstuv"+"wxyz0123456789+/"+"=";that.SOF=[192,193,194,195,197,198,199,201,202,203,205,206,207];that.minify=function(image,new_size)
{if(image instanceof ArrayBuffer)
{if(image[0]==255&&image[1]==216)
{var rawImage=[];for(var i=0;i<image.byteLength;i++)
{rawImage[i]=image[i]}}
else{throw "MinifyJpeg.minify got a not JPEG data"}}
else if(typeof(image)=="string")
{if(!image.match("data:image/jpeg;base64,"))
{throw "MinifyJpeg.minify got a not JPEG data"}
else{var rawImage=that.decode64(image.replace("data:image/jpeg;base64,",""))}}
else{throw "First argument must be 'DataURL string' or ArrayBuffer."}
var segments=that.slice2Segments(rawImage);var NEW_SIZE=parseInt(new_size);var size=that.imageSizeFromSegments(segments);var chouhen=(size[0]>=size[1])?size[0]:size[1];if(chouhen<NEW_SIZE)
{return new Uint8Array(rawImage)}
var exif=that.getExif(segments);var resized=that.resizeImage(rawImage,segments,NEW_SIZE);if(exif.length)
{var newImage=that.insertExif(resized,exif)}
else{var newImage=new Uint8Array(that.decode64(resized.replace("data:image/jpeg;base64,","")))}
return newImage};that.getImageSize=function(imageArray)
{var segments=that.slice2Segments(imageArray);return that.imageSizeFromSegments(segments)};that.slice2Segments=function(rawImageArray)
{var head=0,segments=[];while(1)
{if(rawImageArray[head]==255&rawImageArray[head+1]==218)
{break}
if(rawImageArray[head]==255&rawImageArray[head+1]==216)
{head+=2}
else{var length=rawImageArray[head+2]*256+rawImageArray[head+3],endPoint=head+length+2,seg=rawImageArray.slice(head,endPoint);segments.push(seg);head=endPoint}
if(head>rawImageArray.length)
{break}}
return segments};that.imageSizeFromSegments=function(segments)
{for(var x=0;x<segments.length;x++)
{var seg=segments[x];if(that.SOF.indexOf(seg[1])>=0)
{var height=seg[5]*256+seg[6],width=seg[7]*256+seg[8];break}}
return[width,height]};that.encode64=function(input)
{var output="",chr1,chr2,chr3="",enc1,enc2,enc3,enc4="",i=0;do{chr1=input[i++];chr2=input[i++];chr3=input[i++];enc1=chr1>>2;enc2=((chr1&3)<<4)|(chr2>>4);enc3=((chr2&15)<<2)|(chr3>>6);enc4=chr3&63;if(isNaN(chr2)){enc3=enc4=64}else if(isNaN(chr3)){enc4=64}
output+=that.KEY_STR.charAt(enc1)+that.KEY_STR.charAt(enc2)+that.KEY_STR.charAt(enc3)+that.KEY_STR.charAt(enc4);chr1=chr2=chr3="";enc1=enc2=enc3=enc4=""}while(i<input.length);return output};that.decode64=function(input){var output="",chr1,chr2,chr3="",enc1,enc2,enc3,enc4="",i=0,buf=[];var base64test=/[^A-Za-z0-9\+\/\=]/g;if(base64test.exec(input)){alert("There were invalid base64 characters in the input text.\n"+"Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\n"+"Expect errors in decoding.")}
input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{enc1=that.KEY_STR.indexOf(input.charAt(i++));enc2=that.KEY_STR.indexOf(input.charAt(i++));enc3=that.KEY_STR.indexOf(input.charAt(i++));enc4=that.KEY_STR.indexOf(input.charAt(i++));chr1=(enc1<<2)|(enc2>>4);chr2=((enc2&15)<<4)|(enc3>>2);chr3=((enc3&3)<<6)|enc4;buf.push(chr1);if(enc3!=64){buf.push(chr2)}
if(enc4!=64){buf.push(chr3)}
chr1=chr2=chr3="";enc1=enc2=enc3=enc4=""}while(i<input.length);return buf};that.resizeImage=function(rawImage,segments,NEW_SIZE)
{var size=that.imageSizeFromSegments(segments),width=size[0],height=size[1],chouhen=(width>=height)?width:height,newSize=NEW_SIZE,resizing=1,scale=parseFloat(newSize)/chouhen,newWidth=parseInt(parseFloat(newSize)/chouhen*width),newHeight=parseInt(parseFloat(newSize)/chouhen*height);if(resizing==1)
{var canvas=document.createElement('canvas');canvas.width=width;canvas.height=height;var jpe=new JpegImage(),ctx=canvas.getContext("2d"),srcImg=ctx.getImageData(0,0,width,height);jpe.parse(new Uint8Array(rawImage));jpe.copyToImageData(srcImg);var newCanvas=document.createElement('canvas');newCanvas.width=newWidth;newCanvas.height=newHeight;var newCtx=newCanvas.getContext("2d");var destImg=newCtx.createImageData(newWidth,newHeight);that.bilinear(srcImg,destImg,scale);newCtx.putImageData(destImg,0,0);var resizedImage=newCanvas.toDataURL("image/jpeg")}
else{var canvas=document.createElement('canvas');canvas.width=newWidth;canvas.height=newHeight;var jpe=new JpegImage();ctx=canvas.getContext("2d");d=ctx.getImageData(0,0,newWidth,newHeight);jpe.parse(new Uint8Array(rawImage));jpe.copyToImageData(d);ctx.putImageData(d,0,0);var resizedImage=canvas.toDataURL("image/jpeg")}
return resizedImage};that.getExif=function(segments)
{var seg;for(var x=0;x<segments.length;x++)
{seg=segments[x];if(seg[0]==255&seg[1]==225)
{return seg}}
return[]}
that.insertExif=function(imageStr,exifArray)
{var buf=that.decode64(imageStr.replace("data:image/jpeg;base64,","")),separatePoint=buf.indexOf(255,3),mae=buf.slice(0,separatePoint),ato=buf.slice(separatePoint),array=mae.concat(exifArray,ato);aBuffer=new Uint8Array(array);return aBuffer};that.ivect=function(ix,iy,w){return((ix+w*iy)*4)};that.bilinear=function(srcImg,destImg,scale){function inner(f00,f10,f01,f11,x,y){var un_x=1.0-x;var un_y=1.0-y;return(f00*un_x*un_y+f10*x*un_y+f01*un_x*y+f11*x*y)}
var srcWidth=srcImg.width;var srcHeight=srcImg.height;var srcData=srcImg.data;var dstData=destImg.data;var i,j;var iyv,iy0,iy1,ixv,ix0,ix1;var idxD,idxS00,idxS10,idxS01,idxS11;var dx,dy;var r,g,b,a;for(i=0;i<destImg.height;++i){iyv=(i+0.5)/scale-0.5;iy0=Math.floor(iyv);iy1=(Math.ceil(iyv)>(srcHeight-1)?(srcHeight-1):Math.ceil(iyv));for(j=0;j<destImg.width;++j){ixv=(j+0.5)/scale-0.5;ix0=Math.floor(ixv);ix1=(Math.ceil(ixv)>(srcWidth-1)?(srcWidth-1):Math.ceil(ixv));idxD=that.ivect(j,i,destImg.width);idxS00=that.ivect(ix0,iy0,srcWidth);idxS10=that.ivect(ix1,iy0,srcWidth);idxS01=that.ivect(ix0,iy1,srcWidth);idxS11=that.ivect(ix1,iy1,srcWidth);dx=ixv-ix0;dy=iyv-iy0;dstData[idxD]=inner(srcData[idxS00],srcData[idxS10],srcData[idxS01],srcData[idxS11],dx,dy);dstData[idxD+1]=inner(srcData[idxS00+1],srcData[idxS10+1],srcData[idxS01+1],srcData[idxS11+1],dx,dy);dstData[idxD+2]=inner(srcData[idxS00+2],srcData[idxS10+2],srcData[idxS01+2],srcData[idxS11+2],dx,dy);dstData[idxD+3]=inner(srcData[idxS00+3],srcData[idxS10+3],srcData[idxS01+3],srcData[idxS11+3],dx,dy)}}};return that})();
/* rank:50standard - minify:ok. lib/jquery_tiki/tiki-trackers.js */
(function($){$.fn=$.extend($.fn,{tracker_add_field:function(options){var dialog=this;$('select',dialog).change(function(){var descriptions=$(this).closest('.form-group').find('.help-block').hide();if($(this).val()){descriptions.filter('.'+$(this).val()).show()}}).change();$('form',dialog).each(function(){var form=this;$(form.name).keyup(function(){var val=$("#fieldPrefix").val()+" "+$(this).val();val=removeDiacritics(val);val=val.replace(/[^\w]+/g,'_');val=val.replace(/_+([a-zA-Z])/g,function(parts){return parts[1].toUpperCase()});val=val.replace(/^[A-Z]/,function(parts){return parts[0].toLowerCase()});val=val.replace(/_+$/,'');$(form.permName).val(val)});$(form.submit_and_edit).click(function(){$(form.next).val('edit')})})},tracker_edit_field:function(options){this.serviceDialog({title:tr('Edit Field'),data:{controller:'tracker',action:'edit_field',trackerId:options.trackerId,fieldId:options.fieldId},load:function(){function split(val){return val.split(/,\s*/)}
function extractLast(term){return split(term).pop()}
$('.groupselector',this).tiki('autocomplete','groupname',{tiki_replace_term:function(term){return extractLast(term)},focus:function(){return!1},select:function(event,ui){var terms=split(this.value);terms.pop();terms.push(ui.item.value);terms.push("");this.value=terms.join(", ");return!1}})},success:options.success});return this},tracker_load_fields:function(trackerId){this.each(function(){var $container=$(this).empty();$.getJSON($.service('tracker','list_fields'),{trackerId:trackerId},function(data){$.each(data.fields,function(k,field){var $row=$('<tr/>').addClass("tracker-field-"+field.type);$row.append($('<td class="checkbox-cell"/>').append($('<input type="checkbox" name="fields[]"/>').val(field.fieldId)));$row.append($('<td class="id"/>').text(field.fieldId).append($('<input type="hidden" name="field~'+field.fieldId+'~position"/>').val(field.position)));$row.append($('<td/>').append($('<div class="small">').text(field.permName)).prepend($('<a/>').text(field.name==null?" ":field.name).attr('href',$.service('tracker','edit_field',{trackerId:trackerId,fieldId:field.fieldId})).clickModal({remote:$.service('controller','edit_field',{trackerId:trackerId,fieldId:field.fieldId}),success:function(){$container.tracker_load_fields(trackerId);$.closeModal()}})));if(data.types[field.type]){$row.append($('<td/>').text(data.types[field.type].name));var addCheckbox=function(name,title){$row.append($('<td class="checkbox-cell"/>').append($('<input type="checkbox" name="field~'+field.fieldId+'~'+name+'" value="1" title="'+title+'"/>').prop('checked',field[name]==='y')))};addCheckbox('isTblVisible',tr('List'));addCheckbox('isMain',tr('Main'));addCheckbox('isSearchable',tr('Searchable'));addCheckbox('isPublic',tr('Public'));addCheckbox('isMandatory',tr('Mandatory'));$row.append($('<td class="action"/>').append($('<a href="#" class="text-danger"><span class="icon fa fa-remove"/></a>').attr('href',$.service('tracker','remove_fields',{trackerId:trackerId,'fields~0':field.fieldId})).requireConfirm({message:tr('Removing the field will result in data loss. Are you sure?'),success:function(data){$(this).closest('tr').remove()}})))}else if(data.typesDisabled){if(data.typesDisabled[field.type]){$row.find('td:last').append(' - <a class="ui-state-error" href="tiki-admin.php?lm_criteria='+data.typesDisabled[field.type].prefs.join('+')+'&exact">'+tr('(Disabled, Click to Enable)')+'</a>')}}
$container.append($row);if(data.duplicates&&data.duplicates[field.fieldId]){$.each(data.duplicates[field.fieldId],function(k,v){$row=$('<tr class="bg-warning"/>');$row.append($('<td colspan="2"/>'));$row.append($('<td colspan="8"/>').append(v.message));$container.append($row)})}})})});return this},tracker_get_inputs_from_form:function(){var fields={};$.each($(this).serializeArray(),function(){fields[this.name]=this.value});return fields},tracker_insert_item:function(options,fn){options.fields=$(this).tracker_get_inputs_from_form();$.tracker_insert_item(options,fn);return this},tracker_remove_item:function(options,fn){$.tracker_remove_item(options,fn);return this},tracker_update_item:function(options,fn){options.fields=$(this).tracker_get_inputs_from_form();$.tracker_update_item(options,fn);return this},tracker_get_item_inputs:function(options,fn){$.tracker_get_item_inputs(options,fn);return this}});$=$.extend($,{tracker_insert_item:function(options,fn){options=$.extend({controller:'tracker',action:'insert_item',trackerId:0,trackerName:'',itemId:0,byName:!1,fields:{}},options);$.ajax({url:'tiki-ajax_services.php',dataType:'json',data:options,type:'post',success:(fn?fn:null)})},tracker_remove_item:function(options,fn){options=$.extend({controller:'tracker',action:'remove_item',trackerId:0,trackerName:'',itemId:0,byName:!1},options);$.ajax({url:'tiki-ajax_services.php',dataType:'json',data:options,type:'post',success:(fn?fn:null)})},tracker_update_item:function(options,fn){options=$.extend({controller:'tracker',action:'update_item',trackerId:0,trackerName:'',itemId:0,byName:!1,fields:{}},options);$.ajax({url:'tiki-ajax_services.php',dataType:'json',data:options,type:'post',success:(fn?fn:null)})},tracker_get_item_inputs:function(options,fn){options=$.extend({controller:'tracker',action:'get_item_inputs',trackerId:0,trackerName:'',itemId:0,byName:!1,defaults:{}},options);$.ajax({url:'tiki-ajax_services.php',dataType:'json',data:options,type:'post',success:(fn?fn:null)})}});$(document).on('mouseenter','.edit-tabular tbody:not(.ui-sortable) .icon-sort',function(){$(this).closest('tbody').filter(':not(.ui-sortable)').sortable({handle:'.icon-sort',stop:function(){$(this).closest('table').trigger('tabular-update')}})});$(document).on('change','.edit-tabular .selection',function(){var value=$(this).val(),$add=$(this).closest('table').find('.add-field, .add-filter');if(!$add.data('original-href')){$add.data('original-href',$add.attr('href'))}
$add.attr('href',$add.data('original-href')+'&permName='+value)});$(document).on('click','.edit-tabular .add-field',$.clickModal({success:function(data){var $row;if(typeof data.columnIndex!=="undefined"){$row=$(this).closest('table').find("tbody tr:not(.hidden):eq("+data.columnIndex+")")}else{$row=$(this).closest('table').find('tbody tr.hidden').clone().removeClass('hidden').appendTo($(this).closest('table').find('tbody'))}
$('.field-label',$row[0]).val(data.label);$('.field',$row[0]).text(data.field);$('.mode',$row[0]).text(data.mode);$('.unique-key',$row[0]).prop('checked',data.isUniqueKey);$('.read-only',$row[0]).prop('checked',data.isReadOnly);$('.export-only',$row[0]).prop('checked',data.isExportOnly);$(this).closest('table').trigger('tabular-update');$.closeModal()}}));$(document).on('click','.edit-tabular .add-filter',$.clickModal({success:function(data){var $row=$(this).closest('table').find('tbody tr.hidden').clone().removeClass('hidden').appendTo($(this).closest('table').find('tbody'));$('.filter-label',$row[0]).val(data.label);$('.field',$row[0]).text(data.field);$('.mode',$row[0]).text(data.mode);$(this).closest('table').trigger('tabular-update');$.closeModal()}}));$(document).on('click','.edit-tabular .align-option',function(e){e.preventDefault();var hash=this.href.substring(this.href.lastIndexOf('#')+1);$(this).closest('tr').find('.align').text($(this).text()).end().find('.display-align').val(hash).end();$(this).closest('table').trigger('tabular-update')});$(document).on('click','.edit-tabular .position-option',function(e){e.preventDefault();var hash=this.href.substring(this.href.lastIndexOf('#')+1);$(this).closest('tr').find('.position-label').text($(this).text()).end().find('.position').val(hash).end();$(this).closest('table').trigger('tabular-update')});$(document).on('click','.edit-tabular .remove',function(e){var $table=$(this).closest('table');e.preventDefault();$(this).closest('tr').remove();$table.trigger('tabular-update')});$(document).on('change','.edit-tabular table :input',function(e){$(this).closest('table').trigger('tabular-update')});$(document).on('tabular-update','.edit-tabular table.fields',function(){var data=[],count=0;$('tbody tr:not(.hidden)',this).each(function(){var $link=$(this).find("a.add-field");if($link.length){$link.attr("href",$link.attr("href").replace(/columnIndex=\d+/,"columnIndex="+count));count++}
data.push({label:$('.field-label',this).val(),field:$('.field',this).text(),mode:$('.mode',this).text(),displayAlign:$('.display-align',this).val(),isUniqueKey:$('.unique-key',this).is(':checked'),isReadOnly:$('.read-only',this).is(':checked'),isExportOnly:$('.export-only',this).is(':checked'),isPrimary:$('.primary',this).is(':checked')})});$('textarea',this).val(JSON.stringify(data))});$(document).on('tabular-update','.edit-tabular table.filters',function(){var data=[];$('tbody tr:not(.hidden)',this).each(function(){data.push({label:$('.field-label',this).val(),field:$('.field',this).text(),mode:$('.mode',this).text(),position:$('.position',this).val()})});$('textarea',this).val(JSON.stringify(data))})}(jQuery));
/* rank:50standard - minify:ok. lib/jquery_tiki/pluginedit.js */
(function($){window.popupPluginForm=function(area_id,type,index,pageName,pluginArgs,bodyContent,edit_icon,selectedMod){var $textArea=$("#"+area_id);if($textArea.length&&$textArea[0].createTextRange){storeTASelection(area_id)}
var container=$('<div class="plugin"></div>');if(!index){index=0}
if(!pageName){pageName=''}
var textarea=$textArea[0];var replaceText=!1;if(!pluginArgs&&!bodyContent){pluginArgs={};bodyContent="";dialogSelectElement(area_id,'{'+type.toUpperCase(),'{'+type.toUpperCase()+'}');var sel=getTASelection(textarea);if(sel&&sel.length>0){sel=sel.replace(/^\s\s*/,"").replace(/\s\s*$/g,"");if(sel.length>0&&sel.substring(0,1)==='{'){var l=type.length,thisType=sel.match(/\{(\w+)/);thisType=thisType[1].toUpperCase();if(thisType===type.toUpperCase()){var rx=new RegExp("{"+type+"[\\(]?([\\s\\S^\\)]*?)[\\)]?}([\\s\\S]*){"+type+"}","mi");var m=sel.match(rx);if(!m){rx=new RegExp("{"+type+"[\\(]?([\\s\\S^\\)]*?)[\\)]?}([\\s\\S]*)","mi");m=sel.match(rx)}
if(m){var paramStr=m[1];bodyContent=m[2];var pm=paramStr.match(/([^=]*)=\"([^\"]*)\"\s?/gi);if(pm){for(var i=0;i<pm.length;i++){var ar=pm[i].split("=");if(ar.length){pluginArgs[ar[0].replace(/^[,\s\"\(\)]*/g,"")]=ar[1].replace(/^[,\s\"\(\)]*/g,"").replace(/[,\s\"\(\)]*$/g,"")}}}}
replaceText=sel}else if(confirm("Click OK to include the "+thisType+" plugin inside a "+type.toUpperCase()+" plugin. Click Cancel to edit the "+thisType+" plugin.")){bodyContent=sel;replaceText=!0}else{window.popupPluginForm(area_id,thisType,index,pageName,null,"",edit_icon,selectedMod);return}}else{if(type==='mouseover'){bodyContent='';pluginArgs={};pluginArgs.label=sel}else{bodyContent=sel}
replaceText=!0}}else{replaceText=!1}}
var $modal=$('.modal.fade:not(.in)').first();var url=$.service("plugin","edit",{area_id:area_id,type:type,index:index,page:pageName,pluginArgs:pluginArgs,bodyContent:bodyContent,edit_icon:!!edit_icon,selectedMod:selectedMod?selectedMod:"",modal:1});$modal.modal({remote:url,backdrop:"static",show:!1}).one('loaded.bs.modal',function(){handlePluginFieldsHierarchy();handleFormSubmit(this,type,edit_icon,area_id,replaceText);$document.trigger({type:'plugin_'+type+'_ready',container:container,arguments:arguments,modal:$modal}).trigger({type:'plugin_ready',container:container,arguments:arguments,modal:$modal})}).one("hidden.bs.modal",function(){if($("form",this).length&&edit_icon){$.getJSON($.service("semaphore","unset"),{object_id:pageName})}}).modal("show").find('.modal-dialog').addClass("modal-lg")};function handlePluginFieldsHierarchy(){var $container=$('#plugin_params');var parents={};$("[data-parent_name]",$container).each(function(){var parentName=$(this).data("parent_name"),parentValue=$(this).data("parent_value");if(parentName){var $parent=$('[name$="params['+parentName+']"]',$container);var $row=$(this).parents(".form-group");$row.addClass('parent_'+parentName+'_'+parentValue);if($parent.val()!==parentValue){if(!$parent.val()&&$("input, select",$row).val()){$parent.val(parentValue)}else{$row.hide()}}
if(!parents[parentName]){parents[parentName]={children:[],parentElement:$parent}}
parents[parentName].children.push($(this).attr("id"))}});$.each(parents,function(parentName,parent){parent.parentElement.change(function(){$.each(parent.children,function(index,id){$container.find('#'+id).parents(".form-group").hide()});$container.find('.parent_'+parentName+'_'+this.value).show()}).change().trigger("chosen:updated")})}
function handleFormSubmit(container,type,edit_icon,area_id,replaceText){var params=[],viewPageMode=!!edit_icon,bodyContent="";var $form=$("form",container);$form.submit(function(){if(!process_submit(this)){return!1}
if(type==="list"&&!viewPageMode&&typeof jqueryTiki.plugins.list.saveToTextarea==="function"){jqueryTiki.plugins.list.saveToTextarea()}
$("[name^=params]",$form).each(function(){var name=$(this).attr("name"),matches=name.match(/params\[(.*)\]/),val=$(this).val();if(!matches){if(name==="content"){bodyContent=$(this).val()}
return}
if(val&&!viewPageMode){val=val.replace(/"/g,'\\"');params.push(matches[1]+'="'+val+'"')}});var blob,pluginContentTextarea=$("[name=content]",$form),pluginContentTextareaEditor=syntaxHighlighter.get(pluginContentTextarea);if(!viewPageMode){if(!bodyContent){bodyContent=(pluginContentTextareaEditor?pluginContentTextareaEditor.getValue():pluginContentTextarea.val())}
if(bodyContent){blob='{'+type.toUpperCase()+'('+params.join(' ')+')}'+bodyContent+'{'+type.toUpperCase()+'}'}else{blob='{'+type.toLowerCase()+' '+params.join(' ')+'}'}
insertAt(area_id,blob,!1,!1,replaceText);$(container).modal("hide");return!1}})}})(jQuery)